import{w as Wt,r as y,j as v,b as Gt,c as L,o as Ht,s as Je,m as Ye,k as me}from"./main-CHwKZILN.js";import{g as se,u as qt,c as ut,D as Xt,d as Jt,e as Yt,f as Qt,h as R,j as Zt,k as es,l as ts,n as ct,o as Ne,p as ss,q as dt,r as ft,s as is,t as rs,v as ns,w as Qe,x as as,y as os,z as ls,A as Ze,N as et,C as us,E as cs,F as ds,G as fs,H as hs,I as ht,J as ms,K as vs,L as ps,M as gs,O as bs,P as Ms,Q as ys,R as Vs,S as Ss,T as mt,U as vt,V as pt,X as gt,Y as bt,Z as Fs,_ as ws,$ as Es,a0 as xs}from"./index-BT4FKHYi.js";const Cs=()=>"Hint",Is=()=>"é¡¯ç¤ºæç¤º",ks=(s={},e={})=>(e.locale??se())==="en"?Cs():Is(),As=()=>"Allow Retract",Ls=()=>"å…è¨±æ‚”æ£‹",Ts=(s={},e={})=>(e.locale??se())==="en"?As():Ls(),Os=()=>"AI Version",_s=()=>"AI ç‰ˆæœ¬",Ds=(s={},e={})=>(e.locale??se())==="en"?Os():_s(),Ps=()=>"Settings",Rs=()=>"è¨­å®š",js=(s={},e={})=>(e.locale??se())==="en"?Ps():Rs(),Bs=()=>"Render Mode",$s=()=>"é¡¯ç¤ºæ¨¡å¼",Ns=(s={},e={})=>(e.locale??se())==="en"?Bs():$s(),zs=()=>"often canvas is faster, but svg has better support",Ks=()=>"é€šå¸¸ canvas æœƒè¼ƒå¿«ï¼Œä½† svg çš„æ”¯æ´åº¦è¼ƒå¥½",Us=(s={},e={})=>(e.locale??se())==="en"?zs():Ks(),ee=new WeakMap,Fe=new WeakMap,Ce={current:[]};let De=!1,le=0;const ae=new Set,ve=new Map;function Mt(s){const e=Array.from(s).sort((i,t)=>i instanceof B&&i.options.deps.includes(t)?1:t instanceof B&&t.options.deps.includes(i)?-1:0);for(const i of e){if(Ce.current.includes(i))continue;Ce.current.push(i),i.recompute();const t=Fe.get(i);if(t)for(const r of t){const n=ee.get(r);n&&Mt(n)}}}function Ws(s){const e={prevVal:s.prevState,currentVal:s.state};for(const i of s.listeners)i(e)}function Gs(s){const e={prevVal:s.prevState,currentVal:s.state};for(const i of s.listeners)i(e)}function yt(s){if(le>0&&!ve.has(s)&&ve.set(s,s.prevState),ae.add(s),!(le>0)&&!De)try{for(De=!0;ae.size>0;){const e=Array.from(ae);ae.clear();for(const i of e){const t=ve.get(i)??i.prevState;i.prevState=t,Ws(i)}for(const i of e){const t=ee.get(i);t&&(Ce.current.push(i),Mt(t))}for(const i of e){const t=ee.get(i);if(t)for(const r of t)Gs(r)}}}finally{De=!1,Ce.current=[],ve.clear()}}function P(s){le++;try{s()}finally{if(le--,le===0){const e=ae.values().next().value;e&&yt(e)}}}function Hs(s){return typeof s=="function"}class Re{constructor(e,i){this.listeners=new Set,this.subscribe=t=>{var r,n;this.listeners.add(t);const a=(n=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:n.call(r,t,this);return()=>{this.listeners.delete(t),a?.()}},this.prevState=e,this.state=e,this.options=i}setState(e){var i,t,r;this.prevState=this.state,(i=this.options)!=null&&i.updateFn?this.state=this.options.updateFn(this.prevState)(e):Hs(e)?this.state=e(this.prevState):this.state=e,(r=(t=this.options)==null?void 0:t.onUpdate)==null||r.call(t),yt(this)}}class B{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const i=this.options.deps.length,t=new Array(i),r=new Array(i);for(let n=0;n<i;n++){const a=this.options.deps[n];t[n]=a.prevState,r[n]=a.state}return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var i,t;this.prevState=this.state;const r=this.getDepVals();this.state=this.options.fn(r),(t=(i=this.options).onUpdate)==null||t.call(i)},this.checkIfRecalculationNeededDeeply=()=>{for(const n of this.options.deps)n instanceof B&&n.checkIfRecalculationNeededDeeply();let i=!1;const t=this.lastSeenDepValues,{currDepVals:r}=this.getDepVals();for(let n=0;n<r.length;n++)if(r[n]!==t[n]){i=!0;break}i&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const i of this._subscriptions)i()}),this.subscribe=i=>{var t,r;this.listeners.add(i);const n=(r=(t=this.options).onSubscribe)==null?void 0:r.call(t,i,this);return()=>{this.listeners.delete(i),n?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const i of e)if(i instanceof B)i.registerOnGraph(),this.registerOnGraph(i.options.deps);else if(i instanceof Re){let t=ee.get(i);t||(t=new Set,ee.set(i,t)),t.add(this);let r=Fe.get(this);r||(r=new Set,Fe.set(this,r)),r.add(i)}}unregisterFromGraph(e=this.options.deps){for(const i of e)if(i instanceof B)this.unregisterFromGraph(i.options.deps);else if(i instanceof Re){const t=ee.get(i);t&&t.delete(this);const r=Fe.get(this);r&&r.delete(i)}}}var qs=class{constructor(s,e){this.fn=s,this.options=e,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...i)=>{const t=Date.now()-this.lastExecutionTime;if(this.options.leading&&t>=this.options.wait)this.execute(...i);else if(this.lastArgs=i,!this.timeoutId&&this.options.trailing){const r=this.options.wait-t;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},r)}},this.execute=(...i)=>{this.fn(...i),this.options.onExecute?.(i,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function Xs(s,e){return new qs(s,e).maybeExecute}class Js{#n=!0;#t;#e;#d;#s;#o;#i;#l;#f=0;#m=5;#a=!1;#u=!1;#r=null;#h=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#a=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#e().removeEventListener("tanstack-connect-success",this.#h)};#c=()=>{if(this.#f<this.#m){this.#f++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#e().removeEventListener("tanstack-connect",this.#c),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#v=()=>{this.#a||(this.#a=!0,this.#e().addEventListener("tanstack-connect-success",this.#h),this.#c())};constructor({pluginId:e,debug:i=!1,enabled:t=!0,reconnectEveryMs:r=300}){this.#t=e,this.#n=t,this.#e=this.getGlobalTarget,this.#d=i,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#l=r}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#l}ms)`),this.#i=setInterval(this.#c,this.#l))}stopConnectLoop(){this.#a=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#d&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,i){try{const t=new Event(e,{detail:i});this.#e().dispatchEvent(t)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,i){try{this.#e().dispatchEvent(new CustomEvent(e,{detail:i}))}catch{this.dispatchCustomEventShim(e,i)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,i){return{type:`${this.#t}:${e}`,payload:i,pluginId:this.#t}}emit(e,i){if(!this.#n){this.debugLog("Event bus client is disabled, not emitting event",e,i);return}if(this.#r&&(this.debugLog("Emitting event to internal event target",e,i),this.#r.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,i)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,i)),typeof CustomEvent<"u"&&!this.#a&&(this.#v(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,i))}on(e,i,t){const r=t?.withEventTarget??!1,n=`${this.#t}:${e}`;if(r&&(this.#r||(this.#r=new EventTarget),this.#r.addEventListener(n,o=>{i(o.detail)})),!this.#n)return this.debugLog("Event bus client is disabled, not registering event",n),()=>{};const a=o=>{this.debugLog("Received event from bus",o.detail),i(o.detail)};return this.#e().addEventListener(n,a),this.debugLog("Registered event to bus",n),()=>{r&&this.#r?.removeEventListener(n,a),this.#e().removeEventListener(n,a)}}onAll(e){if(!this.#n)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const i=t=>{const r=t.detail;e(r)};return this.#e().addEventListener("tanstack-devtools-global",i),()=>this.#e().removeEventListener("tanstack-devtools-global",i)}onAllPluginEvents(e){if(!this.#n)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const i=t=>{const r=t.detail;this.#t&&r.pluginId!==this.#t||e(r)};return this.#e().addEventListener("tanstack-devtools-global",i),()=>this.#e().removeEventListener("tanstack-devtools-global",i)}}class Ys extends Js{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}const D=new Ys;function Ie(s,e){return typeof s=="function"?s(e):s}function pe(s,e){return ze(e).reduce((t,r)=>{if(t===null)return null;if(typeof t<"u")return t[r]},s)}function ge(s,e,i){const t=ze(e);function r(n){if(!t.length)return Ie(i,n);const a=t.shift();if(typeof a=="string"||typeof a=="number"&&!Array.isArray(n))return typeof n=="object"?(n===null&&(n={}),{...n,[a]:r(n[a])}):{[a]:r()};if(Array.isArray(n)&&typeof a=="number"){const o=n.slice(0,a);return[...o.length?o:new Array(a),r(n[a]),...n.slice(a+1)]}return[...new Array(a),r()]}return r(s)}function Qs(s,e){const i=ze(e);function t(r){if(!r)return;if(i.length===1){const a=i[0];if(Array.isArray(r)&&typeof a=="number")return r.filter((u,c)=>c!==a);const{[a]:o,...l}=r;return l}const n=i.shift();if((typeof n=="string"||typeof n=="number"&&!Array.isArray(r))&&typeof r=="object")return{...r,[n]:t(r[n])};if(typeof n=="number"&&Array.isArray(r)){if(n>=r.length)return r;const a=r.slice(0,n);return[...a.length?a:new Array(n),t(r[n]),...r.slice(n+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return t(s)}const Zs=/^(\d+)$/gm,ei=/\.(\d+)(?=\.)/gm,ti=/^(\d+)\./gm,si=/\.(\d+$)/gm,ii=/\.{2,}/gm,je="__int__",be=`${je}$1`;function ze(s){if(Array.isArray(s))return[...s];if(typeof s!="string")throw new Error("Path must be a string.");return s.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(Zs,be).replace(ei,`.${be}.`).replace(ti,`${be}.`).replace(si,`.${be}`).replace(ii,".").split(".").map(e=>{if(e.startsWith(je)){const i=e.substring(je.length),t=parseInt(i,10);return String(t)===i?t:i}return e})}function ri(s){return!(Array.isArray(s)&&s.length===0)}function Be(s,e){const i=t=>t.validators.filter(Boolean).map(r=>({cause:r.cause,validate:r.fn}));return e.validationLogic({form:e.form,validators:e.validators,event:{type:s,async:!1},runValidation:i})}function $e(s,e){const{asyncDebounceMs:i}=e,{onBlurAsyncDebounceMs:t,onChangeAsyncDebounceMs:r,onDynamicAsyncDebounceMs:n}=e.validators||{},a=i??0,o=l=>l.validators.filter(Boolean).map(u=>{const c=u?.cause||s;let f=a;switch(c){case"change":f=r??a;break;case"blur":f=t??a;break;case"dynamic":f=n??a;break;case"submit":f=0;break}return s==="submit"&&(f=0),{cause:c,validate:u.fn,debounceMs:f}});return e.validationLogic({form:e.form,validators:e.validators,event:{type:s,async:!0},runValidation:o})}const we=s=>!!s&&typeof s=="object"&&"fields"in s;function z(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Date&&e instanceof Date)return s.getTime()===e.getTime();if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[r,n]of s)if(!e.has(r)||!Object.is(n,e.get(r)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const r of s)if(!e.has(r))return!1;return!0}const i=Object.keys(s),t=Object.keys(e);if(i.length!==t.length)return!1;for(const r of i)if(!t.includes(r)||!z(s[r],e[r]))return!1;return!0}const tt=({newFormValidatorError:s,isPreviousErrorFromFormValidator:e,previousErrorValue:i})=>s?{newErrorValue:s,newSource:"form"}:e?{newErrorValue:void 0,newSource:void 0}:i?{newErrorValue:i,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},st=({formLevelError:s,fieldLevelError:e})=>e?{newErrorValue:e,newSource:"field"}:s?{newErrorValue:s,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function _(s,e){return s==null?e:{...s,...e}}let H=256;const Ee=[];let Me;for(;H--;)Ee[H]=(H+256).toString(16).substring(1);function Vt(){let s=0,e,i="";if(!Me||H+16>256){for(Me=new Array(256),s=256;s--;)Me[s]=256*Math.random()|0;s=0,H=0}for(;s<16;s++)e=Me[H+s],s===6?i+=Ee[e&15|64]:s===8?i+=Ee[e&63|128]:i+=Ee[e],s&1&&s>1&&s<11&&(i+="-");return H++,i}const ni=Xs(s=>D.emit("form-state",{id:s.formId,state:s.store.state}),{wait:300});function oe(s){if(s===null||typeof s!="object")return s;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s)){const i=[];for(let t=0;t<s.length;t++)i[t]=oe(s[t]);return i}if(s instanceof Map){const i=new Map;return s.forEach((t,r)=>{i.set(r,oe(t))}),i}if(s instanceof Set){const i=new Set;return s.forEach(t=>{i.add(oe(t))}),i}const e={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=oe(s[i]));return e}const Y=s=>{if(!s.validators)return s.runValidation({validators:[],form:s.form});const e=s.event.async,i=e?void 0:{fn:s.validators.onMount,cause:"mount"},t={fn:e?s.validators.onChangeAsync:s.validators.onChange,cause:"change"},r={fn:e?s.validators.onBlurAsync:s.validators.onBlur,cause:"blur"},n={fn:e?s.validators.onSubmitAsync:s.validators.onSubmit,cause:"submit"},a=e?void 0:{fn:()=>{},cause:"server"};switch(s.event.type){case"mount":return s.runValidation({validators:[i],form:s.form});case"submit":return s.runValidation({validators:[t,r,n,a],form:s.form});case"server":return s.runValidation({validators:[],form:s.form});case"blur":return s.runValidation({validators:[r,a],form:s.form});case"change":return s.runValidation({validators:[t,a],form:s.form});default:throw new Error(`Unknown validation event type: ${s.event.type}`)}};function ai(s,e){const i=new Map;for(const t of s){const r=t.path??[];let n=e,a="";for(let o=0;o<r.length;o++){const l=r[o];if(l===void 0)continue;const u=typeof l=="object"?l.key:l,c=Number(u);Array.isArray(n)&&!Number.isNaN(c)?a+=`[${c}]`:a+=(o>0?".":"")+String(u),typeof n=="object"&&n!==null?n=n[u]:n=void 0}i.set(a,(i.get(a)??[]).concat(t))}return Object.fromEntries(i)}const it=(s,e)=>{const i=ai(s,e);return{form:i,fields:i}},te={validate({value:s,validationSource:e},i){const t=i["~standard"].validate(s);if(t instanceof Promise)throw new Error("async function passed to sync validator");if(t.issues)return e==="field"?t.issues:it(t.issues,s)},async validateAsync({value:s,validationSource:e},i){const t=await i["~standard"].validate(s);if(t.issues)return e==="field"?t.issues:it(t.issues,s)}},St=s=>!!s&&"~standard"in s,Q={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function ye(s){function e(c,f,h){const d=a(c,f,"move",h),m=Math.min(f,h),p=Math.max(f,h);for(let g=m;g<=p;g++)d.push(n(c,g));const b=Object.keys(s.fieldInfo).reduce((g,M)=>(M.startsWith(n(c,f))&&g.set(M,s.getFieldMeta(M)),g),new Map);l(d,f<h?"up":"down"),Object.keys(s.fieldInfo).filter(g=>g.startsWith(n(c,h))).forEach(g=>{const M=g.replace(n(c,h),n(c,f)),V=b.get(M);V&&s.setFieldMeta(g,V)})}function i(c,f){const h=a(c,f,"remove");l(h,"up")}function t(c,f,h){a(c,f,"swap",h).forEach(m=>{if(!m.toString().startsWith(n(c,f)))return;const p=m.toString().replace(n(c,f),n(c,h)),[b,g]=[s.getFieldMeta(m),s.getFieldMeta(p)];b&&s.setFieldMeta(p,b),g&&s.setFieldMeta(m,g)})}function r(c,f){const h=a(c,f,"insert");l(h,"down"),h.forEach(d=>{d.toString().startsWith(n(c,f))&&s.setFieldMeta(d,u())})}function n(c,f){return`${c}[${f}]`}function a(c,f,h,d){const m=[n(c,f)];switch(h){case"swap":m.push(n(c,d));break;case"move":{const[p,b]=[Math.min(f,d),Math.max(f,d)];for(let g=p;g<=b;g++)m.push(n(c,g));break}default:{const p=s.getFieldValue(c),b=Array.isArray(p)?p.length:0;for(let g=f+1;g<b;g++)m.push(n(c,g));break}}return Object.keys(s.fieldInfo).filter(p=>m.some(b=>p.startsWith(b)))}function o(c,f){return c.replace(/\[(\d+)\]/,(h,d)=>{const m=parseInt(d,10);return`[${f==="up"?m+1:Math.max(0,m-1)}]`})}function l(c,f){(f==="up"?c:[...c].reverse()).forEach(d=>{const m=o(d.toString(),f),p=s.getFieldMeta(m);p?s.setFieldMeta(d,p):s.setFieldMeta(d,u())})}const u=()=>Q;return{handleArrayMove:e,handleArrayRemove:i,handleArraySwap:t,handleArrayInsert:r}}function Pe(s){return{values:s.values??{},errorMap:s.errorMap??{},fieldMetaBase:s.fieldMetaBase??{},isSubmitted:s.isSubmitted??!1,isSubmitting:s.isSubmitting??!1,isValidating:s.isValidating??!1,submissionAttempts:s.submissionAttempts??0,isSubmitSuccessful:s.isSubmitSuccessful??!1,validationMetaMap:s.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class rt{constructor(e){this.options={},this.fieldInfo={},this.mount=()=>{const t=this.fieldMetaDerived.mount(),r=this.store.mount(),n=this.store.subscribe(()=>{ni(this)}),a=D.on("request-form-state",f=>{f.payload.id===this._formId&&D.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),o=D.on("request-form-reset",f=>{f.payload.id===this._formId&&this.reset()}),l=D.on("request-form-force-submit",f=>{f.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),u=()=>{l(),o(),a(),n(),t(),r(),D.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:c}=this.options.validators||{};return D.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),c&&this.validateSync("mount"),u},this.update=t=>{if(!t)return;const r=this.options;this.options=t;const n=t.defaultValues&&!z(t.defaultValues,r.defaultValues)&&!this.state.isTouched,a=!z(t.defaultState,r.defaultState)&&!this.state.isTouched;!n&&!a||(P(()=>{this.baseStore.setState(()=>Pe(Object.assign({},this.state,a?t.defaultState:{},n?{values:t.defaultValues}:{})))}),D.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(t,r)=>{const{fieldMeta:n}=this.state,a=this.resetFieldMeta(n);t&&!r?.keepDefaultValues&&(this.options={...this.options,defaultValues:t}),this.baseStore.setState(()=>Pe({...this.options.defaultState,values:t??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:a}))},this.validateAllFields=async t=>{const r=[];return P(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const o=a.instance;r.push(Promise.resolve().then(()=>o.validate(t,{skipFormValidation:!0}))),a.instance.state.meta.isTouched||a.instance.setMeta(l=>({...l,isTouched:!0}))})}),(await Promise.all(r)).flat()},this.validateArrayFieldsStartingFrom=async(t,r,n)=>{const a=this.getFieldValue(t),o=Array.isArray(a)?Math.max(a.length-1,0):null,l=[`${t}[${r}]`];for(let h=r+1;h<=(o??0);h++)l.push(`${t}[${h}]`);const u=Object.keys(this.fieldInfo).filter(h=>l.some(d=>h.startsWith(d))),c=[];return P(()=>{u.forEach(h=>{c.push(Promise.resolve().then(()=>this.validateField(h,n)))})}),(await Promise.all(c)).flat()},this.validateField=(t,r)=>{const n=this.fieldInfo[t]?.instance;if(!n){const{hasErrored:a}=this.validateSync(r);return a&&!this.options.asyncAlways?this.getFieldMeta(t)?.errors??[]:this.validateAsync(r).then(()=>this.getFieldMeta(t)?.errors??[])}return n.state.meta.isTouched||n.setMeta(a=>({...a,isTouched:!0})),n.validate(r)},this.validateSync=t=>{const r=Be(t,{...this.options,form:this,validationLogic:this.options.validationLogic||Y});let n=!1;const a={};return P(()=>{for(const u of r){if(!u.validate)continue;const c=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:f,fieldErrors:h}=xe(c),d=ne(u.cause),m=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(h||{})]);for(const p of m){if(this.baseStore.state.fieldMetaBase[p]===void 0&&!h?.[p])continue;const b=this.getFieldMeta(p)??Q,{errorMap:g,errorSourceMap:M}=b,V=h?.[p],{newErrorValue:S,newSource:w}=tt({newFormValidatorError:V,isPreviousErrorFromFormValidator:M?.[d]==="form",previousErrorValue:g?.[d]});w==="form"&&(a[p]={...a[p],[d]:V}),g?.[d]!==S&&this.setFieldMeta(p,(x=Q)=>({...x,errorMap:{...x.errorMap,[d]:S},errorSourceMap:{...x.errorSourceMap,[d]:w}}))}this.state.errorMap?.[d]!==f&&this.baseStore.setState(p=>({...p,errorMap:{...p.errorMap,[d]:f}})),(f||h)&&(n=!0)}const o=ne("submit");this.state.errorMap?.[o]&&t!=="submit"&&!n&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[o]:void 0}}));const l=ne("server");this.state.errorMap?.[l]&&t!=="server"&&!n&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[l]:void 0}}))}),{hasErrored:n,fieldsErrorMap:a}},this.validateAsync=async t=>{const r=$e(t,{...this.options,form:this,validationLogic:this.options.validationLogic||Y});this.state.isFormValidating||this.baseStore.setState(u=>({...u,isFormValidating:!0}));const n=[];let a;for(const u of r){if(!u.validate)continue;const c=ne(u.cause);this.state.validationMetaMap[c]?.lastAbortController.abort();const h=new AbortController;this.state.validationMetaMap[c]={lastAbortController:h},n.push(new Promise(async d=>{let m;try{m=await new Promise((M,V)=>{setTimeout(async()=>{if(h.signal.aborted)return M(void 0);try{M(await this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:h.signal},type:"validateAsync"}))}catch(S){V(S)}},u.debounceMs)})}catch(M){m=M}const{formError:p,fieldErrors:b}=xe(m);b&&(a=a?{...a,...b}:b);const g=ne(u.cause);for(const M of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[M]===void 0)continue;const V=this.getFieldMeta(M);if(!V)continue;const{errorMap:S,errorSourceMap:w}=V,x=a?.[M],{newErrorValue:k,newSource:A}=tt({newFormValidatorError:x,isPreviousErrorFromFormValidator:w?.[g]==="form",previousErrorValue:S?.[g]});S?.[g]!==k&&this.setFieldMeta(M,E=>({...E,errorMap:{...E.errorMap,[g]:k},errorSourceMap:{...E.errorSourceMap,[g]:A}}))}this.baseStore.setState(M=>({...M,errorMap:{...M.errorMap,[g]:p}})),d(a?{fieldErrors:a,errorMapKey:g}:void 0)}))}let o=[];const l={};if(n.length){o=await Promise.all(n);for(const u of o)if(u?.fieldErrors){const{errorMapKey:c}=u;for(const[f,h]of Object.entries(u.fieldErrors)){const m={...l[f]||{},[c]:h};l[f]=m}}}return this.baseStore.setState(u=>({...u,isFormValidating:!1})),l},this.validate=t=>{const{hasErrored:r,fieldsErrorMap:n}=this.validateSync(t);return r&&!this.options.asyncAlways?n:this.validateAsync(t)},this._handleSubmit=async t=>{this.baseStore.setState(a=>({...a,isSubmitted:!1,submissionAttempts:a.submissionAttempts+1,isSubmitSuccessful:!1})),P(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance&&(a.instance.state.meta.isTouched||a.instance.setMeta(o=>({...o,isTouched:!0})))})});const r=t??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r});return}this.baseStore.setState(a=>({...a,isSubmitting:!0}));const n=()=>{this.baseStore.setState(a=>({...a,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){n(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),D.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(a=>a.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){n(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),D.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}P(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance?.options.listeners?.onSubmit?.({value:a.instance.state.value,fieldApi:a.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:r});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:r}),P(()=>{this.baseStore.setState(a=>({...a,isSubmitted:!0,isSubmitSuccessful:!0})),D.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),n()})}catch(a){throw this.baseStore.setState(o=>({...o,isSubmitSuccessful:!1})),D.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:a}),n(),a}},this.getFieldValue=t=>pe(this.state.values,t),this.getFieldMeta=t=>this.state.fieldMeta[t],this.getFieldInfo=t=>this.fieldInfo[t]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(t,r)=>{this.baseStore.setState(n=>({...n,fieldMetaBase:{...n.fieldMetaBase,[t]:Ie(r,n.fieldMetaBase[t])}}))},this.resetFieldMeta=t=>Object.keys(t).reduce((r,n)=>{const a=n;return r[a]=Q,r},{}),this.setFieldValue=(t,r,n)=>{const a=n?.dontUpdateMeta??!1,o=n?.dontRunListeners??!1,l=n?.dontValidate??!1;P(()=>{a||this.setFieldMeta(t,u=>({...u,isTouched:!0,isDirty:!0,errorMap:{...u?.errorMap,onMount:void 0}})),this.baseStore.setState(u=>({...u,values:ge(u.values,t,r)}))}),o||this.getFieldInfo(t).instance?.triggerOnChangeListener(),l||this.validateField(t,"change")},this.deleteField=t=>{const n=[...Object.keys(this.fieldInfo).filter(a=>{const o=t.toString();return a!==o&&a.startsWith(o)}),t];this.baseStore.setState(a=>{const o={...a};return n.forEach(l=>{o.values=Qs(o.values,l),delete this.fieldInfo[l],delete o.fieldMetaBase[l]}),o})},this.pushFieldValue=(t,r,n)=>{this.setFieldValue(t,a=>[...Array.isArray(a)?a:[],r],n)},this.insertFieldValue=async(t,r,n,a)=>{this.setFieldValue(t,l=>[...l.slice(0,r),n,...l.slice(r)],_(a,{dontValidate:!0}));const o=a?.dontValidate??!1;o||await this.validateField(t,"change"),ye(this).handleArrayInsert(t,r),o||await this.validateArrayFieldsStartingFrom(t,r,"change")},this.replaceFieldValue=async(t,r,n,a)=>{this.setFieldValue(t,l=>l.map((u,c)=>c===r?n:u),_(a,{dontValidate:!0})),(a?.dontValidate??!1)||(await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,r,"change"))},this.removeFieldValue=async(t,r,n)=>{const a=this.getFieldValue(t),o=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(t,u=>u.filter((c,f)=>f!==r),_(n,{dontValidate:!0})),ye(this).handleArrayRemove(t,r),o!==null){const u=`${t}[${o}]`;this.deleteField(u)}(n?.dontValidate??!1)||(await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,r,"change"))},this.swapFieldValues=(t,r,n,a)=>{this.setFieldValue(t,l=>{const u=l[r],c=l[n];return ge(ge(l,`${r}`,c),`${n}`,u)},_(a,{dontValidate:!0})),ye(this).handleArraySwap(t,r,n),(a?.dontValidate??!1)||(this.validateField(t,"change"),this.validateField(`${t}[${r}]`,"change"),this.validateField(`${t}[${n}]`,"change"))},this.moveFieldValues=(t,r,n,a)=>{this.setFieldValue(t,l=>{const u=[...l];return u.splice(n,0,u.splice(r,1)[0]),u},_(a,{dontValidate:!0})),ye(this).handleArrayMove(t,r,n),(a?.dontValidate??!1)||(this.validateField(t,"change"),this.validateField(`${t}[${r}]`,"change"),this.validateField(`${t}[${n}]`,"change"))},this.clearFieldValues=(t,r)=>{const n=this.getFieldValue(t),a=Array.isArray(n)?Math.max(n.length-1,0):null;if(this.setFieldValue(t,[],_(r,{dontValidate:!0})),a!==null)for(let l=0;l<=a;l++){const u=`${t}[${l}]`;this.deleteField(u)}(r?.dontValidate??!1)||this.validateField(t,"change")},this.resetField=t=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[t]:Q},values:this.options.defaultValues?ge(r.values,t,pe(this.options.defaultValues,t)):r.values}))},this.setErrorMap=t=>{P(()=>{Object.entries(t).forEach(([r,n])=>{const a=r;if(we(n)){const{formError:o,fieldErrors:l}=xe(n);for(const u of Object.keys(this.fieldInfo))this.getFieldMeta(u)&&this.setFieldMeta(u,f=>({...f,errorMap:{...f.errorMap,[a]:l?.[u]},errorSourceMap:{...f.errorSourceMap,[a]:"form"}}));this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[a]:o}}))}else this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[a]:n}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((t,[r,n])=>(Object.keys(n).length&&n.errors.length&&(t[r]={errors:n.errors,errorMap:n.errorMap}),t),{})}),this.parseValuesWithSchema=t=>te.validate({value:this.state.values,validationSource:"form"},t),this.parseValuesWithSchemaAsync=t=>te.validateAsync({value:this.state.values,validationSource:"form"},t),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=e?.formId??Vt(),this._devtoolsSubmissionOverride=!1;let i=Pe({...e?.defaultState,values:e?.defaultValues??e?.defaultState?.values});if(e?.transform){i=e.transform({state:i}).state;for(const t of Object.keys(i.errorMap)){const r=i.errorMap[t];if(!(r===void 0||!we(r)))for(const n of Object.keys(r.fields)){const a=r.fields[n];if(a===void 0)continue;const o=i.fieldMetaBase[n];i.fieldMetaBase[n]={isTouched:!1,isValidating:!1,isBlurred:!1,isDirty:!1,...o??{},errorSourceMap:{...o?.errorSourceMap??{},onChange:"form"},errorMap:{...o?.errorMap??{},[t]:a}}}}}this.baseStore=new Re(i),this.fieldMetaDerived=new B({deps:[this.baseStore],fn:({prevDepVals:t,currDepVals:r,prevVal:n})=>{const a=n,o=t?.[0],l=r[0];let u=0;const c={};for(const f of Object.keys(l.fieldMetaBase)){const h=l.fieldMetaBase[f],d=o?.fieldMetaBase[f],m=a?.[f],p=pe(l.values,f);let b=m?.errors;if(!d||h.errorMap!==d.errorMap){b=Object.values(h.errorMap??{}).filter(w=>w!==void 0);const S=this.getFieldInfo(f)?.instance;(!S||!S.options.disableErrorFlat)&&(b=b.flat(1))}const g=!ri(b),M=!h.isDirty,V=z(p,pe(this.options.defaultValues,f))||z(p,this.getFieldInfo(f)?.instance?.options.defaultValue);if(m&&m.isPristine===M&&m.isValid===g&&m.isDefaultValue===V&&m.errors===b&&h===d){c[f]=m,u++;continue}c[f]={...h,errors:b??[],isPristine:M,isValid:g,isDefaultValue:V}}return Object.keys(l.fieldMetaBase).length&&a&&u===Object.keys(l.fieldMetaBase).length?a:c}}),this.store=new B({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:t,currDepVals:r,prevVal:n})=>{const a=n,o=t?.[0],l=r[0],u=r[1],c=Object.values(u).filter(Boolean),f=c.some(F=>F.isValidating),h=c.every(F=>F.isValid),d=c.some(F=>F.isTouched),m=c.some(F=>F.isBlurred),p=c.every(F=>F.isDefaultValue),b=d&&l.errorMap?.onMount,g=c.some(F=>F.isDirty),M=!g,V=!!(l.errorMap?.onMount||c.some(F=>F?.errorMap?.onMount)),S=!!f;let w=a?.errors??[];(!o||l.errorMap!==o.errorMap)&&(w=Object.values(l.errorMap).reduce((F,U)=>U===void 0?F:U&&we(U)?(F.push(U.form),F):(F.push(U),F),[]));const x=w.length===0,k=h&&x,A=this.options.canSubmitWhenInvalid??!1,E=l.submissionAttempts===0&&!d&&!V||!S&&!l.isSubmitting&&k||A;let j=l.errorMap;return b&&(w=w.filter(F=>F!==l.errorMap.onMount),j=Object.assign(j,{onMount:void 0})),a&&o&&a.errorMap===j&&a.fieldMeta===this.fieldMetaDerived.state&&a.errors===w&&a.isFieldsValidating===f&&a.isFieldsValid===h&&a.isFormValid===x&&a.isValid===k&&a.canSubmit===E&&a.isTouched===d&&a.isBlurred===m&&a.isPristine===M&&a.isDefaultValue===p&&a.isDirty===g&&z(o,l)?a:{...l,errorMap:j,fieldMeta:this.fieldMetaDerived.state,errors:w,isFieldsValidating:f,isFieldsValid:h,isFormValid:x,isValid:k,canSubmit:E,isTouched:d,isBlurred:m,isPristine:M,isDefaultValue:p,isDirty:g}}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(e){return St(e.validate)?te[e.type](e.value,e.validate):e.validate(e.value)}handleSubmit(e){return this._handleSubmit(e)}}function xe(s){if(s){if(we(s)){const e=xe(s.form).formError,i=s.fields;return{formError:e,fieldErrors:i}}return{formError:s}}return{formError:void 0}}function ne(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}class nt{constructor(e){this.options={},this.mount=()=>{const i=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const t=this.getInfo();t.instance=this,this.update(this.options);const{onMount:r}=this.options.validators||{};if(r){const n=this.runValidator({validate:r,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});n&&this.setMeta(a=>({...a,errorMap:{...a?.errorMap,onMount:n},errorSourceMap:{...a?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),i},this.update=i=>{if(this.options=i,this.name=i.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const t=this.form.getFieldValue(this.name);z(t,i.defaultValue)||this.form.setFieldValue(this.name,i.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(i,t)=>{this.form.setFieldValue(this.name,i,_(t,{dontRunListeners:!0,dontValidate:!0})),t?.dontRunListeners||this.triggerOnChangeListener(),t?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=i=>this.form.setFieldMeta(this.name,i),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(i,t)=>{this.form.pushFieldValue(this.name,i,_(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(i,t,r)=>{this.form.insertFieldValue(this.name,i,t,_(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(i,t,r)=>{this.form.replaceFieldValue(this.name,i,t,_(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(i,t)=>{this.form.removeFieldValue(this.name,i,_(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(i,t,r)=>{this.form.swapFieldValues(this.name,i,t,_(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(i,t,r)=>{this.form.moveFieldValues(this.name,i,t,_(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=i=>{this.form.clearFieldValues(this.name,_(i,{dontRunListeners:!0})),i?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=i=>{const t=Object.values(this.form.fieldInfo),r=[];for(const n of t){if(!n.instance)continue;const{onChangeListenTo:a,onBlurListenTo:o}=n.instance.options.validators||{};i==="change"&&a?.includes(this.name)&&r.push(n.instance),i==="blur"&&o?.includes(this.name)&&r.push(n.instance)}return r},this.validateSync=(i,t)=>{const r=Be(i,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Y}),a=this.getLinkedFields(i).reduce((u,c)=>{const f=Be(i,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||Y});return f.forEach(h=>{h.field=c}),u.concat(f)},[]);let o=!1;P(()=>{const u=(c,f)=>{const h=Ve(f.cause),d=f.validate?at(c.runValidator({validate:f.validate,value:{value:c.store.state.value,validationSource:"field",fieldApi:c},type:"validate"})):void 0,m=t[h],{newErrorValue:p,newSource:b}=st({formLevelError:m,fieldLevelError:d});c.state.meta.errorMap?.[h]!==p&&c.setMeta(g=>({...g,errorMap:{...g.errorMap,[h]:p},errorSourceMap:{...g.errorSourceMap,[h]:b}})),p&&(o=!0)};for(const c of r)u(this,c);for(const c of a)c.validate&&u(c.field,c)});const l=Ve("submit");return this.state.meta.errorMap?.[l]&&i!=="submit"&&!o&&this.setMeta(u=>({...u,errorMap:{...u.errorMap,[l]:void 0},errorSourceMap:{...u.errorSourceMap,[l]:void 0}})),{hasErrored:o}},this.validateAsync=async(i,t)=>{const r=$e(i,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Y}),n=await t,a=this.getLinkedFields(i),o=a.reduce((d,m)=>{const p=$e(i,{...m.options,form:m.form,validationLogic:m.form.options.validationLogic||Y});return p.forEach(b=>{b.field=m}),d.concat(p)},[]),l=[],u=[],c=r.some(d=>d.validate)||o.some(d=>d.validate);if(c){this.state.meta.isValidating||this.setMeta(d=>({...d,isValidating:!0}));for(const d of a)d.setMeta(m=>({...m,isValidating:!0}))}const f=(d,m,p)=>{const b=Ve(m.cause);d.getInfo().validationMetaMap[b]?.lastAbortController.abort();const M=new AbortController;this.getInfo().validationMetaMap[b]={lastAbortController:M},p.push(new Promise(async V=>{let S;try{S=await new Promise((E,j)=>{this.timeoutIds.validations[m.cause]&&clearTimeout(this.timeoutIds.validations[m.cause]),this.timeoutIds.validations[m.cause]=setTimeout(async()=>{if(M.signal.aborted)return E(void 0);try{E(await this.runValidator({validate:m.validate,value:{value:d.store.state.value,fieldApi:d,signal:M.signal,validationSource:"field"},type:"validateAsync"}))}catch(K){j(K)}},m.debounceMs)})}catch(E){S=E}if(M.signal.aborted)return V(void 0);const w=at(S),x=n[this.name]?.[b],{newErrorValue:k,newSource:A}=st({formLevelError:x,fieldLevelError:w});d.setMeta(E=>({...E,errorMap:{...E?.errorMap,[b]:k},errorSourceMap:{...E.errorSourceMap,[b]:A}})),V(k)}))};for(const d of r)d.validate&&f(this,d,l);for(const d of o)d.validate&&f(d.field,d,u);let h=[];if((l.length||u.length)&&(h=await Promise.all(l),await Promise.all(u)),c){this.setMeta(d=>({...d,isValidating:!1}));for(const d of a)d.setMeta(m=>({...m,isValidating:!1}))}return h.filter(Boolean)},this.validate=(i,t)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:r}=t?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(i),{hasErrored:n}=this.validateSync(i,r[this.name]??{});if(n&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[Ve(i)]?.lastAbortController.abort(),this.state.meta.errors;const a=t?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(i);return this.validateAsync(i,a)},this.handleChange=i=>{this.setValue(i)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(t=>({...t,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(t=>({...t,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=i=>{this.setMeta(t=>({...t,errorMap:{...t.errorMap,...i}}))},this.parseValueWithSchema=i=>te.validate({value:this.state.value,validationSource:"field"},i),this.parseValueWithSchemaAsync=i=>te.validateAsync({value:this.state.value,validationSource:"field"},i),this.triggerOnChangeListener=()=>{const i=this.form.options.listeners?.onChangeDebounceMs;i&&i>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},i)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const t=this.options.listeners?.onChangeDebounceMs;t&&t>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},t)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=e.form,this.name=e.name,this.options=e,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new B({deps:[this.form.store],fn:({prevVal:i})=>{const t=i,r=this.form.getFieldMeta(this.name)??{...Q,...e.defaultMeta};let n=this.form.getFieldValue(this.name);return!r.isTouched&&n===void 0&&this.options.defaultValue!==void 0&&!z(n,this.options.defaultValue)&&(n=this.options.defaultValue),t&&t.value===n&&t.meta===r?t:{value:n,meta:r}}})}get state(){return this.store.state}runValidator(e){return St(e.validate)?te[e.type](e.value,e.validate):e.validate(e.value)}triggerOnBlurListener(){const e=this.form.options.listeners?.onBlurDebounceMs;e&&e>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},e)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const i=this.options.listeners?.onBlurDebounceMs;i&&i>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},i)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function at(s){if(s)return s}function Ve(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}function oi(s,e){if(!e)return;const i=Object.assign({},s,{state:oe(s.state)});e(i),i.fieldInfo!==s.fieldInfo&&(s.fieldInfo=i.fieldInfo),i.options!==s.options&&(s.options=i.options);const r=Object.keys({values:null,validationMetaMap:null,fieldMetaBase:null,isSubmitting:null,isSubmitted:null,isValidating:null,submissionAttempts:null,isSubmitSuccessful:null,_force_re_eval:null}).reduce((n,a)=>(s.state[a]!==i.state[a]&&(n[a]=i.state[a]),n),{});return P(()=>{Object.keys(r).length&&s.baseStore.setState(n=>({...n,...r})),i.state.errorMap!==s.state.errorMap&&s.setErrorMap(i.state.errorMap)}),i}function N(s,e=t=>t,i={}){const t=i.equal??li;return Wt.useSyncExternalStoreWithSelector(s.subscribe,()=>s.state,()=>s.state,e,t)}function li(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[t,r]of s)if(!e.has(t)||!Object.is(r,e.get(t)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0}if(s instanceof Date&&e instanceof Date)return s.getTime()===e.getTime();const i=ot(s);if(i.length!==ot(e).length)return!1;for(let t=0;t<i.length;t++)if(!Object.prototype.hasOwnProperty.call(e,i[t])||!Object.is(s[i[t]],e[i[t]]))return!1;return!0}function ot(s){return Object.keys(s).concat(Object.getOwnPropertySymbols(s))}const Z=typeof window<"u"?y.useLayoutEffect:y.useEffect;function ui(s){const[e,i]=y.useState(()=>({form:s.form,name:s.name})),[t,r]=y.useState(()=>new nt({...s}));(e.form!==s.form||e.name!==s.name)&&(r(new nt({...s})),i({form:s.form,name:s.name}));const n=N(t.store,s.mode==="array"?d=>Object.keys(d.value??[]).length:d=>d.value),a=N(t.store,d=>d.meta.isTouched),o=N(t.store,d=>d.meta.isBlurred),l=N(t.store,d=>d.meta.isDirty),u=N(t.store,d=>d.meta.errorMap),c=N(t.store,d=>d.meta.errorSourceMap),f=N(t.store,d=>d.meta.isValidating),h=y.useMemo(()=>{const m={...t,get state(){return{value:s.mode==="array"?t.state.value:n,get meta(){return{...t.state.meta,isTouched:a,isBlurred:o,isDirty:l,errorMap:u,errorSourceMap:c,isValidating:f}}}}};return m.Field=Ft,m},[t,s.mode,n,a,o,l,u,c,f]);return Z(t.mount,[t]),Z(()=>{t.update(s)}),h}const Ft=(({children:s,...e})=>{const i=ui(e),t=y.useMemo(()=>Ie(s,i),[s,i]);return v.jsx(v.Fragment,{children:t})});function ci(){return y.useState(()=>Vt())[0]}const di=Gt,fi=y.version.split(".")[0]==="17"?ci:di.useId;function hi({form:s,selector:e,children:i}){const t=N(s.store,e);return v.jsx(v.Fragment,{children:Ie(i,t)})}function mi(s){const e=fi(),[i,t]=y.useState(s?.formId),[r,n]=y.useState(()=>new rt({...s,formId:s?.formId??e}));if(i!==s?.formId){const l=s?.formId??e;n(new rt({...s,formId:l})),t(l)}const a=y.useMemo(()=>{const l={...r,handleSubmit:((...u)=>r._handleSubmit(...u)),get formId(){return r._formId},get state(){return r.store.state}};return l.Field=function(c){return v.jsx(Ft,{...c,form:r})},l.Subscribe=function(c){return v.jsx(hi,{form:r,selector:c.selector,children:c.children})},l},[r]);Z(r.mount,[]),Z(()=>{r.update(s)});const o=y.useRef(!1);return Z(()=>{o.current&&s?.transform&&oi(r,s.transform)},[r,s?.transform]),Z(()=>{o.current=!0}),a}function vi(s){const{children:e,open:i,defaultOpen:t=!1,onOpenChange:r,onOpenChangeComplete:n,disablePointerDismissal:a=!1,modal:o=!0,actionsRef:l,handle:u,triggerId:c,defaultTriggerId:f=null}=s,h=qt(!0),d=!!h,m=ut(()=>u?.store??new Xt({open:t,openProp:i,activeTriggerId:f,triggerIdProp:c,modal:o,disablePointerDismissal:a,nested:d})).current;Jt(()=>{i===void 0&&m.state.open===!1&&t===!0&&m.update({open:!0,activeTriggerId:f})}),m.useControlledProp("openProp",i),m.useControlledProp("triggerIdProp",c),m.useSyncedValues({disablePointerDismissal:a,nested:d,modal:o}),m.useContextCallback("onOpenChange",r),m.useContextCallback("onOpenChangeComplete",n);const p=m.useState("payload");Yt({store:m,actionsRef:l,parentContext:h?.store.context});const b=y.useMemo(()=>({store:m}),[m]);return v.jsx(Qt.Provider,{value:b,children:typeof e=="function"?e({payload:p}):e})}const pi=({title:s,titleId:e,...i},t)=>v.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:t,"aria-labelledby":e,...i,children:[s?v.jsx("title",{id:e,children:s}):null,v.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 6L6 18M6 6l12 12"})]}),gi=y.forwardRef(pi);function bi(s){const e=L.c(4);let i;e[0]!==s?({...i}=s,e[0]=s,e[1]=i):i=e[1];let t;return e[2]!==i?(t=v.jsx(vi,{"data-slot":"dialog",...i}),e[2]=i,e[3]=t):t=e[3],t}function Mi(s){const e=L.c(4);let i;e[0]!==s?({...i}=s,e[0]=s,e[1]=i):i=e[1];let t;return e[2]!==i?(t=v.jsx(ts,{"data-slot":"dialog-portal",...i}),e[2]=i,e[3]=t):t=e[3],t}function yi(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx(ss,{"data-slot":"dialog-overlay",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}function Vi(s){const e=L.c(15);let i,t,r,n;e[0]!==s?({className:t,children:i,showCloseButton:n,...r}=s,e[0]=s,e[1]=i,e[2]=t,e[3]=r,e[4]=n):(i=e[1],t=e[2],r=e[3],n=e[4]);const a=n===void 0?!0:n;let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=v.jsx(yi,{}),e[5]=o):o=e[5];let l;e[6]!==t?(l=R("bg-background data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 ring-foreground/10 fixed top-1/2 left-1/2 z-50 grid w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2 gap-6 rounded-xl p-6 text-sm ring-1 duration-100 outline-none sm:max-w-md",t),e[6]=t,e[7]=l):l=e[7];let u;e[8]!==a?(u=a&&v.jsxs(ct,{"data-slot":"dialog-close",render:v.jsx(Ne,{variant:"ghost",className:"absolute top-4 right-4",size:"icon-sm"}),children:[v.jsx(gi,{}),v.jsx("span",{className:"sr-only",children:"Close"})]}),e[8]=a,e[9]=u):u=e[9];let c;return e[10]!==i||e[11]!==r||e[12]!==l||e[13]!==u?(c=v.jsxs(Mi,{children:[o,v.jsxs(es,{"data-slot":"dialog-content",className:l,...r,children:[i,u]})]}),e[10]=i,e[11]=r,e[12]=l,e[13]=u,e[14]=c):c=e[14],c}function Si(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("flex flex-col gap-2",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx("div",{"data-slot":"dialog-header",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}function Fi(s){const e=L.c(14);let i,t,r,n;e[0]!==s?({className:t,showCloseButton:n,children:i,...r}=s,e[0]=s,e[1]=i,e[2]=t,e[3]=r,e[4]=n):(i=e[1],t=e[2],r=e[3],n=e[4]);const a=n===void 0?!1:n;let o;e[5]!==t?(o=R("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),e[5]=t,e[6]=o):o=e[6];let l;e[7]!==a?(l=a&&v.jsx(ct,{render:v.jsx(Ne,{variant:"outline"}),children:"Close"}),e[7]=a,e[8]=l):l=e[8];let u;return e[9]!==i||e[10]!==r||e[11]!==o||e[12]!==l?(u=v.jsxs("div",{"data-slot":"dialog-footer",className:o,...r,children:[i,l]}),e[9]=i,e[10]=r,e[11]=o,e[12]=l,e[13]=u):u=e[13],u}function wi(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("leading-none font-medium",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx(Zt,{"data-slot":"dialog-title",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}const Ei=Ht({hint:Ye(),retract:Ye(),version:Je(),renderer:Je()});let lt=(function(s){return s.checked="data-checked",s.unchecked="data-unchecked",s.indeterminate="data-indeterminate",s.disabled="data-disabled",s.readonly="data-readonly",s.required="data-required",s.valid="data-valid",s.invalid="data-invalid",s.touched="data-touched",s.dirty="data-dirty",s.filled="data-filled",s.focused="data-focused",s})({});function wt(s){return y.useMemo(()=>({checked(e){return s.indeterminate?{}:e?{[lt.checked]:""}:{[lt.unchecked]:""}},...dt}),[s.indeterminate])}const xi=y.createContext({disabled:!1});function Ci(){return y.useContext(xi)}const Ii=y.createContext(void 0);function ki(s=!0){const e=y.useContext(Ii);if(e===void 0&&!s)throw new Error(ft(3));return e}const Et=y.createContext(void 0);function Ai(){const s=y.useContext(Et);if(s===void 0)throw new Error(ft(14));return s}const Li="data-parent",Ti=y.forwardRef(function(e,i){const{checked:t,className:r,defaultChecked:n=!1,disabled:a=!1,id:o,indeterminate:l=!1,inputRef:u,name:c,onCheckedChange:f,parent:h=!1,readOnly:d=!1,render:m,required:p=!1,uncheckedValue:b,value:g,nativeButton:M=!1,...V}=e,{clearErrors:S}=is(),{disabled:w,name:x,setDirty:k,setFilled:A,setFocused:E,setTouched:j,state:K,validationMode:F,validityData:U,shouldValidateOnChange:Ct,validation:It}=rs(),kt=Ci(),{labelId:At,controlId:Lt,registerControlId:q,getDescriptionProps:Ke}=ns(),C=ki(),ie=C?.parent,ue=ie&&C.allValues,W=w||kt.disabled||C?.disabled||a,G=x??c,T=g??G,Ue=Qe(),Tt=Qe();let X=Lt;ue?X=h?Tt:`${ie.id}-${T}`:o&&(X=o);let Le={};ue&&(h?Le=C.parent.getParentProps():T&&(Le=C.parent.getChildProps(T)));const Ot=as(f),{checked:We=t,indeterminate:ce=l,onCheckedChange:_t,...Dt}=Le,J=C?.value,Ge=C?.setValue,He=C?.defaultValue,Te=y.useRef(null),de=ut(()=>Symbol("checkbox-control")),Oe=y.useRef(!1),{getButtonProps:Pt,buttonRef:Rt}=os({disabled:W,native:M}),$=C?.validation??It,[O,jt]=ls({controlled:T&&J&&!h?J.includes(T):We,default:T&&He&&!h?He.includes(T):n,name:"Checkbox",state:"checked"});Ze(()=>{q!==et&&(Oe.current=!0,q(de.current,X))},[X,C,q,h,de]),y.useEffect(()=>{const I=de.current;return()=>{!Oe.current||q===et||(Oe.current=!1,q(I,void 0))}},[q,de]),us({enabled:!C,id:Ue,commit:$.commit,value:O,controlRef:Te,name:G,getValue:()=>O});const re=y.useRef(null),Bt=cs(u,re,$.inputRef);Ze(()=>{re.current&&(re.current.indeterminate=ce,O&&A(!0))},[O,ce,A]),ds(O,()=>{C&&!h||(S(G),A(O),k(O!==U.initialValue),Ct()?$.commit(O):$.commit(O,!0))});const $t=fs({checked:O,disabled:W,name:h?void 0:G,id:M?void 0:X??void 0,required:p,ref:Bt,style:G?ms:vs,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(I){if(I.nativeEvent.defaultPrevented)return;const fe=I.target.checked,he=ps(gs,I.nativeEvent);if(_t?.(fe,he),Ot(fe,he),!he.isCanceled&&(jt(fe),T&&J&&Ge&&!h)){const Kt=fe?[...J,T]:J.filter(Ut=>Ut!==T);Ge(Kt,he)}},onFocus(){Te.current?.focus()}},g!==void 0?{value:(C?O&&g:g)||""}:hs,Ke,C?$.getValidationProps:$.getInputValidationProps),qe=ue?!!We:O,Xe=ue&&ce||l;y.useEffect(()=>{if(!ie||!T)return;const I=ie.disabledStatesRef.current;return I.set(T,W),()=>{I.delete(T)}},[ie,W,T]);const _e=y.useMemo(()=>({...K,checked:qe,disabled:W,readOnly:d,required:p,indeterminate:Xe}),[K,qe,W,d,p,Xe]),Nt=wt(_e),zt=ht("span",e,{state:_e,ref:[Rt,Te,i,C?.registerControlRef],props:[{id:M?X??void 0:Ue,role:"checkbox","aria-checked":ce?"mixed":O,"aria-readonly":d||void 0,"aria-required":p||void 0,"aria-labelledby":At,[Li]:h?"":void 0,onFocus(){E(!0)},onBlur(){const I=re.current;I&&(j(!0),E(!1),F==="onBlur"&&$.commit(C?J:I.checked))},onClick(I){d||W||(I.preventDefault(),re.current?.dispatchEvent(new PointerEvent("click",{bubbles:!0,shiftKey:I.shiftKey,ctrlKey:I.ctrlKey,altKey:I.altKey,metaKey:I.metaKey})))}},Ke,$.getValidationProps,V,Dt,Pt],stateAttributesMapping:Nt});return v.jsxs(Et.Provider,{value:_e,children:[zt,!O&&!C&&G&&!h&&b!==void 0&&v.jsx("input",{type:"hidden",name:G,value:b}),v.jsx("input",{...$t})]})}),Oi=y.forwardRef(function(e,i){const{render:t,className:r,keepMounted:n=!1,...a}=e,o=Ai(),l=o.checked||o.indeterminate,{mounted:u,transitionStatus:c,setMounted:f}=bs(l),h=y.useRef(null),d={...o,transitionStatus:c};Ms({open:l,ref:h,onComplete(){l||f(!1)}});const m=wt(o),p=y.useMemo(()=>({...m,...ys,...dt}),[m]),b=n||u,g=ht("span",e,{ref:[i,h],state:d,stateAttributesMapping:p,props:a});return b?g:null});function xt(s){const e=L.c(9);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("border-input dark:bg-input/30 data-checked:bg-primary data-checked:text-primary-foreground dark:data-checked:bg-primary data-checked:border-primary aria-invalid:aria-checked:border-primary aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 peer relative flex size-4 shrink-0 items-center justify-center rounded-[4px] border shadow-xs transition-shadow outline-none group-has-disabled/field:opacity-50 after:absolute after:-inset-x-3 after:-inset-y-2 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-[3px]",i),e[3]=i,e[4]=r):r=e[4];let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n=v.jsx(Oi,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none [&>svg]:size-3.5",children:v.jsx(Vs,{})}),e[5]=n):n=e[5];let a;return e[6]!==t||e[7]!==r?(a=v.jsx(Ti,{"data-slot":"checkbox",className:r,...t,children:n}),e[6]=t,e[7]=r,e[8]=a):a=e[8],a}function _i(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx("label",{"data-slot":"label",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}function Se(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx("div",{"data-slot":"field-group",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}const Di=Ss("data-[invalid=true]:text-destructive gap-3 group/field flex w-full",{variants:{orientation:{vertical:"flex-col [&>*]:w-full [&>.sr-only]:w-auto",horizontal:"flex-row items-center [&>[data-slot=field-label]]:flex-auto has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px",responsive:"flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto @md/field-group:[&>[data-slot=field-label]]:flex-auto @md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"}},defaultVariants:{orientation:"vertical"}});function ke(s){const e=L.c(11);let i,t,r;e[0]!==s?({className:i,orientation:r,...t}=s,e[0]=s,e[1]=i,e[2]=t,e[3]=r):(i=e[1],t=e[2],r=e[3]);const n=r===void 0?"vertical":r;let a;e[4]!==i||e[5]!==n?(a=R(Di({orientation:n}),i),e[4]=i,e[5]=n,e[6]=a):a=e[6];let o;return e[7]!==n||e[8]!==t||e[9]!==a?(o=v.jsx("div",{role:"group","data-slot":"field","data-orientation":n,className:a,...t}),e[7]=n,e[8]=t,e[9]=a,e[10]=o):o=e[10],o}function Ae(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("has-data-checked:bg-primary/5 has-data-checked:border-primary dark:has-data-checked:bg-primary/10 group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50 has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-3","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx(_i,{"data-slot":"field-label",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}function Pi(s){const e=L.c(8);let i,t;e[0]!==s?({className:i,...t}=s,e[0]=s,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let r;e[3]!==i?(r=R("text-muted-foreground text-left text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance [[data-variant=legend]+&]:-mt-1.5","last:mt-0 nth-last-2:-mt-1","[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",i),e[3]=i,e[4]=r):r=e[4];let n;return e[5]!==t||e[6]!==r?(n=v.jsx("p",{"data-slot":"field-description",className:r,...t}),e[5]=t,e[6]=r,e[7]=n):n=e[7],n}const Ri=[["v1","V1"],["v2","V2"],["v3","V3 (V2 + min-max)"],["v3OverviewBoost","V4.5 (V2 + min-max * overview boost)"],["v3IteratedOverview","V4.4 (V2 + min-max * 3 * overview boost)"],["v3OverviewIterated","V4.3 (V2 + min-max * 3 + overview boost)"],["v3OverviewLatestIterated","V4.2 (V2 + min-max * 3 + overview boost applied latest)"],["v3OverviewLatest","V4.1 (V2 + min-max + overview boost applied latest)"],["v3Overview","V4 (V2 + min-max + overview boost)"],["v2Overview","V2 + overview"],["v1MinMax","V1 + min-max"],["v1Overview","V1 + min-max + overview"]];function ji(s){const e=L.c(35),{isOpen:i,onClose:t,onHintChange:r,onRetractChange:n,onVersionChange:a,onRendererChange:o}=s;let l;e[0]!==t?(l=A=>{A||t()},e[0]=t,e[1]=l):l=e[1];const u=l;let c,f;e[2]===Symbol.for("react.memo_cache_sentinel")?(c={hint:!1,retract:!1,version:"v3Overview",renderer:"svg"},f={onChange:Ei},e[2]=c,e[3]=f):(c=e[2],f=e[3]);let h;e[4]!==r||e[5]!==o||e[6]!==n||e[7]!==a?(h={defaultValues:c,validators:f,listeners:{onChange:A=>{const{formApi:E}=A,{hint:j,retract:K,version:F}=E.state.values;r(j),n(K),a(F),o(E.state.values.renderer)}}},e[4]=r,e[5]=o,e[6]=n,e[7]=a,e[8]=h):h=e[8];const d=mi(h);let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=v.jsx(Si,{children:v.jsx(wi,{children:js()})}),e[9]=m):m=e[9];let p;e[10]!==d?(p=A=>{A.preventDefault(),d.handleSubmit()},e[10]=d,e[11]=p):p=e[11];let b;e[12]!==d.Field?(b=v.jsx(Se,{children:v.jsx(d.Field,{name:"hint",children:Ui})}),e[12]=d.Field,e[13]=b):b=e[13];let g;e[14]!==d.Field?(g=v.jsx(Se,{children:v.jsx(d.Field,{name:"retract",children:Ki})}),e[14]=d.Field,e[15]=g):g=e[15];let M;e[16]!==d.Field?(M=v.jsx(Se,{children:v.jsx(d.Field,{name:"version",children:Ni})}),e[16]=d.Field,e[17]=M):M=e[17];let V;e[18]!==d.Field?(V=v.jsx(Se,{children:v.jsx(d.Field,{name:"renderer",children:Bi})}),e[18]=d.Field,e[19]=V):V=e[19];let S;e[20]!==t?(S=v.jsx(Fi,{children:v.jsx(Ne,{onClick:t,children:"OK"})}),e[20]=t,e[21]=S):S=e[21];let w;e[22]!==V||e[23]!==S||e[24]!==b||e[25]!==g||e[26]!==M?(w=v.jsxs("div",{className:"flex flex-col gap-2",children:[b,g,M,V,S]}),e[22]=V,e[23]=S,e[24]=b,e[25]=g,e[26]=M,e[27]=w):w=e[27];let x;e[28]!==w||e[29]!==p?(x=v.jsxs(Vi,{children:[m,v.jsx("form",{onSubmit:p,children:w})]}),e[28]=w,e[29]=p,e[30]=x):x=e[30];let k;return e[31]!==i||e[32]!==u||e[33]!==x?(k=v.jsx(bi,{open:i,onOpenChange:u,children:x}),e[31]=i,e[32]=u,e[33]=x,e[34]=k):k=e[34],k}function Bi(s){const e=s.state.meta.isTouched&&!s.state.meta.isValid;return v.jsxs(ke,{"data-invalid":e,children:[v.jsx(Ae,{htmlFor:s.name,children:Ns()}),v.jsx(Pi,{children:Us()}),v.jsxs(mt,{name:s.name,defaultValue:"svg",value:s.state.value,onValueChange:i=>s.handleChange(i??"svg"),children:[v.jsx(vt,{children:v.jsx(pt,{})}),v.jsx(gt,{children:["svg","canvas"].map($i)})]})]})}function $i(s){return v.jsx(bt,{value:s,children:s},s)}function Ni(s){const e=s.state.meta.isTouched&&!s.state.meta.isValid;return v.jsxs(ke,{"data-invalid":e,children:[v.jsx(Ae,{htmlFor:s.name,children:Ds()}),v.jsxs(mt,{name:s.name,defaultValue:"v3Overview",value:s.state.value,onValueChange:i=>s.handleChange(i??"v3Overview"),children:[v.jsx(vt,{children:v.jsx(pt,{})}),v.jsx(gt,{children:Ri.map(zi)})]})]})}function zi(s){const[e,i]=s;return v.jsx(bt,{value:e,children:i},e)}function Ki(s){const e=s.state.meta.isTouched&&!s.state.meta.isValid;return v.jsxs(ke,{orientation:"horizontal","data-invalid":e,children:[v.jsx(xt,{id:s.name,name:s.name,checked:s.state.value,onBlur:s.handleBlur,onCheckedChange:i=>s.handleChange(i===!0)}),v.jsx("div",{className:"leading-none",children:v.jsx(Ae,{htmlFor:s.name,children:Ts()})})]})}function Ui(s){const e=s.state.meta.isTouched&&!s.state.meta.isValid;return v.jsxs(ke,{orientation:"horizontal","data-invalid":e,children:[v.jsx(xt,{id:s.name,name:s.name,checked:s.state.value,onBlur:s.handleBlur,onCheckedChange:i=>s.handleChange(i===!0)}),v.jsx("div",{className:"leading-none",children:v.jsx(Ae,{htmlFor:s.name,children:ks()})})]})}function Hi(s){const e=L.c(6),i=me(Fs),t=me(ws),r=me(Es),n=me(xs);let a;return e[0]!==s||e[1]!==r||e[2]!==t||e[3]!==i||e[4]!==n?(a=v.jsx(ji,{...s,onHintChange:i,onRetractChange:t,onVersionChange:r,onRendererChange:n}),e[0]=s,e[1]=r,e[2]=t,e[3]=i,e[4]=n,e[5]=a):a=e[5],a}export{Hi as SmartSettingModal};
