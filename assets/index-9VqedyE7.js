import{r as w,a as oa,e as rk,c as de,j as E,R as fp,b as sk,g as ok,d as ws,f as ik,w as Qv,u as ml,h as Mr,o as ak,s as ck,i as Ig,k as qc,z as lk,C as uk,l as dp,m as ia}from"./main-B0ZVUJfb.js";const fk=e=>typeof e=="function",P=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(o){return t(o,n,r)}};case 4:return function(n,r,s,o){return arguments.length>=4?t(n,r,s,o):function(i){return t(i,n,r,s)}};case 5:return function(n,r,s,o,i){return arguments.length>=5?t(n,r,s,o,i):function(a){return t(a,n,r,s,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},Qe=e=>e,dk=Qe,Ca=e=>()=>e,Tg=Ca(!0),Ad=Ca(!1),qs=Ca(null),ew=Ca(void 0),hk=ew;function z(e,t,n,r,s,o,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return o(s(r(n(t(e)))));case 7:return i(o(s(r(n(t(e))))));case 8:return a(i(o(s(r(n(t(e)))))));case 9:return c(a(i(o(s(r(n(t(e))))))));default:{let l=arguments[0];for(let u=1;u<arguments.length;u++)l=arguments[u](l);return l}}}const hp=e=>(t,n)=>t===n||e(t,n),pk=P(2,(e,t)=>hp((n,r)=>e(t(n),t(r)))),mk=e=>hp((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}),Mg="effect/GlobalValue";let pi;const Le=(e,t)=>(pi||(globalThis[Mg]??=new Map,pi=globalThis[Mg]),pi.has(e)||pi.set(e,t()),pi.get(e)),Zn=e=>typeof e=="string",Ss=e=>typeof e=="number",vu=e=>typeof e=="boolean",wu=e=>typeof e=="bigint",Pd=e=>typeof e=="symbol",Ia=fk,gk=e=>e===void 0,yk=e=>!1,pp=e=>typeof e=="object"&&e!==null,Or=e=>pp(e)||Ia(e),Re=P(2,(e,t)=>Or(e)&&t in e),tw=P(2,(e,t)=>Re(e,"_tag")&&e._tag===t),Ks=e=>e==null,bk=e=>e!=null,vk=e=>e instanceof Date,wk=e=>typeof e=="string"||Re(e,Symbol.iterator),Sk=e=>pp(e)&&!Array.isArray(e),_k=e=>Re(e,"then")&&Ia(e.then),Su=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let nw=class rw{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new rw(this.self)}};const xk=335903614,Ek=4150755663,Rk=1481765933,kk=1284865837,Ok=9007199254740992,Ck=134217728;class Ik{_state;constructor(t,n,r,s){return Ks(n)&&Ks(t)?(n=Math.random()*4294967295>>>0,t=0):Ks(n)&&(n=t,t=0),Ks(s)&&Ks(r)?(s=this._state?this._state[3]:Ek,r=this._state?this._state[2]:xk):Ks(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),Ag(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*Ck+n)/Ok}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;Tk(this._state,t,n,Rk,kk),Ag(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const o=(s>>>27|r<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(o>>>i|o<<a)>>>0}}function Tk(e,t,n,r,s){let o=(n>>>16)*(s&65535)>>>0,i=(n&65535)*(s>>>16)>>>0,a=(n&65535)*(s&65535)>>>0,c=(n>>>16)*(s>>>16)+((i>>>16)+(o>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(c=c+1>>>0),c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,s)>>>0,e[0]=c,e[1]=a}function Ag(e,t,n,r,s){let o=t+r>>>0;const i=n+s>>>0;i>>>0<n>>>0&&(o=o+1|0),e[0]=o,e[1]=i}const $d=Symbol.for("effect/Utils/YieldWrap");class Ta{#n;constructor(t){this.#n=t}[$d](){return this.#n}}function Mk(e){if(typeof e=="object"&&e!==null&&$d in e)return e[$d]();throw new Error(Su("yieldWrapGet"))}const pn=Le("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),sw={effect_internal_function:e=>e()},Ak={effect_internal_function:e=>{try{return e()}finally{}}},Pk=sw.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,jt=Pk?sw.effect_internal_function:Ak.effect_internal_function,Vf=Le(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),Me=Symbol.for("effect/Hash"),me=e=>{if(pn.enabled===!0)return 0;switch(typeof e){case"number":return gp(e);case"bigint":return st(e.toString(10));case"boolean":return st(String(e));case"symbol":return st(String(e));case"string":return st(e);case"undefined":return st("undefined");case"function":case"object":return e===null?st("null"):e instanceof Date?Number.isNaN(e.getTime())?st("Invalid Date"):me(e.toISOString()):e instanceof URL?me(e.href):$k(e)?e[Me]():mp(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},mp=e=>(Vf.has(e)||Vf.set(e,gp(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Vf.get(e)),Fe=e=>t=>t*53^e,_u=e=>e&3221225471|e>>>1&1073741824,$k=e=>Re(e,Me),gp=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return _u(t)},st=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return _u(t)},Fk=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=z(st(t[r]),Fe(me(e[t[r]])));return _u(n)},ow=e=>Fk(e,Object.keys(e)),Ma=e=>{let t=6151;for(let n=0;n<e.length;n++)t=z(t,Fe(me(e[n])));return _u(t)},et=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,Me,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,Me,{value(){return t},enumerable:!1}),t},Oe=Symbol.for("effect/Equal");function Ce(){return arguments.length===1?e=>gl(e,arguments[0]):gl(arguments[0],arguments[1])}function gl(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(yl(e)&&yl(t))return me(e)===me(t)&&e[Oe](t)?!0:pn.enabled&&pn.tester?pn.tester(e,t):!1;if(e instanceof Date&&t instanceof Date){const r=e.getTime(),s=t.getTime();return r===s||Number.isNaN(r)&&Number.isNaN(s)}else if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(pn.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>gl(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const o of r)if(!(o in t&&gl(e[o],t[o])))return pn.tester?pn.tester(e,t):!1;return!0}}return pn.tester?pn.tester(e,t):!1}}return pn.enabled&&pn.tester?pn.tester(e,t):!1}const yl=e=>Re(e,Oe),yp=()=>Ce,Xe=Symbol.for("nodejs.util.inspect.custom"),bt=e=>{try{if(Re(e,"toJSON")&&Ia(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(bt)}catch{return{}}return Dk(e)},Bf="[Circular]";function Nk(e){try{return e.toISOString()}catch{return"Invalid Date"}}function Lk(e){try{const t=e.toString();return typeof t=="string"?t:String(t)}catch{return"[toString threw]"}}function iw(e){return Zn(e)?JSON.stringify(e):String(e)}function Ps(e,t){const n=new WeakSet,r=(i,a)=>{const c=i?.constructor;return c&&c!==Object.prototype.constructor&&c.name?`${c.name}(${a})`:a},s=i=>{try{return Reflect.ownKeys(i)}catch{return["[ownKeys threw]"]}};function o(i,a=0){if(Array.isArray(i))return n.has(i)?Bf:(n.add(i),`[${i.map(c=>o(c,a)).join(",")}]`);if(vk(i))return Nk(i);if(Re(i,"toString")&&Ia(i.toString)&&i.toString!==Object.prototype.toString&&i.toString!==Array.prototype.toString){const c=Lk(i);return i instanceof Error&&i.cause?`${c} (cause: ${o(i.cause,a)})`:c}if(Zn(i))return JSON.stringify(i);if(Ss(i)||i==null||vu(i)||Pd(i))return String(i);if(wu(i))return String(i)+"n";if(i instanceof Set||i instanceof Map)return n.has(i)?Bf:(n.add(i),`${i.constructor.name}(${o(Array.from(i),a)})`);if(Or(i)){if(n.has(i))return Bf;n.add(i);const c=s(i);{const l=`{${c.map(u=>`${iw(u)}:${o(i[u],a)}`).join(",")}}`;return r(i,l)}}return String(i)}return o(e,0)}const xt=e=>JSON.stringify(e,null,2),_o=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?aw(e,t):String(e)}catch{return String(e)}},aw=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,o)=>typeof o=="object"&&o!==null?n.includes(o)?void 0:n.push(o)&&(ps.fiberRefs!==void 0&&cw(o)?o[bp](ps.fiberRefs):o):o,t);return n=void 0,r},bp=Symbol.for("effect/Inspectable/Redactable"),cw=e=>typeof e=="object"&&e!==null&&bp in e,ps=Le("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),jk=(e,t)=>{const n=ps.fiberRefs;ps.fiberRefs=e;try{return t()}finally{ps.fiberRefs=n}},Dk=e=>cw(e)&&ps.fiberRefs!==void 0?e[bp](ps.fiberRefs):e,Ee=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},Ki="Async",xu="Commit",Sn="Failure",zf="OnFailure",bl="OnSuccess",vl="OnSuccessAndFailure",_n="Success",lw="Sync",Vk="Tag",Aa="UpdateRuntimeFlags",wl="While",Kc="Iterator",uw="WithRuntime",Hc="Yield",vp="RevertFlags";let Bk="3.19.14";const wp=()=>Bk,zk=Symbol.for("effect/Effect"),Uk=Symbol.for("effect/Stream"),Wk=Symbol.for("effect/Sink"),qk=Symbol.for("effect/Channel"),xo={_R:e=>e,_E:e=>e,_A:e=>e,_V:wp()},Kk={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},Hk={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Pa={[zk]:xo,[Uk]:xo,[Wk]:Kk,[qk]:Hk,[Oe](e){return this===e},[Me](){return et(this,mp(this))},[Symbol.iterator](){return new nw(new Ta(this))},pipe(){return Ee(this,arguments)}},Sp={[Me](){return et(this,ow(this))},[Oe](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&Ce(this[r],e[r])))return!1;return!0}},$a={...Pa,_op:xu},Gk={...$a,...Sp},Jk=(function(){function e(){}return e.prototype=$a,e})(),fw=Symbol.for("effect/Option"),dw={...Pa,[fw]:{_A:e=>e},[Xe](){return this.toJSON()},toString(){return xt(this.toJSON())}},Yk=Object.assign(Object.create(dw),{_tag:"Some",_op:"Some",[Oe](e){return hw(e)&&mw(e)&&Ce(this.value,e.value)},[Me](){return et(this,Fe(me(this._tag))(me(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:bt(this.value)}}}),Xk=me("None"),Zk=Object.assign(Object.create(dw),{_tag:"None",_op:"None",[Oe](e){return hw(e)&&pw(e)},[Me](){return Xk},toJSON(){return{_id:"Option",_tag:this._tag}}}),hw=e=>Re(e,fw),pw=e=>e._tag==="None",mw=e=>e._tag==="Some",Eu=Object.create(Zk),aa=e=>{const t=Object.create(Yk);return t.value=e,t},gw=Symbol.for("effect/Either"),yw={...Pa,[gw]:{_R:e=>e},[Xe](){return this.toJSON()},toString(){return xt(this.toJSON())}},Qk=Object.assign(Object.create(yw),{_tag:"Right",_op:"Right",[Oe](e){return _p(e)&&Ep(e)&&Ce(this.right,e.right)},[Me](){return Fe(me(this._tag))(me(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:bt(this.right)}}}),eO=Object.assign(Object.create(yw),{_tag:"Left",_op:"Left",[Oe](e){return _p(e)&&xp(e)&&Ce(this.left,e.left)},[Me](){return Fe(me(this._tag))(me(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:bt(this.left)}}}),_p=e=>Re(e,gw),xp=e=>e._tag==="Left",Ep=e=>e._tag==="Right",tO=e=>{const t=Object.create(eO);return t.left=e,t},nO=e=>{const t=Object.create(Qk);return t.right=e,t},rO=e=>Ep(e)?Eu:aa(e.left),sO=e=>xp(e)?Eu:aa(e.right),Ne=nO,ke=tO,oO=_p,Rt=xp,In=Ep,bw=rO,vw=P(2,(e,t)=>Rt(e)?ke(t(e.left)):Ne(e.right)),iO=P(2,(e,t)=>In(e)?Ne(t(e.right)):ke(e.left)),Rp=P(2,(e,{onLeft:t,onRight:n})=>Rt(e)?t(e.left):n(e.right)),aO=Rp({onLeft:Qe,onRight:Qe}),kp=P(2,(e,t)=>{if(In(e))return e.right;throw t(e.left)}),cO=kp(()=>new Error("getOrThrow called on a Left")),ww=e=>e.length>0,Op=e=>(t,n)=>t===n?0:e(t,n),Cp=Op((e,t)=>e<t?-1:1),Sw=P(2,(e,t)=>Op((n,r)=>e(t(n),t(r)))),lO=e=>{const t=Object.keys(e);return Op((n,r)=>{for(const s of t){const o=e[s](n[s],r[s]);if(o!==0)return o}return 0})},uO=e=>P(2,(t,n)=>e(t,n)===1),fO=e=>P(2,(t,n)=>t===n||e(t,n)>-1?t:n),ge=()=>Eu,be=aa,_t=pw,ct=mw,Gt=P(2,(e,{onNone:t,onSome:n})=>_t(e)?t():n(e.value)),dO=sO,lt=P(2,(e,t)=>_t(e)?t():e.value),gr=P(2,(e,t)=>_t(e)?t():e),hO=P(2,(e,t)=>_t(e)?be(t()):e),Ru=e=>e==null?ge():be(e),Un=lt(ew),pO=e=>(...t)=>{try{return be(e(...t))}catch{return ge()}},mO=P(2,(e,t)=>{if(ct(e))return e.value;throw t()}),ku=mO(()=>new Error("getOrThrow called on a None")),Ip=P(2,(e,t)=>_t(e)?ge():be(t(e.value))),Fa=P(2,(e,t)=>_t(e)?ge():t(e.value)),gO=P(2,(e,t)=>_t(e)?ge():Ru(t(e.value))),yO=e=>P(2,(t,n)=>_t(t)?!1:e(t.value,n)),bO=yp(),vO=yO(bO),wO=P(2,(e,t)=>_t(e)?!1:t(e.value)),SO=(...e)=>e,_O=P(3,(e,t,n)=>{if(Array.isArray(e))return e.reduce(n,t);let r=0,s=t;for(const o of e)s=n(s,o,r++);return s}),xO=()=>({}),EO=P(2,(e,t)=>Object.prototype.hasOwnProperty.call(e,t)),RO=P(2,(e,t)=>EO(e,t)?be(e[t]):ge()),kO=P(2,(e,t)=>{const n={...e};for(const r of OO(e))n[r]=t(e[r],r);return n}),OO=e=>Object.keys(e),Pg=P(3,(e,t,n)=>({...e,[t]:n})),Ou=e=>new Array(e),dr=P(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r}),Ye=e=>Array.isArray(e)?e:Array.from(e),CO=e=>Array.isArray(e)?e:[e],IO=P(2,(e,{onEmpty:t,onNonEmpty:n})=>ot(e)?n(Bt(e),_s(e)):t()),Sl=P(2,(e,t)=>[t,...e]),TO=P(2,(e,t)=>[...e,t]),_w=P(2,(e,t)=>Ye(e).concat(Ye(t))),MO=Array.isArray,AO=e=>e.length===0,PO=AO,fo=ww,ot=ww,xw=e=>e.length,Ew=(e,t)=>e<0||e>=t.length,$O=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),FO=P(2,(e,t)=>{const n=Math.floor(t);return Ew(n,e)?ge():be(e[n])}),Rw=P(2,(e,t)=>{const n=Math.floor(t);if(Ew(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Hi=FO(0),Bt=Rw(0),NO=e=>ot(e)?be(kw(e)):ge(),kw=e=>e[e.length-1],_s=e=>e.slice(1),LO=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},jO=P(2,(e,t)=>zO(e,LO(e,t))),DO=P(2,(e,t)=>{const n=Ye(e);return n.slice($O(t,n),n.length)}),$g=e=>Array.from(e).reverse(),ca=P(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),Fg=P(2,(e,t)=>VO(e,t,SO)),VO=P(3,(e,t,n)=>{const r=Ye(e),s=Ye(t);if(ot(r)&&ot(s)){const o=[n(Bt(r),Bt(s))],i=Math.min(r.length,s.length);for(let a=1;a<i;a++)o[a]=n(r[a],s[a]);return o}return[]}),BO=yp(),zO=P(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return ot(n)?r>=1?UO(n,r):[[],n]:[n,[]]}),UO=P(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Di(e),[]]:[Sl(e.slice(1,n),Bt(e)),e.slice(n)]}),Di=e=>e.slice(),WO=P(2,(e,t)=>{const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):n[s]=[r]}return n}),qO=P(3,(e,t,n)=>{const r=Ye(e),s=Ye(t);return ot(r)?ot(s)?Mw(n)(_w(r,s)):r:s}),Gc=P(2,(e,t)=>qO(e,t,BO)),Eo=()=>[],Cn=e=>[e],ho=P(2,(e,t)=>e.map(t)),Ow=P(2,(e,t)=>{if(PO(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let o=0;o<s.length;o++)n.push(s[o])}return n}),Tp=Ow(Qe),KO=P(2,(e,t)=>{const n=Ye(e),r=[];for(let s=0;s<n.length;s++){const o=t(n[s],s);ct(o)&&r.push(o.value)}return r}),Cw=P(2,(e,t)=>{const n=Ye(e),r=[];for(let s=0;s<n.length;s++)t(n[s],s)&&r.push(n[s]);return r}),Iw=P(3,(e,t,n)=>Ye(e).reduce((r,s,o)=>n(r,s,o),t)),Tw=P(2,(e,t)=>e.reduce(fO(t))),Ng=(e,t)=>{const n=[];let r=e,s;for(;ct(s=t(r));){const[o,i]=s.value;n.push(o),r=i}return n},Mp=mk,Mw=P(2,(e,t)=>{const n=Ye(e);if(ot(n)){const r=[Bt(n)],s=_s(n);for(const o of s)r.every(i=>!t(o,i))&&r.push(o);return r}return[]}),HO=e=>Mw(e,yp()),$s=P(2,(e,t)=>Ye(e).join(t)),Aw=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Aw(e,t.from)}},Pw=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},$w=e=>Array.isArray(e),GO=e=>!Array.isArray(e),Lg=e=>`[${iw(e)}]`,JO=e=>$w(e)?e.map(Lg).join(""):Lg(e),Jr=(e,t,n,r)=>{let s=e;return t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},YO=e=>Jr("Invalid Argument",e),XO=e=>Jr("Unsupported key schema",void 0,void 0,e),ZO=e=>Jr("Unsupported literal",`literal value: ${Ps(e)}`),jg=e=>Jr("Duplicate index signature",`${e} index signature`),QO=Jr("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),eC=Jr("Invalid element","A required element cannot follow an optional element. ts(1257)"),Dg=e=>Jr("Duplicate property signature transformation",`Duplicate key ${Ps(e)}`),tC=e=>Jr("Duplicate property signature",`Duplicate key ${Ps(e)}`),nC=Symbol.for("effect/SchemaId/ItemsCount"),rC=P(2,(e,t)=>e+t),Fw=e=>_O(e,0,rC),Ro=Cp,_l=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),sC=Symbol.for("effect/annotation/TypeConstructor"),Nw=Symbol.for("effect/annotation/Brand"),oC=Symbol.for("effect/annotation/SchemaId"),Lw=Symbol.for("effect/annotation/Message"),Ap=Symbol.for("effect/annotation/MissingMessage"),Pp=Symbol.for("effect/annotation/Identifier"),Na=Symbol.for("effect/annotation/Title"),Fd=Symbol.for("effect/annotation/AutoTitle"),jw=Symbol.for("effect/annotation/Description"),Dw=Symbol.for("effect/annotation/Examples"),Vw=Symbol.for("effect/annotation/Default"),Bw=Symbol.for("effect/annotation/JSONSchema"),zw=Symbol.for("effect/annotation/Arbitrary"),Uw=Symbol.for("effect/annotation/Pretty"),Ww=Symbol.for("effect/annotation/Equivalence"),iC=Symbol.for("effect/annotation/Documentation"),qw=Symbol.for("effect/annotation/Concurrency"),Kw=Symbol.for("effect/annotation/Batching"),Hw=Symbol.for("effect/annotation/ParseIssueTitle"),Gw=Symbol.for("effect/annotation/ParseOptions"),Jw=Symbol.for("effect/annotation/DecodingFallback"),Yw=Symbol.for("effect/annotation/Surrogate"),Xw=Symbol.for("effect/annotation/StableFilter"),zt=P(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?be(e.annotations[t]):ge()),Zw=zt(Nw),aC=zt(Lw),cC=zt(Ap),Qw=zt(Na),eS=zt(Fd),Cu=zt(Pp),tS=zt(jw),lC=zt(qw),uC=zt(Kw),fC=zt(Hw),dC=zt(Gw),hC=zt(Jw),nS=zt(Yw),pC=zt(Xw),mC=e=>wO(pC(e),t=>t===!0),rS=Symbol.for("effect/annotation/JSONIdentifier"),gC=zt(rS),yC=e=>gr(gC(e),()=>Cu(e));class sS{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(t,n,r,s={}){this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return lt(An(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:Pt(this.annotations)}}}const La=e=>t=>t._tag===e;let xl=class{literal;annotations;_tag="Literal";constructor(t,n={}){this.literal=t,this.annotations=n}toString(){return lt(An(this),()=>Ps(this.literal))}toJSON(){return{_tag:this._tag,literal:wu(this.literal)?String(this.literal):this.literal,annotations:Pt(this.annotations)}}};const Vg=La("Literal"),bC=new xl(null);class vC{symbol;annotations;_tag="UniqueSymbol";constructor(t,n={}){this.symbol=t,this.annotations=n}toString(){return lt(An(this),()=>Ps(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Pt(this.annotations)}}}class wC{annotations;_tag="NeverKeyword";constructor(t={}){this.annotations=t}toString(){return Np(this)}toJSON(){return{_tag:this._tag,annotations:Pt(this.annotations)}}}const oS=new wC({[Na]:"never"});class SC{annotations;_tag="UnknownKeyword";constructor(t={}){this.annotations=t}toString(){return Np(this)}toJSON(){return{_tag:this._tag,annotations:Pt(this.annotations)}}}const _C=new SC({[Na]:"unknown"});class xC{annotations;_tag="AnyKeyword";constructor(t={}){this.annotations=t}toString(){return Np(this)}toJSON(){return{_tag:this._tag,annotations:Pt(this.annotations)}}}const EC=new xC({[Na]:"any"}),RC=La("StringKeyword"),kC=La("SymbolKeyword");let OC=class{enums;annotations;_tag="Enums";constructor(t,n={}){this.enums=t,this.annotations=n}toString(){return lt(An(this),()=>`<enum ${this.enums.length} value(s): ${this.enums.map(([t,n])=>JSON.stringify(n)).join(" | ")}>`)}toJSON(){return{_tag:this._tag,enums:this.enums,annotations:Pt(this.annotations)}}},Iu=class{type;annotations;constructor(t,n={}){this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:Pt(this.annotations)}}toString(){return String(this.type)}};class Tu extends Iu{isOptional;constructor(t,n,r={}){super(t,r),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Pt(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const iS=e=>e.map(t=>t.type);class $p{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(t,n,r,s={}){this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let o=!1,i=!1;for(const a of t)if(a.isOptional)o=!0;else if(o){i=!0;break}if(i||o&&n.length>1)throw new Error(eC)}toString(){return lt(An(this),()=>CC(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:Pt(this.annotations)}}}const CC=e=>{const t=e.elements.map(String).join(", ");return IO(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),o=s.includes(" | ")?`(${s})`:s;if(r.length>0){const i=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${o}[], ${i}]`:`readonly [...${o}[], ${i}]`}else return e.elements.length>0?`readonly [${t}, ...${o}[]]`:`ReadonlyArray<${s}>`}})};class Mt extends Tu{name;isReadonly;constructor(t,n,r,s,o){super(n,r,o),this.name=t,this.isReadonly=s}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Pt(this.annotations)}}}const aS=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return aS(e.from)}return!1};class Mu{type;isReadonly;parameter;constructor(t,n,r){if(this.type=n,this.isReadonly=r,aS(t))this.parameter=t;else throw new Error(QO)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class ms{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(t,n,r={}){this.annotations=r;const s={};for(let i=0;i<t.length;i++){const a=t[i].name;if(Object.prototype.hasOwnProperty.call(s,a))throw new Error(tC(a));s[a]=null}const o={string:!1,symbol:!1};for(let i=0;i<n.length;i++){const a=gS(n[i].parameter);if(RC(a)){if(o.string)throw new Error(jg("string"));o.string=!0}else if(kC(a)){if(o.symbol)throw new Error(jg("symbol"));o.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return lt(An(this),()=>IC(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:Pt(this.annotations)}}}const Bg=e=>e.map(String).join("; "),IC=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${Bg(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${Bg(e.indexSignatures)} }`:"{}"},TC=ca(Sw(Ro,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),MC={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},cS=e=>Ow(e,t=>lS(t)?cS(t.types):[t]),AC=e=>{const t=TC(e),n=[],r={},s=[];for(const o of t)switch(o._tag){case"NeverKeyword":break;case"AnyKeyword":return[EC];case"UnknownKeyword":return[_C];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[o._tag]||(r[o._tag]=o,n.push(o));break}case"Literal":{const i=typeof o.literal;switch(i){case"string":case"number":case"bigint":case"boolean":{const a=MC[i];!r[a]&&!s.includes(o.literal)&&(s.push(o.literal),n.push(o));break}case"object":{s.includes(o.literal)||(s.push(o.literal),n.push(o));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(o.symbol)&&(s.push(o.symbol),n.push(o));break}case"TupleType":{r.ObjectKeyword||n.push(o);break}case"TypeLiteral":{o.propertySignatures.length===0&&o.indexSignatures.length===0?r["{}"]||(r["{}"]=o,n.push(o)):r.ObjectKeyword||n.push(o);break}default:n.push(o)}return n};let Wn=class Nd{types;annotations;static make=(t,n)=>Fp(t)?new Nd(t,n):t.length===1?t[0]:oS;static unify=(t,n)=>Nd.make(AC(cS(t)),n);_tag="Union";constructor(t,n={}){this.types=t,this.annotations=n}toString(){return lt(An(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:Pt(this.annotations)}}};const PC=(e,t)=>e.map(t),Fp=e=>e.length>1,lS=La("Union"),Uf=Le(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class uS{f;annotations;_tag="Suspend";constructor(t,n={}){this.f=t,this.annotations=n,this.f=Pw(t)}toString(){return An(this).pipe(gr(()=>Fa(pO(this.f)(),t=>An(t))),lt(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=Uf.get(t);return n||(Uf.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:Pt(this.annotations)},Uf.set(t,n),n)}}let fS=class{from;filter;annotations;_tag="Refinement";constructor(t,n,r={}){this.from=t,this.filter=n,this.annotations=r}toString(){return Cu(this).pipe(lt(()=>Gt(yS(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>dS(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Pt(this.annotations)}}};const dS=La("Refinement"),Wf={};let $C=class{from;to;transformation;annotations;_tag="Transformation";constructor(t,n,r,s={}){this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return lt(An(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Pt(this.annotations)}}};class FC{from;to;decode;encode;constructor(t,n,r,s){this.from=t,this.to=n,this.decode=r,this.encode=s}}class NC{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(t){this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const o=s.from;if(n[o])throw new Error(Dg(o));n[o]=!0;const i=s.to;if(r[i])throw new Error(Dg(i));r[i]=!0}}}const Au=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={...e.annotations};delete r[Pp];const s={...r,...t},o=nS(e);return ct(o)&&(s[Yw]=Au(o.value,t)),n.annotations.value=s,Object.create(Object.getPrototypeOf(e),n)},LC="[\\s\\S]*?",jC="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",hS=(e,t)=>{switch(e._tag){case"Literal":return _l(String(e.literal));case"StringKeyword":return LC;case"NumberKeyword":return jC;case"TemplateLiteral":return pS(e);case"Union":return e.types.map(n=>hS(n)).join("|")}},DC=(e,t,n,r)=>lS(e)?`(${t})`:t,pS=(e,t,n)=>{let r="";if(e.head!==""){const s=_l(e.head);r+=s}for(const s of e.spans){const o=hS(s.type);if(r+=DC(s.type,o),s.literal!==""){const i=_l(s.literal);r+=i}}return r},VC=e=>new RegExp(`^${pS(e)}$`),zg=(e,t)=>{const n=[],r=[],s=o=>{switch(o._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new Mu(o,t,!0));break;case"Literal":if(Zn(o.literal)||Ss(o.literal))n.push(new Mt(o.literal,t,!1,!0));else throw new Error(ZO(o.literal));break;case"Enums":{for(const[i,a]of o.enums)n.push(new Mt(a,t,!1,!0));break}case"UniqueSymbol":n.push(new Mt(o.symbol,t,!1,!0));break;case"Union":o.types.forEach(s);break;default:throw new Error(XO(o))}};return s(e),{propertySignatures:n,indexSignatures:r}},mS=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(n===void 0&&(n={}),n[r]=t.annotations[r]);return n},BC=mS([Dw,Vw,Bw,zw,Uw,Ww]),Ft=e=>{switch(e._tag){case"Declaration":{const t=yn(e.typeParameters,Ft);return t===e.typeParameters?e:new sS(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=yn(e.elements,s=>{const o=Ft(s.type);return o===s.type?s:new Tu(o,s.isOptional)}),n=iS(e.rest),r=yn(n,Ft);return t===e.elements&&r===n?e:new $p(t,r.map(s=>new Iu(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=yn(e.propertySignatures,r=>{const s=Ft(r.type);return s===r.type?r:new Mt(r.name,s,r.isOptional,r.isReadonly)}),n=yn(e.indexSignatures,r=>{const s=Ft(r.type);return s===r.type?r:new Mu(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new ms(t,n,e.annotations)}case"Union":{const t=yn(e.types,Ft);return t===e.types?e:Wn.make(t,e.annotations)}case"Suspend":return new uS(()=>Ft(e.f()),e.annotations);case"Refinement":{const t=Ft(e.from);return t===e.from?e:new fS(t,e.filter,e.annotations)}case"Transformation":{const t=BC(e);return Ft(t!==void 0?Au(e.to,t):e.to)}}return e};function yn(e,t){let n=!1;const r=Ou(e.length);for(let s=0;s<e.length;s++){const o=e[s],i=t(o);i!==o&&(n=!0),r[s]=i}return n?r:e}const Vn=(e,t)=>{switch(e._tag){case"Declaration":{const n=yn(e.typeParameters,r=>Vn(r));return n===e.typeParameters?e:new sS(n,e.decodeUnknown,e.encodeUnknown)}case"TupleType":{const n=yn(e.elements,o=>{const i=Vn(o.type);return i===o.type?o:new Tu(i,o.isOptional)}),r=iS(e.rest),s=yn(r,o=>Vn(o));return n===e.elements&&s===r?e:new $p(n,s.map(o=>new Iu(o)),e.isReadonly)}case"TypeLiteral":{const n=yn(e.propertySignatures,s=>{const o=Vn(s.type);return o===s.type?s:new Mt(s.name,o,s.isOptional,s.isReadonly)}),r=yn(e.indexSignatures,s=>{const o=Vn(s.type);return o===s.type?s:new Mu(s.parameter,o,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new ms(n,r)}case"Union":{const n=yn(e.types,r=>Vn(r));return n===e.types?e:Wn.make(n)}case"Suspend":{let n;const r=yC(e);return ct(r)&&(n={[rS]:`${r.value}Encoded`}),new uS(()=>Vn(e.f()),n)}case"Refinement":return Vn(e.from);case"Transformation":return Vn(e.from)}return e},Ug=e=>Vn(e),Pt=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},gS=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return gS(e.from)}},Np=e=>lt(An(e),()=>e._tag);function zC(e){return Gt(Zw(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${Ps(n)}>`).join("")})}const yS=e=>Qw(e).pipe(gr(()=>tS(e)),gr(()=>eS(e)),Ip(t=>t+zC(e))),An=e=>gr(Cu(e),()=>yS(e)),Wg=Symbol.for("effect/Brand/Refined"),Pu=(e,t)=>[{message:e,meta:t}];function $u(...e){const t=e.length===2?n=>e[0](n)?Ne(n):ke(e[1](n)):n=>Gt(e[0](n),{onNone:()=>Ne(n),onSome:ke});return Object.assign(n=>kp(t(n),Qe),{[Wg]:Wg,option:n=>dO(t(n)),either:t,is:n=>In(t(n))})}const UC=Symbol.for("effect/Context/Tag"),El=Symbol.for("effect/Context/Reference"),WC="effect/STM",qC=Symbol.for(WC),bS={...Pa,_op:"Tag",[qC]:xo,[UC]:{_Service:e=>e,_Identifier:e=>e},toString(){return xt(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Xe](){return this.toJSON()},of(e){return e},context(e){return wS(this,e)}},KC={...bS,[El]:El},HC=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(bS);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},GC=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=n;function s(){}return Object.setPrototypeOf(s,KC),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get(){return r.stack}}),s},vS=Symbol.for("effect/Context"),JC={[vS]:{_Services:e=>e},[Oe](e){if(XC(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!Ce(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[Me](){return et(this,gp(this.unsafeMap.size))},pipe(){return Ee(this,arguments)},toString(){return xt(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(bt)}},[Xe](){return this.toJSON()}},ko=e=>{const t=Object.create(JC);return t.unsafeMap=e,t},YC=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},XC=e=>Re(e,vS),ZC=e=>Re(e,El),QC=ko(new Map),eI=()=>QC,wS=(e,t)=>ko(new Map([[e.key,t]])),tI=P(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),ko(r)}),qf=Le("effect/Context/defaultValueCache",()=>new Map),Lp=e=>{if(qf.has(e.key))return qf.get(e.key);const t=e.defaultValue();return qf.set(e.key,t),t},nI=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Lp(t),SS=P(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(El in t)return Lp(t);throw YC(t)}return e.unsafeMap.get(t.key)}),rI=SS,sI=P(2,(e,t)=>e.unsafeMap.has(t.key)?aa(e.unsafeMap.get(t.key)):ZC(t)?aa(Lp(t)):Eu),oI=P(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return ko(n)}),Fs=HC,jp=eI,iI=wS,mi=tI,_S=rI,xS=SS,ja=sI,ES=oI,RS=GC,kS=Symbol.for("effect/Chunk");function aI(e,t,n,r,s){for(let o=t;o<Math.min(e.length,t+s);o++)n[r+o-t]=e[o];return n}const OS=[],cI=e=>hp((t,n)=>t.length===n.length&&gs(t).every((r,s)=>e(r,po(n,s)))),lI=cI(Ce),uI={[kS]:{_A:e=>e},toString(){return xt(this.toJSON())},toJSON(){return{_id:"Chunk",values:gs(this).map(bt)}},[Xe](){return this.toJSON()},[Oe](e){return CS(e)&&lI(this,e)},[Me](){return et(this,Ma(gs(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return OS[Symbol.iterator]();default:return gs(this)[Symbol.iterator]()}},pipe(){return Ee(this,arguments)}},mt=e=>{const t=Object.create(uI);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=qn,t.right=qn;break}case"ISingleton":{t.length=1,t.depth=0,t.left=qn,t.right=qn;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=qn,t.right=qn;break}}return t},CS=e=>Re(e,kS),qn=mt({_tag:"IEmpty"}),Sr=()=>qn,Kf=(...e)=>hI(e),on=e=>mt({_tag:"ISingleton",a:e}),IS=e=>CS(e)?e:Fu(Ye(e)),Ld=(e,t,n)=>{switch(e.backing._tag){case"IArray":{aI(e.backing.array,0,t,n,e.length);break}case"IConcat":{Ld(e.left,t,n),Ld(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=po(e,r),r+=1,s+=1;break}}},fI=e=>{switch(e.backing._tag){case"IEmpty":return OS;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return Ld(e,t,0),e.backing={_tag:"IArray",array:t},e.left=qn,e.right=qn,e.depth=0,t}}},gs=fI,dI=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return mt({_tag:"IArray",array:$g(e.backing.array)});case"IConcat":return mt({_tag:"IConcat",left:Oo(e.backing.right),right:Oo(e.backing.left)});case"ISlice":return Fu($g(gs(e)))}},Oo=dI,Fu=e=>e.length===0?Sr():e.length===1?on(e[0]):mt({_tag:"IArray",array:e}),hI=e=>Fu(e),po=P(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?po(e.left,t):po(e.right,t-e.left.length);case"ISlice":return po(e.backing.chunk,t+e.backing.offset)}}),pI=P(2,(e,t)=>Tn(e,on(t))),Pn=P(2,(e,t)=>Tn(on(t),e)),jd=P(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return qn;switch(e.backing._tag){case"ISlice":return mt({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?jd(e.right,t-e.left.length):mt({_tag:"IConcat",left:jd(e.left,t),right:e.right});default:return mt({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),Tn=P(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return mt({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=Tn(e.right,t);return mt({_tag:"IConcat",left:e.left,right:r})}else{const r=Tn(e.right.right,t);if(r.depth===e.depth-3){const s=mt({_tag:"IConcat",left:e.right.left,right:r});return mt({_tag:"IConcat",left:e.left,right:s})}else{const s=mt({_tag:"IConcat",left:e.left,right:e.right.left});return mt({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=Tn(e,t.left);return mt({_tag:"IConcat",left:r,right:t.right})}else{const r=Tn(e,t.left.left);if(r.depth===t.depth-3){const s=mt({_tag:"IConcat",left:r,right:t.left.right});return mt({_tag:"IConcat",left:s,right:t.right})}else{const s=mt({_tag:"IConcat",left:t.left.right,right:t.right});return mt({_tag:"IConcat",left:r,right:s})}}}),mI=e=>e.length===0,Co=e=>e.length>0,TS=e=>po(e,0),Io=TS,is=e=>jd(e,1),Dd=Symbol.for("effect/Duration"),MS=BigInt(0),qg=BigInt(24),dc=BigInt(60),Vd=BigInt(1e3),Kg=BigInt(1e6),Hg=BigInt(1e9),gI=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,Qn=e=>{if(AS(e))return e;if(Ss(e))return Bd(e);if(wu(e))return Hf(e);if(Array.isArray(e)&&e.length===2&&e.every(Ss))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?PS:e[0]===1/0||e[1]===1/0?wI:Hf(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Zn(e)){const t=gI.exec(e);if(t){const[n,r,s]=t,o=Number(r);switch(s){case"nano":case"nanos":return Hf(BigInt(r));case"micro":case"micros":return SI(BigInt(r));case"milli":case"millis":return Bd(o);case"second":case"seconds":return _I(o);case"minute":case"minutes":return xI(o);case"hour":case"hours":return EI(o);case"day":case"days":return RI(o);case"week":case"weeks":return kI(o)}}}throw new Error("Invalid DurationInput")},Gg={_tag:"Millis",millis:0},yI={_tag:"Infinity"},bI={[Dd]:Dd,[Me](){return et(this,ow(this.value))},[Oe](e){return AS(e)&&PI(this,e)},toString(){return`Duration(${FI(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:CI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Xe](){return this.toJSON()},pipe(){return Ee(this,arguments)}},nr=e=>{const t=Object.create(bI);return Ss(e)?isNaN(e)||e<=0?t.value=Gg:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=yI:e<=MS?t.value=Gg:t.value={_tag:"Nanos",nanos:e},t},AS=e=>Re(e,Dd),vI=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===MS;case"Infinity":return!1}},PS=nr(0),wI=nr(1/0),Hf=e=>nr(e),SI=e=>nr(e*Vd),Bd=e=>nr(e),_I=e=>nr(e*1e3),xI=e=>nr(e*6e4),EI=e=>nr(e*36e5),RI=e=>nr(e*864e5),kI=e=>nr(e*6048e5),zd=e=>II(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),OI=e=>{const t=Qn(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},CI=e=>{const t=Qn(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Hg),Number(t.value.nanos%Hg)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},II=P(2,(e,t)=>{const n=Qn(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Dp=P(3,(e,t,n)=>{const r=Qn(e),s=Qn(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(zd(r),zd(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const o=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),i=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(o,i)}return n.onMillis(r.value.millis,s.value.millis)}),TI=(e,t)=>Dp(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),MI=P(2,(e,t)=>Dp(e,t,{onMillis:(n,r)=>n<=r,onNanos:(n,r)=>n<=r})),AI=P(2,(e,t)=>Dp(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),PI=P(2,(e,t)=>TI(Qn(e),Qn(t))),$I=e=>{const t=Qn(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=OI(t),r=n/Kg,s=r/Vd,o=s/dc,i=o/dc,a=i/qg;return{days:Number(a),hours:Number(i%qg),minutes:Number(o%dc),seconds:Number(s%dc),millis:Number(r%Vd),nanos:Number(n%Kg)}},FI=e=>{const t=Qn(e);if(t.value._tag==="Infinity")return"Infinity";if(vI(t))return"0";const n=$I(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},xs=5,Vp=Math.pow(2,xs),NI=Vp-1,LI=Vp/2,jI=Vp/4;function DI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function To(e,t){return t>>>e&NI}function oo(e){return 1<<e}function $S(e,t){return DI(e&t-1)}const VI=(e,t)=>({value:e,previous:t});function mo(e,t,n,r){let s=r;if(!e){const o=r.length;s=new Array(o);for(let i=0;i<o;++i)s[i]=r[i]}return s[t]=n,s}function FS(e,t,n){const r=n.length-1;let s=0,o=0,i=n;if(e)s=o=t;else for(i=new Array(r);s<t;)i[o++]=n[s++];for(++s;s<=r;)i[o++]=n[s++];return e&&(i.length=r),i}function BI(e,t,n,r){const s=r.length;if(e){let c=s;for(;c>=t;)r[c--]=r[c];return r[t]=n,r}let o=0,i=0;const a=new Array(s+1);for(;o<t;)a[i++]=r[o++];for(a[t]=n;o<s;)a[++i]=r[o++];return a}class Ur{_tag="EmptyNode";modify(t,n,r,s,o,i){const a=r(ge());return _t(a)?new Ur:(++i.value,new ys(t,s,o,a))}}function Mn(e){return tw(e,"EmptyNode")}function zI(e){return Mn(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Nu(e,t){return Mn(e)?!1:t===e.edit}class ys{edit;hash;key;value;_tag="LeafNode";constructor(t,n,r,s){this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,o,i){if(Ce(o,this.key)){const c=r(this.value);return c===this.value?this:_t(c)?(--i.value,new Ur):Nu(this,t)?(this.value=c,this):new ys(t,s,o,c)}const a=r(ge());return _t(a)?this:(++i.value,NS(t,n,this.hash,this,s,new ys(t,s,o,a)))}}class Bp{edit;hash;children;_tag="CollisionNode";constructor(t,n,r){this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,o,i){if(s===this.hash){const c=Nu(this,t),l=this.updateCollisionList(c,t,this.hash,this.children,r,o,i);return l===this.children?this:l.length>1?new Bp(t,this.hash,l):l[0]}const a=r(ge());return _t(a)?this:(++i.value,NS(t,n,this.hash,this,s,new ys(t,s,o,a)))}updateCollisionList(t,n,r,s,o,i,a){const c=s.length;for(let u=0;u<c;++u){const f=s[u];if("key"in f&&Ce(i,f.key)){const h=f.value,d=o(h);return d===h?s:_t(d)?(--a.value,FS(t,u,s)):mo(t,u,new ys(n,r,i,d),s)}}const l=o(ge());return _t(l)?s:(++a.value,mo(t,c,new ys(n,r,i,l),s))}}class Mo{edit;mask;children;_tag="IndexedNode";constructor(t,n,r){this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,o,i){const a=this.mask,c=this.children,l=To(n,s),u=oo(l),f=$S(a,u),h=a&u,d=Nu(this,t);if(!h){const b=new Ur().modify(t,n+xs,r,s,o,i);return b?c.length>=LI?WI(t,l,b,a,c):new Mo(t,a|u,BI(d,f,b,c)):this}const p=c[f],m=p.modify(t,n+xs,r,s,o,i);if(p===m)return this;let y=a,g;if(Mn(m)){if(y&=~u,!y)return new Ur;if(c.length<=2&&zI(c[f^1]))return c[f^1];g=FS(d,f,c)}else g=mo(d,f,m,c);return d?(this.mask=y,this.children=g,this):new Mo(t,y,g)}}class zp{edit;size;children;_tag="ArrayNode";constructor(t,n,r){this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,o,i){let a=this.size;const c=this.children,l=To(n,s),u=c[l],f=(u||new Ur).modify(t,n+xs,r,s,o,i);if(u===f)return this;const h=Nu(this,t);let d;if(Mn(u)&&!Mn(f))++a,d=mo(h,l,f,c);else if(!Mn(u)&&Mn(f)){if(--a,a<=jI)return UI(t,a,l,c);d=mo(h,l,new Ur,c)}else d=mo(h,l,f,c);return h?(this.size=a,this.children=d,this):new zp(t,a,d)}}function UI(e,t,n,r){const s=new Array(t-1);let o=0,i=0;for(let a=0,c=r.length;a<c;++a)if(a!==n){const l=r[a];l&&!Mn(l)&&(s[o++]=l,i|=1<<a)}return new Mo(e,i,s)}function WI(e,t,n,r,s){const o=[];let i=r,a=0;for(let c=0;i;++c)i&1&&(o[c]=s[a++]),i>>>=1;return o[t]=n,new zp(e,a+1,o)}function qI(e,t,n,r,s,o){if(n===s)return new Bp(e,n,[o,r]);const i=To(t,n),a=To(t,s);if(i===a)return c=>new Mo(e,oo(i)|oo(a),[c]);{const c=i<a?[r,o]:[o,r];return new Mo(e,oo(i)|oo(a),c)}}function NS(e,t,n,r,s,o){let i,a=t;for(;;){const c=qI(e,a,n,r,s,o);if(typeof c=="function")i=VI(c,i),a=a+xs;else{let l=c;for(;i!=null;)l=i.value(l),i=i.previous;return l}}}const LS="effect/HashMap",Ud=Symbol.for(LS),KI={[Ud]:Ud,[Symbol.iterator](){return new Lu(this,(e,t)=>[e,t])},[Me](){let e=me(LS);for(const t of this)e^=z(me(t[0]),Fe(me(t[1])));return et(this,e)},[Oe](e){if(JI(e)){if(e._size!==this._size)return!1;for(const t of this){const n=z(e,Wp(t[0],me(t[0])));if(_t(n))return!1;if(!Ce(t[1],n.value))return!1}return!0}return!1},toString(){return xt(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(bt)}},[Xe](){return this.toJSON()},pipe(){return Ee(this,arguments)}},Up=(e,t,n,r)=>{const s=Object.create(KI);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};class Lu{map;f;v;constructor(t,n){this.map=t,this.f=n,this.v=jS(this.map._root,this.f,void 0)}next(){if(_t(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Rl(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Lu(this.map,this.f)}}const Rl=e=>e?DS(e[0],e[1],e[2],e[3],e[4]):ge(),jS=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return ct(e.value)?be({value:t(e.key,e.value.value),cont:n}):Rl(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return DS(r.length,r,0,t,n)}default:return Rl(n)}},DS=(e,t,n,r,s)=>{for(;n<e;){const o=t[n++];if(o&&!Mn(o))return jS(o,r,[e,t,n,r,s])}return Rl(s)},HI=Up(!1,0,new Ur,0),ju=()=>HI,GI=e=>{const t=BS(ju());for(const n of e)la(t,n[0],n[1]);return eT(t)},JI=e=>Re(e,Ud),YI=e=>e&&Mn(e._root),XI=P(2,(e,t)=>Wp(e,t,me(t))),Wp=P(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return Ce(t,r.key)?r.value:ge();case"CollisionNode":{if(n===r.hash){const o=r.children;for(let i=0,a=o.length;i<a;++i){const c=o[i];if("key"in c&&Ce(t,c.key))return c.value}}return ge()}case"IndexedNode":{const o=To(s,n),i=oo(o);if(r.mask&i){r=r.children[$S(r.mask,i)],s+=xs;break}return ge()}case"ArrayNode":{if(r=r.children[To(s,n)],r){s+=xs;break}return ge()}default:return ge()}}),ZI=P(2,(e,t)=>ct(Wp(e,t,me(t)))),la=P(3,(e,t,n)=>qp(e,t,()=>be(n))),QI=P(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:Up(e._editable,e._edit,t,n)),VS=e=>new Lu(e,t=>t),Wd=e=>e._size,BS=e=>Up(!0,e._edit+1,e._root,e._size),eT=e=>(e._editable=!1,e),qp=P(3,(e,t,n)=>tT(e,t,me(t),n)),tT=P(4,(e,t,n,r)=>{const s={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return z(e,QI(o,s.value))}),Jg=P(2,(e,t)=>qp(e,t,ge)),nT=P(2,(e,t)=>Du(e,ju(),(n,r,s)=>la(n,s,t(r,s)))),rT=P(2,(e,t)=>Du(e,void 0,(n,r,s)=>t(r,s))),Du=P(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return ct(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let o;for(;o=s.pop();)for(let i=0,a=o.length;i<a;){const c=o[i++];c&&!Mn(c)&&(c._tag==="LeafNode"?ct(c.value)&&(t=n(t,c.value.value,c.key)):s.push(c.children))}return t}),zS="effect/HashSet",qd=Symbol.for(zS),sT={[qd]:qd,[Symbol.iterator](){return VS(this._keyMap)},[Me](){return et(this,Fe(me(this._keyMap))(me(zS)))},[Oe](e){return oT(e)?Wd(this._keyMap)===Wd(e._keyMap)&&Ce(this._keyMap,e._keyMap):!1},toString(){return xt(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(bt)}},[Xe](){return this.toJSON()},pipe(){return Ee(this,arguments)}},Vu=e=>{const t=Object.create(sT);return t._keyMap=e,t},oT=e=>Re(e,qd),iT=Vu(ju()),Bu=()=>iT,aT=e=>{const t=Kp(Bu());for(const n of e)ua(t,n);return Hp(t)},cT=(...e)=>{const t=Kp(Bu());for(const n of e)ua(t,n);return Hp(t)},lT=P(2,(e,t)=>ZI(e._keyMap,t)),uT=e=>Wd(e._keyMap),Kp=e=>Vu(BS(e._keyMap)),Hp=e=>(e._keyMap._editable=!1,e),US=P(2,(e,t)=>{const n=Kp(e);return t(n),Hp(n)}),ua=P(2,(e,t)=>e._keyMap._editable?(la(t,!0)(e._keyMap),e):Vu(la(t,!0)(e._keyMap))),WS=P(2,(e,t)=>e._keyMap._editable?(Jg(t)(e._keyMap),e):Vu(Jg(t)(e._keyMap))),fT=P(2,(e,t)=>US(e,n=>{for(const r of t)WS(n,r)})),dT=P(2,(e,t)=>US(Bu(),n=>{hT(e,r=>ua(n,r));for(const r of t)ua(n,r)})),hT=P(2,(e,t)=>rT(e._keyMap,(n,r)=>t(r))),pT=P(3,(e,t,n)=>Du(e._keyMap,t,(r,s,o)=>n(r,o))),Es=Bu,mT=aT,Gp=cT,gT=lT,qS=uT,Gi=ua,KS=WS,Yg=fT,fa=dT,kl=pT,Xg=Symbol.for("effect/MutableRef"),yT={[Xg]:Xg,toString(){return xt(this.toJSON())},toJSON(){return{_id:"MutableRef",current:bt(this.current)}},[Xe](){return this.toJSON()},pipe(){return Ee(this,arguments)}},HS=e=>{const t=Object.create(yT);return t.current=e,t},zu=e=>e.current,GS=P(2,(e,t)=>(e.current=t,e)),Jp="effect/FiberId",da=Symbol.for(Jp),Ol="None",Kd="Runtime",bT="Composite",vT=st(`${Jp}-${Ol}`);let wT=class{[da]=da;_tag=Ol;id=-1;startTimeMillis=-1;[Me](){return vT}[Oe](t){return JS(t)&&t._tag===Ol}toString(){return xt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Xe](){return this.toJSON()}};class ST{id;startTimeMillis;[da]=da;_tag=Kd;constructor(t,n){this.id=t,this.startTimeMillis=n}[Me](){return et(this,st(`${Jp}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[Oe](t){return JS(t)&&t._tag===Kd&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return xt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Xe](){return this.toJSON()}}const _T=new wT,JS=e=>Re(e,da),Hd=e=>{switch(e._tag){case Ol:return Es();case Kd:return Gp(e.id);case bT:return z(Hd(e.left),fa(Hd(e.right)))}},Zg=Le(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>HS(0)),YS=e=>Array.from(Hd(e)).map(n=>`#${n}`).join(","),xT=()=>{const e=zu(Zg);return z(Zg,GS(e+1)),new ST(e,Date.now())},Ao=_T,ET=YS,XS=xT,Yp=ju,RT=GI,kT=YI,ZS=XI,QS=la,e0=VS,OT=qp,CT=nT,t0=Du,ha=Symbol.for("effect/List"),Gd=e=>Ye(e),IT=e=>pk(Mp(e),Gd),TT=IT(Ce),MT={[ha]:ha,_tag:"Cons",toString(){return xt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Gd(this).map(bt)}},[Xe](){return this.toJSON()},[Oe](e){return r0(e)&&this._tag===e._tag&&TT(this,e)},[Me](){return et(this,Ma(Gd(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return Ee(this,arguments)}},Cl=(e,t)=>{const n=Object.create(MT);return n.head=e,n.tail=t,n},AT=st("Nil"),PT={[ha]:ha,_tag:"Nil",toString(){return xt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Xe](){return this.toJSON()},[Me](){return AT},[Oe](e){return r0(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return Ee(this,arguments)}},n0=Object.create(PT),r0=e=>Re(e,ha),yr=e=>e._tag==="Nil",$T=e=>e._tag==="Cons",FT=()=>n0,Rs=(e,t)=>Cl(e,t),Po=FT,Xp=e=>Cl(e,n0),NT=P(2,(e,t)=>jT(t,e)),LT=P(2,(e,t)=>Rs(t,e)),jT=P(2,(e,t)=>{if(yr(e))return t;if(yr(t))return e;{const n=Cl(t.head,e);let r=n,s=t.tail;for(;!yr(s);){const o=Cl(s.head,e);r.tail=o,r=o,s=s.tail}return n}}),DT=P(3,(e,t,n)=>{let r=t,s=e;for(;!yr(s);)r=n(r,s.head),s=s.tail;return r}),VT=e=>{let t=Po(),n=e;for(;!yr(n);)t=LT(t,n.head),n=n.tail;return t},Zp=(function(){function e(t){t&&Object.assign(this,t)}return e.prototype=Sp,e})(),BT=Symbol.for("effect/DifferContextPatch");function Qg(e){return e}const Da={...Zp.prototype,[BT]:{_Value:Qg,_Patch:Qg}},zT=Object.assign(Object.create(Da),{_tag:"Empty"}),UT=Object.create(zT),s0=()=>UT,WT=Object.assign(Object.create(Da),{_tag:"AndThen"}),qT=(e,t)=>{const n=Object.create(WT);return n.first=e,n.second=t,n},KT=Object.assign(Object.create(Da),{_tag:"AddService"}),HT=(e,t)=>{const n=Object.create(KT);return n.key=e,n.service=t,n},GT=Object.assign(Object.create(Da),{_tag:"RemoveService"}),JT=e=>{const t=Object.create(GT);return t.key=e,t},YT=Object.assign(Object.create(Da),{_tag:"UpdateService"}),XT=(e,t)=>{const n=Object.create(YT);return n.key=e,n.update=t,n},ZT=(e,t)=>{const n=new Map(e.unsafeMap);let r=s0();for(const[s,o]of t.unsafeMap.entries())if(n.has(s)){const i=n.get(s);n.delete(s),Ce(i,o)||(r=Jc(XT(s,()=>o))(r))}else n.delete(s),r=Jc(HT(s,o))(r);for(const[s]of n.entries())r=Jc(JT(s))(r);return r},Jc=P(2,(e,t)=>qT(e,t)),QT=P(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=on(e);const s=new Map(t.unsafeMap);for(;Co(r);){const i=Io(r),a=is(r);switch(i._tag){case"Empty":{r=a;break}case"AddService":{s.set(i.key,i.service),r=a;break}case"AndThen":{r=Pn(Pn(a,i.second),i.first);break}case"RemoveService":{s.delete(i.key),r=a;break}case"UpdateService":{s.set(i.key,i.update(s.get(i.key))),n=!0,r=a;break}}}if(!n)return ko(s);const o=new Map;for(const[i]of t.unsafeMap)s.has(i)&&(o.set(i,s.get(i)),s.delete(i));for(const[i,a]of s)o.set(i,a);return ko(o)}),eM=Symbol.for("effect/DifferHashSetPatch");function Gf(e){return e}const Uu={...Zp.prototype,[eM]:{_Value:Gf,_Key:Gf,_Patch:Gf}},tM=Object.assign(Object.create(Uu),{_tag:"Empty"}),nM=Object.create(tM),o0=()=>nM,rM=Object.assign(Object.create(Uu),{_tag:"AndThen"}),sM=(e,t)=>{const n=Object.create(rM);return n.first=e,n.second=t,n},oM=Object.assign(Object.create(Uu),{_tag:"Add"}),iM=e=>{const t=Object.create(oM);return t.value=e,t},aM=Object.assign(Object.create(Uu),{_tag:"Remove"}),cM=e=>{const t=Object.create(aM);return t.value=e,t},lM=(e,t)=>{const[n,r]=kl([e,o0()],([s,o],i)=>gT(i)(s)?[KS(i)(s),o]:[s,Jd(iM(i))(o)])(t);return kl(r,(s,o)=>Jd(cM(o))(s))(n)},Jd=P(2,(e,t)=>sM(e,t)),uM=P(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=on(e);for(;Co(r);){const s=Io(r),o=is(r);switch(s._tag){case"Empty":{r=o;break}case"AndThen":{r=Pn(s.first)(Pn(s.second)(o));break}case"Add":{n=Gi(s.value)(n),r=o;break}case"Remove":n=KS(s.value)(n),r=o}}return n}),fM=Symbol.for("effect/DifferReadonlyArrayPatch");function ey(e){return e}const Va={...Zp.prototype,[fM]:{_Value:ey,_Patch:ey}},dM=Object.assign(Object.create(Va),{_tag:"Empty"}),hM=Object.create(dM),i0=()=>hM,pM=Object.assign(Object.create(Va),{_tag:"AndThen"}),mM=(e,t)=>{const n=Object.create(pM);return n.first=e,n.second=t,n},gM=Object.assign(Object.create(Va),{_tag:"Append"}),yM=e=>{const t=Object.create(gM);return t.values=e,t},bM=Object.assign(Object.create(Va),{_tag:"Slice"}),vM=(e,t)=>{const n=Object.create(bM);return n.from=e,n.until=t,n},wM=Object.assign(Object.create(Va),{_tag:"Update"}),SM=(e,t)=>{const n=Object.create(wM);return n.index=e,n.patch=t,n},_M=e=>{let t=0,n=i0();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],o=e.differ.diff(r,s);Ce(o,e.differ.empty)||(n=Yc(n,SM(t,o))),t=t+1}return t<e.oldValue.length&&(n=Yc(n,vM(0,t))),t<e.newValue.length&&(n=Yc(n,yM(DO(t)(e.newValue)))),n},Yc=P(2,(e,t)=>mM(e,t)),xM=P(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=Cn(e);for(;fo(s);){const o=Bt(s),i=_s(s);switch(o._tag){case"Empty":{s=i;break}case"AndThen":{i.unshift(o.first,o.second),s=i;break}case"Append":{for(const a of o.values)r.push(a);s=i;break}case"Slice":{r=r.slice(o.from,o.until),s=i;break}case"Update":{r[o.index]=n.patch(o.patch,r[o.index]),s=i;break}}}return r}),EM=Symbol.for("effect/Differ"),RM={[EM]:{_P:Qe,_V:Qe},pipe(){return Ee(this,arguments)}},Yo=e=>{const t=Object.create(RM);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},kM=()=>Yo({empty:s0(),combine:(e,t)=>Jc(t)(e),diff:(e,t)=>ZT(e,t),patch:(e,t)=>QT(t)(e)}),OM=()=>Yo({empty:o0(),combine:(e,t)=>Jd(t)(e),diff:(e,t)=>lM(e,t),patch:(e,t)=>uM(t)(e)}),CM=e=>Yo({empty:i0(),combine:(t,n)=>Yc(t,n),diff:(t,n)=>_M({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>xM(t,n,e)}),a0=()=>IM((e,t)=>t),IM=e=>Yo({empty:Qe,combine:(t,n)=>t===Qe?n:n===Qe?t:r=>n(t(r)),diff:(t,n)=>Ce(t,n)?Qe:Ca(n),patch:(t,n)=>e(n,t(n))}),pa=255,c0=8,Yd=e=>e&pa,Xd=e=>e>>c0&pa,Ba=(e,t)=>(e&pa)+((t&e&pa)<<c0),TM=Ba(0,0),MM=e=>Ba(e,e),AM=e=>Ba(e,0),PM=P(2,(e,t)=>Ba(Yd(e)&~t,Xd(e))),$M=P(2,(e,t)=>e|t),FM=e=>~e>>>0&pa,NM=0,Xo=1,LM=2,l0=4,Zd=16,u0=32,jM=e=>Wu(e,u0),DM=P(2,(e,t)=>e|t),Pr=e=>f0(e)&&!BM(e),f0=e=>Wu(e,Xo),Wu=P(2,(e,t)=>(e&t)!==0),d0=(...e)=>e.reduce((t,n)=>t|n,0),VM=d0(NM),ty=e=>Wu(e,l0),BM=e=>Wu(e,Zd),Xc=P(2,(e,t)=>Ba(e^t,t)),Zc=P(2,(e,t)=>e&(FM(Yd(t))|Xd(t))|Yd(t)&Xd(t)),ny=Yo({empty:TM,diff:(e,t)=>Xc(e,t),combine:(e,t)=>$M(t)(e),patch:(e,t)=>Zc(t,e)}),zM=MM,h0=AM,ry=PM,p0=(e,t)=>({_tag:"Par",left:e,right:t}),hc=(e,t)=>({_tag:"Seq",left:e,right:t}),UM=e=>{let t=Xp(e),n=Po();for(;;){const[r,s]=DT(t,[m0(),Po()],([o,i],a)=>{const[c,l]=WM(a);return[JM(o,c),NT(i,l)]});if(n=qM(n,r),yr(s))return VT(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},WM=e=>{let t=e,n=m0(),r=Po(),s=Po();for(;;)switch(t._tag){case"Empty":{if(yr(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=Rs(t.right,r),t=t.left;break}case"Seq":{const o=t.left,i=t.right;switch(o._tag){case"Empty":{t=i;break}case"Par":{const a=o.left,c=o.right;t=p0(hc(a,i),hc(c,i));break}case"Seq":{const a=o.left,c=o.right;t=hc(a,hc(c,i));break}case"Single":{t=o,s=Rs(i,s);break}}break}case"Single":{if(n=GM(n,t),yr(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},qM=(e,t)=>{if(yr(e))return Xp(Jf(t));if(YM(t))return e;const n=nA(e.head),r=XM(t);return n.length===1&&r.length===1&&Ce(n[0],r[0])?Rs(tA(e.head,Jf(t)),e.tail):Rs(Jf(t),e)},KM=Symbol.for("effect/RequestBlock/RequestBlockParallel"),HM={_R:e=>e};class Qp{map;[KM]=HM;constructor(t){this.map=t}}const m0=()=>new Qp(Yp()),GM=(e,t)=>new Qp(OT(e.map,t.dataSource,n=>hO(Ip(n,pI(t.blockedRequest)),()=>on(t.blockedRequest)))),JM=(e,t)=>new Qp(t0(e.map,t.map,(n,r,s)=>QS(n,s,Gt(ZS(n,s),{onNone:()=>r,onSome:o=>Tn(r,o)})))),YM=e=>kT(e.map),XM=e=>Array.from(e0(e.map)),Jf=e=>eA(CT(e.map,t=>on(t))),ZM=Symbol.for("effect/RequestBlock/RequestBlockSequential"),QM={_R:e=>e};class g0{map;[ZM]=QM;constructor(t){this.map=t}}const eA=e=>new g0(e),tA=(e,t)=>new g0(t0(t.map,e.map,(n,r,s)=>QS(n,s,Gt(ZS(n,s),{onNone:()=>Sr(),onSome:o=>Tn(o,r)})))),nA=e=>Array.from(e0(e.map)),rA=e=>Array.from(e.map),za="Die",ks="Empty",Ns="Fail",Zo="Interrupt",$o="Parallel",Fo="Sequential",y0="effect/Cause",b0=Symbol.for(y0),sA={_E:e=>e},Qo={[b0]:sA,[Me](){return z(me(y0),Fe(me(bA(this))),et(this))},[Oe](e){return oA(e)&&yA(this,e)},pipe(){return Ee(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:bt(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:bt(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:bt(this.left),right:bt(this.right)}}},toString(){return ei(this)},[Xe](){return this.toJSON()}},No=(()=>{const e=Object.create(Qo);return e._tag=ks,e})(),Il=e=>{const t=Object.create(Qo);return t._tag=Ns,t.error=e,t},Hn=e=>{const t=Object.create(Qo);return t._tag=za,t.defect=e,t},$r=e=>{const t=Object.create(Qo);return t._tag=Zo,t.fiberId=e,t},qu=(e,t)=>{const n=Object.create(Qo);return n._tag=$o,n.left=e,n.right=t,n},vn=(e,t)=>{const n=Object.create(Qo);return n._tag=Fo,n.left=e,n.right=t,n},oA=e=>Re(e,b0),iA=e=>e._tag===ks,aA=e=>e._tag===Ns,cA=e=>e._tag===ks?!0:Lo(e,!0,(t,n)=>{switch(n._tag){case ks:return be(t);case za:case Ns:case Zo:return be(!1);default:return ge()}}),lA=e=>ct(mA(e)),em=e=>tm(void 0,wA)(e),uA=e=>Oo(Lo(e,Sr(),(t,n)=>n._tag===Ns?be(z(t,Pn(n.error))):ge())),fA=e=>Oo(Lo(e,Sr(),(t,n)=>n._tag===za?be(z(t,Pn(n.defect))):ge())),dA=e=>Lo(e,Es(),(t,n)=>n._tag===Zo?be(z(t,Gi(n.fiberId))):ge()),hA=e=>v0(e,t=>t._tag===Ns?be(t.error):ge()),pA=e=>{const t=hA(e);switch(t._tag){case"None":return Ne(e);case"Some":return ke(t.value)}},mA=e=>v0(e,t=>t._tag===Zo?be(t.fiberId):ge()),sy=e=>w0(e,{onEmpty:No,onFail:()=>No,onDie:Hn,onInterrupt:$r,onSequential:vn,onParallel:qu}),gA=e=>w0(e,{onEmpty:No,onFail:Hn,onDie:Hn,onInterrupt:$r,onSequential:vn,onParallel:qu}),yA=(e,t)=>{let n=on(e),r=on(t);for(;Co(n)&&Co(r);){const[s,o]=z(Io(n),Lo([Es(),Sr()],([c,l],u)=>{const[f,h]=Qd(u);return be([z(c,fa(f)),z(l,Tn(h))])})),[i,a]=z(Io(r),Lo([Es(),Sr()],([c,l],u)=>{const[f,h]=Qd(u);return be([z(c,fa(f)),z(l,Tn(h))])}));if(!Ce(s,i))return!1;n=o,r=a}return!0},bA=e=>vA(on(e),Sr()),vA=(e,t)=>{for(;;){const[n,r]=z(e,Iw([Es(),Sr()],([o,i],a)=>{const[c,l]=Qd(a);return[z(o,fa(c)),z(i,Tn(l))]})),s=qS(n)>0?z(t,Pn(n)):t;if(mI(r))return Oo(s);e=r,t=s}throw new Error(Su("Cause.flattenCauseLoop"))},v0=P(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case Fo:case $o:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return ge()}),Qd=e=>{let t=e;const n=[];let r=Es(),s=Sr();for(;t!==void 0;)switch(t._tag){case ks:{if(n.length===0)return[r,s];t=n.pop();break}case Ns:{if(r=Gi(r,Kf(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case za:{if(r=Gi(r,Kf(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case Zo:{if(r=Gi(r,Kf(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case Fo:{switch(t.left._tag){case ks:{t=t.right;break}case Fo:{t=vn(t.left.left,vn(t.left.right,t.right));break}case $o:{t=qu(vn(t.left.left,t.right),vn(t.left.right,t.right));break}default:{s=Pn(s,t.right),t=t.left;break}}break}case $o:{n.push(t.right),t=t.left;break}}throw new Error(Su("Cause.evaluateCauseLoop"))},wA={emptyCase:Tg,failCase:Ad,dieCase:Ad,interruptCase:Tg,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},oy="SequentialCase",iy="ParallelCase",w0=P(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:o,onSequential:i})=>tm(e,void 0,{emptyCase:()=>n,failCase:(a,c)=>r(c),dieCase:(a,c)=>t(c),interruptCase:(a,c)=>s(c),sequentialCase:(a,c,l)=>i(c,l),parallelCase:(a,c,l)=>o(c,l)})),Lo=P(3,(e,t,n)=>{let r=t,s=e;const o=[];for(;s!==void 0;){const i=n(r,s);switch(r=ct(i)?i.value:r,s._tag){case Fo:{o.push(s.right),s=s.left;break}case $o:{o.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&o.length>0&&(s=o.pop())}return r}),tm=P(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const i=r.pop();switch(i._tag){case ks:{s.push(Ne(n.emptyCase(t)));break}case Ns:{s.push(Ne(n.failCase(t,i.error)));break}case za:{s.push(Ne(n.dieCase(t,i.defect)));break}case Zo:{s.push(Ne(n.interruptCase(t,i.fiberId)));break}case Fo:{r.push(i.right),r.push(i.left),s.push(ke({_tag:oy}));break}case $o:{r.push(i.right),r.push(i.left),s.push(ke({_tag:iy}));break}}}const o=[];for(;s.length>0;){const i=s.pop();switch(i._tag){case"Left":{switch(i.left._tag){case oy:{const a=o.pop(),c=o.pop(),l=n.sequentialCase(t,a,c);o.push(l);break}case iy:{const a=o.pop(),c=o.pop(),l=n.parallelCase(t,a,c);o.push(l);break}}break}case"Right":{o.push(i.right);break}}}if(o.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()}),ei=(e,t)=>em(e)?"All fibers interrupted without errors.":_0(e).map(function(n){return t?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${S0(n.cause,"  ")}
}`}).join(`
`),S0=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,o=n.length;s<o;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${S0(e.cause,`${t}  `)}
${t}}`),r};class Tl extends globalThis.Error{span=void 0;constructor(t){const n=typeof t=="object"&&t!==null,r=Error.stackTraceLimit;Error.stackTraceLimit=1,super(SA(t),n&&"cause"in t&&typeof t.cause<"u"?{cause:new Tl(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=r,this.name=t instanceof Error?t.name:"Error",n&&(jo in t&&(this.span=t[jo]),Object.keys(t).forEach(s=>{s in this||(this[s]=t[s])})),this.stack=EA(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}}const SA=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(Re(e,"toString")&&Ia(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return aw(e)},_A=/\((.*)\)/g,xA=Le("effect/Tracer/spanToTrace",()=>new WeakMap),EA=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let o=1;o<s.length;o++){if(s[o].includes(" at new BaseEffectError")||s[o].includes(" at new YieldableError")){o++;continue}if(s[o].includes("Generator.next")||s[o].includes("effect_internal_function"))break;r.push(s[o].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let o=n,i=0;for(;o&&o._tag==="Span"&&i<10;){const a=xA.get(o);if(typeof a=="function"){const c=a();if(typeof c=="string"){const l=c.matchAll(_A);let u=!1;for(const[,f]of l)u=!0,r.push(`    at ${o.name} (${f})`);u||r.push(`    at ${o.name} (${c.replace(/^at /,"")})`)}else r.push(`    at ${o.name}`)}else r.push(`    at ${o.name}`);o=Un(o.parent),i++}}return r.join(`
`)},jo=Symbol.for("effect/SpanAnnotation"),_0=e=>tm(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new Tl(n)],failCase:(t,n)=>[new Tl(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),Ku="Pending",x0="Done",RA="effect/Deferred",kA=Symbol.for(RA),OA={_E:e=>e,_A:e=>e},CA=e=>({_tag:Ku,joiners:e}),IA=e=>({_tag:x0,effect:e});class Ua{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Ua(this.self)}}const E0=(e,t)=>{const n=new Ct("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},TA=e=>{const t=new Ct("RunBlocked");return t.effect_instruction_i0=e,t},Do=Symbol.for("effect/Effect");class MA{patch;op;_op=vp;constructor(t,n){this.patch=t,this.op=n}}class Ct{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Do]=xo;constructor(t){this._op=t}[Oe](t){return this===t}[Me](){return et(this,mp(this))}pipe(){return Ee(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:bt(this.effect_instruction_i0),effect_instruction_i1:bt(this.effect_instruction_i1),effect_instruction_i2:bt(this.effect_instruction_i2)}}toString(){return xt(this.toJSON())}[Xe](){return this.toJSON()}[Symbol.iterator](){return new Ua(new Ta(this))}}class R0{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Do]=xo;constructor(t){this._op=t,this._tag=t}[Oe](t){return tf(t)&&t._op==="Failure"&&Ce(this.effect_instruction_i0,t.effect_instruction_i0)}[Me](){return z(st(this._tag),Fe(me(this.effect_instruction_i0)),et(this))}get cause(){return this.effect_instruction_i0}pipe(){return Ee(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return xt(this.toJSON())}[Xe](){return this.toJSON()}[Symbol.iterator](){return new Ua(new Ta(this))}}class k0{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Do]=xo;constructor(t){this._op=t,this._tag=t}[Oe](t){return tf(t)&&t._op==="Success"&&Ce(this.effect_instruction_i0,t.effect_instruction_i0)}[Me](){return z(st(this._tag),Fe(me(this.effect_instruction_i0)),et(this))}get value(){return this.effect_instruction_i0}pipe(){return Ee(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:bt(this.value)}}toString(){return xt(this.toJSON())}[Xe](){return this.toJSON()}[Symbol.iterator](){return new Ua(new Ta(this))}}const Hu=e=>Re(e,Do),Jt=e=>{const t=new Ct(uw);return t.effect_instruction_i0=e,t},AA=P(3,(e,t,n)=>Xu(r=>xe(e,s=>xe(C0(gt(()=>r(t(s)))),o=>gt(()=>n(s,o)).pipe(Vo({onFailure:i=>{switch(o._tag){case Sn:return $n(vn(o.effect_instruction_i0,i));case _n:return $n(i)}},onSuccess:()=>o})))))),Wa=P(2,(e,t)=>xe(e,()=>We(t))),qa=e=>Wa(e,void 0),O0=function(){const e=new Ct(xu);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Su("you're not supposed to end up here"))}return e},Ml=(e,t=Ao)=>{const n=new Ct(Ki);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,$0(n,s=>Hu(r)?r:Fn)},PA=(e,t=Ao)=>gt(()=>Ml(e,t)),ma=(e,t=Ao)=>O0(e,function(){let n,r;function s(c){n?n(c):r===void 0&&(r=c)}const o=new Ct(Ki);o.effect_instruction_i0=c=>{n=c,r&&c(r)},o.effect_instruction_i1=t;let i,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,i=jt(()=>this.effect_instruction_i0(s,a.signal))):i=jt(()=>this.effect_instruction_i0(s)),i||a?$0(o,c=>(a&&a.abort(),i??Fn)):o}),eh=P(2,(e,t)=>Gu(e,{onFailure:t,onSuccess:We})),ay=Symbol.for("effect/OriginalAnnotation"),nm=(e,t)=>ct(t)?new Proxy(e,{has(n,r){return r===jo||r===ay||r in n},get(n,r){return r===jo?t.value:r===ay?e:n[r]}}):e,cy=e=>Or(e)&&!(jo in e)?Jt(t=>$n(Hn(nm(e,um(t))))):$n(Hn(e)),$A=e=>FA(()=>Hn(new f2(e))),Al=e=>Gu(e,{onFailure:t=>We(ke(t)),onSuccess:t=>We(Ne(t))}),C0=e=>jA(e,{onFailure:qe,onSuccess:it}),Lt=e=>Or(e)&&!(jo in e)?Jt(t=>$n(Il(nm(e,um(t))))):$n(Il(e)),I0=e=>xe(_e(e),Lt),$n=e=>{const t=new R0(Sn);return t.effect_instruction_i0=e,t},FA=e=>xe(_e(e),$n),NA=Jt(e=>We(e.id())),T0=e=>Jt(t=>e(t.id())),xe=P(2,(e,t)=>{const n=new Ct(bl);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),LA=e=>{const t=new Ct("OnStep");return t.effect_instruction_i0=e,t},M0=e=>xe(e,Qe),jA=P(2,(e,t)=>Vo(e,{onFailure:n=>We(t.onFailure(n)),onSuccess:n=>We(t.onSuccess(n))})),Vo=P(2,(e,t)=>{const n=new Ct(vl);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),Gu=P(2,(e,t)=>Vo(e,{onFailure:n=>{if(fA(n).length>0)return $n(gA(n));const s=uA(n);return s.length>0?t.onFailure(TS(s)):$n(n)},onSuccess:t.onSuccess})),Lr=P(2,(e,t)=>gt(()=>{const n=Ye(e),r=Ou(n.length);let s=0;return Wa(sm({while:()=>s<n.length,body:()=>t(n[s],s),step:o=>{r[s++]=o}}),r)})),Ju=P(2,(e,t)=>gt(()=>{const n=Ye(e);let r=0;return sm({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),A0=e=>{const t=new Ct(Aa);return t.effect_instruction_i0=zM(Xo),t.effect_instruction_i1=()=>e,t},Vt=P(2,(e,t)=>xe(e,n=>_e(()=>t(n)))),P0=P(2,(e,t)=>Gu(e,{onFailure:n=>I0(()=>t.onFailure(n)),onSuccess:n=>_e(()=>t.onSuccess(n))})),Yu=P(2,(e,t)=>Vo(e,{onFailure:n=>{const r=pA(n);switch(r._tag){case"Left":return I0(()=>t(r.left));case"Right":return $n(r.right)}},onSuccess:We})),rm=P(2,(e,t)=>Xu(n=>Vo(n(e),{onFailure:r=>{const s=qe(r);return Vo(t(s),{onFailure:o=>qe(vn(r,o)),onSuccess:()=>s})},onSuccess:r=>{const s=it(r);return Ka(t(s),s)}}))),$0=P(2,(e,t)=>rm(e,q0({onFailure:n=>em(n)?qa(t(dA(n))):Fn,onSuccess:()=>Fn}))),We=e=>{const t=new k0(_n);return t.effect_instruction_i0=e,t},gt=e=>{const t=new Ct(xu);return t.commit=e,t},_e=e=>{const t=new Ct(lw);return t.effect_instruction_i0=e,t},DA=P(e=>e.length===3||e.length===2&&!(Or(e[1])&&"onlyEffect"in e[1]),(e,t)=>xe(e,n=>{const r=typeof t=="function"?t(n):t;return Hu(r)?Wa(r,n):_k(r)?Ml(s=>{r.then(o=>s(We(n)),o=>s(Lt(new p2(o,"An unknown error occurred in Effect.tap"))))}):We(n)})),VA=e=>Jt(t=>{const n=t.getFiberRef(nh),r=z(n,lt(()=>t.scope()));return e(Zu(nh,be(r)))}),F0=e=>{const t=new Ct(Aa);return t.effect_instruction_i0=h0(Xo),t.effect_instruction_i1=()=>e,t},Xu=e=>O0(e,function(){const t=new Ct(Aa);return t.effect_instruction_i0=h0(Xo),t.effect_instruction_i1=n=>f0(n)?jt(()=>this.effect_instruction_i0(A0)):jt(()=>this.effect_instruction_i0(F0)),t}),Fn=We(void 0),BA=e=>{const t=new Ct(Aa);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},sm=e=>{const t=new Ct(wl);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},om=e=>{const t=new Ct(Hc);return typeof e?.priority<"u"?s2(t,e.priority):t},N0=P(2,(e,t)=>xe(e,n=>Vt(t,r=>[n,r]))),L0=P(2,(e,t)=>xe(e,n=>Wa(t,n))),Ka=P(2,(e,t)=>xe(e,()=>t)),zA=e=>xe(NA,t=>z(e,j0(t))),j0=P(2,(e,t)=>xe(e.interruptAsFork(t),()=>e.await)),UA={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return Ee(this,arguments)}},WA={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return Ee(this,arguments)}},qA={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return Ee(this,arguments)}},D0={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return Ee(this,arguments)}},V0={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return Ee(this,arguments)}},B0={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return Ee(this,arguments)}},KA={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return Ee(this,arguments)}},HA={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return Ee(this,arguments)}},GA="effect/FiberRef",JA=Symbol.for(GA),YA={_A:e=>e},im=e=>Jt(t=>it(t.getFiberRef(e))),am=P(2,(e,t)=>xe(im(e),t)),ly=P(2,(e,t)=>XA(e,()=>[void 0,t])),XA=P(2,(e,t)=>Jt(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),We(r)})),Zu=P(3,(e,t,n)=>AA(L0(im(t),ly(t,n)),()=>e,r=>ly(t,r))),Yt=(e,t)=>ti(e,{differ:a0(),fork:t?.fork??Qe,join:t?.join}),ZA=e=>{const t=OM();return ti(e,{differ:t,fork:t.empty})},QA=e=>{const t=CM(a0());return ti(e,{differ:t,fork:t.empty})},z0=e=>{const t=kM();return ti(e,{differ:t,fork:t.empty})},ti=(e,t)=>({...$a,[JA]:YA,initial:e,commit(){return im(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),e2=e=>ti(e,{differ:ny,fork:ny.empty}),Ha=Le(Symbol.for("effect/FiberRef/currentContext"),()=>z0(jp())),Qu=Le(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Yt(0)),U0=Le(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Yt(2048)),t2=Le(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Yt(Yp())),n2=Le(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Yt(V0)),r2=Le(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Yt(Po())),s2=P(2,(e,t)=>Zu(e,Qu,t)),o2=Le(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Yt("unbounded")),i2=Le(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Yt(!0)),a2=Le(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Yt(be(B0))),c2=Le(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Yt(be(D0))),th=Le(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>QA(Eo())),nh=Le(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Yt(ge(),{fork:()=>ge(),join:(e,t)=>e})),pc=Le(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Yt(No,{fork:()=>No,join:(e,t)=>e})),l2=(e,t)=>e.addFinalizer(()=>qa(t)),u2=(e,t)=>e.close(t),ef=(e,t)=>e.fork(t),cm=(function(){class e extends globalThis.Error{commit(){return Lt(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[Xe](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?ei(Il(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Gk),e})(),W0=(e,t)=>{class n extends cm{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},uy=Symbol.for("effect/Cause/errors/RuntimeException"),f2=W0({[uy]:uy},"RuntimeException"),d2=Symbol.for("effect/Cause/errors/InterruptedException"),h2=e=>Re(e,d2),fy=Symbol.for("effect/Cause/errors/NoSuchElement"),lm=W0({[fy]:fy},"NoSuchElementException"),dy=Symbol.for("effect/Cause/errors/UnknownException"),p2=(function(){class e extends cm{_tag="UnknownException";error;constructor(n,r){super(r??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(e.prototype,{[dy]:dy,name:"UnknownException"}),e})(),tf=e=>Hu(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),m2=e=>e._tag==="Success",hy=(e,t)=>v2(e,t?.parallel?qu:vn),g2=e=>qe(Hn(e)),py=e=>qe(Il(e)),qe=e=>{const t=new R0(Sn);return t.effect_instruction_i0=e,t},y2=e=>qe($r(e)),Yf=P(2,(e,t)=>{switch(e._tag){case Sn:return qe(e.effect_instruction_i0);case _n:return it(t(e.effect_instruction_i0))}}),q0=P(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case Sn:return t(e.effect_instruction_i0);case _n:return n(e.effect_instruction_i0)}}),it=e=>{const t=new k0(_n);return t.effect_instruction_i0=e,t},as=it(void 0),b2=P(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case Sn:switch(t._tag){case _n:return qe(e.effect_instruction_i0);case Sn:return qe(n(e.effect_instruction_i0,t.effect_instruction_i0))}case _n:switch(t._tag){case _n:return it(r(e.effect_instruction_i0,t.effect_instruction_i0));case Sn:return qe(t.effect_instruction_i0)}}}),v2=(e,t)=>{const n=IS(e);return Co(n)?z(is(n),Iw(z(Io(n),Yf(on)),(r,s)=>z(r,b2(s,{onSuccess:(o,i)=>z(o,Pn(i)),onFailure:t}))),Yf(Oo),Yf(r=>gs(r)),be):ge()},w2=e=>({...$a,[kA]:OA,state:HS(CA([])),commit(){return K0(this)},blockingOn:e}),K0=e=>PA(t=>{const n=zu(e.state);switch(n._tag){case x0:return t(n.effect);case Ku:return n.joiners.push(t),S2(e,t)}},e.blockingOn),H0=(e,t)=>{const n=zu(e.state);if(n._tag===Ku){GS(e.state,IA(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},S2=(e,t)=>_e(()=>{const n=zu(e.state);if(n._tag===Ku){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),_2=Jt(e=>it(e.currentContext)),x2=()=>_2,Ga=e=>xe(x2(),e),E2=P(2,(e,t)=>Zu(Ha,t)(e)),R2=P(2,(e,t)=>Ga(n=>E2(e,t(n)))),um=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?be(t):ge()},k2=m2,my=Symbol.for("effect/MutableHashMap"),O2={[my]:my,[Symbol.iterator](){return new fm(this)},toString(){return xt(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(bt)}},[Xe](){return this.toJSON()},pipe(){return Ee(this,arguments)}};class fm{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new C2(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new fm(this.self)}}class C2{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const I2=()=>{const e=Object.create(O2);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},ts=P(2,(e,t)=>{if(yl(t)===!1)return e.referential.has(t)?be(e.referential.get(t)):ge();const n=t[Me](),r=e.buckets.get(n);return r===void 0?ge():T2(e,r,t)}),T2=(e,t,n,r=!1)=>{for(let s=0,o=t.length;s<o;s++)if(n[Oe](t[s][0])){const i=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),be(i)}return ge()},gi=P(2,(e,t)=>ct(ts(e,t))),yi=P(3,(e,t,n)=>{if(yl(t)===!1)return e.referential.set(t,n),e;const r=t[Me](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(M2(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),M2=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[Oe](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},A2="effect/Clock",gy=Symbol.for(A2),nf=Fs("effect/Clock"),P2=2**31-1,yy={unsafeSchedule(e,t){const n=zd(t);if(n>P2)return Ad;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},by=(function(){const e=BigInt(1e6);if(typeof performance>"u"||typeof performance.now!="function")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))})(),$2=(function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return by;const t=by()-e.bigint();return()=>t+e.bigint()})();class F2{[gy]=gy;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return $2()}currentTimeMillis=_e(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=_e(()=>this.unsafeCurrentTimeNanos());scheduler(){return We(yy)}sleep(t){return ma(n=>{const r=yy.unsafeSchedule(()=>n(Fn),t);return qa(_e(r))})}}const N2=()=>new F2,G0="And",J0="Or",Y0="InvalidData",X0="MissingData",Z0="SourceUnavailable",Q0="Unsupported",L2="effect/ConfigError",vy=Symbol.for(L2),ni={_tag:"ConfigError",[vy]:vy},e_=(e,t)=>{const n=Object.create(ni);return n._op=G0,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},t_=(e,t)=>{const n=Object.create(ni);return n._op=J0,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},j2=(e,t,n={pathDelim:"."})=>{const r=Object.create(ni);return r._op=Y0,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${z(this.path,$s(n.pathDelim))}: "${this.message}")`}}),r},Os=(e,t,n={pathDelim:"."})=>{const r=Object.create(ni);return r._op=X0,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${z(this.path,$s(n.pathDelim))}: "${this.message}")`}}),r},D2=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(ni);return s._op=Z0,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${z(this.path,$s(r.pathDelim))}: "${this.message}")`}}),s},V2=(e,t,n={pathDelim:"."})=>{const r=Object.create(ni);return r._op=Q0,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${z(this.path,$s(n.pathDelim))}: "${this.message}")`}}),r},cs=P(2,(e,t)=>{switch(e._op){case G0:return e_(cs(e.left,t),cs(e.right,t));case J0:return t_(cs(e.left,t),cs(e.right,t));case Y0:return j2([...t,...e.path],e.message);case X0:return Os([...t,...e.path],e.message);case Z0:return D2([...t,...e.path],e.message,e.cause);case Q0:return V2([...t,...e.path],e.message)}}),B2={_tag:"Empty"},Xf=P(2,(e,t)=>{let n=Xp(t),r=e;for(;$T(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=Rs(s.first,Rs(s.second,n.tail));break}case"MapName":{r=ho(r,s.f),n=n.tail;break}case"Nested":{r=Sl(r,s.name),n=n.tail;break}case"Unnested":{if(z(Hi(r),vO(s.name)))r=_s(r),n=n.tail;else return ke(Os(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return Ne(r)}),z2="Constant",U2="Fail",W2="Fallback",q2="Described",K2="Lazy",H2="MapOrFail",G2="Nested",J2="Primitive",Y2="Sequence",X2="HashMap",Z2="ZipWith";var wy={};const Pl=(e,t)=>[...e,...t],Q2="effect/ConfigProvider",Sy=Symbol.for(Q2),eP=Fs("effect/ConfigProvider"),tP="effect/ConfigProviderFlat",_y=Symbol.for(tP),nP=e=>({[Sy]:Sy,pipe(){return Ee(this,arguments)},...e}),rP=e=>({[_y]:_y,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),sP=e=>nP({load:t=>xe(mn(e,Eo(),t,!1),n=>Gt(Hi(n),{onNone:()=>Lt(Os(Eo(),`Expected a single value having structure: ${t}`)),onSome:We})),flattened:e}),oP=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=c=>z(c,$s(t)),s=c=>c.split(t),o=()=>typeof process<"u"&&"env"in process&&typeof wy=="object"?wy:{};return sP(rP({load:(c,l,u=!0)=>{const f=r(c),h=o(),d=f in h?be(h[f]):ge();return z(d,Yu(()=>Os(c,`Expected ${f} to exist in the process context`)),xe(p=>uP(p,c,l,n,u)))},enumerateChildren:c=>_e(()=>{const l=o(),h=Object.keys(l).map(d=>s(d.toUpperCase())).filter(d=>{for(let p=0;p<c.length;p++){const m=z(c,Rw(p)),y=d[p];if(y===void 0||m!==y)return!1}return!0}).flatMap(d=>d.slice(c.length,c.length+1));return mT(h)}),patch:B2}))},iP=(e,t,n,r)=>{const s=Ng(n.length,c=>c>=r.length?ge():be([e(c),c+1])),o=Ng(r.length,c=>c>=n.length?ge():be([t(c),c+1])),i=Pl(n,s),a=Pl(r,o);return[i,a]},aP=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},mn=(e,t,n,r)=>{const s=n;switch(s._tag){case z2:return We(Cn(s.value));case q2:return gt(()=>mn(e,t,s.config,r));case U2:return Lt(Os(t,s.message));case W2:return z(gt(()=>mn(e,t,s.first,r)),eh(o=>s.condition(o)?z(mn(e,t,s.second,r),eh(i=>Lt(t_(o,i)))):Lt(o)));case K2:return gt(()=>mn(e,t,s.config(),r));case H2:return gt(()=>z(mn(e,t,s.original,r),xe(Lr(o=>z(s.mapOrFail(o),Yu(cs(aP(t,s.original))))))));case G2:return gt(()=>mn(e,Pl(t,Cn(s.name)),s.config,r));case J2:return z(Xf(t,e.patch),xe(o=>z(e.load(o,s,r),xe(i=>{if(i.length===0){const a=z(NO(o),lt(()=>"<n/a>"));return Lt(Os([],`Expected ${s.description} with name ${a}`))}return We(i)}))));case Y2:return z(Xf(t,e.patch),xe(o=>z(e.enumerateChildren(o),xe(dP),xe(i=>i.length===0?gt(()=>Vt(mn(e,t,s.config,!0),Cn)):z(Lr(i,a=>mn(e,TO(t,`[${a}]`),s.config,!0)),Vt(a=>{const c=Tp(a);return c.length===0?Cn(Eo()):Cn(c)}))))));case X2:return gt(()=>z(Xf(t,e.patch),xe(o=>z(e.enumerateChildren(o),xe(i=>z(i,Lr(a=>mn(e,Pl(o,Cn(a)),s.valueConfig,r)),Vt(a=>a.length===0?Cn(Yp()):z(fP(a),ho(c=>RT(Fg(Ye(i),c)))))))))));case Z2:return gt(()=>z(mn(e,t,s.left,r),Al,xe(o=>z(mn(e,t,s.right,r),Al,xe(i=>{if(Rt(o)&&Rt(i))return Lt(e_(o.left,i.left));if(Rt(o)&&In(i))return Lt(o.left);if(In(o)&&Rt(i))return Lt(i.left);if(In(o)&&In(i)){const a=z(t,$s(".")),c=cP(t,a),[l,u]=iP(c,c,z(o.right,ho(Ne)),z(i.right,ho(Ne)));return z(l,Fg(u),Lr(([f,h])=>z(N0(f,h),Vt(([d,p])=>s.zip(d,p)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},cP=(e,t)=>n=>ke(Os(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),lP=(e,t)=>e.split(new RegExp(`\\s*${_l(t)}\\s*`)),uP=(e,t,n,r,s)=>s?z(lP(e,r),Lr(o=>n.parse(o.trim())),Yu(cs(t))):z(n.parse(e),P0({onFailure:cs(t),onSuccess:Cn})),fP=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),dP=e=>z(Lr(e,pP),P0({onFailure:()=>Eo(),onSuccess:ca(Ro)}),Al,Vt(aO)),hP=/^(\[(\d+)\])$/,pP=e=>{const t=e.match(hP);if(t!==null){const n=t[2];return z(n!==void 0&&n.length>0?be(n):ge(),Fa(mP))}return ge()},mP=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?ge():be(t)},xy=Symbol.for("effect/Console"),n_=Fs("effect/Console"),gP={[xy]:xy,assert(e,...t){return _e(()=>{console.assert(e,...t)})},clear:_e(()=>{console.clear()}),count(e){return _e(()=>{console.count(e)})},countReset(e){return _e(()=>{console.countReset(e)})},debug(...e){return _e(()=>{console.debug(...e)})},dir(e,t){return _e(()=>{console.dir(e,t)})},dirxml(...e){return _e(()=>{console.dirxml(...e)})},error(...e){return _e(()=>{console.error(...e)})},group(e){return e?.collapsed?_e(()=>console.groupCollapsed(e?.label)):_e(()=>console.group(e?.label))},groupEnd:_e(()=>{console.groupEnd()}),info(...e){return _e(()=>{console.info(...e)})},log(...e){return _e(()=>{console.log(...e)})},table(e,t){return _e(()=>{console.table(e,t)})},time(e){return _e(()=>console.time(e))},timeEnd(e){return _e(()=>console.timeEnd(e))},timeLog(e,...t){return _e(()=>{console.timeLog(e,...t)})},trace(...e){return _e(()=>{console.trace(...e)})},warn(...e){return _e(()=>{console.warn(...e)})},unsafe:console},yP="effect/Random",Ey=Symbol.for(yP),r_=Fs("effect/Random");class bP{seed;[Ey]=Ey;PRNG;constructor(t){this.seed=t,this.PRNG=new Ik(t)}get next(){return _e(()=>this.PRNG.number())}get nextBoolean(){return Vt(this.next,t=>t>.5)}get nextInt(){return _e(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Vt(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return _e(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return vP(t,n=>this.nextIntBetween(0,n))}}const vP=(e,t)=>gt(()=>z(_e(()=>Array.from(e)),xe(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return z(r,Ju(s=>z(t(s),Vt(o=>wP(n,s-1,o)))),Wa(IS(n)))}))),wP=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},SP=e=>new bP(me(e)),Ry=Symbol.for("effect/Tracer"),_P=e=>({[Ry]:Ry,...e}),s_=Fs("effect/Tracer"),o_=Fs("effect/ParentSpan"),ky=(function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}})();class xP{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(t,n,r,s,o,i){this.name=t,this.parent=n,this.context=r,this.startTime=o,this.kind=i,this.status={_tag:"Started",startTime:o},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:ky(32),this.spanId=ky(16),this.links=Array.from(s)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}addLinks(t){this.links.push(...t)}}const EP=_P({span:(e,t,n,r,s,o)=>new xP(e,t,n,r,s,o),context:e=>e()}),RP=z(jp(),mi(nf,N2()),mi(n_,gP),mi(r_,SP(Math.random())),mi(eP,oP()),mi(s_,EP)),$l=Le(Symbol.for("effect/DefaultServices/currentServices"),()=>z0(RP)),kP=e=>{const t=Qn(e);return OP(n=>n.sleep(t))},i_=e=>Jt(t=>e(t.currentDefaultServices)),OP=e=>i_(t=>e(t.unsafeMap.get(nf.key))),CP=e=>i_(t=>e(t.unsafeMap.get(r_.key))),IP=e=>{const t=Ye(e);return Vt(t.length===0?Lt(new lm("Cannot select a random element from an empty array")):CP(n=>n.nextIntBetween(0,t.length)),n=>t[n])},TP=kP;function MP(e){return new Wr(e)}function AP(){return MP(new Map)}const Oy=Symbol.for("effect/FiberRefs");class Wr{locals;[Oy]=Oy;constructor(t){this.locals=t}pipe(){return Ee(this,arguments)}}const PP=(e,t,n,r=!1)=>{const s=e;let o=t,i=n,a=r,c;for(;c===void 0;)if(ot(o)&&ot(i)){const l=Bt(o)[0],u=_s(o),f=Bt(i)[0],h=Bt(i)[1],d=_s(i);l.startTimeMillis<f.startTimeMillis?(i=d,a=!0):l.startTimeMillis>f.startTimeMillis?o=u:l.id<f.id?(i=d,a=!0):l.id>f.id?o=u:c=[h,a]}else c=[s.initial,!0];return c},$P=P(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,o)=>{const i=s[0][1];if(!s[0][0][Oe](t)){if(!r.has(o)){if(Ce(i,o.initial))return;r.set(o,[[t,o.join(o.initial,i)]]);return}const a=r.get(o),[c,l]=PP(o,a,s);if(l){const u=o.diff(c,i),f=a[0][1],h=o.join(f,o.patch(u)(f));if(!Ce(f,h)){let d;const p=a[0][0];p[Oe](t)?d=[[p,h],...a.slice(1)]:d=[[t,h],...a],r.set(o,d)}}}}),new Wr(r)}),FP=P(2,(e,t)=>{const n=new Map;return a_(e,n,t),new Wr(n)}),a_=(e,t,n)=>{e.locals.forEach((r,s)=>{const o=r[0][1],i=s.patch(s.fork)(o);Ce(o,i)?t.set(s,r):t.set(s,[[n,i],...r])})},c_=P(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new Wr(n)}),NP=P(2,(e,t)=>e.locals.has(t)?be(Bt(e.locals.get(t))[1]):ge()),ga=P(2,(e,t)=>z(NP(e,t),lt(()=>t.initial))),rh=P(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new Wr(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return sh(s,t,n,r),new Wr(s)}),sh=(e,t,n,r)=>{const s=e.get(n)??[];let o;if(ot(s)){const[i,a]=Bt(s);if(i[Oe](t)){if(Ce(a,r))return;o=[[t,r],...s.slice(1)]}else o=[[t,r],...s]}else o=[[t,r]];e.set(n,o)},LP=P(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new Wr(new Map(t));const r=new Map(e.locals);return n!==void 0&&a_(e,r,n),t.forEach(([s,o])=>{o.length===1?sh(r,o[0][0],s,o[0][1]):o.forEach(([i,a])=>{sh(r,i,s,a)})}),new Wr(r)}),jP=ga,DP=LP,VP=AP,BP=UA,zP=WA,UP=qA,WP=D0,qP=V0,KP=B0,HP=KA,GP=HA,JP=z(Ro,Sw(e=>e.ordinal)),YP=uO(JP),XP=e=>{switch(e){case"All":return BP;case"Debug":return KP;case"Error":return UP;case"Fatal":return zP;case"Info":return qP;case"Trace":return HP;case"None":return GP;case"Warning":return WP}},l_=e=>e.replace(/[\s="]/g,"_"),ZP=e=>t=>`${l_(t.label)}=${e-t.startTime}ms`,QP=Pa,e$=Jk;class t$ extends e${}const u_="Empty",f_="Add",d_="Remove",h_="Update",p_="AndThen",n$={_tag:u_},r$=(e,t)=>{const n=new Map(e.locals);let r=n$;for(const[s,o]of t.locals.entries()){const i=Bt(o)[1],a=n.get(s);if(a!==void 0){const c=Bt(a)[1];Ce(c,i)||(r=Zf({_tag:h_,fiberRef:s,patch:s.diff(c,i)})(r))}else r=Zf({_tag:f_,fiberRef:s,value:i})(r);n.delete(s)}for(const[s]of n.entries())r=Zf({_tag:d_,fiberRef:s})(r);return r},Zf=P(2,(e,t)=>({_tag:p_,first:e,second:t})),s$=P(3,(e,t,n)=>{let r=n,s=Cn(e);for(;ot(s);){const o=Bt(s),i=_s(s);switch(o._tag){case u_:{s=i;break}case f_:{r=rh(r,{fiberId:t,fiberRef:o.fiberRef,value:o.value}),s=i;break}case d_:{r=c_(r,o.fiberRef),s=i;break}case h_:{const a=ga(r,o.fiberRef);r=rh(r,{fiberId:t,fiberRef:o.fiberRef,value:o.fiberRef.patch(o.patch)(a)}),s=i;break}case p_:{s=Sl(o.first)(Sl(o.second)(i));break}}}return r}),m_="effect/MetricLabel",oh=Symbol.for(m_);class o${key;value;[oh]=oh;_hash;constructor(t,n){this.key=t,this.value=n,this._hash=st(m_+this.key+this.value)}[Me](){return this._hash}[Oe](t){return a$(t)&&this.key===t.key&&this.value===t.value}pipe(){return Ee(this,arguments)}}const i$=(e,t)=>new o$(e,t),a$=e=>Re(e,oh),c$=P(2,(e,t)=>Ka(TP(t),e)),l$=e=>Gu(e,{onFailure:()=>We(ge()),onSuccess:t=>We(be(t))}),u$="Sequential",f$="Parallel",d$="ParallelN",g_={_tag:u$},h$={_tag:f$},p$=e=>({_tag:d$,parallelism:e}),ih=g_,ah=h$,ch=p$,m$=r$,g$=s$,rf="effect/FiberStatus",Cs=Symbol.for(rf),Fl="Done",Cy="Running",Iy="Suspended",y$=st(`${rf}-${Fl}`);class b${[Cs]=Cs;_tag=Fl;[Me](){return y$}[Oe](t){return dm(t)&&t._tag===Fl}}class v${runtimeFlags;[Cs]=Cs;_tag=Cy;constructor(t){this.runtimeFlags=t}[Me](){return z(me(rf),Fe(me(this._tag)),Fe(me(this.runtimeFlags)),et(this))}[Oe](t){return dm(t)&&t._tag===Cy&&this.runtimeFlags===t.runtimeFlags}}class w${runtimeFlags;blockingOn;[Cs]=Cs;_tag=Iy;constructor(t,n){this.runtimeFlags=t,this.blockingOn=n}[Me](){return z(me(rf),Fe(me(this._tag)),Fe(me(this.runtimeFlags)),Fe(me(this.blockingOn)),et(this))}[Oe](t){return dm(t)&&t._tag===Iy&&this.runtimeFlags===t.runtimeFlags&&Ce(this.blockingOn,t.blockingOn)}}const S$=new b$,_$=e=>new v$(e),x$=(e,t)=>new w$(e,t),dm=e=>Re(e,Cs),E$=e=>e._tag===Fl,R$=S$,y_=_$,k$=x$,O$=E$,C$=Symbol.for("effect/Micro"),Nl=Symbol.for("effect/Micro/MicroExit"),Ty=Symbol.for("effect/Micro/MicroCause"),I$={_E:Qe};class b_ extends globalThis.Error{_tag;traces;[Ty];constructor(t,n,r){const s=`MicroCause.${t}`;let o,i,a;if(n instanceof globalThis.Error){o=`(${s}) ${n.name}`,i=n.message;const c=i.split(`
`).length;a=n.stack?`(${s}) ${n.stack.split(`
`).slice(0,c+3).join(`
`)}`:`${o}: ${i}`}else o=s,i=_o(n,0),a=`${o}: ${i}`;r.length>0&&(a+=`
    ${r.join(`
    `)}`),super(i),this._tag=t,this.traces=r,this[Ty]=I$,this.name=o,this.stack=a}pipe(){return Ee(this,arguments)}toString(){return this.stack}[Xe](){return this.stack}}class T$ extends b_{defect;constructor(t,n=[]){super("Die",t,n),this.defect=t}}const M$=(e,t=[])=>new T$(e,t);class A$ extends b_{constructor(t=[]){super("Interrupt","interrupted",t)}}const P$=(e=[])=>new A$(e),$$=e=>e._tag==="Interrupt",My=Symbol.for("effect/Micro/MicroFiber"),F$={_A:Qe,_E:Qe};class N${context;interruptible;[My];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(t,n=!0){this.context=t,this.interruptible=n,this[My]=F$}getRef(t){return nI(this.context,t)}addObserver(t){return this._exit?(t(this._exit),hk):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(ym))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const s=this._yielded;this._yielded=void 0,s()}const n=this.runLoop(t);if(n===mc)return;const r=Ay.interruptChildren&&Ay.interruptChildren(this);if(r!==void 0)return this.evaluate(jl(r,()=>n));this._exit=n;for(let s=0;s<this._observers.length;s++)this._observers[s](n);this._observers.length=0}runLoop(t){let n=!1,r=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(bm).shouldYield(this)){n=!0;const s=r;r=jl(B$,()=>s)}if(r=r[lh](this),r===mc){const s=this._yielded;return Nl in s?(this._yielded=void 0,s):mc}}}catch(s){return Re(r,lh)?uh(s):uh(`MicroFiber.runLoop: Not a valid effect: ${String(r)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[Ll]&&n[Ll](this);if(r)return{[t]:r};if(n[t])return n}}_yielded=void 0;yieldWith(t){return this._yielded=t,mc}children(){return this._children??=new Set}}const Ay=Le("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),v_=Symbol.for("effect/Micro/identifier"),yt=Symbol.for("effect/Micro/args"),lh=Symbol.for("effect/Micro/evaluate"),Bo=Symbol.for("effect/Micro/successCont"),go=Symbol.for("effect/Micro/failureCont"),Ll=Symbol.for("effect/Micro/ensureCont"),mc=Symbol.for("effect/Micro/Yield"),L$={_A:Qe,_E:Qe,_R:Qe},j$={...QP,_op:"Micro",[C$]:L$,pipe(){return Ee(this,arguments)},[Symbol.iterator](){return new nw(new Ta(this))},toJSON(){return{_id:"Micro",op:this[v_],...yt in this?{args:this[yt]}:void 0}},toString(){return xt(this)},[Xe](){return xt(this)}};function D$(e){return uh("Micro.evaluate: Not implemented")}const sf=e=>({...j$,[v_]:e.op,[lh]:e.eval??D$,[Bo]:e.contA,[go]:e.contE,[Ll]:e.ensure}),hm=e=>{const t=sf(e);return function(){const n=Object.create(t);return n[yt]=e.single===!1?arguments:arguments[0],n}},w_=e=>{const t={...sf(e),[Nl]:Nl,_tag:e.op,get[e.prop](){return this[yt]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[yt]}},[Oe](n){return W$(n)&&n._tag===e.op&&Ce(this[yt],n[yt])},[Me](){return et(this,Fe(st(e.op))(me(this[yt])))}};return function(n){const r=Object.create(t);return r[yt]=n,r[Bo]=void 0,r[go]=void 0,r[Ll]=void 0,r}},pm=w_({op:"Success",prop:"value",eval(e){const t=e.getCont(Bo);return t?t[Bo](this[yt],e):e.yieldWith(this)}}),S_=w_({op:"Failure",prop:"cause",eval(e){let t=e.getCont(go);for(;$$(this[yt])&&t&&e.interruptible;)t=e.getCont(go);return t?t[go](this[yt],e):e.yieldWith(this)}}),V$=hm({op:"Yield",eval(e){let t=!1;return e.getRef(bm).scheduleTask(()=>{t||e.evaluate(q$)},this[yt]??0),e.yieldWith(()=>{t=!0})}}),B$=V$(0),z$=pm(void 0),mm=hm({op:"WithMicroFiber",eval(e){return this[yt](e)}}),jl=P(2,(e,t)=>{const n=Object.create(U$);return n[yt]=e,n[Bo]=t,n}),U$=sf({op:"OnSuccess",eval(e){return e._stack.push(this),this[yt]}}),W$=e=>Re(e,Nl),__=pm,gm=S_,ym=gm(P$()),uh=e=>gm(M$(e)),q$=__(void 0),K$="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class x_{tasks=[];running=!1;scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,K$(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(J$)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const H$=P(2,(e,t)=>mm(n=>{const r=n.context;return n.context=t(r),Z$(e,()=>(n.context=r,z$))})),G$=P(2,(e,t)=>H$(e,ES(t)));class J$ extends RS()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class bm extends RS()("effect/Micro/currentScheduler",{defaultValue:()=>new x_}){}const Y$=P(2,(e,t)=>{const n=Object.create(X$);return n[yt]=e,n[Bo]=t.onSuccess,n[go]=t.onFailure,n}),X$=sf({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[yt]}}),Z$=P(2,(e,t)=>eF(n=>Y$(n(e),{onFailure:r=>jl(t(gm(r)),()=>S_(r)),onSuccess:r=>jl(t(__(r)),()=>pm(r))}))),E_=hm({op:"SetInterruptible",ensure(e){if(e.interruptible=this[yt],e._interrupted&&e.interruptible)return()=>ym}}),Q$=e=>mm(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(E_(!1)),t._interrupted?ym:e)),eF=e=>mm(t=>t.interruptible?(t.interruptible=!1,t._stack.push(E_(!0)),e(Q$)):e(Qe)),tF=(e,t)=>{const n=new N$(bm.context(new x_));return n.evaluate(e),n};class R_{buckets=[];scheduleTask(t,n){const r=this.buckets.length;let s,o=0;for(;o<r&&this.buckets[o][0]<=n;o++)s=this.buckets[o];s&&s[0]===n?s[1].push(t):o===r?this.buckets.push([n,[t]]):this.buckets.splice(o,0,[n,[t]])}}class nF{maxNextTickBeforeTimer;running=!1;tasks=new R_;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let o=0;o<s.length;o++)s[o]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(U0)?t.getFiberRef(Qu):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const k_=Le(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new nF(2048));class O_{tasks=new R_;deferred=!1;scheduleTask(t,n){this.deferred?k_.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(U0)?t.getFiberRef(Qu):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}}const C_=Le(Symbol.for("effect/FiberRef/currentScheduler"),()=>Yt(k_)),I_=Le(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Yt(new Map)),Py=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return am(o2,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},vm="InterruptSignal",wm="Stateful",Sm="Resume",_m="YieldNow",Qf=e=>({_tag:vm,cause:e}),Qc=e=>({_tag:wm,onFiber:e}),Hs=e=>({_tag:Sm,effect:e}),rF=()=>({_tag:_m}),sF="effect/FiberScope",Dl=Symbol.for(sF);class oF{[Dl]=Dl;fiberId=Ao;roots=new Set;add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class iF{fiberId;parent;[Dl]=Dl;constructor(t,n){this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(Qc(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const aF=e=>new iF(e.id(),e),xm=Le(Symbol.for("effect/FiberScope/Global"),()=>new oF),cF="effect/Fiber",lF=Symbol.for(cF),uF={_E:e=>e,_A:e=>e},fF="effect/Fiber",dF=Symbol.for(fF),T_=e=>L0(M0(e.await),e.inheritAll);({...$a});const Qr="effect/FiberCurrent",hF="effect/Logger",pF=Symbol.for(hF),mF={_Message:e=>e,_Output:e=>e},Em=e=>({[pF]:mF,log:e,pipe(){return Ee(this,arguments)}}),gF=/^[^\s"=]*$/,yF=(e,t)=>({annotations:n,cause:r,date:s,fiberId:o,logLevel:i,message:a,spans:c})=>{const l=p=>p.match(gF)?p:e(p),u=(p,m)=>`${l_(p)}=${l(m)}`,f=(p,m)=>" "+u(p,m);let h=u("timestamp",s.toISOString());h+=f("level",i.label),h+=f("fiber",YS(o));const d=CO(a);for(let p=0;p<d.length;p++)h+=f("message",_o(d[p],t));iA(r)||(h+=f("cause",ei(r,{renderErrorCause:!0})));for(const p of c)h+=" "+ZP(s.getTime())(p);for(const[p,m]of n)h+=f(p,_o(m,t));return h},bF=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,vF=Em(yF(bF)),wF=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;wF&&process.stdout.isTTY;const M_="effect/MetricBoundaries",fh=Symbol.for(M_);class SF{values;[fh]=fh;constructor(t){this.values=t,this._hash=z(st(M_),Fe(Ma(this.values)))}_hash;[Me](){return this._hash}[Oe](t){return _F(t)&&Ce(this.values,t.values)}pipe(){return Ee(this,arguments)}}const _F=e=>Re(e,fh),xF=e=>{const t=z(e,_w(on(Number.POSITIVE_INFINITY)),HO);return new SF(t)},EF=e=>z(dr(e.count-1,t=>e.start*Math.pow(e.factor,t)),Fu,xF),RF="effect/MetricKeyType",A_=Symbol.for(RF),P_="effect/MetricKeyType/Counter",dh=Symbol.for(P_),kF="effect/MetricKeyType/Frequency",OF=Symbol.for(kF),CF="effect/MetricKeyType/Gauge",IF=Symbol.for(CF),$_="effect/MetricKeyType/Histogram",hh=Symbol.for($_),TF="effect/MetricKeyType/Summary",MF=Symbol.for(TF),F_={_In:e=>e,_Out:e=>e};class AF{incremental;bigint;[A_]=F_;[dh]=dh;constructor(t,n){this.incremental=t,this.bigint=n,this._hash=st(P_)}_hash;[Me](){return this._hash}[Oe](t){return N_(t)}pipe(){return Ee(this,arguments)}}class PF{boundaries;[A_]=F_;[hh]=hh;constructor(t){this.boundaries=t,this._hash=z(st($_),Fe(me(this.boundaries)))}_hash;[Me](){return this._hash}[Oe](t){return L_(t)&&Ce(this.boundaries,t.boundaries)}pipe(){return Ee(this,arguments)}}const $F=e=>new AF(e?.incremental??!1,e?.bigint??!1),FF=e=>new PF(e),N_=e=>Re(e,dh),NF=e=>Re(e,OF),LF=e=>Re(e,IF),L_=e=>Re(e,hh),jF=e=>Re(e,MF),DF="effect/MetricKey",j_=Symbol.for(DF),VF={_Type:e=>e},BF=Mp(Ce);class Rm{name;keyType;description;tags;[j_]=VF;constructor(t,n,r,s=[]){this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=z(st(this.name+this.description),Fe(me(this.keyType)),Fe(Ma(this.tags)))}_hash;[Me](){return this._hash}[Oe](t){return zF(t)&&this.name===t.name&&Ce(this.keyType,t.keyType)&&Ce(this.description,t.description)&&BF(this.tags,t.tags)}pipe(){return Ee(this,arguments)}}const zF=e=>Re(e,j_),UF=(e,t)=>new Rm(e,$F(t),Ru(t?.description)),WF=(e,t,n)=>new Rm(e,FF(t),Ru(n)),qF=P(2,(e,t)=>t.length===0?e:new Rm(e.name,e.keyType,e.description,Gc(e.tags,t))),KF="effect/MetricState",Ja=Symbol.for(KF),D_="effect/MetricState/Counter",ph=Symbol.for(D_),V_="effect/MetricState/Frequency",mh=Symbol.for(V_),B_="effect/MetricState/Gauge",gh=Symbol.for(B_),z_="effect/MetricState/Histogram",yh=Symbol.for(z_),U_="effect/MetricState/Summary",bh=Symbol.for(U_),Ya={_A:e=>e};class HF{count;[Ja]=Ya;[ph]=ph;constructor(t){this.count=t}[Me](){return z(me(D_),Fe(me(this.count)),et(this))}[Oe](t){return sN(t)&&this.count===t.count}pipe(){return Ee(this,arguments)}}const GF=Mp(Ce);class JF{occurrences;[Ja]=Ya;[mh]=mh;constructor(t){this.occurrences=t}_hash;[Me](){return z(st(V_),Fe(Ma(Ye(this.occurrences.entries()))),et(this))}[Oe](t){return oN(t)&&GF(Ye(this.occurrences.entries()),Ye(t.occurrences.entries()))}pipe(){return Ee(this,arguments)}}class YF{value;[Ja]=Ya;[gh]=gh;constructor(t){this.value=t}[Me](){return z(me(B_),Fe(me(this.value)),et(this))}[Oe](t){return iN(t)&&this.value===t.value}pipe(){return Ee(this,arguments)}}class XF{buckets;count;min;max;sum;[Ja]=Ya;[yh]=yh;constructor(t,n,r,s,o){this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=o}[Me](){return z(me(z_),Fe(me(this.buckets)),Fe(me(this.count)),Fe(me(this.min)),Fe(me(this.max)),Fe(me(this.sum)),et(this))}[Oe](t){return aN(t)&&Ce(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return Ee(this,arguments)}}class ZF{error;quantiles;count;min;max;sum;[Ja]=Ya;[bh]=bh;constructor(t,n,r,s,o,i){this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=o,this.sum=i}[Me](){return z(me(U_),Fe(me(this.error)),Fe(me(this.quantiles)),Fe(me(this.count)),Fe(me(this.min)),Fe(me(this.max)),Fe(me(this.sum)),et(this))}[Oe](t){return cN(t)&&this.error===t.error&&Ce(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return Ee(this,arguments)}}const QF=e=>new HF(e),eN=e=>new JF(e),tN=e=>new YF(e),nN=e=>new XF(e.buckets,e.count,e.min,e.max,e.sum),rN=e=>new ZF(e.error,e.quantiles,e.count,e.min,e.max,e.sum),sN=e=>Re(e,ph),oN=e=>Re(e,mh),iN=e=>Re(e,gh),aN=e=>Re(e,yh),cN=e=>Re(e,bh),lN="effect/MetricHook",uN=Symbol.for(lN),fN={_In:e=>e,_Out:e=>e},Xa=e=>({[uN]:fN,pipe(){return Ee(this,arguments)},...e}),$y=BigInt(0),dN=e=>{let t=e.keyType.bigint?$y:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=$y:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return Xa({get:()=>QF(t),update:r,modify:r})},hN=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return Xa({get:()=>eN(t),update:n,modify:n})},pN=(e,t)=>{let n=t;return Xa({get:()=>tN(n),update:r=>{n=r},modify:r=>{n=n+r}})},mN=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float64Array(n);let o=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;z(t,ca(Ro),ho((f,h)=>{s[h]=f}));const l=f=>{let h=0,d=n;for(;h!==d;){const p=Math.floor(h+(d-h)/2),m=s[p];f<=m?d=p:h=p,d===h+1&&(f<=s[h]?d=h:h=d)}r[h]=r[h]+1,o=o+1,i=i+f,f<a&&(a=f),f>c&&(c=f)},u=()=>{const f=Ou(n);let h=0;for(let d=0;d<n;d++){const p=s[d],m=r[d];h=h+m,f[d]=[p,h]}return f};return Xa({get:()=>nN({buckets:u(),count:o,min:a,max:c,sum:i}),update:l,modify:l})},gN=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,o=z(s,ca(Ro)),i=Ou(r);let a=0,c=0,l=0,u=0,f=0;const h=p=>{const m=[];let y=0;for(;y!==r-1;){const g=i[y];if(g!=null){const[b,v]=g,S=Bd(p-b);AI(S,PS)&&MI(S,n)&&m.push(v)}y=y+1}return yN(t,o,ca(m,Ro))},d=(p,m)=>{if(r>0){a=a+1;const y=a%r;i[y]=[m,p]}u=c===0?p:Math.min(u,p),f=c===0?p:Math.max(f,p),c=c+1,l=l+p};return Xa({get:()=>rN({error:t,quantiles:h(Date.now()),count:c,min:u,max:f,sum:l}),update:([p,m])=>d(p,m),modify:([p,m])=>d(p,m)})},yN=(e,t,n)=>{const r=n.length;if(!ot(t))return Eo();const s=t[0],o=t.slice(1),i=Fy(e,r,ge(),0,s,n),a=Cn(i);return o.forEach(c=>{a.push(Fy(e,r,i.value,i.consumed,c,i.rest))}),ho(a,c=>[c.quantile,c.value])},Fy=(e,t,n,r,s,o)=>{let i=e,a=t,c=n,l=r,u=s,f=o,h=e,d=t,p=n,m=r,y=s,g=o;for(;;){if(!ot(f))return{quantile:u,value:ge(),consumed:l,rest:[]};if(u===1)return{quantile:u,value:be(kw(f)),consumed:l+f.length,rest:[]};const b=Bt(f),v=jO(f,x=>x===b),S=u*a,_=i/2*S,k=l+v[0].length,I=Math.abs(k-S);if(k<S-_){h=i,d=a,p=Hi(f),m=k,y=u,g=v[1],i=h,a=d,c=p,l=m,u=y,f=g;continue}if(k>S+_){const x=_t(c)?be(b):c;return{quantile:u,value:x,consumed:l,rest:f}}switch(c._tag){case"None":{h=i,d=a,p=Hi(f),m=k,y=u,g=v[1],i=h,a=d,c=p,l=m,u=y,f=g;continue}case"Some":{const x=Math.abs(S-c.value);if(I<x){h=i,d=a,p=Hi(f),m=k,y=u,g=v[1],i=h,a=d,c=p,l=m,u=y,f=g;continue}return{quantile:u,value:be(c.value),consumed:l,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},bN="effect/MetricPair",vN=Symbol.for(bN),wN={_Type:e=>e},SN=(e,t)=>({[vN]:wN,metricKey:e,metricState:t,pipe(){return Ee(this,arguments)}}),_N="effect/MetricRegistry",Ny=Symbol.for(_N);class xN{[Ny]=Ny;map=I2();snapshot(){const t=[];for(const[n,r]of this.map)t.push(SN(n,r.get()));return t}get(t){const n=z(this.map,ts(t),Un);if(n==null){if(N_(t.keyType))return this.getCounter(t);if(LF(t.keyType))return this.getGauge(t);if(NF(t.keyType))return this.getFrequency(t);if(L_(t.keyType))return this.getHistogram(t);if(jF(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=z(this.map,ts(t),Un);if(n==null){const r=dN(t);z(this.map,gi(t))||z(this.map,yi(t,r)),n=r}return n}getFrequency(t){let n=z(this.map,ts(t),Un);if(n==null){const r=hN(t);z(this.map,gi(t))||z(this.map,yi(t,r)),n=r}return n}getGauge(t){let n=z(this.map,ts(t),Un);if(n==null){const r=pN(t,t.keyType.bigint?BigInt(0):0);z(this.map,gi(t))||z(this.map,yi(t,r)),n=r}return n}getHistogram(t){let n=z(this.map,ts(t),Un);if(n==null){const r=mN(t);z(this.map,gi(t))||z(this.map,yi(t,r)),n=r}return n}getSummary(t){let n=z(this.map,ts(t),Un);if(n==null){const r=gN(t);z(this.map,gi(t))||z(this.map,yi(t,r)),n=r}return n}}const EN=()=>new xN,RN="effect/Metric",kN=Symbol.for(RN),ON={_Type:e=>e,_In:e=>e,_Out:e=>e},Ly=Le(Symbol.for("effect/Metric/globalMetricRegistry"),()=>EN()),W_=function(e,t,n,r){const s=Object.assign(o=>DA(o,i=>MN(s,i)),{[kN]:ON,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return Ee(this,arguments)}});return s},of=(e,t)=>q_(UF(e,t)),q_=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=Ly.get(e)),t;let o=n.get(s);return o!==void 0||(o=Ly.get(qF(e,s)),n.set(s,o)),o};return W_(e.keyType,(s,o)=>r(o).update(s),s=>r(s).get(),(s,o)=>r(o).modify(s))},CN=(e,t,n)=>q_(WF(e,t,n)),IN=P(3,(e,t,n)=>TN(e,[i$(t,n)])),TN=P(2,(e,t)=>W_(e.keyType,(n,r)=>e.unsafeUpdate(n,Gc(t,r)),n=>e.unsafeValue(Gc(t,n)),(n,r)=>e.unsafeModify(n,Gc(t,r)))),MN=P(2,(e,t)=>am(th,n=>_e(()=>e.unsafeUpdate(t,n))));({...Sp});const AN=P(2,(e,t)=>am(I_,n=>_e(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,H0(r.result,t))}}))),PN="effect/Supervisor",af=Symbol.for(PN),km={_T:e=>e};class cf{underlying;value0;[af]=km;constructor(t,n){this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new cf(this,z(this.value,Vt(t)))}zip(t){return new lf(this,t)}}class lf{left;right;_tag="Zip";[af]=km;constructor(t,n){this.left=t,this.right=n}get value(){return N0(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new cf(this,z(this.value,Vt(t)))}zip(t){return new lf(this,t)}}const K_=e=>Re(e,af)&&tw(e,"Zip");class $N{effect;[af]=km;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new cf(this,z(this.value,Vt(t)))}zip(t){return new lf(this,t)}onRun(t,n){return t()}}const FN=e=>new $N(e),uf=Le("effect/Supervisor/none",()=>FN(Fn)),NN=Yo,H_="Empty",G_="AddSupervisor",J_="RemoveSupervisor",Y_="AndThen",Ji={_tag:H_},el=(e,t)=>({_tag:Y_,first:e,second:t}),LN=(e,t)=>jN(t,on(e)),jN=(e,t)=>{let n=e,r=t;for(;Co(r);){const s=Io(r);switch(s._tag){case H_:{r=is(r);break}case G_:{n=n.zip(s.supervisor),r=is(r);break}case J_:{n=vh(n,s.supervisor),r=is(r);break}case Y_:{r=Pn(s.first)(Pn(s.second)(is(r)));break}}}return n},vh=(e,t)=>Ce(e,t)?uf:K_(e)?vh(e.left,t).zip(vh(e.right,t)):e,Vl=e=>Ce(e,uf)?Es():K_(e)?z(Vl(e.left),fa(Vl(e.right))):Gp(e),DN=(e,t)=>{if(Ce(e,t))return Ji;const n=Vl(e),r=Vl(t),s=z(r,Yg(n),kl(Ji,(i,a)=>el(i,{_tag:G_,supervisor:a}))),o=z(n,Yg(r),kl(Ji,(i,a)=>el(i,{_tag:J_,supervisor:a})));return el(s,o)},VN=NN({empty:Ji,patch:LN,combine:el,diff:DN}),BN=of("effect_fiber_started",{incremental:!0}),jy=of("effect_fiber_active"),zN=of("effect_fiber_successes",{incremental:!0}),UN=of("effect_fiber_failures",{incremental:!0}),WN=IN(CN("effect_fiber_lifetimes",EF({start:.5,factor:2,count:35})),"time_unit","milliseconds"),bi="Continue",qN="Done",Dy="Yield",KN={_E:e=>e,_A:e=>e},gc=e=>{throw new Error(`BUG: FiberRuntime - ${_o(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},lr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),ur=Le("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vi={[bl]:(e,t,n)=>jt(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>it(it(n)),[vl]:(e,t,n)=>jt(()=>t.effect_instruction_i2(n)),[vp]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Pr(e.currentRuntimeFlags)&&e.isInterrupted()?qe(e.getInterruptedCause()):it(n)),[wl]:(e,t,n)=>(jt(()=>t.effect_instruction_i2(n)),jt(()=>t.effect_instruction_i0())?(e.pushStack(t),jt(()=>t.effect_instruction_i1())):Fn),[Kc]:(e,t,n)=>{for(;;){const r=jt(()=>t.effect_instruction_i0.next(n));if(r.done)return it(r.value);const s=Mk(r.value);if(tf(s)){if(s._tag==="Failure")return s}else return e.pushStack(t),s;n=s.value}}},HN={[vm]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Pr(t)?qe(r.cause):n),[Sm]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[wm]:(e,t,n,r)=>(r.onFiber(e,y_(t)),n),[_m]:(e,t,n,r)=>xe(om(),()=>n)},GN=e=>Ju(UM(e),t=>bs(rA(t),([n,r])=>{const s=new Map,o=[];for(const a of r){o.push(gs(a));for(const c of a)s.set(c.request,c)}const i=o.flat();return Zu(cL(n.runAll(o),i,()=>i.forEach(a=>{a.listeners.interrupted=!0})),I_,s)},!1,!1)),JN=wp();class X_ extends t${[lF]=uF;[dF]=KN;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(t,n,r){if(super(),this.currentRuntimeFlags=r,this._fiberId=t,this._fiberRefs=n,ty(r)){const s=this.getFiberRef(th);BN.unsafeUpdate(1,s),jy.unsafeUpdate(1,s)}this.refreshRefCache()}commit(){return T_(this)}id(){return this._fiberId}resume(t){this.tell(Hs(t))}get status(){return this.ask((t,n)=>n)}get runtimeFlags(){return this.ask((t,n)=>O$(n)?t.currentRuntimeFlags:n.runtimeFlags)}scope(){return aF(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(pc)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return gt(()=>{const n=w2(this._fiberId);return this.tell(Qc((r,s)=>{H0(n,_e(()=>t(r,s)))})),K0(n)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ma(t=>{const n=r=>t(We(r));return this.tell(Qc((r,s)=>{r._exitValue!==null?n(this._exitValue):r.addObserver(n)})),_e(()=>this.tell(Qc((r,s)=>{r.removeObserver(n)})))},this.id())}get inheritAll(){return Jt((t,n)=>{const r=t.id(),s=t.getFiberRefs(),o=n.runtimeFlags,i=this.getFiberRefs(),a=$P(s,r,i);t.setFiberRefs(a);const c=t.getFiberRef(Wy),l=z(Xc(o,c),ry(Xo),ry(Zd));return BA(l)})}get poll(){return _e(()=>Ru(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return _e(()=>this.tell(Qf($r(t))))}unsafeInterruptAsFork(t){this.tell(Qf($r(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(n=>n!==t)}getFiberRefs(){return this.setFiberRef(Wy,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=c_(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,n){this._fiberRefs=rh(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef($l),this.currentTracer=this.currentDefaultServices.unsafeMap.get(s_.key),this.currentSupervisor=this.getFiberRef(aL),this.currentScheduler=this.getFiberRef(C_),this.currentContext=this.getFiberRef(Ha),this.currentSpan=this.currentContext.unsafeMap.get(o_.key)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}transferChildren(t){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const r of n)r._exitValue===null&&t.add(this.currentRuntimeFlags,r)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let n=bi;const r=globalThis[Qr];globalThis[Qr]=this;try{for(;n===bi;)n=this._queue.length===0?qN:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Qr]=r}this._queue.length>0&&!this._running?(this._running=!0,n===Dy?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(Qu))}drainQueueWhileRunning(t,n){let r=n;for(;this._queue.length>0;){const s=this._queue.splice(0,1)[0];r=HN[s._tag](this,t,r,s)}return r}isInterrupted(){return!cA(this.getFiberRef(pc))}addInterruptedCause(t){const n=this.getFiberRef(pc);this.setFiberRef(pc,vn(n,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(const n of this._children)n.tell(Qf($r(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const t=this._children.values();this._children=null;let n=!1;return sm({while:()=>!n,body:()=>{const s=t.next();return s.done?_e(()=>{n=!0}):qa(s.value.await)},step:()=>{}})}return null}reportExitValue(t){if(ty(this.currentRuntimeFlags)){const n=this.getFiberRef(th),r=this.id().startTimeMillis,s=Date.now();switch(WN.unsafeUpdate(s-r,n),jy.unsafeUpdate(-1,n),t._tag){case _n:{zN.unsafeUpdate(1,n);break}case Sn:{UN.unsafeUpdate(1,n);break}}}if(t._tag==="Failure"){const n=this.getFiberRef(a2);!em(t.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,n)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](t);this._observers=[]}getLoggers(){return this.getFiberRef(eL)}log(t,n,r){const s=ct(r)?r.value:this.getFiberRef(n2),o=this.getFiberRef(YN);if(YP(o,s))return;const i=this.getFiberRef(r2),a=this.getFiberRef(t2),c=this.getLoggers(),l=this.getFiberRefs();if(qS(c)>0){const u=_S(this.getFiberRef($l),nf),f=new Date(u.unsafeCurrentTimeMillis());jk(l,()=>{for(const h of c)h.log({fiberId:this.id(),logLevel:s,message:t,cause:n,context:l,spans:i,annotations:a,date:f})})}}evaluateMessageWhileSuspended(t){switch(t._tag){case _m:return Dy;case vm:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(qe(t.cause)),this._asyncInterruptor=null),bi;case Sm:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),bi;case wm:return t.onFiber(this,this._exitValue!==null?R$:k$(this.currentRuntimeFlags,this._asyncBlockingOn)),bi;default:return gc(t)}}evaluateEffect(t){this.currentSupervisor.onResume(this);try{let n=Pr(this.currentRuntimeFlags)&&this.isInterrupted()?qe(this.getInterruptedCause()):t;for(;n!==null;){const r=n,s=this.runLoop(r);if(s===lr){const o=ur.currentOp;ur.currentOp=null,o._op===Hc?jM(this.currentRuntimeFlags)?(this.tell(rF()),this.tell(Hs(as)),n=null):n=as:o._op===Ki&&(n=null)}else{this.currentRuntimeFlags=z(this.currentRuntimeFlags,DM(Zd));const o=this.interruptAllChildren();o!==null?n=xe(o,()=>s):(this._queue.length===0?this.setExitValue(s):this.tell(Hs(s)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Hs(t));else{this._running=!0;const n=globalThis[Qr];globalThis[Qr]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[Qr]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Hs(t))}patchRuntimeFlags(t,n){const r=Zc(t,n);return globalThis[Qr]=this,this.currentRuntimeFlags=r,r}initiateAsync(t,n){let r=!1;const s=o=>{r||(r=!0,this.tell(Hs(o)))};Pr(t)&&(this._asyncInterruptor=s);try{n(s)}catch(o){s($n(Hn(o)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==zf)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==bl&&t._op!==wl&&t._op!==Kc)return t;t=this.popStack()}}[Vk](t){return _e(()=>xS(this.currentContext,t))}Left(t){return Lt(t.left)}None(t){return Lt(new lm)}Right(t){return it(t.right)}Some(t){return it(t.value)}Micro(t){return Ml(n=>{let r=n;const s=tF(G$(t,this.currentContext));return s.addObserver(o=>{if(o._tag==="Success")return r(it(o.value));switch(o.cause._tag){case"Interrupt":return r(qe($r(Ao)));case"Fail":return r(Lt(o.cause.error));case"Die":return r(cy(o.cause.defect))}}),Ml(o=>{r=i=>{o(Fn)},s.unsafeInterrupt()})})}[lw](t){const n=jt(()=>t.effect_instruction_i0()),r=this.getNextSuccessCont();return r!==void 0?(r._op in vi||gc(r),vi[r._op](this,r,n)):(ur.currentOp=it(n),lr)}[_n](t){const n=t,r=this.getNextSuccessCont();return r!==void 0?(r._op in vi||gc(r),vi[r._op](this,r,n.effect_instruction_i0)):(ur.currentOp=n,lr)}[Sn](t){const n=t.effect_instruction_i0,r=this.getNextFailCont();if(r!==void 0)switch(r._op){case zf:case vl:return Pr(this.currentRuntimeFlags)&&this.isInterrupted()?qe(sy(n)):jt(()=>r.effect_instruction_i1(n));case"OnStep":return Pr(this.currentRuntimeFlags)&&this.isInterrupted()?qe(sy(n)):it(qe(n));case vp:return this.patchRuntimeFlags(this.currentRuntimeFlags,r.patch),Pr(this.currentRuntimeFlags)&&this.isInterrupted()?qe(vn(n,this.getInterruptedCause())):qe(n);default:gc(r)}else return ur.currentOp=qe(n),lr}[uw](t){return jt(()=>t.effect_instruction_i0(this,y_(this.currentRuntimeFlags)))}Blocked(t){const n=this.getFiberRefs(),r=this.currentRuntimeFlags;if(this._steps.length>0){const s=[],o=this._steps[this._steps.length-1];let i=this.popStack();for(;i&&i._op!=="OnStep";)s.push(i),i=this.popStack();this.setFiberRefs(o.refs),this.currentRuntimeFlags=o.flags;const a=m$(o.refs,n),c=Xc(o.flags,r);return it(E0(t.effect_instruction_i0,Jt(l=>{for(;s.length>0;)l.pushStack(s.pop());return l.setFiberRefs(g$(l.id(),l.getFiberRefs())(a)),l.currentRuntimeFlags=Zc(c)(l.currentRuntimeFlags),t.effect_instruction_i1})))}return Xu(s=>xe(Z_(TA(t.effect_instruction_i0)),()=>s(t.effect_instruction_i1)))}RunBlocked(t){return GN(t.effect_instruction_i0)}[Aa](t){const n=t.effect_instruction_i0,r=this.currentRuntimeFlags,s=Zc(r,n);if(Pr(s)&&this.isInterrupted())return qe(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),t.effect_instruction_i1){const o=Xc(s,r);return this.pushStack(new MA(o,t)),jt(()=>t.effect_instruction_i1(r))}else return as}[bl](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[zf](t){return this.pushStack(t),t.effect_instruction_i0}[vl](t){return this.pushStack(t),t.effect_instruction_i0}[Ki](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,t.effect_instruction_i0),ur.currentOp=t,lr}[Hc](t){return this._isYielding=!1,ur.currentOp=t,lr}[wl](t){const n=t.effect_instruction_i0,r=t.effect_instruction_i1;return n()?(this.pushStack(t),r()):as}[Kc](t){return vi[Kc](this,t,void 0)}[xu](t){return jt(()=>t.commit())}runLoop(t){let n=t;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&LM)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const r=this.currentScheduler.shouldYield(this);if(r!==!1){this._isYielding=!0,this.currentOpCount=0;const s=n;n=xe(om({priority:r}),()=>s)}}try{if(n=this.currentTracer.context(()=>{if(JN!==n[Do]._V){const r=this.getFiberRef(c2);if(r._tag==="Some"){const s=n[Do]._V;this.log(`Executing an Effect versioned ${s} with a Runtime of version ${wp()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,No,r)}}return this[n._op](n)},this),n===lr){const r=ur.currentOp;return r._op===Hc||r._op===Ki?lr:(ur.currentOp=null,r._op===_n||r._op===Sn?r:qe(Hn(r)))}}catch(r){n!==lr&&!Re(n,"_op")||!(n._op in this)?n=$A(`Not a valid effect: ${_o(n)}`):h2(r)?n=qe(vn(Hn(r),$r(Ao))):n=cy(r)}}}run=()=>{this.drainQueueOnCurrentThread()}}const YN=Le("effect/FiberRef/currentMinimumLogLevel",()=>Yt(XP("Info"))),XN=e=>Em(t=>{const n=jP(t.context,$l);_S(n,n_).unsafe.log(e.log(t))}),ZN=Le(Symbol.for("effect/Logger/defaultLogger"),()=>XN(vF)),QN=Le(Symbol.for("effect/Logger/tracerLogger"),()=>Em(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:o})=>{const i=ja(ga(n,Ha),o_);if(i._tag==="None"||i.value._tag==="ExternalSpan")return;const a=xS(ga(n,$l),nf),c={};for(const[l,u]of e)c[l]=u;c["effect.fiberId"]=ET(r),c["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=ei(t,{renderErrorCause:!0})),i.value.event(_o(Array.isArray(o)&&o.length===1?o[0]:o),a.unsafeCurrentTimeNanos(),c)})),eL=Le(Symbol.for("effect/FiberRef/currentLoggers"),()=>ZA(Gp(ZN,QN))),tL=P(e=>wk(e[0]),(e,t,n)=>Jt(r=>{const s=n?.batching===!0||n?.batching==="inherit"&&r.getFiberRef(i2);return n?.discard?Py(n.concurrency,()=>Gs(ih,n?.concurrentFinalizers)(o=>s?bs(e,(i,a)=>o(t(i,a)),!0,!1,1):Ju(e,(i,a)=>o(t(i,a)))),()=>Gs(ah,n?.concurrentFinalizers)(o=>bs(e,(i,a)=>o(t(i,a)),s,!1)),o=>Gs(ch(o),n?.concurrentFinalizers)(i=>bs(e,(a,c)=>i(t(a,c)),s,!1,o))):Py(n?.concurrency,()=>Gs(ih,n?.concurrentFinalizers)(o=>s?Vy(e,1,(i,a)=>o(t(i,a)),!0):Lr(e,(i,a)=>o(t(i,a)))),()=>Gs(ah,n?.concurrentFinalizers)(o=>nL(e,(i,a)=>o(t(i,a)),s)),o=>Gs(ch(o),n?.concurrentFinalizers)(i=>Vy(e,o,(a,c)=>i(t(a,c)),s)))})),nL=(e,t,n)=>gt(()=>{const r=Ye(e),s=new Array(r.length);return Ka(bs(r,(i,a)=>xe(t(i,a),c=>_e(()=>s[a]=c)),n,!1),We(s))}),bs=(e,t,n,r,s)=>Xu(o=>VA(i=>Jt(a=>{let c=Array.from(e).reverse(),l=c.length;if(l===0)return Fn;let u=0,f=!1;const h=s?Math.min(c.length,s):c.length,d=new Set,p=new Array,m=()=>d.forEach(x=>{x.currentScheduler.scheduleTask(()=>{x.unsafeInterruptAsFork(a.id())},0)}),y=new Array,g=new Array,b=new Array,v=()=>{const x=p.filter(({exit:R})=>R._tag==="Failure").sort((R,T)=>R.index<T.index?-1:R.index===T.index?0:1).map(({exit:R})=>R);return x.length===0&&x.push(as),x},S=(x,R=!1)=>{const T=F0(i(x)),M=sL(T,a,a.currentRuntimeFlags,xm);return a.currentScheduler.scheduleTask(()=>{R&&M.unsafeInterruptAsFork(a.id()),M.resume(T)},0),M},_=()=>{r||(l-=c.length,c=[]),f=!0,m()},k=n?LA:C0,I=S(ma(x=>{const R=(M,B)=>{M._op==="Blocked"?b.push(M):(p.push({index:B,exit:M}),M._op==="Failure"&&!f&&_())},T=()=>{if(c.length>0){const M=c.pop();let B=u++;const U=()=>{const N=c.pop();return B=u++,xe(om(),()=>xe(k(o(t(N,B))),V))},V=N=>c.length>0&&(R(N,B),c.length>0)?U():We(N),$=xe(k(o(t(M,B))),V),O=S($);y.push(O),d.add(O),f&&O.currentScheduler.scheduleTask(()=>{O.unsafeInterruptAsFork(a.id())},0),O.addObserver(N=>{let C;if(N._op==="Failure"?C=N:C=N.effect_instruction_i0,g.push(O),d.delete(O),R(C,B),p.length===l)x(We(lt(hy(v(),{parallel:!0}),()=>as)));else if(b.length+p.length===l){const L=v(),W=b.map(q=>q.effect_instruction_i0).reduce(p0);x(We(E0(W,bs([lt(hy(L,{parallel:!0}),()=>as),...b.map(q=>q.effect_instruction_i1)],q=>q,n,!0,s))))}else T()})}};for(let M=0;M<h;M++)T()}));return qa(rm(M0(o(T_(I))),q0({onFailure:x=>{_();const R=b.length+1,T=Math.min(typeof s=="number"?s:b.length,b.length),M=Array.from(b);return ma(B=>{let U=0,V=0;const $=(N,C)=>L=>{U++,U===R&&B(it(qe(x))),M.length>0&&C&&O()},O=()=>{S(M.pop(),!0).addObserver($(V,!0)),V++};I.addObserver($(V,!1)),V++;for(let N=0;N<T;N++)O()})},onSuccess:()=>Lr(g,x=>x.inheritAll)})))}))),Vy=(e,t,n,r)=>gt(()=>{const s=Ye(e),o=new Array(s.length);return Ka(bs(s,(a,c)=>Vt(n(a,c),l=>o[c]=l),r,!1,t),We(o))}),Z_=e=>oL(e,xm),rL=(e,t,n,r=null)=>{const s=Q_(e,t,n,r);return s.resume(e),s},sL=(e,t,n,r=null)=>Q_(e,t,n,r),Q_=(e,t,n,r=null)=>{const s=XS(),o=t.getFiberRefs(),i=FP(o,s),a=new X_(s,i,n),c=ga(i,Ha),l=a.currentSupervisor;return l.onStart(c,e,be(t),a),a.addObserver(f=>l.onEnd(f,a)),(r!==null?r:z(t.getFiberRef(nh),lt(()=>t.scope()))).add(n,a),a},oL=(e,t)=>Jt((n,r)=>We(rL(e,n,r.runtimeFlags,t))),By=e=>Ga(t=>Gt(ja(t,Za),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return xe(ef(n,ah),r=>Om(e,r))}}})),zy=e=>t=>Ga(n=>Gt(ja(n,Za),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:xe(ef(r,ch(e)),s=>Om(t,s))})),Gs=(e,t)=>n=>Ga(r=>Gt(ja(r,Za),{onNone:()=>n(Qe),onSome:s=>{if(t===!0){const o=e._tag==="Parallel"?By:e._tag==="Sequential"?Uy:zy(e.parallelism);switch(s.strategy._tag){case"Parallel":return o(n(By));case"Sequential":return o(n(Uy));case"ParallelN":return o(n(zy(s.strategy.parallelism)))}}else return n(Qe)}})),Uy=e=>Ga(t=>Gt(ja(t,Za),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return xe(ef(n,ih),r=>Om(e,r))}}})),Za=Fs("effect/Scope"),Om=P(2,(e,t)=>R2(e,ES(iI(Za,t)))),iL=e=>ti(e,{differ:VN,fork:Ji}),Wy=e2(VM),aL=iL(uf),cL=(e,t,n)=>T0(r=>xe(xe(Z_(A0(e)),s=>ma(o=>{const i=t.map(l=>l.listeners.count),a=()=>{i.every(l=>l===0)&&t.every(l=>l.result.state.current._tag==="Pending"?!0:!!(l.result.state.current._tag==="Done"&&tf(l.result.state.current.effect)&&l.result.state.current.effect._tag==="Failure"&&lA(l.result.state.current.effect.cause)))&&(c.forEach(l=>l()),n?.(),o(zA(s)))};s.addObserver(l=>{c.forEach(u=>u()),o(l)});const c=t.map((l,u)=>{const f=h=>{i[u]=h,a()};return l.listeners.addObserver(f),()=>l.listeners.removeObserver(f)});return a(),_e(()=>{c.forEach(l=>l())})})),()=>gt(()=>{const s=t.flatMap(o=>o.state.completed?[]:[o]);return Ju(s,o=>AN(o.request,y2(r)))}))),lL=aA,uL=ei,fL=u2,dL=ef,Qa=e=>function(){if(arguments.length===1){const t=arguments[0];return(n,...r)=>e(t,n,...r)}return e.apply(this,arguments)},Cm=Qa((e,t,n)=>{const r=XS(),s=[[Ha,[[r,e.context]]]];n?.scheduler&&s.push([C_,[[r,n.scheduler]]]);let o=DP(e.fiberRefs,{entries:s,forkAs:r});n?.updateRefs&&(o=n.updateRefs(o,r));const i=new X_(r,o,e.runtimeFlags);let a=t;n?.scope&&(a=xe(dL(n.scope,g_),l=>Ka(l2(l,T0(u=>Ce(u,i.id())?Fn:j0(i,u))),rm(t,u=>fL(l,u)))));const c=i.currentSupervisor;return c!==uf&&(c.onStart(e.context,a,ge(),i),i.addObserver(l=>c.onEnd(l,i))),xm.add(e.runtimeFlags,i),n?.immediate===!1?i.resume(a):i.start(a),i}),hL=Qa((e,t)=>{const n=yL(e)(t);if(n._tag==="Failure")throw e1(n.effect_instruction_i0);return n.effect_instruction_i0});class pL extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}}const mL=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new pL(e);return Error.stackTraceLimit=t,n},ed=Symbol.for("effect/Runtime/FiberFailure"),yc=Symbol.for("effect/Runtime/FiberFailure/Cause");class gL extends Error{[ed];[yc];constructor(t){const n=_0(t)[0];super(n?.message||"An error has occurred"),this[ed]=ed,this[yc]=t,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[yc].toJSON()}}toString(){return"(FiberFailure) "+ei(this[yc],{renderErrorCause:!0})}[Xe](){return this.toString()}}const e1=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new gL(e);return Error.stackTraceLimit=t,n},t1=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return py(t.left);case"Right":return it(t.right);case"Some":return it(t.value);case"None":return py(new lm)}},yL=Qa((e,t)=>{const n=t1(t);if(n)return n;const r=new O_,s=Cm(e)(t,{scheduler:r});r.flush();const o=s.unsafePoll();return o||g2(nm(mL(s),um(s)))}),bL=Qa((e,t,n)=>vL(e,t,n).then(r=>{switch(r._tag){case _n:return r.effect_instruction_i0;case Sn:throw e1(r.effect_instruction_i0)}})),vL=Qa((e,t,n)=>new Promise(r=>{const s=t1(t);s&&r(s);const o=Cm(e)(t);o.addObserver(i=>{r(i)}),n?.signal!==void 0&&(n.signal.aborted?o.unsafeInterruptAsFork(o.id()):n.signal.addEventListener("abort",()=>{o.unsafeInterruptAsFork(o.id())},{once:!0}))}));class wL{context;runtimeFlags;fiberRefs;constructor(t,n,r){this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return Ee(this,arguments)}}const SL=e=>new wL(e.context,e.runtimeFlags,e.fiberRefs),_L=d0(Xo,u0,l0),Im=SL({context:jp(),runtimeFlags:_L,fiberRefs:VP()}),xL=Cm(Im),EL=bL(Im),RL=hL(Im),kL=(function(){const e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends cm{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError})(),OL=e=>{const t={BaseEffectError:class extends kL{_tag=e}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError},CL=IP,IL=Hu,tl=tL,qy=We,bc=gt,TL=_e,hn=Fn,ML=eh,ya=Vt,AL=Yu,PL=c$,$L=l$,Js=Al,On=xe,FL=xL,NL=EL,Tm=RL;class Et{path;actual;issue;_tag="Pointer";constructor(t,n,r){this.path=t,this.actual=n,this.issue=r}}class Ky{actual;message;_tag="Unexpected";constructor(t,n){this.actual=t,this.message=n}}class wi{ast;message;_tag="Missing";actual=void 0;constructor(t,n){this.ast=t,this.message=n}}class nt{ast;actual;issues;output;_tag="Composite";constructor(t,n,r,s){this.ast=t,this.actual=n,this.issues=r,this.output=s}}class td{ast;actual;kind;issue;_tag="Refinement";constructor(t,n,r,s){this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class nd{ast;actual;kind;issue;_tag="Transformation";constructor(t,n,r,s){this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class hr{ast;actual;message;_tag="Type";constructor(t,n,r){this.ast=t,this.actual=n,this.message=r}}class Hy{ast;actual;message;_tag="Forbidden";constructor(t,n,r){this.ast=t,this.actual=n,this.message=r}}const Gy=Symbol.for("effect/Schema/ParseErrorTypeId");class LL extends OL("ParseError"){[Gy]=Gy;get message(){return this.toString()}toString(){return sl.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[Xe](){return this.toJSON()}}const Mm=e=>new LL({issue:e}),qt=oO,vs=P(2,(e,t)=>qt(e)?Rp(e,{onLeft:ke,onRight:t}):On(e,t)),zn=P(2,(e,t)=>qt(e)?iO(e,t):ya(e,t)),nl=P(2,(e,t)=>qt(e)?vw(e,t):AL(e,t)),n1=P(2,(e,t)=>qt(e)?Rp(e,{onLeft:t,onRight:Ne}):ML(e,t)),ff=(e,t)=>t===void 0||Ss(t)?e:e===void 0?t:{...e,...t},r1=(e,t,n)=>{const r=Ut(e);return(s,o)=>r(s,ff(n,o))},s1=(e,t,n)=>{const r=r1(e,t,n);return(s,o)=>kp(r(s,o),Mm)},jL=(e,t,n)=>{const r=Ut(e);return(s,o)=>r(s,{...ff(n,o),isEffectAllowed:!0})},DL=(e,t)=>s1(e.ast,!0,t),VL=(e,t)=>r1(e.ast,!0,t),BL=(e,t)=>jL(e.ast,!0,t),Am=(e,t)=>s1(Ft(e.ast),!0,t),ri=(e,t)=>{const n=Ut(Ft(e.ast));return(r,s)=>In(n(r,{exact:!0,...ff(t,s)}))},zL=Le(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),Ut=(e,t)=>{const n=zL,r=n.get(e);if(r)return r;const s=UL(e),o=dC(e),i=ct(o)?(l,u)=>s(l,ff(u,o.value)):s,a=hC(e),c=ct(a)?(l,u)=>rl(n1(i(l,u),a.value),e,l,u):i;return n.set(e,c),c},rd=e=>Un(lC(e)),sd=e=>Un(uC(e)),UL=(e,t)=>{switch(e._tag){case"Refinement":{const n=Ut(e.from);return(r,s)=>{s=s??Wf;const o=s?.errors==="all",i=vs(n1(n(r,s),a=>{const c=new td(e,r,"From",a);return o&&mC(e)&&a1(a)?Gt(e.filter(r,s,e),{onNone:()=>ke(c),onSome:l=>ke(new nt(e,r,[c,new td(e,r,"Predicate",l)]))}):ke(c)}),a=>Gt(e.filter(a,s,e),{onNone:()=>Ne(a),onSome:c=>ke(new td(e,r,"Predicate",c))}));return rl(i,e,r,s)}}case"Transformation":{const n=KL(e.transformation),r=Ut(e.from),s=Ut(e.to);return(o,i)=>rl(vs(nl(r(o,i),a=>new nd(e,o,"Encoded",a)),a=>vs(nl(n(a,i??Wf,e,o),c=>new nd(e,o,"Transformation",c)),c=>nl(s(c,i),l=>new nd(e,o,"Type",l)))),e,o,i)}case"Declaration":{const n=e.decodeUnknown(...e.typeParameters);return(r,s)=>rl(n(r,s??Wf,e),e,r,s)}case"Literal":return Zt(e,n=>n===e.literal);case"UniqueSymbol":return Zt(e,n=>n===e.symbol);case"UndefinedKeyword":return Zt(e,gk);case"NeverKeyword":return Zt(e,yk);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Ne;case"StringKeyword":return Zt(e,Zn);case"NumberKeyword":return Zt(e,Ss);case"BooleanKeyword":return Zt(e,vu);case"BigIntKeyword":return Zt(e,wu);case"SymbolKeyword":return Zt(e,Pd);case"ObjectKeyword":return Zt(e,Or);case"Enums":return Zt(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=VC(e);return Zt(e,r=>Zn(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(l=>Ut(l.type)),r=e.rest.map(l=>Ut(l.type));let s=e.elements.filter(l=>!l.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const o=s.length,i=e.elements.length>0?e.elements.map((l,u)=>u).join(" | "):"never",a=rd(e),c=sd(e);return(l,u)=>{if(!MO(l))return ke(new hr(e,l));const f=u?.errors==="all",h=[];let d=0;const p=[],m=l.length;for(let v=m;v<=o-1;v++){const S=new Et(v,l,new wi(s[v-m]));if(f){h.push([d++,S]);continue}else return ke(new nt(e,l,S,p))}if(e.rest.length===0)for(let v=e.elements.length;v<=m-1;v++){const S=new Et(v,l,new Ky(l[v],`is unexpected, expected: ${i}`));if(f){h.push([d++,S]);continue}else return ke(new nt(e,l,S,p))}let y=0,g;for(;y<n.length;y++)if(m<y+1){if(e.elements[y].isOptional)continue}else{const v=n[y],S=v(l[y],u);if(qt(S)){if(Rt(S)){const _=new Et(y,l,S.left);if(f){h.push([d++,_]);continue}else return ke(new nt(e,l,_,Rn(p)))}p.push([d++,S.right])}else{const _=d++,k=y;g||(g=[]),g.push(({es:I,output:x})=>On(Js(S),R=>{if(Rt(R)){const T=new Et(k,l,R.left);return f?(I.push([_,T]),hn):ke(new nt(e,l,T,Rn(x)))}return x.push([_,R.right]),hn}))}}if(ot(r)){const[v,...S]=r;for(;y<m-S.length;y++){const _=v(l[y],u);if(qt(_))if(Rt(_)){const k=new Et(y,l,_.left);if(f){h.push([d++,k]);continue}else return ke(new nt(e,l,k,Rn(p)))}else p.push([d++,_.right]);else{const k=d++,I=y;g||(g=[]),g.push(({es:x,output:R})=>On(Js(_),T=>{if(Rt(T)){const M=new Et(I,l,T.left);return f?(x.push([k,M]),hn):ke(new nt(e,l,M,Rn(R)))}else return R.push([k,T.right]),hn}))}}for(let _=0;_<S.length;_++)if(y+=_,!(m<y+1)){const k=S[_](l[y],u);if(qt(k)){if(Rt(k)){const I=new Et(y,l,k.left);if(f){h.push([d++,I]);continue}else return ke(new nt(e,l,I,Rn(p)))}p.push([d++,k.right])}else{const I=d++,x=y;g||(g=[]),g.push(({es:R,output:T})=>On(Js(k),M=>{if(Rt(M)){const B=new Et(x,l,M.left);return f?(R.push([I,B]),hn):ke(new nt(e,l,B,Rn(T)))}return T.push([I,M.right]),hn}))}}}const b=({es:v,output:S})=>fo(v)?ke(new nt(e,l,Rn(v),Rn(S))):Ne(Rn(S));if(g&&g.length>0){const v=g;return bc(()=>{const S={es:Di(h),output:Di(p)};return On(tl(v,_=>_(S),{concurrency:a,batching:c,discard:!0}),()=>b(S))})}return b({output:p,es:h})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Zt(e,bk);const n=[],r={},s=[];for(const u of e.propertySignatures)n.push([Ut(u.type),u]),r[u.name]=null,s.push(u.name);const o=e.indexSignatures.map(u=>[Ut(u.parameter),Ut(u.type),u.parameter]),i=Wn.make(e.indexSignatures.map(u=>u.parameter).concat(s.map(u=>Pd(u)?new vC(u):new xl(u)))),a=Ut(i),c=rd(e),l=sd(e);return(u,f)=>{if(!Sk(u))return ke(new hr(e,u));const h=f?.errors==="all",d=[];let p=0;const m=f?.onExcessProperty==="error",y=f?.onExcessProperty==="preserve",g={};let b;if(m||y){b=Reflect.ownKeys(u);for(const k of b){const I=a(k,f);if(qt(I)&&Rt(I))if(m){const x=new Et(k,u,new Ky(u[k],`is unexpected, expected: ${String(i)}`));if(h){d.push([p++,x]);continue}else return ke(new nt(e,u,x,g))}else g[k]=u[k]}}let v;const S=f?.exact===!0;for(let k=0;k<n.length;k++){const I=n[k][1],x=I.name,R=Object.prototype.hasOwnProperty.call(u,x);if(!R){if(I.isOptional)continue;if(S){const B=new Et(x,u,new wi(I));if(h){d.push([p++,B]);continue}else return ke(new nt(e,u,B,g))}}const T=n[k][0],M=T(u[x],f);if(qt(M)){if(Rt(M)){const B=new Et(x,u,R?M.left:new wi(I));if(h){d.push([p++,B]);continue}else return ke(new nt(e,u,B,g))}g[x]=M.right}else{const B=p++,U=x;v||(v=[]),v.push(({es:V,output:$})=>On(Js(M),O=>{if(Rt(O)){const N=new Et(U,u,R?O.left:new wi(I));return h?(V.push([B,N]),hn):ke(new nt(e,u,N,$))}return $[U]=O.right,hn}))}}for(let k=0;k<o.length;k++){const I=o[k],x=I[0],R=I[1],T=Aw(u,I[2]);for(const M of T){const B=x(M,f);if(qt(B)&&In(B)){const U=R(u[M],f);if(qt(U))if(Rt(U)){const V=new Et(M,u,U.left);if(h){d.push([p++,V]);continue}else return ke(new nt(e,u,V,g))}else Object.prototype.hasOwnProperty.call(r,M)||(g[M]=U.right);else{const V=p++,$=M;v||(v=[]),v.push(({es:O,output:N})=>On(Js(U),C=>{if(Rt(C)){const L=new Et($,u,C.left);return h?(O.push([V,L]),hn):ke(new nt(e,u,L,N))}else return Object.prototype.hasOwnProperty.call(r,M)||(N[M]=C.right),hn}))}}}}const _=({es:k,output:I})=>{if(fo(k))return ke(new nt(e,u,Rn(k),I));if(f?.propertyOrder==="original"){const x=b||Reflect.ownKeys(u);for(const T of s)x.indexOf(T)===-1&&x.push(T);const R={};for(const T of x)Object.prototype.hasOwnProperty.call(I,T)&&(R[T]=I[T]);return Ne(R)}return Ne(I)};if(v&&v.length>0){const k=v;return bc(()=>{const I={es:Di(d),output:Object.assign({},g)};return On(tl(k,x=>x(I),{concurrency:c,batching:l,discard:!0}),()=>_(I))})}return _({es:d,output:g})}}case"Union":{const n=WL(e.types),r=Reflect.ownKeys(n.keys),s=r.length,o=e.types.length,i=new Map;for(let l=0;l<o;l++)i.set(e.types[l],Ut(e.types[l]));const a=rd(e)??1,c=sd(e);return(l,u)=>{const f=[];let h=0,d=[];if(s>0)if(pp(l))for(let y=0;y<s;y++){const g=r[y],b=n.keys[g].buckets;if(Object.prototype.hasOwnProperty.call(l,g)){const v=String(l[g]);if(Object.prototype.hasOwnProperty.call(b,v))d=d.concat(b[v]);else{const{candidates:S,literals:_}=n.keys[g],k=Wn.make(_),I=S.length===o?new ms([new Mt(g,k,!1,!0)],[]):Wn.make(S);f.push([h++,new nt(I,l,new Et(g,l,new hr(k,l[g])))])}}else{const{candidates:v,literals:S}=n.keys[g],_=new Mt(g,Wn.make(S),!1,!0),k=v.length===o?new ms([_],[]):Wn.make(v);f.push([h++,new nt(k,l,new Et(g,l,new wi(_)))])}}else{const y=n.candidates.length===o?e:Wn.make(n.candidates);f.push([h++,new hr(y,l)])}n.otherwise.length>0&&(d=d.concat(n.otherwise));let p;for(let y=0;y<d.length;y++){const g=d[y],b=i.get(g)(l,u);if(qt(b)&&(!p||p.length===0)){if(In(b))return b;f.push([h++,b.left])}else{const v=h++;p||(p=[]),p.push(S=>bc(()=>"finalResult"in S?hn:On(Js(b),_=>(In(_)?S.finalResult=_:S.es.push([v,_.left]),hn))))}}const m=y=>fo(y)?y.length===1&&y[0][1]._tag==="Type"?ke(y[0][1]):ke(new nt(e,l,Rn(y))):ke(new hr(e,l));if(p&&p.length>0){const y=p;return bc(()=>{const g={es:Di(f)};return On(tl(y,b=>b(g),{concurrency:a,batching:c,discard:!0}),()=>"finalResult"in g?g.finalResult:m(g.es))})}return m(f)}}case"Suspend":{const n=Pw(()=>Ut(e.f()));return(r,s)=>n()(r,s)}}},Zt=(e,t)=>n=>t(n)?Ne(n):ke(new hr(e,n)),Vi=(e,t)=>{switch(e._tag){case"Declaration":{const n=nS(e);if(ct(n))return Vi(n.value);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],o=Ug(s.type);Vg(o)&&!s.isOptional&&n.push([s.name,o])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],o=Ug(s.type);Vg(o)&&!s.isOptional&&n.push([r,o])}return n}case"Refinement":return Vi(e.from);case"Suspend":return Vi(e.f());case"Transformation":return Vi(e.from)}return[]},WL=(e,t)=>{const n={},r=[],s=[];for(let o=0;o<e.length;o++){const i=e[o],a=Vi(i);if(a.length>0){s.push(i);for(let c=0;c<a.length;c++){const[l,u]=a[c],f=String(u.literal);n[l]=n[l]||{buckets:{},literals:[],candidates:[]};const h=n[l].buckets;if(Object.prototype.hasOwnProperty.call(h,f)){if(c<a.length-1)continue;h[f].push(i),n[l].literals.push(u),n[l].candidates.push(i)}else{h[f]=[i],n[l].literals.push(u),n[l].candidates.push(i);break}}}else r.push(i)}return{keys:n,otherwise:r,candidates:s}},rl=(e,t,n,r)=>{if(r?.isEffectAllowed===!0||qt(e))return e;const s=new O_,o=FL(e,{scheduler:s});s.flush();const i=o.unsafePoll();if(i){if(k2(i))return Ne(i.value);const a=i.cause;return lL(a)?ke(a.error):ke(new Hy(t,n,uL(a)))}return ke(new Hy(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},qL=([e],[t])=>e>t?1:e<t?-1:0;function Rn(e){return e.sort(qL).map(t=>t[1])}const KL=(e,t)=>{switch(e._tag){case"FinalTransformation":return e.decode;case"ComposeTransformation":return Ne;case"TypeLiteralTransformation":return n=>{let r=Ne(n);for(const s of e.propertySignatureTransformations){const[o,i]=[s.from,s.to],a=s.decode;r=zn(r,l=>{const u=a(Object.prototype.hasOwnProperty.call(l,o)?be(l[o]):ge());return delete l[o],ct(u)&&(l[i]=u.value),l})}return r}}},$t=(e,t=[])=>({value:e,forest:t}),sl={formatIssue:e=>zn(eo(e),HL),formatIssueSync:e=>{const t=sl.formatIssue(e);return qt(t)?cO(t):Tm(t)},formatError:e=>sl.formatIssue(e.issue),formatErrorSync:e=>sl.formatIssueSync(e.issue)},HL=e=>e.value+o1(`
`,e.forest),o1=(e,t)=>{let n="";const r=t.length;let s;for(let o=0;o<r;o++){s=t[o];const i=o===r-1;n+=e+(i?"":"")+" "+s.value,n+=o1(e+(r>1&&!i?"  ":"   "),s.forest)}return n},GL=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},JL=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},i1=e=>"ast"in e?be(e.ast):ge(),wh=Ne(void 0),YL=e=>i1(e).pipe(Fa(aC),Gt({onNone:()=>wh,onSome:t=>{const n=t(e);return Zn(n)?Ne({message:n,override:!1}):IL(n)?ya(n,r=>({message:r,override:!1})):Zn(n.message)?Ne({message:n.message,override:n.override}):ya(n.message,r=>({message:r,override:n.override}))}})),Pm=e=>t=>t._tag===e,a1=Pm("Composite"),Jy=Pm("Refinement"),Yy=Pm("Transformation"),Yi=e=>vs(YL(e),t=>t!==void 0?!t.override&&(a1(e)||Jy(e)&&e.kind==="From"||Yy(e)&&e.kind!=="Transformation")?Yy(e)||Jy(e)?Yi(e.issue):wh:Ne(t.message):wh),c1=e=>i1(e).pipe(Fa(fC),gO(t=>t(e)),Un);function XL(e){return tS(e).pipe(gr(()=>Qw(e)),gr(()=>eS(e)),gr(()=>Cu(e)),lt(()=>`{ ${e.from} | filter }`))}function ZL(e){return e.message!==void 0?e.message:`Expected ${dS(e.ast)?XL(e.ast):String(e.ast)}, actual ${Ps(e.actual)}`}const QL=e=>zn(Yi(e),t=>t??c1(e)??ZL(e)),vc=e=>c1(e)??String(e.ast),ej=e=>e.message??"is forbidden",tj=e=>e.message??"is unexpected",nj=e=>{const t=cC(e.ast);if(ct(t)){const n=t.value();return Zn(n)?Ne(n):n}return Ne(e.message??"is missing")},eo=e=>{switch(e._tag){case"Type":return zn(QL(e),$t);case"Forbidden":return Ne($t(vc(e),[$t(ej(e))]));case"Unexpected":return Ne($t(tj(e)));case"Missing":return zn(nj(e),$t);case"Transformation":return vs(Yi(e),t=>t!==void 0?Ne($t(t)):zn(eo(e.issue),n=>$t(vc(e),[$t(GL(e.kind),[n])])));case"Refinement":return vs(Yi(e),t=>t!==void 0?Ne($t(t)):zn(eo(e.issue),n=>$t(vc(e),[$t(JL(e.kind),[n])])));case"Pointer":return zn(eo(e.issue),t=>$t(JO(e.path),[t]));case"Composite":return vs(Yi(e),t=>{if(t!==void 0)return Ne($t(t));const n=vc(e);return $w(e.issues)?zn(tl(e.issues,eo),r=>$t(n,r)):zn(eo(e.issues),r=>$t(n,[r]))})}},l1=P(e=>Or(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),rj=P(e=>Or(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),Bl=Symbol.for("effect/Schema");function rr(e){return class{[Bl]=Xy;static ast=e;static annotations(n){return rr(sr(this.ast,n))}static pipe(){return Ee(this,arguments)}static toString(){return String(e)}static Type;static Encoded;static Context;static[Bl]=Xy}}const Xy={_A:e=>e,_I:e=>e,_R:e=>e},Zy={typeConstructor:sC,schemaId:oC,message:Lw,missingMessage:Ap,identifier:Pp,title:Na,description:jw,examples:Dw,default:Vw,documentation:iC,jsonSchema:Bw,arbitrary:zw,pretty:Uw,equivalence:Ww,concurrency:qw,batching:Kw,parseIssueTitle:Hw,parseOptions:Gw,decodingFallback:Jw},$m=e=>{if(!e)return{};const t={...e};for(const n in Zy)if(n in e){const r=Zy[n];t[r]=e[n],delete t[n]}return t},sr=(e,t)=>Au(e,$m(t)),sj=(e,t)=>{const n=BL(e,t);return(r,s)=>nl(n(r,s),Mm)},oj=(e,t)=>{const n=VL(e,t);return(r,s)=>vw(n(r,s),Mm)},u1=oj,Qy=e=>Re(e,Bl)&&Or(e[Bl]);function ij(e){return Fp(e)?Wn.make(PC(e,t=>new xl(t))):new xl(e[0])}function f1(e,t=ij(e)){return class extends rr(t){static annotations(r){return f1(this.literals,sr(this.ast,r))}static literals=[...e]}}function df(...e){return ot(e)?f1(e):h1}const aj=e=>new OC(Object.keys(e).filter(t=>typeof e[e[t]]!="number").map(t=>[t,e[t]])),d1=(e,t=aj(e))=>class extends rr(t){static annotations(r){return d1(this.enums,sr(this.ast,r))}static enums={...e}},cj=e=>d1(e);class lj extends rr(bC){}class h1 extends rr(oS){}const uj=e=>Wn.make(e.map(t=>t.ast));function p1(e,t=uj(e)){return class extends rr(t){static annotations(r){return p1(this.members,sr(this.ast,r))}static members=[...e]}}function fj(...e){return Fp(e)?p1(e):ot(e)?e[0]:h1}const dj=e=>fj(e,lj),hj=(e,t)=>new $p(e.map(n=>Qy(n)?new Tu(n.ast,!1):n.ast),t.map(n=>Qy(n)?new Iu(n.ast):n.ast),!0);function m1(e,t,n=hj(e,t)){return class extends rr(n){static annotations(s){return m1(this.elements,this.rest,sr(this.ast,s))}static elements=[...e];static rest=[...t]}}function g1(e,t){return class extends m1([],[e],t){static annotations(r){return g1(this.value,sr(this.ast,r))}static value=e}}const eb=e=>g1(e),pj=Symbol.for("effect/PropertySignature"),y1=e=>Re(e,pj),mj=mS([Ap]),gj=(e,t)=>{const n=Reflect.ownKeys(e),r=[];if(n.length>0){const o=[],i=[],a=[];for(let c=0;c<n.length;c++){const l=n[c],u=e[l];if(y1(u)){const f=u.ast;switch(f._tag){case"PropertySignatureDeclaration":{const h=f.type,d=f.isOptional,p=f.annotations;o.push(new Mt(l,h,d,!0,mj(f))),i.push(new Mt(l,Ft(h),d,!0,p)),r.push(new Mt(l,h,d,!0,p));break}case"PropertySignatureTransformation":{const h=f.from.fromKey??l;o.push(new Mt(h,f.from.type,f.from.isOptional,!0,f.from.annotations)),i.push(new Mt(l,f.to.type,f.to.isOptional,!0,f.to.annotations)),a.push(new FC(h,l,f.decode,f.encode));break}}}else o.push(new Mt(l,u.ast,!1,!0)),i.push(new Mt(l,Ft(u.ast),!1,!0)),r.push(new Mt(l,u.ast,!1,!0))}if(ot(a)){const c=[],l=[];for(const u of t){const{indexSignatures:f,propertySignatures:h}=zg(u.key.ast,u.value.ast);h.forEach(d=>{o.push(d),i.push(new Mt(d.name,Ft(d.type),d.isOptional,d.isReadonly,d.annotations))}),f.forEach(d=>{c.push(d),l.push(new Mu(d.parameter,Ft(d.type),d.isReadonly))})}return new $C(new ms(o,c,{[Fd]:"Struct (Encoded side)"}),new ms(i,l,{[Fd]:"Struct (Type side)"}),new NC(a))}}const s=[];for(const o of t){const{indexSignatures:i,propertySignatures:a}=zg(o.key.ast,o.value.ast);a.forEach(c=>r.push(c)),i.forEach(c=>s.push(c))}return new ms(r,s)},yj=(e,t)=>{const n=Reflect.ownKeys(e);for(const r of n){const s=e[r];if(t[r]===void 0&&y1(s)){const o=s.ast,i=o._tag==="PropertySignatureDeclaration"?o.defaultValue:o.to.defaultValue;i!==void 0&&(t[r]=i())}}return t};function Fm(e,t,n=gj(e,t)){return class extends rr(n){static annotations(s){return Fm(this.fields,this.records,sr(this.ast,s))}static fields={...e};static records=[...t];static make=(s,o)=>{const i=yj(e,{...s});return Nm(o)?i:Am(this)(i)};static pick(...s){return tb(l1(e,...s))}static omit(...s){return tb(rj(e,...s))}}}function tb(e,...t){return Fm(e,t)}function b1(e,t,n){return class extends Fm({},[{key:e,value:t}],n){static annotations(s){return b1(e,t,sr(this.ast,s))}static key=e;static value=t}}const bj=e=>b1(e.key,e.value);function v1(e,t){return class extends rr(t){static annotations(r){return v1(this.from,sr(this.ast,r))}static make=(r,s)=>Nm(s)?r:Am(this)(r);static from=e}}const si=(e,t)=>n=>{const r=Gt(Zw(n.ast),{onNone:()=>[e],onSome:o=>[...o,e]}),s=Au(n.ast,$m({[Nw]:r,...t}));return v1(n,s)},vj=Symbol.for("effect/SchemaId/Refine");function w1(e,t,n){return class extends rr(n){static annotations(s){return w1(this.from,this.filter,sr(this.ast,s))}static[vj]=e;static from=e;static filter=t;static make=(s,o)=>Nm(o)?s:Am(this)(s)}}const nb=(e,t,n)=>{if(vu(e))return e?ge():be(new hr(t,n));if(Zn(e))return be(new hr(t,n,e));if(e!==void 0){if("_tag"in e)return be(e);const r=new hr(t,n,e.message);return be(ot(e.path)?new Et(e.path,n,r):r)}return ge()},wj=(e,t,n)=>{if(GO(e))return nb(e,t,n);if(ot(e)){const r=KO(e,s=>nb(s,t,n));if(ot(r))return be(r.length===1?r[0]:new nt(t,n,r))}return ge()};function Sj(e,t){return n=>{function r(o,i,a){return wj(e(o,i,a),a,o)}const s=new fS(n.ast,r,$m(t));return w1(n,r,s)}}const _j=nC,rb=(e,t)=>n=>{const r=Math.floor(e);if(r<0)throw new Error(YO(`Expected an integer greater than or equal to 0, actual ${e}`));return n.pipe(Sj(s=>s.length===r,{schemaId:_j,title:`itemsCount(${r})`,description:`an array of exactly ${r} item(s)`,jsonSchema:{minItems:r,maxItems:r},[Xw]:!0,...t}))};function Nm(e){return vu(e)?e:e?.disableValidation??!1}const rt={Remove:"remove",Replace:"replace",Add:"add"},S1=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),xj=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),ol=Symbol.iterator,rn={mutable:"mutable",immutable:"immutable"},Lm={};function Xi(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sb(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,t);if(r)return r;n=Reflect.getPrototypeOf(n)}}}function jm(e){return Object.getPrototypeOf(e)===Set.prototype}function Dm(e){return Object.getPrototypeOf(e)===Map.prototype}function en(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function qr(e){return!!$e(e)}function $e(e){return typeof e!="object"?null:e?.[S1]}function Vm(e){var t;const n=$e(e);return n?(t=n.copy)!==null&&t!==void 0?t:n.original:e}function Nn(e,t){if(!e||typeof e!="object")return!1;let n;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!t?.mark&&((n=t.mark(e,rn))===rn.immutable||typeof n=="function")}function _1(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const n=e.parent.copy,r=$e(_r(n,e.key));if(r!==null&&r?.original!==e.original)return null;const s=e.parent.type===3,o=s?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key;if(!(s&&n.size>o||Xi(n,o)))return null;t.push(o)}if(e.parent)return _1(e.parent,t);t.reverse();try{Ej(e.copy,t)}catch{return null}return t}function Ls(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function _r(e,t){return Ls(e)===2?e.get(t):e[t]}function ec(e,t,n){Ls(e)===2?e.set(t,n):e[t]=n}function od(e,t){const n=$e(e);return(n?en(n):e)[t]}function br(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Sh(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function ls(e,t){return t?e:[""].concat(e).map(n=>{const r=`${n}`;return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function Ej(e,t){for(let n=0;n<t.length-1;n+=1){const r=t[n];if(e=_r(Ls(e)===3?Array.from(e):e,r),typeof e!="object")throw new Error(`Cannot resolve patch at '${t.join("/")}'.`)}return e}function Rj(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let r=Reflect.getOwnPropertyDescriptor(e,n);if(r.enumerable&&r.configurable&&r.writable){t[n]=e[n];return}r.writable||(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(r={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]}),Reflect.defineProperty(t,n,r)}),t}const kj=Object.prototype.propertyIsEnumerable;function x1(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set){if(!jm(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e.values())}return Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values())}else if(e instanceof Map){if(!Dm(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e)}return new Map(e)}else if(t?.mark&&(n=t.mark(e,rn),n!==void 0)&&n!==rn.mutable){if(n===rn.immutable)return Rj(e);if(typeof n=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return n()}throw new Error(`Unsupported mark result: ${n}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const r={};return Object.keys(e).forEach(s=>{r[s]=e[s]}),Object.getOwnPropertySymbols(e).forEach(s=>{kj.call(e,s)&&(r[s]=e[s])}),r}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function Dt(e){e.copy||(e.copy=x1(e.original,e.options))}function Bi(e){if(!Nn(e))return Vm(e);if(Array.isArray(e))return e.map(Bi);if(e instanceof Map){const n=Array.from(e.entries()).map(([r,s])=>[r,Bi(s)]);if(!Dm(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Map(n)}if(e instanceof Set){const n=Array.from(e).map(Bi);if(!jm(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Set(n)}const t=Object.create(Object.getPrototypeOf(e));for(const n in e)t[n]=Bi(e[n]);return t}function il(e){return qr(e)?Bi(e):e}function Gn(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&Gn(e.parent))}function ob(){throw new Error("Cannot modify frozen object")}function to(e,t,n,r,s){{n=n??new WeakMap,r=r??[],s=s??[];const i=n.has(e)?n.get(e):e;if(r.length>0){const a=r.indexOf(i);if(i&&typeof i=="object"&&a!==-1)throw r[0]===i?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${s.slice(0,a).map((c,l)=>{if(typeof c=="symbol")return`[${c.toString()}]`;const u=r[l];return typeof c=="object"&&(u instanceof Map||u instanceof Set)?Array.from(u.keys()).indexOf(c):c}).join("/")}`);r.push(i),s.push(t)}else r.push(i)}if(Object.isFrozen(e)||qr(e)){r.pop(),s.pop();return}switch(Ls(e)){case 2:for(const[a,c]of e)to(a,a,n,r,s),to(c,a,n,r,s);e.set=e.clear=e.delete=ob;break;case 3:for(const a of e)to(a,a,n,r,s);e.add=e.clear=e.delete=ob;break;case 1:Object.freeze(e);let i=0;for(const a of e)to(a,i,n,r,s),i+=1;break;default:Object.freeze(e),Object.keys(e).forEach(a=>{const c=e[a];to(c,a,n,r,s)})}r.pop(),s.pop()}function Bm(e,t){const n=Ls(e);if(n===0)Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)});else if(n===1){let r=0;for(const s of e)t(r,s,e),r+=1}else e.forEach((r,s)=>t(s,r,e))}function E1(e,t,n){if(qr(e)||!Nn(e,n)||t.has(e)||Object.isFrozen(e))return;const r=e instanceof Set,s=r?new Map:void 0;if(t.add(e),Bm(e,(o,i)=>{var a;if(qr(i)){const c=$e(i);Dt(c);const l=!((a=c.assignedMap)===null||a===void 0)&&a.size||c.operated?c.copy:c.original;ec(r?s:e,o,l)}else E1(i,t,n)}),s){const o=e,i=Array.from(o);o.clear(),i.forEach(a=>{o.add(s.has(a)?s.get(a):a)})}}function Oj(e,t){const n=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&E1(_r(n,t),e.finalities.handledSet,e.options)}function _h(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(Vm(t))}))}function xh(e,t,n,r){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&r){const o=_1(e);o&&t(e,o,n,r)}e.finalized=!0}}function zm(e,t,n,r){const s=$e(n);s&&(s.callbacks||(s.callbacks=[]),s.callbacks.push((o,i)=>{var a;const c=e.type===3?e.setMap:e.copy;if(br(_r(c,t),n)){let l=s.original;s.copy&&(l=s.copy),_h(e),xh(e,r,o,i),e.options.enableAutoFreeze&&(e.options.updatedValues=(a=e.options.updatedValues)!==null&&a!==void 0?a:new WeakMap,e.options.updatedValues.set(l,s.original)),ec(c,t,l)}}),e.options.enableAutoFreeze&&s.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),Nn(n,e.options)&&e.finalities.draft.push(()=>{const o=e.type===3?e.setMap:e.copy;br(_r(o,t),n)&&Oj(e,t)})}function Cj(e,t,n,r,s){let{original:o,assignedMap:i,options:a}=e,c=e.copy;c.length<o.length&&([o,c]=[c,o],[n,r]=[r,n]);for(let l=0;l<o.length;l+=1)if(i.get(l.toString())&&c[l]!==o[l]){const u=t.concat([l]),f=ls(u,s);n.push({op:rt.Replace,path:f,value:il(c[l])}),r.push({op:rt.Replace,path:f,value:il(o[l])})}for(let l=o.length;l<c.length;l+=1){const u=t.concat([l]),f=ls(u,s);n.push({op:rt.Add,path:f,value:il(c[l])})}if(o.length<c.length){const{arrayLengthAssignment:l=!0}=a.enablePatches;if(l){const u=t.concat(["length"]),f=ls(u,s);r.push({op:rt.Replace,path:f,value:o.length})}else for(let u=c.length;o.length<u;u-=1){const f=t.concat([u-1]),h=ls(f,s);r.push({op:rt.Remove,path:h})}}}function Ij({original:e,copy:t,assignedMap:n},r,s,o,i){n.forEach((a,c)=>{const l=_r(e,c),u=il(_r(t,c)),f=a?Xi(e,c)?rt.Replace:rt.Add:rt.Remove;if(br(l,u)&&f===rt.Replace)return;const h=r.concat(c),d=ls(h,i);s.push(f===rt.Remove?{op:f,path:d}:{op:f,path:d,value:u}),o.push(f===rt.Add?{op:rt.Remove,path:d}:f===rt.Remove?{op:rt.Add,path:d,value:l}:{op:rt.Replace,path:d,value:l})})}function Tj({original:e,copy:t},n,r,s,o){let i=0;e.forEach(a=>{if(!t.has(a)){const c=n.concat([i]),l=ls(c,o);r.push({op:rt.Remove,path:l,value:a}),s.unshift({op:rt.Add,path:l,value:a})}i+=1}),i=0,t.forEach(a=>{if(!e.has(a)){const c=n.concat([i]),l=ls(c,o);r.push({op:rt.Add,path:l,value:a}),s.unshift({op:rt.Remove,path:l,value:a})}i+=1})}function ba(e,t,n,r){const{pathAsArray:s=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return Ij(e,t,n,r,s);case 1:return Cj(e,t,n,r,s);case 3:return Tj(e,t,n,r,s)}}const zl=(e,t,n=!1)=>{if(typeof e=="object"&&e!==null&&(!Nn(e,t)||n))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Eh={get size(){return en($e(this)).size},has(e){return en($e(this)).has(e)},set(e,t){const n=$e(this),r=en(n);return(!r.has(e)||!br(r.get(e),t))&&(Dt(n),Gn(n),n.assignedMap.set(e,!0),n.copy.set(e,t),zm(n,e,t,ba)),this},delete(e){if(!this.has(e))return!1;const t=$e(this);return Dt(t),Gn(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=$e(this);if(this.size){Dt(e),Gn(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const n=$e(this);en(n).forEach((r,s)=>{e.call(t,this.get(s),s,this)})},get(e){var t,n;const r=$e(this),s=en(r).get(e),o=((n=(t=r.options).mark)===null||n===void 0?void 0:n.call(t,s,rn))===rn.mutable;if(r.options.strict&&zl(s,r.options,o),o||r.finalized||!Nn(s,r.options)||s!==r.original.get(e))return s;const i=Lm.createDraft({original:s,parentDraft:r,key:e,finalities:r.finalities,options:r.options});return Dt(r),r.copy.set(e,i),i},keys(){return en($e(this)).keys()},values(){const e=this.keys();return{[ol]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[ol]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[ol](){return this.entries()}},Mj=Reflect.ownKeys(Eh),ib=(e,t,{isValuesIterator:n})=>()=>{var r,s;const o=t.next();if(o.done)return o;const i=o.value;let a=e.setMap.get(i);const c=$e(a),l=((s=(r=e.options).mark)===null||s===void 0?void 0:s.call(r,a,rn))===rn.mutable;if(e.options.strict&&zl(i,e.options,l),!l&&!c&&Nn(i,e.options)&&!e.finalized&&e.original.has(i)){const u=Lm.createDraft({original:i,parentDraft:e,key:i,finalities:e.finalities,options:e.options});e.setMap.set(i,u),a=u}else c&&(a=c.proxy);return{done:!1,value:n?a:[a,a]}},Ul={get size(){return $e(this).setMap.size},has(e){const t=$e(this);if(t.setMap.has(e))return!0;Dt(t);const n=$e(e);return!!(n&&t.setMap.has(n.original))},add(e){const t=$e(this);return this.has(e)||(Dt(t),Gn(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),zm(t,e,e,ba)),this},delete(e){if(!this.has(e))return!1;const t=$e(this);Dt(t),Gn(t);const n=$e(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=$e(this);Dt(e),Gn(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=$e(this);Dt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:ib(e,t,{isValuesIterator:!0})}},entries(){const e=$e(this);Dt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:ib(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[ol](){return this.values()},forEach(e,t){const n=this.values();let r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}};Set.prototype.difference&&Object.assign(Ul,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});const Aj=Reflect.ownKeys(Ul),R1={get(e,t,n){var r,s;const o=(r=e.copy)===null||r===void 0?void 0:r[t];if(o&&e.finalities.draftsCache.has(o))return o;if(t===S1)return e;let i;if(e.options.mark){const l=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if(i=e.options.mark(l,rn),i===rn.mutable)return e.options.strict&&zl(l,e.options,!0),l}const a=en(e);if(a instanceof Map&&Mj.includes(t))return t==="size"?Object.getOwnPropertyDescriptor(Eh,"size").get.call(e.proxy):Eh[t].bind(e.proxy);if(a instanceof Set&&Aj.includes(t))return t==="size"?Object.getOwnPropertyDescriptor(Ul,"size").get.call(e.proxy):Ul[t].bind(e.proxy);if(!Xi(a,t)){const l=sb(a,t);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(e.proxy):void 0}const c=a[t];if(e.options.strict&&zl(c,e.options),e.finalized||!Nn(c,e.options))return c;if(c===od(e.original,t)){if(Dt(e),e.copy[t]=Um({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof i=="function"){const l=$e(e.copy[t]);return Dt(l),Gn(l),l.copy}return e.copy[t]}return qr(c)&&e.finalities.draftsCache.add(c),c},set(e,t,n){var r;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let s;if(e.type===1&&t!=="length"&&!(Number.isInteger(s=Number(t))&&s>=0&&(t===0||s===0||String(s)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const o=sb(en(e),t);if(o?.set)return o.set.call(e.proxy,n),!0;const i=od(en(e),t),a=$e(i);return a&&br(a.original,n)?(e.copy[t]=n,e.assignedMap=(r=e.assignedMap)!==null&&r!==void 0?r:new Map,e.assignedMap.set(t,!1),!0):(br(n,i)&&(n!==void 0||Xi(e.original,t))||(Dt(e),Gn(e),Xi(e.original,t)&&br(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,zm(e,t,n,ba)),!0)},has(e,t){return t in en(e)},ownKeys(e){return Reflect.ownKeys(en(e))},getOwnPropertyDescriptor(e,t){const n=en(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return e.type===1?R1.set.call(this,e,t,void 0,e.proxy):(od(e.original,t)!==void 0||t in e.original?(Dt(e),Gn(e),e.assignedMap.set(t,!1)):(e.assignedMap=(n=e.assignedMap)!==null&&n!==void 0?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function Um(e){const{original:t,parentDraft:n,key:r,finalities:s,options:o}=e,i=Ls(t),a={type:i,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:s,options:o,setMap:i===3?new Map(t.entries()):void 0};(r||"key"in e)&&(a.key=r);const{proxy:c,revoke:l}=Proxy.revocable(i===1?Object.assign([],a):a,R1);if(s.revoke.push(l),a.proxy=c,n){const u=n;u.finalities.draft.push((f,h)=>{var d,p;const m=$e(c);let y=u.type===3?u.setMap:u.copy;const g=_r(y,r),b=$e(g);if(b){let v=b.original;b.operated&&(v=Vm(g)),_h(b),xh(b,ba,f,h),u.options.enableAutoFreeze&&(u.options.updatedValues=(d=u.options.updatedValues)!==null&&d!==void 0?d:new WeakMap,u.options.updatedValues.set(v,b.original)),ec(y,r,v)}(p=m.callbacks)===null||p===void 0||p.forEach(v=>{v(f,h)})})}else{const u=$e(c);u.finalities.draft.push((f,h)=>{_h(u),xh(u,ba,f,h)})}return c}Lm.createDraft=Um;function Pj(e,t,n,r,s){var o;const i=$e(e),a=(o=i?.original)!==null&&o!==void 0?o:e,c=!!t.length;if(i?.operated)for(;i.finalities.draft.length>0;)i.finalities.draft.pop()(n,r);const l=c?t[0]:i?i.operated?i.copy:i.original:e;return i&&Sh(i),s&&to(l,l,i?.options.updatedValues),[l,n&&c?[{op:rt.Replace,path:[],value:t[0]}]:n,r&&c?[{op:rt.Replace,path:[],value:a}]:r]}function $j(e,t){var n;const r={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let s,o;t.enablePatches&&(s=[],o=[]);const a=((n=t.mark)===null||n===void 0?void 0:n.call(t,e,rn))===rn.mutable||!Nn(e,t)?e:Um({original:e,parentDraft:null,finalities:r,options:t});return[a,(c=[])=>{const[l,u,f]=Pj(a,c,s,o,t.enableAutoFreeze);return t.enablePatches?[l,u,f]:l}]}function Rh(e){const{rootDraft:t,value:n,useRawReturn:r=!1,isRoot:s=!0}=e;Bm(n,(o,i,a)=>{const c=$e(i);if(c&&t&&c.finalities===t.finalities){e.isContainDraft=!0;const l=c.original;if(a instanceof Set){const u=Array.from(a);a.clear(),u.forEach(f=>a.add(o===f?l:f))}else ec(a,o,l)}else typeof i=="object"&&i!==null&&(e.value=i,e.isRoot=!1,Rh(e))}),s&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),r&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function k1(e){var t;const n=$e(e);if(!Nn(e,n?.options))return e;const r=Ls(e);if(n&&!n.operated)return n.original;let s;function o(){s=r===2?Dm(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e):r===3?Array.from(n.setMap.values()):x1(e,n?.options)}if(n){n.finalized=!0;try{o()}finally{n.finalized=!1}}else s=e;if(Bm(s,(i,a)=>{if(n&&br(_r(n.original,i),a))return;const c=k1(a);c!==a&&(s===e&&o(),ec(s,i,c))}),r===3){const i=(t=n?.original)!==null&&t!==void 0?t:s;return jm(i)?new Set(s):new(Object.getPrototypeOf(i)).constructor(s)}return s}function ab(e){if(!qr(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return k1(e)}const Fj=e=>function t(n,r,s){var o,i,a;if(typeof n=="function"&&typeof r!="function")return function(_,...k){return t(_,I=>n.call(this,I,...k),r)};const c=n,l=r;let u=s;if(typeof r!="function"&&(u=r),u!==void 0&&Object.prototype.toString.call(u)!=="[object Object]")throw new Error(`Invalid options: ${u}, 'options' should be an object.`);u=Object.assign(Object.assign({},e),u);const f=qr(c)?ab(c):c,h=Array.isArray(u.mark)?((_,k)=>{for(const I of u.mark){if(typeof I!="function")throw new Error(`Invalid mark: ${I}, 'mark' should be a function.`);const x=I(_,k);if(x)return x}}):u.mark,d=(o=u.enablePatches)!==null&&o!==void 0?o:!1,p=(i=u.strict)!==null&&i!==void 0?i:!1,y={enableAutoFreeze:(a=u.enableAutoFreeze)!==null&&a!==void 0?a:!1,mark:h,strict:p,enablePatches:d};if(!Nn(f,y)&&typeof f=="object"&&f!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[g,b]=$j(f,y);if(typeof r!="function"){if(!Nn(f,y))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[g,b]}let v;try{v=l(g)}catch(_){throw Sh($e(g)),_}const S=_=>{const k=$e(g);if(!qr(_)){if(_!==void 0&&!br(_,g)&&k?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const x=_?.[xj];if(x){const R=x[0];return y.strict&&typeof _=="object"&&_!==null&&Rh({rootDraft:k,value:_,useRawReturn:!0}),b([R])}if(_!==void 0)return typeof _=="object"&&_!==null&&Rh({rootDraft:k,value:_}),b([_])}if(_===g||_===void 0)return b([]);const I=$e(_);if(y===I.options){if(I.operated)throw new Error("Cannot return a modified child draft.");return b([ab(_)])}return b([_])};return v instanceof Promise?v.then(S,_=>{throw Sh($e(g)),_}):S(v)},oi=Fj();Object.prototype.constructor.toString();function Nj(e,t){w.useRef({patches:[],inversePatches:[]});const n=w.useRef(0),r=w.useRef(0);let s=n.current;w.useEffect((()=>{n.current=s,r.current=s})),s+=1,r.current+=1;const[o,i]=w.useState((()=>typeof e=="function"?e():e)),a=w.useCallback((c=>{i((l=>oi(l,typeof c=="function"?c:()=>c,t)))}),[]);return w.useEffect((()=>{})),[o,a]}const O1=oa("v3Overview"),C1=oa(!1),I1=oa(!1),Lj={};let jj=0;function Dj(e,t){const n="atom"+ ++jj,r={toString(){return(Lj?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Vj,r.write=Bj),t&&(r.write=t),r}function Vj(e){return e(this)}function Bj(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const id=new WeakMap;function zj(e,t){return n=()=>Dj((s=>s(e)),((s,o,i)=>o(e,oi(s(e),typeof i=="function"?i:()=>i,t)))),r=e,(id.has(r)?id:id.set(r,n())).get(r);var n,r}w.createContext(void 0);const Uj=e=>{e.status||(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})))};rk.use;const Wm={},Wj=Symbol((Wm?"production":void 0)!=="production"?"RESET":""),T1=e=>typeof e?.then=="function";function qj(e=()=>{try{return window.localStorage}catch(n){(Wm?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,s;const o={getItem:(c,l)=>{var u,f;const h=p=>{if(p=p||"",r!==p){try{s=JSON.parse(p,t?.reviver)}catch{return l}r=p}return s},d=(f=(u=e())==null?void 0:u.getItem(c))!=null?f:null;return T1(d)?d.then(h):h(d)},setItem:(c,l)=>{var u;return(u=e())==null?void 0:u.setItem(c,JSON.stringify(l,void 0))},removeItem:c=>{var l;return(l=e())==null?void 0:l.removeItem(c)}},i=c=>(l,u,f)=>c(l,h=>{let d;try{d=JSON.parse(h||"")}catch{d=f}u(d)});let a;try{a=(n=e())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(c,l)=>{if(!(e()instanceof window.Storage))return()=>{};const u=f=>{f.storageArea===e()&&f.key===c&&l(f.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(o.subscribe=i(a)),o}const Kj=qj();function Hj(e,t,n=Kj,r){const s=oa(t);return(Wm?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=i=>{i(n.getItem(e,t));let a;return n.subscribe&&(a=n.subscribe(e,i,t)),a},oa(i=>i(s),(i,a,c)=>{const l=typeof c=="function"?c(i(s)):c;return l===Wj?(a(s,t),n.removeItem(e)):T1(l)?l.then(u=>(a(s,u),n.setItem(e,u))):(a(s,l),n.setItem(e,l))})}const M1=zj(Hj("react-reversi-history",{draw:0,lose:0,win:0}));function Gj(){const e=de.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsx("rect",{fill:"green",width:"640",height:"640","data-testid":"background"}),e[0]=t):t=e[0],t}function Jj(e){const t=de.c(3),{col:n}=e,r=n*80,s=n*80;let o;return t[0]!==r||t[1]!==s?(o=E.jsx("line",{stroke:"black",strokeWidth:"1px",x1:r,x2:s,y1:"0",y2:"640","data-testid":"column"}),t[0]=r,t[1]=s,t[2]=o):o=t[2],o}function Yj(e){const t=de.c(3),{row:n}=e,r=n*80,s=n*80;let o;return t[0]!==r||t[1]!==s?(o=E.jsx("line",{stroke:"black",strokeWidth:"1px",y1:r,y2:s,x1:"0",x2:"640","data-testid":"row"}),t[0]=r,t[1]=s,t[2]=o):o=t[2],o}function Xj(){const e=de.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsxs(E.Fragment,{children:[dr(9,Qj),dr(9,Zj)]}),e[0]=t):t=e[0],t}function Zj(e){return E.jsx(Jj,{col:e},e)}function Qj(e){return E.jsx(Yj,{row:e},e)}function e3(){return E.jsxs(E.Fragment,{children:[E.jsx(Gj,{}),E.jsx(Xj,{})]})}const t3=w.memo(e3);function n3(e){const t=de.c(2),{children:n}=e;let r;return t[0]!==n?(r=E.jsx("svg",{height:"640px",width:"640px",children:n}),t[0]=n,t[1]=r):r=t[1],r}const Jn="W",Yn="B",qm="WC",Km="BC",Hm=Symbol.for("@app/Chess"),A1=df(Yn,Jn,Km,qm),P1=z(A1,si(Hm)),r3=ri(P1),xr=$u(r3,e=>Pu(`Expected ${e} to be one of [${z(A1.literals,$s(", "))}]`)),cb=xr(Yn),kh=xr(Jn),s3=xr(Km),$1=xr(qm),o3=df(Yn,Jn),i3=z(o3,si(Hm));ri(i3);const a3=df(Km,qm),c3=z(a3,si(Hm)),Gm=ri(c3),l3=Symbol.for("@app/Board"),u3=z(eb(z(eb(dj(P1)),rb(8))),rb(8)),F1=z(u3,si(l3)),f3=ri(F1),d3=u1(F1),h3=$u(f3,e=>z(e,d3,bw,ku,t=>Pu(t.message)));function N1(e,{col:t,row:n},r){const s=e;s[n][t]=r}const ad=h3([dr(8,qs),dr(8,qs),dr(8,qs),[null,null,null,cb,kh,null,null,null],[null,null,null,kh,cb,null,null,null],dr(8,qs),dr(8,qs),dr(8,qs)]),p3=Symbol.for("@app/Player"),L1=df(Yn,Jn),j1=z(L1,si(p3)),m3=ri(j1),g3=DL(j1),D1=$u(m3,e=>Pu(`Expected ${e} to be one of [${Yn}, ${Jn}]`)),V1=dk,js=D1(Yn),Er=D1(Jn);var Yr=(e=>(e.Human="Human",e.AI="AI",e))(Yr||{});const y3=cj(Yr),b3=Symbol.for("@app/Users"),Jm=z(bj({key:L1,value:y3}),si(b3)),v3=ri(Jm),w3=sj(Jm),S3=u1(Jm);$u(v3,e=>z(e,S3,bw,ku,t=>Pu(t.message)));const Wl=z(xO(),Pg(js,"Human"),Pg(Er,"Human"),w3,Tm),_3=Wl;function x3(e,t){return z(e,RO(t),ku)}const B1=P(2,x3);function z1(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=z1(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ym(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=z1(e))&&(r&&(r+=" "),r+=t);return r}function lb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function E3(...e){return t=>{let n=!1;const r=e.map(s=>{const o=lb(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():lb(e[s],null)}}}}var R3=Symbol.for("react.lazy"),ql=fp[" use ".trim().toString()];function k3(e){return typeof e=="object"&&e!==null&&"then"in e}function U1(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===R3&&"_payload"in e&&k3(e._payload)}function O3(e){const t=I3(e),n=w.forwardRef((r,s)=>{let{children:o,...i}=r;U1(o)&&typeof ql=="function"&&(o=ql(o._payload));const a=w.Children.toArray(o),c=a.find(M3);if(c){const l=c.props.children,u=a.map(f=>f===c?w.Children.count(l)>1?w.Children.only(null):w.isValidElement(l)?l.props.children:null:f);return E.jsx(t,{...i,ref:s,children:w.isValidElement(l)?w.cloneElement(l,void 0,u):null})}return E.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var C3=O3("Slot");function I3(e){const t=w.forwardRef((n,r)=>{let{children:s,...o}=n;if(U1(s)&&typeof ql=="function"&&(s=ql(s._payload)),w.isValidElement(s)){const i=P3(s),a=A3(o,s.props);return s.type!==w.Fragment&&(a.ref=r?E3(r,i):i),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var T3=Symbol("radix.slottable");function M3(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===T3}function A3(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function P3(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function $3(e,t){const n={},r=Object.keys(e);for(let s=0;s<r.length;s++){const o=r[s];t(o)&&(n[o]=e[o])}return n}var F3=(e={})=>{const t=e.compose||Ym,n=e.shouldForwardProp||(s=>s[0]!=="$"),r=s=>{const o=(i,a=n)=>{const c=(l,...u)=>{const f=typeof l=="function",h=!f&&String.raw({raw:l},...u);return w.forwardRef((d,p)=>{const{className:m,asChild:y,...g}=d,b=typeof i=="function"?i(d):i||{},v=$3({...b,...g},a),S=e.forwardAsChild&&typeof s!="string",_=!S&&y?C3:s,k=f?l(d):h;return E.jsx(_,{ref:p,className:typeof k=="function"?I=>t(k(I),typeof m=="function"?m(I):m):t(k,m),...S?{asChild:y}:{},...v})})};return c.transientProps=l=>o(i,typeof l=="function"?f=>!l(f):f=>!l.includes(f)),i===void 0&&(c.attrs=l=>o(l,a)),c};return o()};return new Proxy(s=>r(s),{get(s,o){return r(o)}})},Xm=F3();const N3=Xm.circle`pointer-events-none`;function L3(e){const t=de.c(16),{color:n,row:r,col:s,isCandidate:o,showHint:i,onClick:a}=e;let c;t[0]!==s||t[1]!==a||t[2]!==r?(c=()=>{a({row:r,col:s})},t[0]=s,t[1]=a,t[2]=r,t[3]=c):c=t[3];const l=c,u=s*80,f=r*80;let h;t[4]!==l||t[5]!==u||t[6]!==f?(h=E.jsx("rect",{onClick:l,width:"80",height:"80",fillOpacity:"0",x:u,y:f}),t[4]=l,t[5]=u,t[6]=f,t[7]=h):h=t[7];const d=o?i?"0.3":"0":"1",p=s*80+40,m=r*80+40;let y;t[8]!==n||t[9]!==d||t[10]!==p||t[11]!==m?(y=E.jsx(N3,{fill:n,fillOpacity:d,cx:p,cy:m,r:30}),t[8]=n,t[9]=d,t[10]=p,t[11]=m,t[12]=y):y=t[12];let g;return t[13]!==h||t[14]!==y?(g=E.jsxs(E.Fragment,{children:[h,y]}),t[13]=h,t[14]=y,t[15]=g):g=t[15],g}function j3(e){const t=de.c(9),{board:n,hint:r,onPlaceChess:s}=e;let o;if(t[0]!==n||t[1]!==r||t[2]!==s){let a;t[4]!==r||t[5]!==s?(a=(c,l)=>c.map((u,f)=>u?E.jsx(L3,{row:l,col:f,showHint:r,color:u===kh||u===$1?"white":"black",isCandidate:Gm(u),onClick:s},l*8+f):null),t[4]=r,t[5]=s,t[6]=a):a=t[6],o=n.flatMap(a),t[0]=n,t[1]=r,t[2]=s,t[3]=o}else o=t[3];let i;return t[7]!==o?(i=E.jsx(E.Fragment,{children:o}),t[7]=o,t[8]=i):i=t[8],i}const D3="en",Kl=["en","zh-TW"],W1="PARAGLIDE_LOCALE",q1=["localStorage","preferredLanguage","baseLocale"];globalThis.__paraglide={};let ub=!1,tt=()=>{let e;for(const t of q1){if(t==="baseLocale")e=D3;else if(t==="preferredLanguage")e=z3();else if(t==="localStorage")e=localStorage.getItem(W1)??void 0;else if(H1(t)&&Hl.has(t)){const n=Hl.get(t);if(n){const r=n.getLocale();if(r instanceof Promise)continue;e=r}}if(e!==void 0){const n=B3(e);return ub||(ub=!0,K1(n,{reload:!1})),n}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const V3=e=>{window.location.reload()};let K1=(e,t)=>{const n={reload:!0,...t};let r;try{r=tt()}catch{}const s=[];for(const i of q1)if(i!=="baseLocale"){if(i==="localStorage"&&typeof window<"u")localStorage.setItem(W1,e);else if(H1(i)&&Hl.has(i)){const a=Hl.get(i);if(a){let c=a.setLocale(e);c instanceof Promise&&(c=c.catch(l=>{throw new Error(`Custom strategy "${i}" setLocale failed.`,{cause:l})}),s.push(c))}}}const o=()=>{n.reload&&window.location&&e!==r&&V3()};if(s.length)return Promise.all(s).then(()=>{o()});o()};function fb(e){return typeof e!="string"?!1:e?Kl.some(t=>t.toLowerCase()===e.toLowerCase()):!1}function B3(e){if(typeof e!="string")throw new Error(`Invalid locale: ${e}. Expected a string.`);const t=e.toLowerCase(),n=Kl.find(r=>r.toLowerCase()===t);if(!n)throw new Error(`Invalid locale: ${e}. Expected one of: ${Kl.join(", ")}`);return n}function z3(){if(!navigator?.languages?.length)return;const e=navigator.languages.map(t=>({fullTag:t.toLowerCase(),baseTag:t.split("-")[0]?.toLowerCase()}));for(const t of e){if(fb(t.fullTag))return t.fullTag;if(fb(t.baseTag))return t.baseTag}}const Hl=new Map;function H1(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}const U3=()=>"Reversi",W3=()=>"",q3=(e={},t={})=>(t.locale??tt())==="en"?U3():W3(),K3=()=>"Play with friend",H3=()=>"",G3=(e={},t={})=>(t.locale??tt())==="en"?K3():H3(),J3=()=>"Restart",Y3=()=>"",X3=(e={},t={})=>(t.locale??tt())==="en"?J3():Y3(),Z3=()=>"Play Again?",Q3=()=>"",eD=(e={},t={})=>(t.locale??tt())==="en"?Z3():Q3(),tD=()=>"Score",nD=()=>"",rD=(e={},t={})=>(t.locale??tt())==="en"?tD():nD(),sD=()=>"Hint",oD=()=>"",iD=(e={},t={})=>(t.locale??tt())==="en"?sD():oD(),aD=()=>"Allow Retract",cD=()=>"",lD=(e={},t={})=>(t.locale??tt())==="en"?aD():cD(),uD=()=>"AI Version",fD=()=>"AI ",dD=(e={},t={})=>(t.locale??tt())==="en"?uD():fD(),hD=()=>"You win!",pD=()=>"",mD=(e={},t={})=>(t.locale??tt())==="en"?hD():pD(),gD=()=>"You lose!",yD=()=>"",bD=(e={},t={})=>(t.locale??tt())==="en"?gD():yD(),vD=()=>"Draw!",wD=()=>"!",SD=(e={},t={})=>(t.locale??tt())==="en"?vD():wD(),_D=()=>"Black wins!",xD=()=>"",ED=(e={},t={})=>(t.locale??tt())==="en"?_D():xD(),RD=()=>"White wins!",kD=()=>"",OD=(e={},t={})=>(t.locale??tt())==="en"?RD():kD(),CD=e=>`No valid move for ${e?.player}!`,ID=e=>`${e?.player}`,TD=(e,t={})=>(t.locale??tt())==="en"?CD(e):ID(e),MD=()=>"Black",AD=()=>"",G1=(e={},t={})=>(t.locale??tt())==="en"?MD():AD(),PD=()=>"White",$D=()=>"",J1=(e={},t={})=>(t.locale??tt())==="en"?PD():$D(),FD=()=>"Settings",ND=()=>"",LD=(e={},t={})=>(t.locale??tt())==="en"?FD():ND(),jD=e=>`Version: ${e?.version}`,DD=e=>`: ${e?.version}`,VD=(e,t={})=>(t.locale??tt())==="en"?jD(e):DD(e);function Y1(e,t,n){return new Intl.DateTimeFormat(e,n).format(new Date(t))}const BD=e=>`Updated at: ${Y1("en",e?.updatedAt,{})}`,zD=e=>`: ${Y1("zh-TW",e?.updatedAt,{})}`,UD=(e,t={})=>(t.locale??tt())==="en"?BD(e):zD(e),WD=e=>`Start a new game as ${e?.player} vs AI`,qD=e=>`${e?.player} vs AI`,KD=(e,t={})=>(t.locale??tt())==="en"?WD(e):qD(e),HD=Xm.text`pointer-events-none text-4xl`;function db(e){const t=de.c(19),{x:n,y:r,color:s,children:o,background:i,onClick:a,value:c}=e;let l;t[0]!==c?(l=KD({player:c===js?G1():J1()}),t[0]=c,t[1]=l):l=t[1];let u;t[2]!==a||t[3]!==c?(u=()=>a(c),t[2]=a,t[3]=c,t[4]=u):u=t[4];let f;t[5]!==i||t[6]!==n||t[7]!==r?(f=E.jsx("circle",{fill:i,cx:n,cy:r,r:80}),t[5]=i,t[6]=n,t[7]=r,t[8]=f):f=t[8];const h=r+10;let d;t[9]!==o||t[10]!==s||t[11]!==h||t[12]!==n?(d=E.jsx(HD,{fill:s,textAnchor:"middle",x:n,y:h,children:o}),t[9]=o,t[10]=s,t[11]=h,t[12]=n,t[13]=d):d=t[13];let p;return t[14]!==l||t[15]!==u||t[16]!==f||t[17]!==d?(p=E.jsxs("g",{role:"button",className:"cursor-pointer","aria-description":l,onClick:u,children:[f,d]}),t[14]=l,t[15]=u,t[16]=f,t[17]=d,t[18]=p):p=t[18],p}function GD(e){const t=de.c(2),{onStart:n}=e;let r;return t[0]!==n?(r=E.jsxs(E.Fragment,{children:[E.jsx(db,{color:"white",background:"black",x:160,y:300,value:Er,onClick:n,children:"Black"}),E.jsx(db,{color:"black",background:"white",x:480,y:300,value:js,onClick:n,children:"White"})]}),t[0]=n,t[1]=r):r=t[1],r}const JD=Xm.text.attrs({style:{textAnchor:"middle"},x:"50%",y:"50%"})`text-9xl pointer-events-none fill-red-600`,Si={Root:n3,Background:t3,Chesses:j3,Overlay:JD,ChooseColor:GD};var wc={},Sc={},hb;function YD(){return hb||(hb=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.default=function(){return`
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
  0%, 100% {
    transform: rotate(0deg);
  }

  20%, 60% {
    transform: rotate(-25deg);
  }

  40%, 80% {
    transform: rotate(10deg);
  }
}

@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none;
    }

    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out;
    }
}
`}),Sc}var pb;function XD(){if(pb)return wc;pb=1,Object.defineProperty(wc,"__esModule",{value:!0});var e=Object.assign||function(p){for(var m=1;m<arguments.length;m++){var y=arguments[m];for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])}return p},t=(function(){function p(m,y){for(var g=0;g<y.length;g++){var b=y[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,y,g){return y&&p(m.prototype,y),g&&p(m,g),m}})(),n=sk(),r=i(n),s=YD(),o=i(s);function i(p){return p&&p.__esModule?p:{default:p}}function a(p,m){var y={};for(var g in p)m.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(p,g)&&(y[g]=p[g]);return y}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function l(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f="____GITHUB_CORNER_SUPER_SECRET___",h=(0,o.default)(),d=(function(p){u(m,p);function m(){return c(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return t(m,[{key:"componentDidMount",value:function(){if(!document.getElementById(f)){var g=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",b.id=f,b.styleSheet?b.styleSheet.cssText=h:b.appendChild(document.createTextNode(h)),g.appendChild(b)}}},{key:"render",value:function(){var g=this.props,b=g.href,v=g.size,S=g.direction,_=g.octoColor,k=g.bannerColor,I=g.ariaLabel,x=g.className,R=g.svgStyle,T=a(g,["href","size","direction","octoColor","bannerColor","ariaLabel","className","svgStyle"]),M={position:"absolute",top:0,fill:_},B={},U="",V="",$="";S==="left"?(U="M250 0L135 115h-15l-12 27L0 250V0z",V="M122 109c15-9 9-19 9-19-3-7-2-11-2-11 1-7-3-2-3-2-4 5-2 11-2 11 3 10-5 15-9 16",$="M135 115s-4 2-5 0l-14-14c-3-2-6-3-8-3 8-11 15-24-2-41-5-5-10-7-16-7-1-2-3-7-12-11 0 0-5 3-7 16-4 2-8 5-12 9s-7 8-9 12c-14 4-17 9-17 9 4 8 9 11 11 11 0 6 2 11 7 16 16 16 30 10 41 2 0 3 1 7 5 11l12 11c1 2-1 6-1 6z",M.left=0,B.WebkitTransformOrigin="120px 144px",B.transformOrigin="120px 144px"):(U="M0 0l115 115h15l12 27 108 108V0z",V="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16",$="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z",M.right=0,B.WebkitTransformOrigin="130px 106px",B.transformOrigin="130px 106px");var O=typeof x=="string"?" "+x:"";return r.default.createElement("a",e({},T,{href:b,className:"github-corner"+O,"aria-label":I}),r.default.createElement("svg",{width:v,height:v,viewBox:"0 0 250 250",style:e({},M,R)},r.default.createElement("path",{className:"octo-banner",d:U,fill:k}),r.default.createElement("path",{className:"octo-arm",d:V,style:B}),r.default.createElement("path",{className:"octo-body",d:$})))}}]),m})(n.Component);return d.defaultProps={href:"/",size:80,direction:"right",octoColor:"#fff",bannerColor:"#151513",ariaLabel:"Open GitHub project"},wc.default=d,wc}var ZD=XD();const QD=ok(ZD);function eV(){const e=de.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsxs("div",{className:"text-muted-foreground p-4 text-sm",children:[E.jsx("p",{children:VD({version:"2.6.2"})}),E.jsx("p",{children:UD({updatedAt:"2026-01-09T14:57:11.708Z"})})]}),e[0]=t):t=e[0],t}const mb={};function an(e,t){const n=w.useRef(mb);return n.current===mb&&(n.current=e(t)),n}const cd=fp[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],tV=cd&&cd!==w.useLayoutEffect?cd:e=>e();function ye(e){const t=an(nV).current;return t.next=e,tV(t.effect),t.trampoline}function nV(){const e={next:void 0,callback:rV,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function rV(){}function hf(){return typeof window<"u"}function Xr(e){return Zm(e)?(e.nodeName||"").toLowerCase():"#document"}function vt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function or(e){var t;return(t=(Zm(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Zm(e){return hf()?e instanceof Node||e instanceof vt(e).Node:!1}function Ke(e){return hf()?e instanceof Element||e instanceof vt(e).Element:!1}function at(e){return hf()?e instanceof HTMLElement||e instanceof vt(e).HTMLElement:!1}function Oh(e){return!hf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vt(e).ShadowRoot}const sV=new Set(["inline","contents"]);function Ds(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=cn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!sV.has(s)}const oV=new Set(["table","td","th"]);function iV(e){return oV.has(Xr(e))}const aV=[":popover-open",":modal"];function pf(e){return aV.some(t=>{try{return e.matches(t)}catch{return!1}})}const cV=["transform","translate","scale","rotate","perspective"],lV=["transform","translate","scale","rotate","perspective","filter"],uV=["paint","layout","strict","content"];function Qm(e){const t=mf(),n=Ke(e)?cn(e):e;return cV.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||lV.some(r=>(n.willChange||"").includes(r))||uV.some(r=>(n.contain||"").includes(r))}function fV(e){let t=Rr(e);for(;at(t)&&!vr(t);){if(Qm(t))return t;if(pf(t))return null;t=Rr(t)}return null}function mf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const dV=new Set(["html","body","#document"]);function vr(e){return dV.has(Xr(e))}function cn(e){return vt(e).getComputedStyle(e)}function gf(e){return Ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rr(e){if(Xr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oh(e)&&e.host||or(e);return Oh(t)?t.host:t}function X1(e){const t=Rr(e);return vr(t)?e.ownerDocument?e.ownerDocument.body:e.body:at(t)&&Ds(t)?t:X1(t)}function Vr(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=X1(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=vt(s);if(o){const a=Ch(i);return t.concat(i,i.visualViewport||[],Ds(s)?s:[],a&&n?Vr(a):[])}return t.concat(s,Vr(s,[],n))}function Ch(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const ii=typeof navigator<"u",ld=gV(),Z1=bV(),Q1=yV(),ex=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),hV=ld.platform==="MacIntel"&&ld.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(ld.platform),pV=ii&&/apple/i.test(navigator.vendor),Ih=ii&&/android/i.test(Z1)||/android/i.test(Q1);ii&&Z1.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;const mV=Q1.includes("jsdom/");function gV(){if(!ii)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function yV(){if(!ii)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function bV(){if(!ii)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}function Kr(e){return e?.ownerDocument||document}const vV=()=>{},fe=typeof document<"u"?w.useLayoutEffect:vV,wV=[];function tx(e){w.useEffect(e,wV)}const _i=0;class zo{static create(){return new zo}currentId=_i;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=_i,n()},t)}isStarted(){return this.currentId!==_i}clear=()=>{this.currentId!==_i&&(clearTimeout(this.currentId),this.currentId=_i)};disposeEffect=()=>this.clear}function nn(){const e=an(zo.create).current;return tx(e.disposeEffect),e}const _c=null;class SV{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)n[s]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const xc=new SV;class Kn{static create(){return new Kn}static request(t){return xc.request(t)}static cancel(t){return xc.cancel(t)}currentId=_c;request(t){this.cancel(),this.currentId=xc.request(()=>{this.currentId=_c,t()})}cancel=()=>{this.currentId!==_c&&(xc.cancel(this.currentId),this.currentId=_c)};disposeEffect=()=>this.cancel}function yf(){const e=an(Kn.create).current;return tx(e.disposeEffect),e}function Ht(){}const Th=Object.freeze([]),Ot=Object.freeze({});let gb={},yb={},bb="";function _V(e){if(typeof document>"u")return!1;const t=Kr(e);return vt(t).innerWidth-t.documentElement.clientWidth>0}function xV(e){const t=Kr(e),n=t.documentElement,r=t.body,s=Ds(n)?n:r,o=s.style.overflow;return s.style.overflow="hidden",()=>{s.style.overflow=o}}function EV(e){const t=Kr(e),n=t.documentElement,r=t.body,s=vt(n);let o=0,i=0;const a=Kn.create(),c=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable");if(ex&&(s.visualViewport?.scale??1)!==1)return()=>{};function l(){const h=s.getComputedStyle(n),d=s.getComputedStyle(r),y=(h.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";o=n.scrollTop,i=n.scrollLeft,gb={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},bb=n.style.scrollBehavior,yb={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const g=n.scrollHeight>n.clientHeight,b=n.scrollWidth>n.clientWidth,v=h.overflowY==="scroll"||d.overflowY==="scroll",S=h.overflowX==="scroll"||d.overflowX==="scroll",_=Math.max(0,s.innerWidth-n.clientWidth),k=Math.max(0,s.innerHeight-n.clientHeight),I=parseFloat(d.marginTop)+parseFloat(d.marginBottom),x=parseFloat(d.marginLeft)+parseFloat(d.marginRight),R=Ds(n)?n:r;if(c){n.style.scrollbarGutter=y,R.style.overflowY="hidden",R.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:y,overflowY:"hidden",overflowX:"hidden"}),(g||v)&&(n.style.overflowY="scroll"),(b||S)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:I||k?`calc(100dvh - ${I+k}px)`:"100dvh",width:x||_?`calc(100vw - ${x+_}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=o,r.scrollLeft=i,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function u(){Object.assign(n.style,gb),Object.assign(r.style,yb),c||(n.scrollTop=o,n.scrollLeft=i,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=bb)}function f(){u(),a.request(l)}return l(),s.addEventListener("resize",f),()=>{a.cancel(),u(),typeof s.removeEventListener=="function"&&s.removeEventListener("resize",f)}}class RV{lockCount=0;restore=null;timeoutLock=zo.create();timeoutUnlock=zo.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const r=Kr(t).documentElement,s=vt(r).getComputedStyle(r).overflowY;if(s==="hidden"||s==="clip"){this.restore=Ht;return}const o=hV||!_V(t);this.restore=o?xV(t):EV(t)}}const kV=new RV;function nx(e=!0,t=null){fe(()=>{if(e)return kV.acquire(t)},[e,t])}function kt(e){const t=an(OV,e).current;return t.next=e,fe(t.effect),t}function OV(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const Mh="data-base-ui-focusable",rx="active",sx="selected",CV="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",Br="ArrowLeft",zr="ArrowRight",eg="ArrowUp",tc="ArrowDown";function Fr(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Ge(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&Oh(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function bn(e){return"composedPath"in e?e.composedPath()[0]:e.target}function kn(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function IV(e){return e.matches("html,body")}function Nt(e){return e?.ownerDocument||document}function ox(e){return at(e)&&e.matches(CV)}function Ah(e){return e?e.getAttribute("role")==="combobox"&&ox(e):!1}function va(e){return e?e.hasAttribute(Mh)?e:e.querySelector(`[${Mh}]`)||e:null}function yo(e,t,n=!0){return e.filter(s=>s.parentId===t&&(!n||s.context?.open)).flatMap(s=>[s,...yo(e,s.id,n)])}function vb(e,t){let n=[],r=e.find(s=>s.id===t)?.parentId;for(;r;){const s=e.find(o=>o.id===r);r=s?.parentId,s&&(n=n.concat(s))}return n}function At(e){e.preventDefault(),e.stopPropagation()}function TV(e){return"nativeEvent"in e}function ix(e){return e.mozInputSource===0&&e.isTrusted?!0:Ih&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ax(e){return mV?!1:!Ih&&e.width===0&&e.height===0||Ih&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function wb(e,t){return["mouse","pen"].includes(e)}function cx(e){const t=e.type;return t==="click"||t==="mousedown"||t==="keydown"||t==="keyup"}function xn(e,...t){const n=new URL(`https://base-ui.com/production-error/${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${e}; visit ${n} for the full message.`}const MV=["top","right","bottom","left"],Uo=Math.min,tn=Math.max,Gl=Math.round,io=Math.floor,Xn=e=>({x:e,y:e}),AV={left:"right",right:"left",bottom:"top",top:"bottom"},PV={start:"end",end:"start"};function Ph(e,t,n){return tn(e,Uo(t,n))}function kr(e,t){return typeof e=="function"?e(t):e}function sn(e){return e.split("-")[0]}function Zr(e){return e.split("-")[1]}function tg(e){return e==="x"?"y":"x"}function ng(e){return e==="y"?"height":"width"}const $V=new Set(["top","bottom"]);function wn(e){return $V.has(sn(e))?"y":"x"}function rg(e){return tg(wn(e))}function FV(e,t,n){n===void 0&&(n=!1);const r=Zr(e),s=rg(e),o=ng(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Jl(i)),[i,Jl(i)]}function NV(e){const t=Jl(e);return[$h(e),t,$h(t)]}function $h(e){return e.replace(/start|end/g,t=>PV[t])}const Sb=["left","right"],_b=["right","left"],LV=["top","bottom"],jV=["bottom","top"];function DV(e,t,n){switch(e){case"top":case"bottom":return n?t?_b:Sb:t?Sb:_b;case"left":case"right":return t?LV:jV;default:return[]}}function VV(e,t,n,r){const s=Zr(e);let o=DV(sn(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map($h)))),o}function Jl(e){return e.replace(/left|right|bottom|top/g,t=>AV[t])}function BV(e){return{top:0,right:0,bottom:0,left:0,...e}}function lx(e){return typeof e!="number"?BV(e):{top:e,right:e,bottom:e,left:e}}function Yl(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Ec(e,t,n){return Math.floor(e/t)!==n}function Zi(e,t){return t<0||t>=e.current.length}function ud(e,t){return Tt(e,{disabledIndices:t})}function xb(e,t){return Tt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Tt(e,{startingIndex:t=-1,decrement:n=!1,disabledIndices:r,amount:s=1}={}){let o=t;do o+=n?-s:s;while(o>=0&&o<=e.current.length-1&&Qi(e,o,r));return o}function zV(e,{event:t,orientation:n,loopFocus:r,rtl:s,cols:o,disabledIndices:i,minIndex:a,maxIndex:c,prevIndex:l,stopEvent:u=!1}){let f=l;const h=[],d={};let p=!1;{let g=null,b=-1;e.current.forEach((v,S)=>{if(v==null)return;const _=v.closest('[role="row"]');_&&(p=!0),(_!==g||b===-1)&&(g=_,b+=1,h[b]=[]),h[b].push(S),d[S]=b})}const m=p&&h.length>0&&h.some(g=>g.length!==o);function y(g){if(!m||l===-1)return;const b=d[l];if(b==null)return;const v=h[b].indexOf(l);let S=g==="up"?b-1:b+1;r&&(S<0?S=h.length-1:S>=h.length&&(S=0));const _=new Set;for(;S>=0&&S<h.length&&!_.has(S);){_.add(S);const k=h[S];if(k.length===0){S=g==="up"?S-1:S+1;continue}const I=Math.min(v,k.length-1);for(let x=I;x>=0;x-=1){const R=k[x];if(!Qi(e,R,i))return R}S=g==="up"?S-1:S+1,r&&(S<0?S=h.length-1:S>=h.length&&(S=0))}}if(t.key===eg){const g=y("up");if(g!==void 0)u&&At(t),f=g;else{if(u&&At(t),l===-1)f=c;else if(f=Tt(e,{startingIndex:f,amount:o,decrement:!0,disabledIndices:i}),r&&(l-o<a||f<0)){const b=l%o,v=c%o,S=c-(v-b);v===b?f=c:f=v>b?S:S-o}Zi(e,f)&&(f=l)}}if(t.key===tc){const g=y("down");g!==void 0?(u&&At(t),f=g):(u&&At(t),l===-1?f=a:(f=Tt(e,{startingIndex:l,amount:o,disabledIndices:i}),r&&l+o>c&&(f=Tt(e,{startingIndex:l%o-o,amount:o,disabledIndices:i}))),Zi(e,f)&&(f=l))}if(n==="both"){const g=io(l/o);t.key===(s?Br:zr)&&(u&&At(t),l%o!==o-1?(f=Tt(e,{startingIndex:l,disabledIndices:i}),r&&Ec(f,o,g)&&(f=Tt(e,{startingIndex:l-l%o-1,disabledIndices:i}))):r&&(f=Tt(e,{startingIndex:l-l%o-1,disabledIndices:i})),Ec(f,o,g)&&(f=l)),t.key===(s?zr:Br)&&(u&&At(t),l%o!==0?(f=Tt(e,{startingIndex:l,decrement:!0,disabledIndices:i}),r&&Ec(f,o,g)&&(f=Tt(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:i}))):r&&(f=Tt(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:i})),Ec(f,o,g)&&(f=l));const b=io(c/o)===g;Zi(e,f)&&(r&&b?f=t.key===(s?zr:Br)?c:Tt(e,{startingIndex:l-l%o-1,disabledIndices:i}):f=l)}return f}function UV(e,t,n){const r=[];let s=0;return e.forEach(({width:o,height:i},a)=>{let c=!1;for(n&&(s=0);!c;){const l=[];for(let u=0;u<o;u+=1)for(let f=0;f<i;f+=1)l.push(s+u+f*t);s%t+o<=t&&l.every(u=>r[u]==null)?(l.forEach(u=>{r[u]=a}),c=!0):s+=1}}),[...r]}function WV(e,t,n,r,s){if(e===-1)return-1;const o=n.indexOf(e),i=t[e];switch(s){case"tl":return o;case"tr":return i?o+i.width-1:o;case"bl":return i?o+(i.height-1)*r:o;case"br":return n.lastIndexOf(e);default:return-1}}function qV(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Qi(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}var KV=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Xl=KV.join(","),ux=typeof Element>"u",Wo=ux?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Zl=!ux&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Ql=function(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=s===""||s==="true",i=o||n&&t&&(typeof t.closest=="function"?t.closest("[inert]"):Ql(t.parentNode));return i},HV=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},fx=function(t,n,r){if(Ql(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Xl));return n&&Wo.call(t,Xl)&&s.unshift(t),s=s.filter(r),s},eu=function(t,n,r){for(var s=[],o=Array.from(t);o.length;){var i=o.shift();if(!Ql(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),c=a.length?a:i.children,l=eu(c,!0,r);r.flatten?s.push.apply(s,l):s.push({scopeParent:i,candidates:l})}else{var u=Wo.call(i,Xl);u&&r.filter(i)&&(n||!t.includes(i))&&s.push(i);var f=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!Ql(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(f&&h){var d=eu(f===!0?i.children:f.children,!0,r);r.flatten?s.push.apply(s,d):s.push({scopeParent:i,candidates:d})}else o.unshift.apply(o,i.children)}}return s},dx=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},hx=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||HV(t))&&!dx(t)?0:t.tabIndex},GV=function(t,n){var r=hx(t);return r<0&&n&&!dx(t)?0:r},JV=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},px=function(t){return t.tagName==="INPUT"},YV=function(t){return px(t)&&t.type==="hidden"},XV=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},ZV=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},QV=function(t){if(!t.name)return!0;var n=t.form||Zl(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=ZV(s,t.form);return!o||o===t},e4=function(t){return px(t)&&t.type==="radio"},t4=function(t){return e4(t)&&!QV(t)},n4=function(t){var n,r=t&&Zl(t),s=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var i,a,c;for(o=!!((i=s)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(s)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&s;){var l,u,f;r=Zl(s),s=(l=r)===null||l===void 0?void 0:l.host,o=!!((u=s)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return o},Eb=function(t){var n=t.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},r4=function(t,n){var r=n.displayCheck,s=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var o=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(t).visibility==="hidden")return!0;var i=Wo.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(Wo.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var c=t;t;){var l=t.parentElement,u=Zl(t);if(l&&!l.shadowRoot&&s(l)===!0)return Eb(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=c}if(n4(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Eb(t);return!1},s4=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Wo.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},Fh=function(t,n){return!(n.disabled||YV(n)||r4(n,t)||XV(n)||s4(n))},Nh=function(t,n){return!(t4(n)||hx(n)<0||!Fh(t,n))},o4=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},mx=function(t){var n=[],r=[];return t.forEach(function(s,o){var i=!!s.scopeParent,a=i?s.scopeParent:s,c=GV(a,i),l=i?mx(s.candidates):a;c===0?i?n.push.apply(n,l):n.push(a):r.push({documentOrder:o,tabIndex:c,item:s,isScope:i,content:l})}),r.sort(JV).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},bf=function(t,n){n=n||{};var r;return n.getShadowRoot?r=eu([t],n.includeContainer,{filter:Nh.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:o4}):r=fx(t,n.includeContainer,Nh.bind(null,n)),mx(r)},i4=function(t,n){n=n||{};var r;return n.getShadowRoot?r=eu([t],n.includeContainer,{filter:Fh.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=fx(t,n.includeContainer,Fh.bind(null,n)),r},gx=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Wo.call(t,Xl)===!1?!1:Nh(n,t)};const nc=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function yx(e,t){const n=bf(e,nc()),r=n.length;if(r===0)return;const s=Fr(Nt(e)),o=n.indexOf(s),i=o===-1?t===1?0:r-1:o+t;return n[i]}function bx(e){return yx(Nt(e).body,1)||e}function vx(e){return yx(Nt(e).body,-1)||e}function ea(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Ge(n,r)}function a4(e){bf(e,nc()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Rb(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const c4={...fp};let kb=0;function l4(e,t="mui"){const[n,r]=w.useState(e),s=e||n;return w.useEffect(()=>{n==null&&(kb+=1,r(`${t}-${kb}`))},[n,t]),s}const Ob=c4.useId;function rc(e,t){if(Ob!==void 0){const n=Ob();return e??(t?`${t}-${n}`:n)}return l4(e,t)}function u4(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(r=>r(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}const f4=w.createContext(null),d4=w.createContext(null),vf=()=>w.useContext(f4)?.id||null,wf=e=>{const t=w.useContext(d4);return e??t},h4={style:{transition:"none"}},p4="data-base-ui-click-trigger",m4={fallbackAxisSide:"none"},g4={clipPath:"inset(50%)",position:"fixed",top:0,left:0},Sf="none",ta="trigger-press",y4="trigger-hover",wx="outside-press",fd="item-press",b4="close-press",_f="focus-out",v4="escape-key",dd="list-navigation",w4="cancel-open",S4="imperative-action",_4="window-resize";function Ue(e,t,n,r){let s=!1,o=!1;const i=Ot;return{reason:e,event:t??new Event("base-ui"),cancel(){s=!0},allowPropagation(){o=!0},get isCanceled(){return s},get isPropagationAllowed(){return o},trigger:n,...i}}function tu(e){return`data-base-ui-${e}`}function Is(e,t,n,r){const s=an(Sx).current;return E4(s,e,t,n,r)&&_x(s,[e,t,n,r]),s.callback}function x4(e){const t=an(Sx).current;return R4(t,e)&&_x(t,e),t.callback}function Sx(){return{callback:null,cleanup:null,refs:[]}}function E4(e,t,n,r,s){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==s}function R4(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function _x(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=o(n);typeof i=="function"&&(r[s]=i);break}case"object":{o.current=n;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=r[s];typeof i=="function"?i():o(null);break}case"object":{o.current=null;break}}}}}}}const xf={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},nu=w.forwardRef(function(t,n){const[r,s]=w.useState();fe(()=>{pV&&s("button")},[]);const o={tabIndex:0,role:r};return E.jsx("span",{...t,ref:n,style:xf,"aria-hidden":r?void 0:!0,...o,"data-base-ui-focus-guard":""})});let Cb=0;function al(e,t={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(Cb);const o=()=>e?.focus({preventScroll:n});s?o():Cb=requestAnimationFrame(o)}const bo={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Ib(e){return e==="inert"?bo.inert:e==="aria-hidden"?bo["aria-hidden"]:bo.none}let Rc=new WeakSet,kc={},hd=0;const xx=e=>e&&(e.host||xx(e.parentNode)),k4=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=xx(n);return e.contains(r)?r:null}).filter(n=>n!=null);function O4(e,t,n,r){const s="data-base-ui-inert",o=r?"inert":n?"aria-hidden":null,i=k4(t,e),a=new Set,c=new Set(i),l=[];kc[s]||(kc[s]=new WeakMap);const u=kc[s];i.forEach(f),h(t),a.clear();function f(d){!d||a.has(d)||(a.add(d),d.parentNode&&f(d.parentNode))}function h(d){!d||c.has(d)||[].forEach.call(d.children,p=>{if(Xr(p)!=="script")if(a.has(p))h(p);else{const m=o?p.getAttribute(o):null,y=m!==null&&m!=="false",g=Ib(o),b=(g.get(p)||0)+1,v=(u.get(p)||0)+1;g.set(p,b),u.set(p,v),l.push(p),b===1&&y&&Rc.add(p),v===1&&p.setAttribute(s,""),!y&&o&&p.setAttribute(o,o==="inert"?"":"true")}})}return hd+=1,()=>{l.forEach(d=>{const p=Ib(o),y=(p.get(d)||0)-1,g=(u.get(d)||0)-1;p.set(d,y),u.set(d,g),y||(!Rc.has(d)&&o&&d.removeAttribute(o),Rc.delete(d)),g||d.removeAttribute(s)}),hd-=1,hd||(bo.inert=new WeakMap,bo["aria-hidden"]=new WeakMap,bo.none=new WeakMap,Rc=new WeakSet,kc={})}}function C4(e,t=!1,n=!1){const r=Nt(e[0]).body;return O4(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const I4=parseInt(w.version,10);function sg(e){return I4>=e}function Tb(e){if(!w.isValidElement(e))return null;const t=e,n=t.props;return(sg(19)?n?.ref:t.ref)??null}function Lh(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function T4(e,t){const n={};for(const r in e){const s=e[r];if(t?.hasOwnProperty(r)){const o=t[r](s);o!=null&&Object.assign(n,o);continue}s===!0?n[`data-${r.toLowerCase()}`]="":s&&(n[`data-${r.toLowerCase()}`]=s.toString())}return n}function M4(e,t){return typeof e=="function"?e(t):e}function A4(e,t){return typeof e=="function"?e(t):e}const na={};function sc(e,t,n,r,s){let o={...jh(e,na)};return t&&(o=zi(o,t)),n&&(o=zi(o,n)),r&&(o=zi(o,r)),s&&(o=zi(o,s)),o}function P4(e){if(e.length===0)return na;if(e.length===1)return jh(e[0],na);let t={...jh(e[0],na)};for(let n=1;n<e.length;n+=1)t=zi(t,e[n]);return t}function zi(e,t){return Ex(t)?t(e):$4(e,t)}function $4(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=Lh(e.style,r);break}case"className":{e[n]=Rx(e.className,r);break}default:F4(n,r)?e[n]=N4(e[n],r):e[n]=r}}return e}function F4(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),s=e.charCodeAt(2);return n===111&&r===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function Ex(e){return typeof e=="function"}function jh(e,t){return Ex(e)?e(t):e??na}function N4(e,t){return t?e?n=>{if(L4(n)){const s=n;Dh(s);const o=t(s);return s.baseUIHandlerPrevented||e?.(s),o}const r=t(n);return e?.(n),r}:t:e}function Dh(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Rx(e,t){return t?e?t+" "+e:t:e}function L4(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function wt(e,t,n={}){const r=t.render,s=j4(t,n);if(n.enabled===!1)return null;const o=n.state??Ot;return D4(e,r,s,o)}function j4(e,t={}){const{className:n,style:r,render:s}=e,{state:o=Ot,ref:i,props:a,stateAttributesMapping:c,enabled:l=!0}=t,u=l?M4(n,o):void 0,f=l?A4(r,o):void 0,h=l?T4(o,c):Ot,d=l?Lh(h,Array.isArray(a)?P4(a):a)??Ot:Ot;return typeof document<"u"&&(l?Array.isArray(i)?d.ref=x4([d.ref,Tb(s),...i]):d.ref=Is(d.ref,Tb(s),i):Is(null,null)),l?(u!==void 0&&(d.className=Rx(d.className,u)),f!==void 0&&(d.style=Lh(d.style,f)),d):Ot}function D4(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const s=sc(n,t.props);return s.ref=n.ref,w.cloneElement(t,s)}if(e&&typeof e=="string")return V4(e,n);throw new Error(xn(8))}function V4(e,t){return e==="button"?w.createElement("button",{type:"button",...t,key:t.key}):e==="img"?w.createElement("img",{alt:"",...t,key:t.key}):w.createElement(e,t)}const kx=w.createContext(null),Ox=()=>w.useContext(kx),B4=tu("portal");function z4(e={}){const{ref:t,container:n,componentProps:r=Ot,elementProps:s,elementState:o}=e,i=rc(),c=Ox()?.portalNode,[l,u]=w.useState(null),[f,h]=w.useState(null),d=w.useRef(null);fe(()=>{if(n===null){d.current&&(d.current=null,h(null),u(null));return}if(i==null)return;const y=(n&&(Zm(n)?n:n.current))??c??document.body;if(y==null){d.current&&(d.current=null,h(null),u(null));return}d.current!==y&&(d.current=y,h(null),u(y))},[n,c,i]);const p=wt("div",r,{ref:[t,h],state:o,props:[{id:i,[B4]:""},s]});return{portalNode:f,portalSubtree:l&&p?ws.createPortal(p,l):null}}const Cx=w.forwardRef(function(t,n){const{children:r,container:s,className:o,render:i,renderGuards:a,...c}=t,{portalNode:l,portalSubtree:u}=z4({container:s,ref:n,componentProps:t,elementProps:c}),f=w.useRef(null),h=w.useRef(null),d=w.useRef(null),p=w.useRef(null),[m,y]=w.useState(null),g=m?.modal,b=m?.open,v=typeof a=="boolean"?a:!!m&&!m.modal&&m.open&&!!l;w.useEffect(()=>{if(!l||g)return;function _(k){l&&ea(k)&&(k.type==="focusin"?Rb:a4)(l)}return l.addEventListener("focusin",_,!0),l.addEventListener("focusout",_,!0),()=>{l.removeEventListener("focusin",_,!0),l.removeEventListener("focusout",_,!0)}},[l,g]),w.useEffect(()=>{!l||b||Rb(l)},[b,l]);const S=w.useMemo(()=>({beforeOutsideRef:f,afterOutsideRef:h,beforeInsideRef:d,afterInsideRef:p,portalNode:l,setFocusManagerState:y}),[l]);return E.jsxs(w.Fragment,{children:[u,E.jsxs(kx.Provider,{value:S,children:[v&&l&&E.jsx(nu,{"data-type":"outside",ref:f,onFocus:_=>{if(ea(_,l))d.current?.focus();else{const k=m?m.domReference:null;vx(k)?.focus()}}}),v&&l&&E.jsx("span",{"aria-owns":l.id,style:g4}),l&&ws.createPortal(r,l),v&&l&&E.jsx(nu,{"data-type":"outside",ref:h,onFocus:_=>{if(ea(_,l))p.current?.focus();else{const k=m?m.domReference:null;bx(k)?.focus(),m?.closeOnFocusOut&&m?.onOpenChange(!1,Ue(_f,_.nativeEvent))}}})]})]})});function ns(e){return e==null?e:"current"in e?e.current:e}function U4(e,t){const n=vt(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Mb=20;let jr=[];function og(){jr=jr.filter(e=>e.isConnected)}function W4(e){og(),e&&Xr(e)!=="body"&&(jr.push(e),jr.length>Mb&&(jr=jr.slice(-Mb)))}function pd(){return og(),jr[jr.length-1]}function q4(e){if(!e)return null;const t=nc();return gx(e,t)?e:bf(e,t)[0]||e}function K4(e){return!e||!e.isConnected?!1:typeof e.checkVisibility=="function"?e.checkVisibility():cn(e).display!=="none"}function Ab(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=nc(),s=i4(e,n).filter(i=>{const a=i.getAttribute("data-tabindex")||"";return gx(i,n)||i.hasAttribute("data-tabindex")&&!a.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function Ix(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],initialFocus:o=!0,returnFocus:i=!0,restoreFocus:a=!1,modal:c=!0,closeOnFocusOut:l=!0,openInteractionType:u="",getInsideElements:f=()=>[],nextFocusableElement:h,previousFocusableElement:d,beforeContentFocusGuardRef:p,externalTree:m}=e,y="rootStore"in t?t.rootStore:t,g=y.useState("open"),b=y.useState("domReferenceElement"),v=y.useState("floatingElement"),{events:S,dataRef:_}=y.context,k=ye(()=>_.current.floatingContext?.nodeId),I=ye(f),x=o===!1,R=Ah(b)&&x,T=kt(s),M=kt(o),B=kt(i),U=kt(u),V=wf(m),$=Ox(),O=w.useRef(null),N=w.useRef(null),C=w.useRef(!1),L=w.useRef(!1),W=w.useRef(!1),q=w.useRef(-1),te=w.useRef(""),K=w.useRef(""),ne=nn(),A=nn(),j=yf(),F=$!=null,G=va(v),H=ye((Y=G)=>Y?bf(Y,nc()):[]),Z=ye(Y=>{const se=H(Y);return T.current.map(()=>se).filter(Boolean).flat()});w.useEffect(()=>{if(r||!c)return;function Y(we){we.key==="Tab"&&Ge(G,Fr(Nt(G)))&&H().length===0&&!R&&At(we)}const se=Nt(G);return se.addEventListener("keydown",Y),()=>{se.removeEventListener("keydown",Y)}},[r,b,G,c,T,R,H,Z]),w.useEffect(()=>{if(r||!v)return;function Y(se){const we=bn(se),pe=H().indexOf(we);pe!==-1&&(q.current=pe)}return v.addEventListener("focusin",Y),()=>{v.removeEventListener("focusin",Y)}},[r,v,H]),w.useEffect(()=>{if(r||!g)return;const Y=Nt(G);function se(){W.current=!1}function we(pe){const J=bn(pe),ae=Ge(v,J)||Ge(b,J)||Ge($?.portalNode,J);W.current=!ae,K.current=pe.pointerType||"keyboard"}function le(){K.current="keyboard"}return Y.addEventListener("pointerdown",we,!0),Y.addEventListener("pointerup",se,!0),Y.addEventListener("pointercancel",se,!0),Y.addEventListener("keydown",le,!0),()=>{Y.removeEventListener("pointerdown",we,!0),Y.removeEventListener("pointerup",se,!0),Y.removeEventListener("pointercancel",se,!0),Y.removeEventListener("keydown",le,!0)}},[r,v,b,G,g,$]),w.useEffect(()=>{if(r||!l)return;function Y(){L.current=!0,A.start(0,()=>{L.current=!1})}function se(J){const ae=J.relatedTarget,Q=J.currentTarget,ue=bn(J);queueMicrotask(()=>{const re=k(),Pe=y.context.triggerElements,De=!(Ge(b,ae)||Ge(v,ae)||Ge(ae,v)||Ge($?.portalNode,ae)||ae!=null&&Pe.hasElement(ae)||Pe.hasMatchingElement(Ae=>Ge(Ae,ae))||ae?.hasAttribute(tu("focus-guard"))||V&&(yo(V.nodesRef.current,re).find(Ae=>Ge(Ae.context?.elements.floating,ae)||Ge(Ae.context?.elements.domReference,ae))||vb(V.nodesRef.current,re).find(Ae=>[Ae.context?.elements.floating,va(Ae.context?.elements.floating)].includes(ae)||Ae.context?.elements.domReference===ae)));if(Q===b&&G&&Ab(G,T),a&&Q!==b&&!K4(ue)&&Fr(Nt(G))===Nt(G).body){if(at(G)&&(G.focus(),a==="popup")){j.request(()=>{G.focus()});return}const Ae=q.current,Je=H(),He=Je[Ae]||Je[Je.length-1]||G;at(He)&&He.focus()}if(_.current.insideReactTree){_.current.insideReactTree=!1;return}(R||!c)&&ae&&De&&!L.current&&(R||ae!==pd())&&(C.current=!0,y.setOpen(!1,Ue(_f,J)))})}function we(){W.current||(_.current.insideReactTree=!0,ne.start(0,()=>{_.current.insideReactTree=!1}))}const le=at(b)?b:null,pe=[];if(!(!v&&!le))return le&&(le.addEventListener("focusout",se),le.addEventListener("pointerdown",Y),pe.push(()=>{le.removeEventListener("focusout",se),le.removeEventListener("pointerdown",Y)})),v&&(v.addEventListener("focusout",se),$&&(v.addEventListener("focusout",we,!0),pe.push(()=>{v.removeEventListener("focusout",we,!0)})),pe.push(()=>{v.removeEventListener("focusout",se)})),()=>{pe.forEach(J=>{J()})}},[r,b,v,G,c,V,$,y,l,a,H,R,k,T,_,ne,A,j]);const D=w.useRef(null),X=w.useRef(null),ee=Is(D,p,$?.beforeInsideRef),Ie=Is(X,$?.afterInsideRef);w.useEffect(()=>{if(r||!v||!g)return;const Y=Array.from($?.portalNode?.querySelectorAll(`[${tu("portal")}]`)||[]),we=(V?vb(V.nodesRef.current,k()):[]).find(J=>Ah(J.context?.elements.domReference||null))?.context?.elements.domReference,le=[v,we,...Y,...I(),O.current,N.current,D.current,X.current,$?.beforeOutsideRef.current,$?.afterOutsideRef.current,ns(d),ns(h),R?b:null].filter(J=>J!=null),pe=C4(le,c||R);return()=>{pe()}},[g,r,b,v,c,T,$,R,V,k,I,h,d]),fe(()=>{if(!g||r||!at(G))return;const Y=Nt(G),se=Fr(Y);queueMicrotask(()=>{const we=Z(G),le=M.current,pe=typeof le=="function"?le(U.current||""):le;if(pe===void 0||pe===!1)return;let J;pe===!0||pe===null?J=we[0]||G:J=ns(pe),J=J||we[0]||G,!Ge(G,se)&&al(J,{preventScroll:J===G})})},[r,g,G,x,Z,M,U]),fe(()=>{if(r||!G)return;const Y=Nt(G),se=Fr(Y);W4(se);function we(J){if(J.open||(te.current=U4(J.nativeEvent,K.current)),J.reason===y4&&J.nativeEvent.type==="mouseleave"&&(C.current=!0),J.reason===wx)if(J.nested)C.current=!1;else if(ix(J.nativeEvent)||ax(J.nativeEvent))C.current=!1;else{let ae=!1;document.createElement("div").focus({get preventScroll(){return ae=!0,!1}}),ae?C.current=!1:C.current=!0}}S.on("openchange",we);const le=Y.createElement("span");le.setAttribute("tabindex","-1"),le.setAttribute("aria-hidden","true"),Object.assign(le.style,xf),F&&b&&b.insertAdjacentElement("afterend",le);function pe(){const J=B.current;let ae=typeof J=="function"?J(te.current):J;if(ae===void 0||ae===!1)return null;if(ae===null&&(ae=!0),typeof ae=="boolean"){const ue=b||pd();return ue&&ue.isConnected?ue:le}const Q=b||pd()||le;return ns(ae)||Q}return()=>{S.off("openchange",we);const J=Fr(Y),ae=Ge(v,J)||V&&yo(V.nodesRef.current,k(),!1).some(ue=>Ge(ue.context?.elements.floating,J)),Q=pe();queueMicrotask(()=>{const ue=q4(Q),re=typeof B.current!="boolean";B.current&&!C.current&&at(ue)&&(!(!re&&ue!==J&&J!==Y.body)||ae)&&ue.focus({preventScroll:!0}),le.remove()})}},[r,v,G,B,_,S,V,F,b,k]),w.useEffect(()=>{queueMicrotask(()=>{C.current=!1})},[r]),w.useEffect(()=>{if(r||!g)return;function Y(we){bn(we)?.closest(`[${p4}]`)&&(L.current=!0)}const se=Nt(G);return se.addEventListener("pointerdown",Y,!0),()=>{se.removeEventListener("pointerdown",Y,!0)}},[r,g,G]),fe(()=>{if(!r&&$)return $.setFocusManagerState({modal:c,closeOnFocusOut:l,open:g,onOpenChange:y.setOpen,domReference:b}),()=>{$.setFocusManagerState(null)}},[r,$,c,g,y,l,b]),fe(()=>{if(!(r||!G))return Ab(G,T),()=>{queueMicrotask(og)}},[r,G,T]);const ce=!r&&(c?!R:!0)&&(F||c);return E.jsxs(w.Fragment,{children:[ce&&E.jsx(nu,{"data-type":"inside",ref:ee,onFocus:Y=>{if(c){const se=Z();al(se[se.length-1])}else $?.portalNode&&(C.current=!1,ea(Y,$.portalNode)?bx(b)?.focus():ns(d??$.beforeOutsideRef)?.focus())}}),n,ce&&E.jsx(nu,{"data-type":"inside",ref:Ie,onFocus:Y=>{c?al(Z()[0]):$?.portalNode&&(l&&(C.current=!0),ea(Y,$.portalNode)?vx(b)?.focus():ns(h??$.afterOutsideRef)?.focus())}})]})}function H4(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,{enabled:s=!0,event:o="click",toggle:i=!0,ignoreMouse:a=!1,stickIfOpen:c=!0,touchOpenDelay:l=0}=t,u=w.useRef(void 0),f=yf(),h=nn(),d=w.useMemo(()=>({onPointerDown(p){u.current=p.pointerType},onMouseDown(p){const m=u.current,y=p.nativeEvent,g=n.select("open");if(p.button!==0||o==="click"||wb(m)&&a)return;const b=r.current.openEvent,v=b?.type,S=n.select("domReferenceElement")!==p.currentTarget,_=g&&S||!(g&&i&&(!(b&&c)||v==="click"||v==="mousedown"));if(ox(y.target)){const I=Ue(ta,y,y.target);_&&m==="touch"&&l>0?h.start(l,()=>{n.setOpen(!0,I)}):n.setOpen(_,I);return}const k=p.currentTarget;f.request(()=>{const I=Ue(ta,y,k);_&&m==="touch"&&l>0?h.start(l,()=>{n.setOpen(!0,I)}):n.setOpen(_,I)})},onClick(p){if(o==="mousedown-only")return;const m=u.current;if(o==="mousedown"&&m){u.current=void 0;return}if(wb(m)&&a)return;const y=n.select("open"),g=r.current.openEvent,b=n.select("domReferenceElement")!==p.currentTarget,v=y&&b||!(y&&i&&(!(g&&c)||cx(g))),S=Ue(ta,p.nativeEvent,p.currentTarget);v&&m==="touch"&&l>0?h.start(l,()=>{n.setOpen(!0,S)}):n.setOpen(v,S)},onKeyDown(){u.current=void 0}}),[r,o,a,n,c,i,f,h,l]);return w.useMemo(()=>s?{reference:d}:Ot,[s,d])}function Pb(e,t,n){let{reference:r,floating:s}=e;const o=wn(t),i=rg(t),a=ng(i),c=sn(t),l=o==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let d;switch(c){case"top":d={x:u,y:r.y-s.height};break;case"bottom":d={x:u,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-s.width,y:f};break;default:d={x:r.x,y:r.y}}switch(Zr(t)){case"start":d[i]-=h*(n&&l?-1:1);break;case"end":d[i]+=h*(n&&l?-1:1);break}return d}const G4=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=Pb(l,r,c),h=r,d={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:g}=a[m],{x:b,y:v,data:S,reset:_}=await g({x:u,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:d,rects:l,platform:i,elements:{reference:e,floating:t}});u=b??u,f=v??f,d={...d,[y]:{...d[y],...S}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(l=_.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:u,y:f}=Pb(l,h,c)),m=-1)}return{x:u,y:f,placement:h,strategy:s,middlewareData:d}};async function wa(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=kr(t,e),p=lx(d),y=a[h?f==="floating"?"reference":"floating":f],g=Yl(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),b=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},_=Yl(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:v,strategy:c}):b);return{top:(g.top-_.top+p.top)/S.y,bottom:(_.bottom-g.bottom+p.bottom)/S.y,left:(g.left-_.left+p.left)/S.x,right:(_.right-g.right+p.right)/S.x}}const J4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=kr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=sn(s),b=wn(a),v=sn(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),_=h||(v||!m?[Jl(a)]:NV(a)),k=p!=="none";!h&&k&&_.push(...VV(a,m,p,S));const I=[a,..._],x=await wa(t,y),R=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&R.push(x[g]),f){const V=FV(s,i,S);R.push(x[V[0]],x[V[1]])}if(T=[...T,{placement:s,overflows:R}],!R.every(V=>V<=0)){var M,B;const V=(((M=o.flip)==null?void 0:M.index)||0)+1,$=I[V];if($&&(!(f==="alignment"?b!==wn($):!1)||T.every(C=>wn(C.placement)===b?C.overflows[0]>0:!0)))return{data:{index:V,overflows:T},reset:{placement:$}};let O=(B=T.filter(N=>N.overflows[0]<=0).sort((N,C)=>N.overflows[1]-C.overflows[1])[0])==null?void 0:B.placement;if(!O)switch(d){case"bestFit":{var U;const N=(U=T.filter(C=>{if(k){const L=wn(C.placement);return L===b||L==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(L=>L>0).reduce((L,W)=>L+W,0)]).sort((C,L)=>C[1]-L[1])[0])==null?void 0:U[0];N&&(O=N);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function $b(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Fb(e){return MV.some(t=>e[t]>=0)}const Y4=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=kr(e,t);switch(r){case"referenceHidden":{const o=await wa(t,{...s,elementContext:"reference"}),i=$b(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Fb(i)}}}case"escaped":{const o=await wa(t,{...s,altBoundary:!0}),i=$b(o,n.floating);return{data:{escapedOffsets:i,escaped:Fb(i)}}}default:return{}}}}},Tx=new Set(["left","top"]);async function X4(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=sn(n),a=Zr(n),c=wn(n)==="y",l=Tx.has(i)?-1:1,u=o&&c?-1:1,f=kr(t,e);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),c?{x:d*u,y:h*l}:{x:h*l,y:d*u}}const Z4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,c=await X4(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},Q4=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:y=>{let{x:g,y:b}=y;return{x:g,y:b}}},...c}=kr(e,t),l={x:n,y:r},u=await wa(t,c),f=wn(sn(s)),h=tg(f);let d=l[h],p=l[f];if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=d+u[y],v=d-u[g];d=Ph(b,d,v)}if(i){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",b=p+u[y],v=p-u[g];p=Ph(b,p,v)}const m=a.fn({...t,[h]:d,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[f]:i}}}}}},e5=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=kr(e,t),u={x:n,y:r},f=wn(s),h=tg(f);let d=u[h],p=u[f];const m=kr(a,t),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const v=h==="y"?"height":"width",S=o.reference[h]-o.floating[v]+y.mainAxis,_=o.reference[h]+o.reference[v]-y.mainAxis;d<S?d=S:d>_&&(d=_)}if(l){var g,b;const v=h==="y"?"width":"height",S=Tx.has(sn(s)),_=o.reference[f]-o.floating[v]+(S&&((g=i.offset)==null?void 0:g[f])||0)+(S?0:y.crossAxis),k=o.reference[f]+o.reference[v]+(S?0:((b=i.offset)==null?void 0:b[f])||0)-(S?y.crossAxis:0);p<_?p=_:p>k&&(p=k)}return{[h]:d,[f]:p}}}},t5=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:c=()=>{},...l}=kr(e,t),u=await wa(t,l),f=sn(s),h=Zr(s),d=wn(s)==="y",{width:p,height:m}=o.floating;let y,g;f==="top"||f==="bottom"?(y=f,g=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,y=h==="end"?"top":"bottom");const b=m-u.top-u.bottom,v=p-u.left-u.right,S=Uo(m-u[y],b),_=Uo(p-u[g],v),k=!t.middlewareData.shift;let I=S,x=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(x=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=b),k&&!h){const T=tn(u.left,0),M=tn(u.right,0),B=tn(u.top,0),U=tn(u.bottom,0);d?x=p-2*(T!==0||M!==0?T+M:tn(u.left,u.right)):I=m-2*(B!==0||U!==0?B+U:tn(u.top,u.bottom))}await c({...t,availableWidth:x,availableHeight:I});const R=await i.getDimensions(a.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function Mx(e){const t=cn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=at(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=Gl(n)!==o||Gl(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function ig(e){return Ke(e)?e:e.contextElement}function vo(e){const t=ig(e);if(!at(t))return Xn(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=Mx(t);let i=(o?Gl(n.width):n.width)/r,a=(o?Gl(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const n5=Xn(0);function Ax(e){const t=vt(e);return!mf()||!t.visualViewport?n5:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function r5(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vt(e)?!1:t}function Ts(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=ig(e);let i=Xn(1);t&&(r?Ke(r)&&(i=vo(r)):i=vo(e));const a=r5(o,n,r)?Ax(o):Xn(0);let c=(s.left+a.x)/i.x,l=(s.top+a.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const h=vt(o),d=r&&Ke(r)?vt(r):r;let p=h,m=Ch(p);for(;m&&r&&d!==p;){const y=vo(m),g=m.getBoundingClientRect(),b=cn(m),v=g.left+(m.clientLeft+parseFloat(b.paddingLeft))*y.x,S=g.top+(m.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,l*=y.y,u*=y.x,f*=y.y,c+=v,l+=S,p=vt(m),m=Ch(p)}}return Yl({width:u,height:f,x:c,y:l})}function Ef(e,t){const n=gf(e).scrollLeft;return t?t.left+n:Ts(or(e)).left+n}function Px(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Ef(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function s5(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=or(r),a=t?pf(t.floating):!1;if(r===i||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=Xn(1);const u=Xn(0),f=at(r);if((f||!f&&!o)&&((Xr(r)!=="body"||Ds(i))&&(c=gf(r)),at(r))){const d=Ts(r);l=vo(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}const h=i&&!f&&!o?Px(i,c):Xn(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function o5(e){return Array.from(e.getClientRects())}function i5(e){const t=or(e),n=gf(e),r=e.ownerDocument.body,s=tn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=tn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Ef(e);const a=-n.scrollTop;return cn(r).direction==="rtl"&&(i+=tn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const Nb=25;function a5(e,t){const n=vt(e),r=or(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,c=0;if(s){o=s.width,i=s.height;const u=mf();(!u||u&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}const l=Ef(r);if(l<=0){const u=r.ownerDocument,f=u.body,h=getComputedStyle(f),d=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,p=Math.abs(r.clientWidth-f.clientWidth-d);p<=Nb&&(o-=p)}else l<=Nb&&(o+=l);return{width:o,height:i,x:a,y:c}}const c5=new Set(["absolute","fixed"]);function l5(e,t){const n=Ts(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=at(e)?vo(e):Xn(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,c=s*o.x,l=r*o.y;return{width:i,height:a,x:c,y:l}}function Lb(e,t,n){let r;if(t==="viewport")r=a5(e,n);else if(t==="document")r=i5(or(e));else if(Ke(t))r=l5(t,n);else{const s=Ax(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Yl(r)}function $x(e,t){const n=Rr(e);return n===t||!Ke(n)||vr(n)?!1:cn(n).position==="fixed"||$x(n,t)}function u5(e,t){const n=t.get(e);if(n)return n;let r=Vr(e,[],!1).filter(a=>Ke(a)&&Xr(a)!=="body"),s=null;const o=cn(e).position==="fixed";let i=o?Rr(e):e;for(;Ke(i)&&!vr(i);){const a=cn(i),c=Qm(i);!c&&a.position==="fixed"&&(s=null),(o?!c&&!s:!c&&a.position==="static"&&!!s&&c5.has(s.position)||Ds(i)&&!c&&$x(e,i))?r=r.filter(u=>u!==i):s=a,i=Rr(i)}return t.set(e,r),r}function f5(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?pf(t)?[]:u5(t,this._c):[].concat(n),r],a=i[0],c=i.reduce((l,u)=>{const f=Lb(t,u,s);return l.top=tn(f.top,l.top),l.right=Uo(f.right,l.right),l.bottom=Uo(f.bottom,l.bottom),l.left=tn(f.left,l.left),l},Lb(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function d5(e){const{width:t,height:n}=Mx(e);return{width:t,height:n}}function h5(e,t,n){const r=at(t),s=or(t),o=n==="fixed",i=Ts(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=Xn(0);function l(){c.x=Ef(s)}if(r||!r&&!o)if((Xr(t)!=="body"||Ds(s))&&(a=gf(t)),r){const d=Ts(t,!0,o,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else s&&l();o&&!r&&s&&l();const u=s&&!r&&!o?Px(s,a):Xn(0),f=i.left+a.scrollLeft-c.x-u.x,h=i.top+a.scrollTop-c.y-u.y;return{x:f,y:h,width:i.width,height:i.height}}function md(e){return cn(e).position==="static"}function jb(e,t){if(!at(e)||cn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return or(e)===n&&(n=n.ownerDocument.body),n}function Fx(e,t){const n=vt(e);if(pf(e))return n;if(!at(e)){let s=Rr(e);for(;s&&!vr(s);){if(Ke(s)&&!md(s))return s;s=Rr(s)}return n}let r=jb(e,t);for(;r&&iV(r)&&md(r);)r=jb(r,t);return r&&vr(r)&&md(r)&&!Qm(r)?n:r||fV(e)||n}const p5=async function(e){const t=this.getOffsetParent||Fx,n=this.getDimensions,r=await n(e.floating);return{reference:h5(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function m5(e){return cn(e).direction==="rtl"}const g5={convertOffsetParentRelativeRectToViewportRelativeRect:s5,getDocumentElement:or,getClippingRect:f5,getOffsetParent:Fx,getElementRects:p5,getClientRects:o5,getDimensions:d5,getScale:vo,isElement:Ke,isRTL:m5};function Nx(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function y5(e,t){let n=null,r;const s=or(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const l=e.getBoundingClientRect(),{left:u,top:f,width:h,height:d}=l;if(a||t(),!h||!d)return;const p=io(f),m=io(s.clientWidth-(u+h)),y=io(s.clientHeight-(f+d)),g=io(u),v={rootMargin:-p+"px "+-m+"px "+-y+"px "+-g+"px",threshold:tn(0,Uo(1,c))||1};let S=!0;function _(k){const I=k[0].intersectionRatio;if(I!==c){if(!S)return i();I?i(!1,I):r=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!Nx(l,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(_,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,v)}n.observe(e)}return i(!0),o}function Db(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=ig(e),u=s||o?[...l?Vr(l):[],...Vr(t)]:[];u.forEach(g=>{s&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const f=l&&a?y5(l,n):null;let h=-1,d=null;i&&(d=new ResizeObserver(g=>{let[b]=g;b&&b.target===l&&d&&(d.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=d)==null||v.observe(t)})),n()}),l&&!c&&d.observe(l),d.observe(t));let p,m=c?Ts(e):null;c&&y();function y(){const g=Ts(e);m&&!Nx(m,g)&&n(),m=g,p=requestAnimationFrame(y)}return n(),()=>{var g;u.forEach(b=>{s&&b.removeEventListener("scroll",n),o&&b.removeEventListener("resize",n)}),f?.(),(g=d)==null||g.disconnect(),d=null,c&&cancelAnimationFrame(p)}}const b5=Z4,v5=Q4,w5=J4,S5=t5,_5=Y4,x5=e5,E5=(e,t,n)=>{const r=new Map,s={platform:g5,...n},o={...s.platform,_c:r};return G4(e,t,{...s,platform:o})};var R5=typeof document<"u",k5=function(){},cl=R5?w.useLayoutEffect:k5;function ru(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ru(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!ru(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Lx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Vb(e,t){const n=Lx(e);return Math.round(t*n)/n}function gd(e){const t=w.useRef(e);return cl(()=>{t.current=e}),t}function O5(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,f]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,d]=w.useState(r);ru(h,r)||d(r);const[p,m]=w.useState(null),[y,g]=w.useState(null),b=w.useCallback(C=>{C!==k.current&&(k.current=C,m(C))},[]),v=w.useCallback(C=>{C!==I.current&&(I.current=C,g(C))},[]),S=o||p,_=i||y,k=w.useRef(null),I=w.useRef(null),x=w.useRef(u),R=c!=null,T=gd(c),M=gd(s),B=gd(l),U=w.useCallback(()=>{if(!k.current||!I.current)return;const C={placement:t,strategy:n,middleware:h};M.current&&(C.platform=M.current),E5(k.current,I.current,C).then(L=>{const W={...L,isPositioned:B.current!==!1};V.current&&!ru(x.current,W)&&(x.current=W,ws.flushSync(()=>{f(W)}))})},[h,t,n,M,B]);cl(()=>{l===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,f(C=>({...C,isPositioned:!1})))},[l]);const V=w.useRef(!1);cl(()=>(V.current=!0,()=>{V.current=!1}),[]),cl(()=>{if(S&&(k.current=S),_&&(I.current=_),S&&_){if(T.current)return T.current(S,_,U);U()}},[S,_,U,T,R]);const $=w.useMemo(()=>({reference:k,floating:I,setReference:b,setFloating:v}),[b,v]),O=w.useMemo(()=>({reference:S,floating:_}),[S,_]),N=w.useMemo(()=>{const C={position:n,left:0,top:0};if(!O.floating)return C;const L=Vb(O.floating,u.x),W=Vb(O.floating,u.y);return a?{...C,transform:"translate("+L+"px, "+W+"px)",...Lx(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:W}},[n,a,O.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:U,refs:$,elements:O,floatingStyles:N}),[u,U,$,O,N])}const C5=(e,t)=>({...b5(e),options:[e,t]}),I5=(e,t)=>({...v5(e),options:[e,t]}),T5=(e,t)=>({...x5(e),options:[e,t]}),M5=(e,t)=>({...w5(e),options:[e,t]}),A5=(e,t)=>({...S5(e),options:[e,t]}),P5=(e,t)=>({..._5(e),options:[e,t]}),$5={intentional:"onClick",sloppy:"onPointerDown"};function F5(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function jx(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("referenceElement"),i=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:c}=n.context,{enabled:l=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:h="sloppy",referencePress:d=!1,referencePressEvent:p="sloppy",ancestorScroll:m=!1,bubbles:y,externalTree:g}=t,b=wf(g),v=ye(typeof f=="function"?f:()=>!1),S=typeof f=="function"?v:f,_=w.useRef(!1),{escapeKey:k,outsidePress:I}=F5(y),x=w.useRef(null),R=nn(),T=nn(),M=ye(()=>{T.clear(),c.current.insideReactTree=!1}),B=w.useRef(!1),U=w.useRef(""),V=ye(D=>{U.current=D.pointerType}),$=ye(()=>{const D=U.current,X=D==="pen"||!D?"mouse":D,ee=typeof h=="function"?h():h;return typeof ee=="string"?ee:ee[X]}),O=ye(D=>{if(!r||!l||!u||D.key!=="Escape"||B.current)return;const X=c.current.floatingContext?.nodeId,ee=b?yo(b.nodesRef.current,X):[];if(!k&&ee.length>0){let Y=!0;if(ee.forEach(se=>{se.context?.open&&!se.context.dataRef.current.__escapeKeyBubbles&&(Y=!1)}),!Y)return}const Ie=TV(D)?D.nativeEvent:D,ce=Ue(v4,Ie);n.setOpen(!1,ce),!k&&!ce.isPropagationAllowed&&D.stopPropagation()}),N=ye(D=>{const X=$();return X==="intentional"&&D.type!=="click"||X==="sloppy"&&D.type==="click"}),C=ye(()=>{c.current.insideReactTree=!0,T.start(0,M)}),L=ye((D,X=!1)=>{if(N(D)){M();return}if(c.current.insideReactTree){M();return}if($()==="intentional"&&X||typeof S=="function"&&!S(D))return;const ee=bn(D),Ie=`[${tu("inert")}]`,ce=Nt(n.select("floatingElement")).querySelectorAll(Ie),Y=n.context.triggerElements;if(ee&&(Y.hasElement(ee)||Y.hasMatchingElement(J=>Ge(J,ee))))return;let se=Ke(ee)?ee:null;for(;se&&!vr(se);){const J=Rr(se);if(vr(J)||!Ke(J))break;se=J}if(ce.length&&Ke(ee)&&!IV(ee)&&!Ge(ee,n.select("floatingElement"))&&Array.from(ce).every(J=>!Ge(se,J)))return;if(at(ee)&&!("touches"in D)){const J=vr(ee),ae=cn(ee),Q=/auto|scroll/,ue=J||Q.test(ae.overflowX),re=J||Q.test(ae.overflowY),Pe=ue&&ee.clientWidth>0&&ee.scrollWidth>ee.clientWidth,De=re&&ee.clientHeight>0&&ee.scrollHeight>ee.clientHeight,Ae=ae.direction==="rtl",Je=De&&(Ae?D.offsetX<=ee.offsetWidth-ee.clientWidth:D.offsetX>ee.clientWidth),He=Pe&&D.offsetY>ee.clientHeight;if(Je||He)return}const we=c.current.floatingContext?.nodeId,le=b&&yo(b.nodesRef.current,we).some(J=>kn(D,J.context?.elements.floating));if(kn(D,n.select("floatingElement"))||kn(D,n.select("domReferenceElement"))||le)return;const pe=b?yo(b.nodesRef.current,we):[];if(pe.length>0){let J=!0;if(pe.forEach(ae=>{ae.context?.open&&!ae.context.dataRef.current.__outsidePressBubbles&&(J=!1)}),!J)return}n.setOpen(!1,Ue(wx,D)),M()}),W=ye(D=>{$()!=="sloppy"||D.pointerType==="touch"||!n.select("open")||!l||kn(D,n.select("floatingElement"))||kn(D,n.select("domReferenceElement"))||L(D)}),q=ye(D=>{if($()!=="sloppy"||!n.select("open")||!l||kn(D,n.select("floatingElement"))||kn(D,n.select("domReferenceElement")))return;const X=D.touches[0];X&&(x.current={startTime:Date.now(),startX:X.clientX,startY:X.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},R.start(1e3,()=>{x.current&&(x.current.dismissOnTouchEnd=!1,x.current.dismissOnMouseDown=!1)}))}),te=ye(D=>{const X=bn(D);function ee(){q(D),X?.removeEventListener(D.type,ee)}X?.addEventListener(D.type,ee)}),K=ye(D=>{const X=_.current;if(_.current=!1,R.clear(),D.type==="mousedown"&&x.current&&!x.current.dismissOnMouseDown)return;const ee=bn(D);function Ie(){D.type==="pointerdown"?W(D):L(D,X),ee?.removeEventListener(D.type,Ie)}ee?.addEventListener(D.type,Ie)}),ne=ye(D=>{if($()!=="sloppy"||!x.current||kn(D,n.select("floatingElement"))||kn(D,n.select("domReferenceElement")))return;const X=D.touches[0];if(!X)return;const ee=Math.abs(X.clientX-x.current.startX),Ie=Math.abs(X.clientY-x.current.startY),ce=Math.sqrt(ee*ee+Ie*Ie);ce>5&&(x.current.dismissOnTouchEnd=!0),ce>10&&(L(D),R.clear(),x.current=null)}),A=ye(D=>{const X=bn(D);function ee(){ne(D),X?.removeEventListener(D.type,ee)}X?.addEventListener(D.type,ee)}),j=ye(D=>{$()!=="sloppy"||!x.current||kn(D,n.select("floatingElement"))||kn(D,n.select("domReferenceElement"))||(x.current.dismissOnTouchEnd&&L(D),R.clear(),x.current=null)}),F=ye(D=>{const X=bn(D);function ee(){j(D),X?.removeEventListener(D.type,ee)}X?.addEventListener(D.type,ee)});w.useEffect(()=>{if(!r||!l)return;c.current.__escapeKeyBubbles=k,c.current.__outsidePressBubbles=I;const D=new zo;function X(se){n.setOpen(!1,Ue(Sf,se))}function ee(){D.clear(),B.current=!0}function Ie(){D.start(mf()?5:0,()=>{B.current=!1})}const ce=Nt(s);ce.addEventListener("pointerdown",V,!0),u&&(ce.addEventListener("keydown",O),ce.addEventListener("compositionstart",ee),ce.addEventListener("compositionend",Ie)),S&&(ce.addEventListener("click",K,!0),ce.addEventListener("pointerdown",K,!0),ce.addEventListener("touchstart",te,!0),ce.addEventListener("touchmove",A,!0),ce.addEventListener("touchend",F,!0),ce.addEventListener("mousedown",K,!0));let Y=[];return m&&(Ke(i)&&(Y=Vr(i)),Ke(s)&&(Y=Y.concat(Vr(s))),!Ke(o)&&o&&o.contextElement&&(Y=Y.concat(Vr(o.contextElement)))),Y=Y.filter(se=>se!==ce.defaultView?.visualViewport),Y.forEach(se=>{se.addEventListener("scroll",X,{passive:!0})}),()=>{ce.removeEventListener("pointerdown",V,!0),u&&(ce.removeEventListener("keydown",O),ce.removeEventListener("compositionstart",ee),ce.removeEventListener("compositionend",Ie)),S&&(ce.removeEventListener("click",K,!0),ce.removeEventListener("pointerdown",K,!0),ce.removeEventListener("touchstart",te,!0),ce.removeEventListener("touchmove",A,!0),ce.removeEventListener("touchend",F,!0),ce.removeEventListener("mousedown",K,!0)),Y.forEach(se=>{se.removeEventListener("scroll",X)}),D.clear()}},[c,s,o,i,u,S,r,a,m,l,k,I,O,L,K,W,te,A,F,V,n]),w.useEffect(M,[S,M]);const G=w.useMemo(()=>({onKeyDown:O,...d&&{[$5[p]]:D=>{n.setOpen(!1,Ue(ta,D.nativeEvent))},...p!=="intentional"&&{onClick(D){n.setOpen(!1,Ue(ta,D.nativeEvent))}}}}),[O,n,d,p]),H=ye(D=>{const X=bn(D.nativeEvent);!Ge(n.select("floatingElement"),X)||D.button!==0||(_.current=!0)}),Z=w.useMemo(()=>({onKeyDown:O,onPointerDown:H,onMouseDown:H,onMouseUp:H,onClickCapture:C,onMouseDownCapture:C,onPointerDownCapture:C,onMouseUpCapture:C,onTouchEndCapture:C,onTouchMoveCapture:C}),[O,H,C]);return w.useMemo(()=>l?{reference:G,floating:Z,trigger:G}:{},[l,G,Z])}var su=Symbol("NOT_FOUND");function N5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function L5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function j5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Bb=e=>Array.isArray(e)?e:[e];function D5(e){const t=Array.isArray(e[0])?e[0]:e;return j5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function V5(e,t){const n=[],{length:r}=e;for(let s=0;s<r;s++)n.push(e[s].apply(null,t));return n}function B5(e){let t;return{get(n){return t&&e(t.key,n)?t.value:su},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function z5(e,t){let n=[];function r(a){const c=n.findIndex(l=>t(a,l.key));if(c>-1){const l=n[c];return c>0&&(n.splice(c,1),n.unshift(l)),l.value}return su}function s(a,c){r(a)===su&&(n.unshift({key:a,value:c}),n.length>e&&n.pop())}function o(){return n}function i(){n=[]}return{get:r,put:s,getEntries:o,clear:i}}var U5=(e,t)=>e===t;function W5(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:s}=n;for(let o=0;o<s;o++)if(!e(n[o],r[o]))return!1;return!0}}function q5(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=U5,maxSize:s=1,resultEqualityCheck:o}=n,i=W5(r);let a=0;const c=s<=1?B5(i):z5(s,i);function l(){let u=c.get(arguments);if(u===su){if(u=e.apply(null,arguments),a++,o){const h=c.getEntries().find(d=>o(d.value,u));h&&(u=h.value,a!==0&&a--)}c.put(arguments,u)}return u}return l.clearCache=()=>{c.clear(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}var K5=class{constructor(e){this.value=e}deref(){return this.value}},H5=typeof WeakRef<"u"?WeakRef:K5,G5=0,zb=1;function Oc(){return{s:G5,v:void 0,o:null,p:null}}function Dx(e,t={}){let n=Oc();const{resultEqualityCheck:r}=t;let s,o=0;function i(){let a=n;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const d=arguments[f];if(typeof d=="function"||typeof d=="object"&&d!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const m=p.get(d);m===void 0?(a=Oc(),p.set(d,a)):a=m}else{let p=a.p;p===null&&(a.p=p=new Map);const m=p.get(d);m===void 0?(a=Oc(),p.set(d,a)):a=m}}const l=a;let u;if(a.s===zb)u=a.v;else if(u=e.apply(null,arguments),o++,r){const f=s?.deref?.()??s;f!=null&&r(f,u)&&(u=f,o!==0&&o--),s=typeof u=="object"&&u!==null||typeof u=="function"?new H5(u):u}return l.s=zb,l.v=u,u}return i.clearCache=()=>{n=Oc(),i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function Vx(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...s)=>{let o=0,i=0,a,c={},l=s.pop();typeof l=="object"&&(c=l,l=s.pop()),N5(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const u={...n,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:d=Dx,argsMemoizeOptions:p=[]}=u,m=Bb(h),y=Bb(p),g=D5(s),b=f(function(){return o++,l.apply(null,arguments)},...m),v=d(function(){i++;const _=V5(g,arguments);return a=b.apply(null,_),a},...y);return Object.assign(v,{resultFunc:l,memoizedResultFunc:b,dependencies:g,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:f,argsMemoize:d})};return Object.assign(r,{withTypes:()=>r}),r}var J5=Vx(Dx),Y5=Object.assign((e,t=J5)=>{L5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((i,a,c)=>(i[n[c]]=a,i),{}))},{withTypes:()=>Y5});Vx({memoize:q5,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const he=(e,t,n,r,s,o,...i)=>{if(i.length>0)throw new Error(xn(1));let a;if(e)a=e;else throw new Error("Missing arguments");return a};var Bx=ik();const X5=sg(19),Z5=X5?Q5:e6;function Se(e,t,n,r,s){return Z5(e,t,n,r,s)}function Q5(e,t,n,r,s){const o=w.useCallback(()=>t(e.getSnapshot(),n,r,s),[e,t,n,r,s]);return Bx.useSyncExternalStore(e.subscribe,o,o)}function e6(e,t,n,r,s){return Qv.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,o=>t(o,n,r,s))}let zx=class ll{constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){if(this.state===t)return;this.state=t,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){ll.prototype.setState.call(this,{...this.state,...t});return}}set(t,n){Object.is(this.state[t],n)||ll.prototype.setState.call(this,{...this.state,[t]:n})}notifyAll(){const t={...this.state};ll.prototype.setState.call(this,t)}};class Ux extends zx{constructor(t,n={},r){super(t),this.context=n,this.selectors=r}controlledValues=new Map;useSyncedValue(t,n){w.useDebugValue(t),fe(()=>{this.state[t]!==n&&this.set(t,n)},[t,n])}useSyncedValueWithCleanup(t,n){fe(()=>(this.state[t]!==n&&this.set(t,n),()=>{this.set(t,void 0)}),[t,n])}useSyncedValues(t){const n=Object.values(t);fe(()=>{this.update(t)},n)}useControlledProp(t,n,r){w.useDebugValue(t);const s=n!==void 0;this.controlledValues.has(t)||(this.controlledValues.set(t,s),!s&&!Object.is(this.state[t],r)&&super.setState({...this.state,[t]:r})),fe(()=>{s&&!Object.is(this.state[t],n)&&super.setState({...this.state,[t]:n})},[t,n,r,s])}set(t,n){this.controlledValues.get(t)!==!0&&super.set(t,n)}update(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.update(n)}setState(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.setState({...this.state,...n})}select=(t,n,r,s)=>{const o=this.selectors[t];return o(this.state,n,r,s)};useState=(t,n,r,s)=>{w.useDebugValue(t);const o=this.selectors[t];return Se(this,o,n,r,s)};useContextCallback(t,n){w.useDebugValue(t);const r=ye(n??Ht);this.context[t]=r}useStateSetter(t){const n=w.useRef(void 0);return n.current===void 0&&(n.current=r=>{this.set(t,r)}),n.current}observe(t,n){let r;typeof t=="function"?r=t:r=this.selectors[t];let s=r(this.state);return n(s,s,this),this.subscribe(o=>{const i=r(o);if(!Object.is(s,i)){const a=s;s=i,n(i,a,this)}})}}const t6={open:he(e=>e.open),domReferenceElement:he(e=>e.domReferenceElement),referenceElement:he(e=>e.positionReference??e.referenceElement),floatingElement:he(e=>e.floatingElement),floatingId:he(e=>e.floatingId)};class ag extends Ux{constructor(t){const{nested:n,noEmit:r,onOpenChange:s,triggerElements:o,...i}=t;super({...i,positionReference:i.referenceElement,domReferenceElement:i.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:u4(),nested:n,noEmit:r,triggerElements:o},t6)}setOpen=(t,n)=>{if((!t||!this.state.open||cx(n.event))&&(this.context.dataRef.current.openEvent=t?n.event:void 0),!this.context.noEmit){const r={open:t,reason:n.reason,nativeEvent:n.event,nested:this.context.nested,triggerElement:n.trigger};this.context.events.emit("openchange",r)}this.context.onOpenChange?.(t,n)}}function oc(e,t=!1,n=!1){const[r,s]=w.useState(e&&t?"idle":void 0),[o,i]=w.useState(e);return e&&!o&&(i(!0),s("starting")),!e&&o&&r!=="ending"&&!n&&s("ending"),!e&&!o&&r==="ending"&&s(void 0),fe(()=>{if(!e&&o&&r!=="ending"&&n){const a=Kn.request(()=>{s("ending")});return()=>{Kn.cancel(a)}}},[e,o,r,n]),fe(()=>{if(!e||t)return;const a=Kn.request(()=>{s(void 0)});return()=>{Kn.cancel(a)}},[t,e]),fe(()=>{if(!e||!t)return;e&&o&&r!=="idle"&&s("starting");const a=Kn.request(()=>{s("idle")});return()=>{Kn.cancel(a)}},[t,e,o,s,r]),w.useMemo(()=>({mounted:o,setMounted:i,transitionStatus:r}),[o,r])}function n6(e,t=!1,n=!0){const r=yf();return ye((s,o=null)=>{r.cancel();const i=ns(e);i!=null&&(typeof i.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?s():r.request(()=>{function a(){i&&Promise.all(i.getAnimations().map(c=>c.finished)).then(()=>{o!=null&&o.aborted||ws.flushSync(s)}).catch(()=>{if(n){if(o!=null&&o.aborted)return;ws.flushSync(s)}else i.getAnimations().length>0&&i.getAnimations().some(c=>c.pending||c.playState!=="finished")&&a()})}t?r.request(a):a()}))})}function Vs(e){const{enabled:t=!0,open:n,ref:r,onComplete:s}=e,o=kt(n),i=ye(s),a=n6(r,n);w.useEffect(()=>{t&&a(()=>{n===o.current&&i()})},[t,n,i,a,o])}function r6(e){const t=e.useState("open");fe(()=>{if(t&&!e.select("activeTriggerId")&&e.context.triggerElements.size===1){const n=e.context.triggerElements.entries().next();if(!n.done){const[r,s]=n.value;e.update({activeTriggerId:r,activeTriggerElement:s})}}},[t,e])}function s6(e,t,n){const{mounted:r,setMounted:s,transitionStatus:o}=oc(e);t.useSyncedValues({mounted:r,transitionStatus:o});const i=ye(()=>{s(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n?.(),t.context.onOpenChangeComplete?.(!1)}),a=t.useState("preventUnmountingOnClose");return Vs({enabled:!a,open:e,ref:t.context.popupRef,onComplete(){e||i()}}),{forceUnmount:i,transitionStatus:o}}class cg{constructor(){this.elements=new Set,this.idMap=new Map}add(t,n){const r=this.idMap.get(t);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(t,n))}delete(t){const n=this.idMap.get(t);n&&(this.elements.delete(n),this.idMap.delete(t))}hasElement(t){return this.elements.has(t)}hasMatchingElement(t){for(const n of this.elements)if(t(n))return!0;return!1}getById(t){return this.idMap.get(t)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function o6(){return new ag({open:!1,floatingElement:null,referenceElement:null,triggerElements:new cg,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function i6(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:o6(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:Ot,inactiveTriggerProps:Ot,popupProps:Ot}}const a6={open:he(e=>e.open),mounted:he(e=>e.mounted),transitionStatus:he(e=>e.transitionStatus),floatingRootContext:he(e=>e.floatingRootContext),preventUnmountingOnClose:he(e=>e.preventUnmountingOnClose),payload:he(e=>e.payload),activeTriggerId:he(e=>e.activeTriggerId),activeTriggerElement:he(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:he((e,t)=>t!==void 0&&e.activeTriggerId===t),isOpenedByTrigger:he((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.open),isMountedByTrigger:he((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.mounted),triggerProps:he((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:he(e=>e.popupProps),popupElement:he(e=>e.popupElement),positionerElement:he(e=>e.positionerElement)};function Wx(e){const{open:t=!1,onOpenChange:n,elements:r={}}=e,s=rc(),o=vf()!=null,i=an(()=>new ag({open:t,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new cg,floatingId:s,nested:o,noEmit:e.noEmit||!1})).current;return fe(()=>{const a={open:t,floatingId:s};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=Ke(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),i.update(a)},[t,s,r.reference,r.floating,i]),i.context.onOpenChange=n,i.context.nested=o,i.context.noEmit=e.noEmit||!1,i}function c6(e={}){const{nodeId:t,externalTree:n}=e,r=Wx(e),s=e.rootContext||r,o={reference:s.useState("referenceElement"),floating:s.useState("floatingElement"),domReference:s.useState("domReferenceElement")},[i,a]=w.useState(null),c=w.useRef(null),l=wf(n);fe(()=>{o.domReference&&(c.current=o.domReference)},[o.domReference]);const u=O5({...e,elements:{...o,...i&&{reference:i}}}),f=w.useCallback(I=>{const x=Ke(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),getClientRects:()=>I.getClientRects(),contextElement:I}:I;a(x),u.refs.setReference(x)},[u.refs]),[h,d]=w.useState(null),[p,m]=w.useState(null);s.useSyncedValue("referenceElement",h),s.useSyncedValue("domReferenceElement",Ke(h)?h:null),s.useSyncedValue("floatingElement",p);const y=w.useCallback(I=>{(Ke(I)||I===null)&&(c.current=I,d(I)),(Ke(u.refs.reference.current)||u.refs.reference.current===null||I!==null&&!Ke(I))&&u.refs.setReference(I)},[u.refs,d]),g=w.useCallback(I=>{m(I),u.refs.setFloating(I)},[u.refs]),b=w.useMemo(()=>({...u.refs,setReference:y,setFloating:g,setPositionReference:f,domReference:c}),[u.refs,y,g,f]),v=w.useMemo(()=>({...u.elements,domReference:o.domReference}),[u.elements,o.domReference]),S=s.useState("open"),_=s.useState("floatingId"),k=w.useMemo(()=>({...u,dataRef:s.context.dataRef,open:S,onOpenChange:s.setOpen,events:s.context.events,floatingId:_,refs:b,elements:v,nodeId:t,rootStore:s}),[u,b,v,t,s,S,_]);return fe(()=>{s.context.dataRef.current.floatingContext=k;const I=l?.nodesRef.current.find(x=>x.id===t);I&&(I.context=k)}),w.useMemo(()=>({...u,context:k,refs:b,elements:v,rootStore:s}),[u,b,v,k,s])}function l6(e){const{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:s}=e,o=rc(),i=vf()!=null,a=t.useState("open"),c=t.useState("activeTriggerElement"),l=t.useState(r?"popupElement":"positionerElement"),u=t.context.triggerElements,f=an(()=>new ag({open:a,referenceElement:c,floatingElement:l,triggerElements:u,onOpenChange:s,floatingId:o,nested:i,noEmit:n})).current;return fe(()=>{const h={open:a,floatingId:o,referenceElement:c,floatingElement:l};Ke(c)&&(h.domReferenceElement=c),f.update(h)},[a,o,c,l,f]),f.context.onOpenChange=s,f.context.nested=i,f.context.noEmit=n,f}function qx(e=[]){const t=e.map(l=>l?.reference),n=e.map(l=>l?.floating),r=e.map(l=>l?.item),s=e.map(l=>l?.trigger),o=w.useCallback(l=>Cc(l,e,"reference"),t),i=w.useCallback(l=>Cc(l,e,"floating"),n),a=w.useCallback(l=>Cc(l,e,"item"),r),c=w.useCallback(l=>Cc(l,e,"trigger"),s);return w.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a,getTriggerProps:c}),[o,i,a,c])}function Cc(e,t,n){const r=new Map,s=n==="item",o={};n==="floating"&&(o.tabIndex=-1,o[Mh]="");for(const i in e)s&&e&&(i===rx||i===sx)||(o[i]=e[i]);for(let i=0;i<t.length;i+=1){let a;const c=t[i]?.[n];typeof c=="function"?a=e?c(e):null:a=c,a&&Ub(o,a,s,r)}return Ub(o,e,s,r),o}function Ub(e,t,n,r){for(const s in t){const o=t[s];n&&(s===rx||s===sx)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof o=="function"&&(r.get(s)?.push(o),e[s]=(...i)=>r.get(s)?.map(a=>a(...i)).find(a=>a!==void 0))):e[s]=o)}}const u6="Escape";function Rf(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Ic(e,t){return Rf(t,e===eg||e===tc,e===Br||e===zr)}function yd(e,t,n){return Rf(t,e===tc,n?e===Br:e===zr)||e==="Enter"||e===" "||e===""}function f6(e,t,n){return Rf(t,n?e===Br:e===zr,e===tc)}function d6(e,t,n,r){const s=n?e===zr:e===Br,o=e===eg;return t==="both"||t==="horizontal"&&r&&r>1?e===u6:Rf(t,s,o)}function h6(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),i=n.context.dataRef,{listRef:a,activeIndex:c,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:h=!1,loopFocus:d=!1,nested:p=!1,rtl:m=!1,virtual:y=!1,focusItemOnOpen:g="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:v=!0,disabledIndices:S=void 0,orientation:_="vertical",parentOrientation:k,cols:I=1,scrollItemIntoView:x=!0,itemSizes:R,dense:T=!1,id:M,resetOnPointerLeave:B=!0,externalTree:U}=t,V=va(s),$=kt(V),O=vf(),N=wf(U);fe(()=>{i.current.orientation=_},[i,_]);const C=Ah(o),L=w.useRef(g),W=w.useRef(f??-1),q=w.useRef(null),te=w.useRef(!0),K=ye(Q=>{l(W.current===-1?null:W.current,Q)}),ne=w.useRef(K),A=w.useRef(!!s),j=w.useRef(r),F=w.useRef(!1),G=w.useRef(!1),H=kt(S),Z=kt(r),D=kt(x),X=kt(f),ee=kt(B),Ie=ye(()=>{function Q(De){y?N?.events.emit("virtualfocus",De):al(De,{sync:F.current,preventScroll:!0})}const ue=a.current[W.current],re=G.current;ue&&Q(ue),(F.current?De=>De():requestAnimationFrame)(()=>{const De=a.current[W.current]||ue;if(!De)return;ue||Q(De);const Ae=D.current;Ae&&Y&&(re||!te.current)&&De.scrollIntoView?.(typeof Ae=="boolean"?{block:"nearest",inline:"nearest"}:Ae)})});fe(()=>{u&&(r&&s?(W.current=f??-1,L.current&&f!=null&&(G.current=!0,K())):A.current&&(W.current=-1,ne.current()))},[u,r,s,f,K]),fe(()=>{if(u){if(!r){F.current=!1;return}if(s)if(c==null){if(F.current=!1,X.current!=null)return;if(A.current&&(W.current=-1,Ie()),(!j.current||!A.current)&&L.current&&(q.current!=null||L.current===!0&&q.current==null)){let Q=0;const ue=()=>{a.current[0]==null?(Q<2&&(Q?requestAnimationFrame:queueMicrotask)(ue),Q+=1):(W.current=q.current==null||yd(q.current,_,m)||p?ud(a):xb(a),q.current=null,K())};ue()}}else Zi(a,c)||(W.current=c,Ie(),G.current=!1)}},[u,r,s,c,X,p,a,_,m,K,Ie,H]),fe(()=>{if(!u||s||!N||y||!A.current)return;const Q=N.nodesRef.current,ue=Q.find(De=>De.id===O)?.context?.elements.floating,re=Fr(Nt(s)),Pe=Q.some(De=>De.context&&Ge(De.context.elements.floating,re));ue&&!Pe&&te.current&&ue.focus({preventScroll:!0})},[u,s,N,O,y]),fe(()=>{ne.current=K,j.current=r,A.current=!!s}),fe(()=>{r||(q.current=null,L.current=g)},[r,g]);const ce=c!=null,Y=w.useMemo(()=>{function Q(re){if(!Z.current)return;const Pe=a.current.indexOf(re.currentTarget);Pe!==-1&&W.current!==Pe&&(W.current=Pe,K(re))}return{onFocus(re){F.current=!0,Q(re)},onClick:({currentTarget:re})=>re.focus({preventScroll:!0}),onMouseMove(re){F.current=!0,G.current=!1,b&&Q(re)},onPointerLeave(re){if(!Z.current||!te.current||re.pointerType==="touch")return;F.current=!0;const Pe=re.relatedTarget;!b||a.current.includes(Pe)||ee.current&&(W.current=-1,K(re),y||$.current?.focus({preventScroll:!0}))}}},[Z,$,b,a,K,ee,y]),se=w.useCallback(()=>k??N?.nodesRef.current.find(Q=>Q.id===O)?.context?.dataRef?.current.orientation,[O,N,k]),we=ye(Q=>{if(te.current=!1,F.current=!0,Q.which===229||!Z.current&&Q.currentTarget===$.current)return;if(p&&d6(Q.key,_,m,I)){Ic(Q.key,se())||At(Q),n.setOpen(!1,Ue(dd,Q.nativeEvent)),at(o)&&(y?N?.events.emit("virtualfocus",o):o.focus());return}const ue=W.current,re=ud(a,S),Pe=xb(a,S);if(C||(Q.key==="Home"&&(At(Q),W.current=re,K(Q)),Q.key==="End"&&(At(Q),W.current=Pe,K(Q))),I>1){const De=R||Array.from({length:a.current.length},()=>({width:1,height:1})),Ae=UV(De,I,T),Je=Ae.findIndex(Ze=>Ze!=null&&!Qi(a,Ze,S)),He=Ae.reduce((Ze,Be,ft)=>Be!=null&&!Qi(a,Be,S)?ft:Ze,-1),ut=Ae[zV({current:Ae.map(Ze=>Ze!=null?a.current[Ze]:null)},{event:Q,orientation:_,loopFocus:d,rtl:m,cols:I,disabledIndices:qV([...(typeof S!="function"?S:null)||a.current.map((Ze,Be)=>Qi(a,Be,S)?Be:void 0),void 0],Ae),minIndex:Je,maxIndex:He,prevIndex:WV(W.current>Pe?re:W.current,De,Ae,I,Q.key===tc?"bl":Q.key===(m?Br:zr)?"tr":"tl"),stopEvent:!0})];if(ut!=null&&(W.current=ut,K(Q)),_==="both")return}if(Ic(Q.key,_)){if(At(Q),r&&!y&&Fr(Q.currentTarget.ownerDocument)===Q.currentTarget){W.current=yd(Q.key,_,m)?re:Pe,K(Q);return}yd(Q.key,_,m)?d?ue>=Pe?h&&ue!==a.current.length?W.current=-1:(F.current=!1,W.current=re):W.current=Tt(a,{startingIndex:ue,disabledIndices:S}):W.current=Math.min(Pe,Tt(a,{startingIndex:ue,disabledIndices:S})):d?ue<=re?h&&ue!==-1?W.current=a.current.length:(F.current=!1,W.current=Pe):W.current=Tt(a,{startingIndex:ue,decrement:!0,disabledIndices:S}):W.current=Math.max(re,Tt(a,{startingIndex:ue,decrement:!0,disabledIndices:S})),Zi(a,W.current)&&(W.current=-1),K(Q)}}),le=w.useMemo(()=>y&&r&&ce&&{"aria-activedescendant":`${M}-${c}`},[y,r,ce,M,c]),pe=w.useMemo(()=>({"aria-orientation":_==="both"?void 0:_,...C?{}:le,onKeyDown(Q){if(Q.key==="Tab"&&Q.shiftKey&&r&&!y){const ue=bn(Q.nativeEvent);if(ue&&!Ge($.current,ue))return;At(Q),n.setOpen(!1,Ue(_f,Q.nativeEvent)),at(o)&&o.focus();return}we(Q)},onPointerMove(){te.current=!0}}),[le,we,$,_,C,n,r,y,o]),J=w.useMemo(()=>{function Q(re){g==="auto"&&ix(re.nativeEvent)&&(L.current=!y)}function ue(re){L.current=g,g==="auto"&&ax(re.nativeEvent)&&(L.current=!0)}return{onKeyDown(re){const Pe=n.select("open");te.current=!1;const De=re.key.startsWith("Arrow"),Ae=f6(re.key,se(),m),Je=Ic(re.key,_),He=(p?Ae:Je)||re.key==="Enter"||re.key.trim()==="";if(y&&Pe)return we(re);if(!(!Pe&&!v&&De)){if(He){const ut=Ic(re.key,se());q.current=p&&ut?null:re.key}if(p){Ae&&(At(re),Pe?(W.current=ud(a,H.current),K(re)):n.setOpen(!0,Ue(dd,re.nativeEvent,re.currentTarget)));return}Je&&(X.current!=null&&(W.current=X.current),At(re),!Pe&&v?n.setOpen(!0,Ue(dd,re.nativeEvent,re.currentTarget)):we(re),Pe&&K(re))}},onFocus(re){n.select("open")&&!y&&(W.current=-1,K(re))},onPointerDown:ue,onPointerEnter:ue,onMouseDown:Q,onClick:Q}},[we,H,g,a,p,K,n,v,_,se,m,X,y]),ae=w.useMemo(()=>({...le,...J}),[le,J]);return w.useMemo(()=>u?{reference:ae,floating:pe,item:Y,trigger:J}:{},[u,ae,pe,J,Y])}const p6=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function m6(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingId"),o=n.useState("domReferenceElement"),i=n.useState("floatingElement"),{enabled:a=!0,role:c="dialog"}=t,l=rc(),u=o?.id||l,f=w.useMemo(()=>va(i)?.id||s,[i,s]),h=p6.get(c)??c,p=vf()!=null,m=w.useMemo(()=>h==="tooltip"||c==="label"?Ot:{"aria-haspopup":h==="alertdialog"?"dialog":h,"aria-expanded":"false",...h==="listbox"&&{role:"combobox"},...h==="menu"&&p&&{role:"menuitem"},...c==="select"&&{"aria-autocomplete":"none"},...c==="combobox"&&{"aria-autocomplete":"list"}},[h,p,c]),y=w.useMemo(()=>h==="tooltip"||c==="label"?{[`aria-${c==="label"?"labelledby":"describedby"}`]:r?f:void 0}:{...m,"aria-expanded":r?"true":"false","aria-controls":r?f:void 0,...h==="menu"&&{id:u}},[h,f,r,u,c,m]),g=w.useMemo(()=>{const v={id:f,...h&&{role:h}};return h==="tooltip"||c==="label"?v:{...v,...h==="menu"&&{"aria-labelledby":u}}},[h,f,u,c]),b=w.useCallback(({active:v,selected:S})=>{const _={role:"option",...v&&{id:`${f}-fui-option`}};switch(c){case"select":case"combobox":return{..._,"aria-selected":S}}return{}},[f,c]);return w.useMemo(()=>a?{reference:y,floating:g,item:b,trigger:m}:{},[a,y,g,m,b])}function g6(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.context.dataRef,{listRef:o,activeIndex:i,onMatch:a,onTypingChange:c,enabled:l=!0,findMatch:u=null,resetMs:f=750,ignoreKeys:h=Th,selectedIndex:d=null}=t,p=nn(),m=w.useRef(""),y=w.useRef(d??i??-1),g=w.useRef(null);fe(()=>{r&&(p.clear(),g.current=null,m.current="")},[r,p]),fe(()=>{r&&m.current===""&&(y.current=d??i??-1)},[r,d,i]);const b=ye(k=>{k?s.current.typing||(s.current.typing=k,c?.(k)):s.current.typing&&(s.current.typing=k,c?.(k))}),v=ye(k=>{function I(B,U,V){const $=u?u(U,V):U.find(O=>O?.toLocaleLowerCase().indexOf(V.toLocaleLowerCase())===0);return $?B.indexOf($):-1}const x=o.current;if(m.current.length>0&&m.current[0]!==" "&&(I(x,x,m.current)===-1?b(!1):k.key===" "&&At(k)),x==null||h.includes(k.key)||k.key.length!==1||k.ctrlKey||k.metaKey||k.altKey)return;r&&k.key!==" "&&(At(k),b(!0)),x.every(B=>B?B[0]?.toLocaleLowerCase()!==B[1]?.toLocaleLowerCase():!0)&&m.current===k.key&&(m.current="",y.current=g.current),m.current+=k.key,p.start(f,()=>{m.current="",y.current=g.current,b(!1)});const T=y.current,M=I(x,[...x.slice((T||0)+1),...x.slice(0,(T||0)+1)],m.current);M!==-1?(a?.(M),g.current=M):k.key!==" "&&(m.current="",b(!1))}),S=w.useMemo(()=>({onKeyDown:v}),[v]),_=w.useMemo(()=>({onKeyDown:v,onKeyUp(k){k.key===" "&&b(!1)}}),[v,b]);return w.useMemo(()=>l?{reference:S,floating:_}:{},[l,S,_])}function y6(e){const t=w.useRef(""),n=w.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:w.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function Kx(e){const[t,n]=w.useState(null),r=ye((a,c)=>{e||n(c)}),s=w.useCallback(()=>{n(null)},[]),{onClick:o,onPointerDown:i}=y6(r);return w.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:o,onPointerDown:i}}),[t,s,o,i])}function Hx(e){const{store:t,parentContext:n,actionsRef:r}=e,s=t.useState("open"),o=t.useState("disablePointerDismissal"),i=t.useState("modal"),a=t.useState("popupElement"),{openMethod:c,triggerProps:l,reset:u}=Kx(s);r6(t);const{forceUnmount:f}=s6(s,t,()=>{u()}),h=ye(T=>{const M=Ue(T);return M.preventUnmountOnClose=()=>{t.set("preventUnmountingOnClose",!0)},M}),d=w.useCallback(()=>{t.setOpen(!1,h(S4))},[t,h]);w.useImperativeHandle(r,()=>({unmount:f,close:d}),[f,d]);const p=l6({popupStore:t,onOpenChange:t.setOpen,treatPopupAsFloatingElement:!0,noEmit:!0}),[m,y]=w.useState(0),g=m===0,b=m6(p),v=jx(p,{outsidePressEvent(){return t.context.internalBackdropRef.current||t.context.backdropRef.current?"intentional":{mouse:i==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}},outsidePress(T){if("button"in T&&T.button!==0||"touches"in T&&T.touches.length!==1)return!1;const M=bn(T);if(g&&!o){const B=M;return i&&(t.context.internalBackdropRef.current||t.context.backdropRef.current)?t.context.internalBackdropRef.current===B||t.context.backdropRef.current===B||Ge(B,a)&&!B?.hasAttribute("data-base-ui-portal"):!0}return!1},escapeKey:g});nx(s&&i===!0,a);const{getReferenceProps:S,getFloatingProps:_,getTriggerProps:k}=qx([b,v]);t.useContextCallback("onNestedDialogOpen",T=>{y(T+1)}),t.useContextCallback("onNestedDialogClose",()=>{y(0)}),w.useEffect(()=>(n?.onNestedDialogOpen&&s&&n.onNestedDialogOpen(m),n?.onNestedDialogClose&&!s&&n.onNestedDialogClose(),()=>{n?.onNestedDialogClose&&s&&n.onNestedDialogClose()}),[s,n,m]);const I=w.useMemo(()=>S(l),[S,l]),x=w.useMemo(()=>k(l),[k,l]),R=w.useMemo(()=>_(),[_]);t.useSyncedValues({openMethod:c,activeTriggerProps:I,inactiveTriggerProps:x,popupProps:R,floatingRootContext:p,nestedOpenDialogCount:m})}const lg=w.createContext(void 0);function Bs(e){const t=w.useContext(lg);if(e===!1&&t===void 0)throw new Error(xn(27));return t}const b6={...a6,modal:he(e=>e.modal),nested:he(e=>e.nested),nestedOpenDialogCount:he(e=>e.nestedOpenDialogCount),disablePointerDismissal:he(e=>e.disablePointerDismissal),openMethod:he(e=>e.openMethod),descriptionElementId:he(e=>e.descriptionElementId),titleElementId:he(e=>e.titleElementId),viewportElement:he(e=>e.viewportElement),role:he(e=>e.role)};class Gx extends Ux{constructor(t){super(v6(t),{popupRef:w.createRef(),backdropRef:w.createRef(),internalBackdropRef:w.createRef(),triggerElements:new cg,onOpenChange:void 0,onOpenChangeComplete:void 0},b6)}setOpen=(t,n)=>{if(n.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},!t&&n.trigger==null&&this.state.activeTriggerId!=null&&(n.trigger=this.state.activeTriggerElement??void 0),this.context.onOpenChange?.(t,n),n.isCanceled)return;const r={open:t,nativeEvent:n.event,reason:n.reason,nested:this.state.nested};this.state.floatingRootContext.context.events?.emit("openchange",r);const s={open:t},o=n.trigger?.id??null;(o||t)&&(s.activeTriggerId=o,s.activeTriggerElement=n.trigger??null),this.update(s)}}function v6(e={}){return{...i6(),modal:!0,disablePointerDismissal:!1,popupElement:null,viewportElement:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,nested:!1,nestedOpenDialogCount:0,role:"dialog",...e}}function w6(e){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:s,onOpenChangeComplete:o,actionsRef:i,handle:a,triggerId:c,defaultTriggerId:l=null}=e,u=Bs(),f=!!u,h=an(()=>a?.store??new Gx({open:n??r,activeTriggerId:c!==void 0?c:l,modal:!0,disablePointerDismissal:!0,nested:f,role:"alertdialog"})).current;h.useControlledProp("open",n,r),h.useControlledProp("activeTriggerId",c,l),h.useSyncedValue("nested",f),h.useContextCallback("onOpenChange",s),h.useContextCallback("onOpenChangeComplete",o);const d=h.useState("payload");Hx({store:h,actionsRef:i,parentContext:u?.store.context});const p=w.useMemo(()=>({store:h}),[h]);return E.jsx(lg.Provider,{value:p,children:typeof t=="function"?t({payload:d}):t})}let ou=(function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e})({});const S6={[ou.startingStyle]:""},_6={[ou.endingStyle]:""},ic={transitionStatus(e){return e==="starting"?S6:e==="ending"?_6:null}};let us=(function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=ou.startingStyle]="startingStyle",e[e.endingStyle=ou.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e})({}),Vh=(function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e})({});const x6={[Vh.popupOpen]:""},E6={[Vh.popupOpen]:"",[Vh.pressed]:""},R6={[us.open]:""},k6={[us.closed]:""},O6={[us.anchorHidden]:""},C6={open(e){return e?x6:null}},I6={open(e){return e?E6:null}},kf={open(e){return e?R6:k6},anchorHidden(e){return e?O6:null}},T6={...kf,...ic},Jx=w.forwardRef(function(t,n){const{render:r,className:s,forceRender:o=!1,...i}=t,{store:a}=Bs(),c=a.useState("open"),l=a.useState("nested"),u=a.useState("mounted"),f=a.useState("transitionStatus"),h=w.useMemo(()=>({open:c,transitionStatus:f}),[c,f]);return wt("div",t,{state:h,ref:[a.context.backdropRef,n],stateAttributesMapping:T6,props:[{role:"presentation",hidden:!u,style:{userSelect:"none",WebkitUserSelect:"none"}},i],enabled:o||!l})}),M6=w.createContext(void 0);function A6(e=!1){const t=w.useContext(M6);if(t===void 0&&!e)throw new Error(xn(16));return t}function P6(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:s=0,isNativeButton:o}=e,i=r&&t!==!1,a=r&&t===!1;return{props:w.useMemo(()=>{const l={onKeyDown(u){n&&t&&u.key!=="Tab"&&u.preventDefault()}};return r||(l.tabIndex=s,!o&&n&&(l.tabIndex=t?s:-1)),(o&&(t||i)||!o&&n)&&(l["aria-disabled"]=n),o&&(!t||a)&&(l.disabled=n),l},[r,n,t,i,a,o,s])}}function ac(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:s=!0}=e,o=w.useRef(null),i=A6(!0)!==void 0,a=ye(()=>{const h=o.current;return!!(h?.tagName==="A"&&h?.href)}),{props:c}=P6({focusableWhenDisabled:n,disabled:t,composite:i,tabIndex:r,isNativeButton:s}),l=w.useCallback(()=>{const h=o.current;$6(h)&&i&&t&&c.disabled===void 0&&h.disabled&&(h.disabled=!1)},[t,c.disabled,i]);fe(l,[l]);const u=w.useCallback((h={})=>{const{onClick:d,onMouseDown:p,onKeyUp:m,onKeyDown:y,onPointerDown:g,...b}=h;return sc({type:s?"button":void 0,onClick(S){if(t){S.preventDefault();return}d?.(S)},onMouseDown(S){t||p?.(S)},onKeyDown(S){if(t||(Dh(S),y?.(S)),S.baseUIHandlerPrevented)return;const _=S.target===S.currentTarget&&!s&&!a()&&!t,k=S.key==="Enter",I=S.key===" ";_&&((I||k)&&S.preventDefault(),k&&d?.(S))},onKeyUp(S){t||(Dh(S),m?.(S)),!S.baseUIHandlerPrevented&&S.target===S.currentTarget&&!s&&!t&&S.key===" "&&d?.(S)},onPointerDown(S){if(t){S.preventDefault();return}g?.(S)}},s?void 0:{role:"button"},c,b)},[t,c,s,a]),f=ye(h=>{o.current=h,l()});return{getButtonProps:u,buttonRef:f}}function $6(e){return at(e)&&e.tagName==="BUTTON"}const ug=w.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,...a}=t,{store:c}=Bs(),l=c.useState("open");function u(p){l&&c.setOpen(!1,Ue(b4,p.nativeEvent))}const{getButtonProps:f,buttonRef:h}=ac({disabled:o,native:i}),d=w.useMemo(()=>({disabled:o}),[o]);return wt("button",t,{state:d,ref:[n,h],props:[{onClick:u},a,f]})});function iu(e){return rc(e,"base-ui")}let F6=(function(e){return e.nestedDialogs="--nested-dialogs",e})({}),N6=(function(e){return e[e.open=us.open]="open",e[e.closed=us.closed]="closed",e[e.startingStyle=us.startingStyle]="startingStyle",e[e.endingStyle=us.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e})({});const Yx=w.createContext(void 0);function L6(){const e=w.useContext(Yx);if(e===void 0)throw new Error(xn(26));return e}const Xx="ArrowUp",Zx="ArrowDown",Qx="ArrowLeft",eE="ArrowRight",tE="Home",nE="End",j6=new Set([Qx,eE]),D6=new Set([Xx,Zx]),V6=new Set([...j6,...D6]);[...V6];const rE=new Set([Xx,Zx,Qx,eE,tE,nE]),B6={...kf,...ic,nestedDialogOpen(e){return e?{[N6.nestedDialogOpen]:""}:null}},sE=w.forwardRef(function(t,n){const{className:r,finalFocus:s,initialFocus:o,render:i,...a}=t,{store:c}=Bs(),l=c.useState("descriptionElementId"),u=c.useState("disablePointerDismissal"),f=c.useState("floatingRootContext"),h=c.useState("popupProps"),d=c.useState("modal"),p=c.useState("mounted"),m=c.useState("nested"),y=c.useState("nestedOpenDialogCount"),g=c.useState("open"),b=c.useState("openMethod"),v=c.useState("titleElementId"),S=c.useState("transitionStatus"),_=c.useState("role");L6(),Vs({open:g,ref:c.context.popupRef,onComplete(){g&&c.context.onOpenChangeComplete?.(!0)}});function k(M){return M==="touch"?c.context.popupRef.current:!0}const I=o===void 0?k:o,x=y>0,R=w.useMemo(()=>({open:g,nested:m,transitionStatus:S,nestedDialogOpen:x}),[g,m,S,x]),T=wt("div",t,{state:R,props:[h,{"aria-labelledby":v??void 0,"aria-describedby":l??void 0,role:_,tabIndex:-1,hidden:!p,onKeyDown(M){rE.has(M.key)&&M.stopPropagation()},style:{[F6.nestedDialogs]:y}},a],ref:[n,c.context.popupRef,c.useStateSetter("popupElement")],stateAttributesMapping:B6});return E.jsx(Ix,{context:f,openInteractionType:b,disabled:!p,closeOnFocusOut:!u,initialFocus:I,returnFocus:s,modal:d!==!1,restoreFocus:"popup",children:T})});function oE(e){return sg(19)?e:e?"true":void 0}const iE=w.forwardRef(function(t,n){const{cutout:r,...s}=t;let o;if(r){const i=r?.getBoundingClientRect();o=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${i.left}px ${i.top}px,
      ${i.left}px ${i.bottom}px,
      ${i.right}px ${i.bottom}px,
      ${i.right}px ${i.top}px,
      ${i.left}px ${i.top}px
    )`}return E.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:o}})}),aE=w.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,{store:o}=Bs(),i=o.useState("mounted"),a=o.useState("modal");return i||r?E.jsx(Yx.Provider,{value:r,children:E.jsxs(Cx,{ref:n,...s,children:[i&&a===!0&&E.jsx(iE,{ref:o.context.internalBackdropRef,inert:oE(!open)}),t.children]})}):null}),cE=w.forwardRef(function(t,n){const{render:r,className:s,id:o,...i}=t,{store:a}=Bs(),c=iu(o);return a.useSyncedValueWithCleanup("titleElementId",c),wt("h2",t,{ref:n,props:[{id:c},i]})}),z6=w.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,focusableWhenDisabled:i=!1,nativeButton:a=!0,...c}=t,l=!!o,{getButtonProps:u,buttonRef:f}=ac({disabled:l,focusableWhenDisabled:i,native:a}),h=w.useMemo(()=>({disabled:l}),[l]);return wt("button",t,{state:h,ref:[n,f],props:[c,u]})}),Wb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qb=Ym,lE=(e,t)=>n=>{var r;if(t?.variants==null)return qb(e,n?.class,n?.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(l=>{const u=n?.[l],f=o?.[l];if(u===null)return null;const h=Wb(u)||Wb(f);return s[l][h]}),a=n&&Object.entries(n).reduce((l,u)=>{let[f,h]=u;return h===void 0||(l[f]=h),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:f,className:h,...d}=u;return Object.entries(d).every(p=>{let[m,y]=p;return Array.isArray(y)?y.includes({...o,...a}[m]):{...o,...a}[m]===y})?[...l,f,h]:l},[]);return qb(e,i,c,n?.class,n?.className)},U6=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},W6=(e,t)=>({classGroupId:e,validator:t}),uE=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),au="-",Kb=[],q6="arbitrary..",K6=e=>{const t=G6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return H6(i);const a=i.split(au),c=a[0]===""&&a.length>1?1:0;return fE(a,c,t)},getConflictingClassGroupIds:(i,a)=>{if(a){const c=r[i],l=n[i];return c?l?U6(l,c):c:l||Kb}return n[i]||Kb}}},fE=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],o=n.nextPart.get(s);if(o){const l=fE(e,t+1,o);if(l)return l}const i=n.validators;if(i===null)return;const a=t===0?e.join(au):e.slice(t).join(au),c=i.length;for(let l=0;l<c;l++){const u=i[l];if(u.validator(a))return u.classGroupId}},H6=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?q6+r:void 0})(),G6=e=>{const{theme:t,classGroups:n}=e;return J6(n,t)},J6=(e,t)=>{const n=uE();for(const r in e){const s=e[r];fg(s,n,r,t)}return n},fg=(e,t,n,r)=>{const s=e.length;for(let o=0;o<s;o++){const i=e[o];Y6(i,t,n,r)}},Y6=(e,t,n,r)=>{if(typeof e=="string"){X6(e,t,n);return}if(typeof e=="function"){Z6(e,t,n,r);return}Q6(e,t,n,r)},X6=(e,t,n)=>{const r=e===""?t:dE(t,e);r.classGroupId=n},Z6=(e,t,n,r)=>{if(e8(e)){fg(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(W6(n,e))},Q6=(e,t,n,r)=>{const s=Object.entries(e),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];fg(c,dE(t,a),n,r)}},dE=(e,t)=>{let n=e;const r=t.split(au),s=r.length;for(let o=0;o<s;o++){const i=r[o];let a=n.nextPart.get(i);a||(a=uE(),n.nextPart.set(i,a)),n=a}return n},e8=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,t8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(o,i)=>{n[o]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(o){let i=n[o];if(i!==void 0)return i;if((i=r[o])!==void 0)return s(o,i),i},set(o,i){o in n?n[o]=i:s(o,i)}}},Bh="!",Hb=":",n8=[],Gb=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),r8=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const o=[];let i=0,a=0,c=0,l;const u=s.length;for(let m=0;m<u;m++){const y=s[m];if(i===0&&a===0){if(y===Hb){o.push(s.slice(c,m)),c=m+1;continue}if(y==="/"){l=m;continue}}y==="["?i++:y==="]"?i--:y==="("?a++:y===")"&&a--}const f=o.length===0?s:s.slice(c);let h=f,d=!1;f.endsWith(Bh)?(h=f.slice(0,-1),d=!0):f.startsWith(Bh)&&(h=f.slice(1),d=!0);const p=l&&l>c?l-c:void 0;return Gb(o,d,h,p)};if(t){const s=t+Hb,o=r;r=i=>i.startsWith(s)?o(i.slice(s.length)):Gb(n8,!1,i,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},s8=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const i=n[o],a=i[0]==="[",c=t.has(i);a||c?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(i)):s.push(i)}return s.length>0&&(s.sort(),r.push(...s)),r}},o8=e=>({cache:t8(e.cacheSize),parseClassName:r8(e),sortModifiers:s8(e),...K6(e)}),i8=/\s+/,a8=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=t,i=[],a=e.trim().split(i8);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:f,modifiers:h,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(f){c=u+(c.length>0?" "+c:c);continue}let y=!!m,g=r(y?p.substring(0,m):p);if(!g){if(!y){c=u+(c.length>0?" "+c:c);continue}if(g=r(p),!g){c=u+(c.length>0?" "+c:c);continue}y=!1}const b=h.length===0?"":h.length===1?h[0]:o(h).join(":"),v=d?b+Bh:b,S=v+g;if(i.indexOf(S)>-1)continue;i.push(S);const _=s(g,y);for(let k=0;k<_.length;++k){const I=_[k];i.push(v+I)}c=u+(c.length>0?" "+c:c)}return c},c8=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=hE(n))&&(s&&(s+=" "),s+=r);return s},hE=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=hE(e[r]))&&(n&&(n+=" "),n+=t);return n},l8=(e,...t)=>{let n,r,s,o;const i=c=>{const l=t.reduce((u,f)=>f(u),e());return n=o8(l),r=n.cache.get,s=n.cache.set,o=a,a(c)},a=c=>{const l=r(c);if(l)return l;const u=a8(c,n);return s(c,u),u};return o=i,(...c)=>o(c8(...c))},u8=[],pt=e=>{const t=n=>n[e]||u8;return t.isThemeGetter=!0,t},pE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,f8=/^\d+\/\d+$/,d8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,h8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,p8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,m8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,g8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ys=e=>f8.test(e),Te=e=>!!e&&!Number.isNaN(Number(e)),Cr=e=>!!e&&Number.isInteger(Number(e)),bd=e=>e.endsWith("%")&&Te(e.slice(0,-1)),fr=e=>d8.test(e),y8=()=>!0,b8=e=>h8.test(e)&&!p8.test(e),gE=()=>!1,v8=e=>m8.test(e),w8=e=>g8.test(e),S8=e=>!oe(e)&&!ie(e),_8=e=>ai(e,vE,gE),oe=e=>pE.test(e),es=e=>ai(e,wE,b8),vd=e=>ai(e,O8,Te),Jb=e=>ai(e,yE,gE),x8=e=>ai(e,bE,w8),Tc=e=>ai(e,SE,v8),ie=e=>mE.test(e),xi=e=>ci(e,wE),E8=e=>ci(e,C8),Yb=e=>ci(e,yE),R8=e=>ci(e,vE),k8=e=>ci(e,bE),Mc=e=>ci(e,SE,!0),ai=(e,t,n)=>{const r=pE.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},ci=(e,t,n=!1)=>{const r=mE.exec(e);return r?r[1]?t(r[1]):n:!1},yE=e=>e==="position"||e==="percentage",bE=e=>e==="image"||e==="url",vE=e=>e==="length"||e==="size"||e==="bg-size",wE=e=>e==="length",O8=e=>e==="number",C8=e=>e==="family-name",SE=e=>e==="shadow",I8=()=>{const e=pt("color"),t=pt("font"),n=pt("text"),r=pt("font-weight"),s=pt("tracking"),o=pt("leading"),i=pt("breakpoint"),a=pt("container"),c=pt("spacing"),l=pt("radius"),u=pt("shadow"),f=pt("inset-shadow"),h=pt("text-shadow"),d=pt("drop-shadow"),p=pt("blur"),m=pt("perspective"),y=pt("aspect"),g=pt("ease"),b=pt("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...S(),ie,oe],k=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],x=()=>[ie,oe,c],R=()=>[Ys,"full","auto",...x()],T=()=>[Cr,"none","subgrid",ie,oe],M=()=>["auto",{span:["full",Cr,ie,oe]},Cr,ie,oe],B=()=>[Cr,"auto",ie,oe],U=()=>["auto","min","max","fr",ie,oe],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...x()],N=()=>[Ys,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],C=()=>[e,ie,oe],L=()=>[...S(),Yb,Jb,{position:[ie,oe]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",R8,_8,{size:[ie,oe]}],te=()=>[bd,xi,es],K=()=>["","none","full",l,ie,oe],ne=()=>["",Te,xi,es],A=()=>["solid","dashed","dotted","double"],j=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>[Te,bd,Yb,Jb],G=()=>["","none",p,ie,oe],H=()=>["none",Te,ie,oe],Z=()=>["none",Te,ie,oe],D=()=>[Te,ie,oe],X=()=>[Ys,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fr],breakpoint:[fr],color:[y8],container:[fr],"drop-shadow":[fr],ease:["in","out","in-out"],font:[S8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fr],shadow:[fr],spacing:["px",Te],text:[fr],"text-shadow":[fr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ys,oe,ie,y]}],container:["container"],columns:[{columns:[Te,oe,ie,a]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Cr,"auto",ie,oe]}],basis:[{basis:[Ys,"full","auto",a,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Te,Ys,"auto","initial","none",oe]}],grow:[{grow:["",Te,ie,oe]}],shrink:[{shrink:["",Te,ie,oe]}],order:[{order:[Cr,"first","last","none",ie,oe]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[a,"screen",...N()]}],"min-w":[{"min-w":[a,"screen","none",...N()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",n,xi,es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ie,vd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bd,oe]}],"font-family":[{font:[E8,oe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ie,oe]}],"line-clamp":[{"line-clamp":[Te,"none",ie,vd]}],leading:[{leading:[o,...x()]}],"list-image":[{"list-image":["none",ie,oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:C()}],"text-color":[{text:C()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:[Te,"from-font","auto",ie,es]}],"text-decoration-color":[{decoration:C()}],"underline-offset":[{"underline-offset":[Te,"auto",ie,oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Cr,ie,oe],radial:["",ie,oe],conic:[Cr,ie,oe]},k8,x8]}],"bg-color":[{bg:C()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:C()}],"gradient-via":[{via:C()}],"gradient-to":[{to:C()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...A(),"hidden","none"]}],"divide-style":[{divide:[...A(),"hidden","none"]}],"border-color":[{border:C()}],"border-color-x":[{"border-x":C()}],"border-color-y":[{"border-y":C()}],"border-color-s":[{"border-s":C()}],"border-color-e":[{"border-e":C()}],"border-color-t":[{"border-t":C()}],"border-color-r":[{"border-r":C()}],"border-color-b":[{"border-b":C()}],"border-color-l":[{"border-l":C()}],"divide-color":[{divide:C()}],"outline-style":[{outline:[...A(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Te,ie,oe]}],"outline-w":[{outline:["",Te,xi,es]}],"outline-color":[{outline:C()}],shadow:[{shadow:["","none",u,Mc,Tc]}],"shadow-color":[{shadow:C()}],"inset-shadow":[{"inset-shadow":["none",f,Mc,Tc]}],"inset-shadow-color":[{"inset-shadow":C()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:C()}],"ring-offset-w":[{"ring-offset":[Te,es]}],"ring-offset-color":[{"ring-offset":C()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":C()}],"text-shadow":[{"text-shadow":["none",h,Mc,Tc]}],"text-shadow-color":[{"text-shadow":C()}],opacity:[{opacity:[Te,ie,oe]}],"mix-blend":[{"mix-blend":[...j(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":j()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Te]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":C()}],"mask-image-linear-to-color":[{"mask-linear-to":C()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":C()}],"mask-image-t-to-color":[{"mask-t-to":C()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":C()}],"mask-image-r-to-color":[{"mask-r-to":C()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":C()}],"mask-image-b-to-color":[{"mask-b-to":C()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":C()}],"mask-image-l-to-color":[{"mask-l-to":C()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":C()}],"mask-image-x-to-color":[{"mask-x-to":C()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":C()}],"mask-image-y-to-color":[{"mask-y-to":C()}],"mask-image-radial":[{"mask-radial":[ie,oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":C()}],"mask-image-radial-to-color":[{"mask-radial-to":C()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Te]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":C()}],"mask-image-conic-to-color":[{"mask-conic-to":C()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,oe]}],filter:[{filter:["","none",ie,oe]}],blur:[{blur:G()}],brightness:[{brightness:[Te,ie,oe]}],contrast:[{contrast:[Te,ie,oe]}],"drop-shadow":[{"drop-shadow":["","none",d,Mc,Tc]}],"drop-shadow-color":[{"drop-shadow":C()}],grayscale:[{grayscale:["",Te,ie,oe]}],"hue-rotate":[{"hue-rotate":[Te,ie,oe]}],invert:[{invert:["",Te,ie,oe]}],saturate:[{saturate:[Te,ie,oe]}],sepia:[{sepia:["",Te,ie,oe]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,oe]}],"backdrop-blur":[{"backdrop-blur":G()}],"backdrop-brightness":[{"backdrop-brightness":[Te,ie,oe]}],"backdrop-contrast":[{"backdrop-contrast":[Te,ie,oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Te,ie,oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Te,ie,oe]}],"backdrop-invert":[{"backdrop-invert":["",Te,ie,oe]}],"backdrop-opacity":[{"backdrop-opacity":[Te,ie,oe]}],"backdrop-saturate":[{"backdrop-saturate":[Te,ie,oe]}],"backdrop-sepia":[{"backdrop-sepia":["",Te,ie,oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Te,"initial",ie,oe]}],ease:[{ease:["linear","initial",g,ie,oe]}],delay:[{delay:[Te,ie,oe]}],animate:[{animate:["none",b,ie,oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,ie,oe]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:H()}],"rotate-x":[{"rotate-x":H()}],"rotate-y":[{"rotate-y":H()}],"rotate-z":[{"rotate-z":H()}],scale:[{scale:Z()}],"scale-x":[{"scale-x":Z()}],"scale-y":[{"scale-y":Z()}],"scale-z":[{"scale-z":Z()}],"scale-3d":["scale-3d"],skew:[{skew:D()}],"skew-x":[{"skew-x":D()}],"skew-y":[{"skew-y":D()}],transform:[{transform:[ie,oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:X()}],"translate-x":[{"translate-x":X()}],"translate-y":[{"translate-y":X()}],"translate-z":[{"translate-z":X()}],"translate-none":["translate-none"],accent:[{accent:C()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:C()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,oe]}],fill:[{fill:["none",...C()]}],"stroke-w":[{stroke:[Te,xi,es,vd]}],stroke:[{stroke:["none",...C()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},T8=l8(I8);function Ve(...e){return T8(Ym(e))}const M8=lE("focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 rounded-md border border-transparent bg-clip-padding text-sm font-medium focus-visible:ring-[3px] aria-invalid:ring-[3px] [&_svg:not([class*='size-'])]:size-4 inline-flex items-center justify-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none group/button select-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80",outline:"border-border bg-background hover:bg-muted hover:text-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 aria-expanded:bg-muted aria-expanded:text-foreground shadow-xs",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 aria-expanded:bg-secondary aria-expanded:text-secondary-foreground",ghost:"hover:bg-muted hover:text-foreground dark:hover:bg-muted/50 aria-expanded:bg-muted aria-expanded:text-foreground",destructive:"bg-destructive/10 hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/20 text-destructive focus-visible:border-destructive/40 dark:hover:bg-destructive/30",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 gap-1.5 px-2.5 in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-2 has-data-[icon=inline-start]:pl-2",xs:"h-6 gap-1 rounded-[min(var(--radius-md),8px)] px-2 text-xs in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 gap-1 rounded-[min(var(--radius-md),10px)] px-2.5 in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5",lg:"h-10 gap-1.5 px-2.5 has-data-[icon=inline-end]:pr-3 has-data-[icon=inline-start]:pl-3",icon:"size-9","icon-xs":"size-6 rounded-[min(var(--radius-md),8px)] in-data-[slot=button-group]:rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8 rounded-[min(var(--radius-md),10px)] in-data-[slot=button-group]:rounded-md","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function li(e){const t=de.c(12);let n,r,s,o;t[0]!==e?({className:n,variant:s,size:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o):(n=t[1],r=t[2],s=t[3],o=t[4]);const i=s===void 0?"default":s,a=o===void 0?"default":o;let c;t[5]!==n||t[6]!==a||t[7]!==i?(c=Ve(M8({variant:i,size:a,className:n})),t[5]=n,t[6]=a,t[7]=i,t[8]=c):c=t[8];let l;return t[9]!==r||t[10]!==c?(l=E.jsx(z6,{"data-slot":"button",className:c,...r}),t[9]=r,t[10]=c,t[11]=l):l=t[11],l}function A8(e){const t=de.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(w6,{"data-slot":"alert-dialog",...n}),t[2]=n,t[3]=r):r=t[3],r}function P8(e){const t=de.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(aE,{"data-slot":"alert-dialog-portal",...n}),t[2]=n,t[3]=r):r=t[3],r}function $8(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(Jx,{"data-slot":"alert-dialog-overlay",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function F8(e){const t=de.c(11);let n,r,s;t[0]!==e?({className:n,size:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]);const o=s===void 0?"default":s;let i;t[4]===Symbol.for("react.memo_cache_sentinel")?(i=E.jsx($8,{}),t[4]=i):i=t[4];let a;t[5]!==n?(a=Ve("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 bg-background ring-foreground/10 group/alert-dialog-content fixed top-1/2 left-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 gap-6 rounded-xl p-6 ring-1 duration-100 outline-none data-[size=default]:max-w-xs data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-lg",n),t[5]=n,t[6]=a):a=t[6];let c;return t[7]!==r||t[8]!==o||t[9]!==a?(c=E.jsxs(P8,{children:[i,E.jsx(sE,{"data-slot":"alert-dialog-content","data-size":o,className:a,...r})]}),t[7]=r,t[8]=o,t[9]=a,t[10]=c):c=t[10],c}function N8(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-6 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"alert-dialog-header",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function L8(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"alert-dialog-footer",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function j8(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("text-lg font-medium sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(cE,{"data-slot":"alert-dialog-title",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function D8(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve(n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(li,{"data-slot":"alert-dialog-action",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function V8(e){const t=de.c(14);let n,r,s,o;t[0]!==e?({className:n,variant:s,size:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o):(n=t[1],r=t[2],s=t[3],o=t[4]);const i=s===void 0?"outline":s,a=o===void 0?"default":o;let c;t[5]!==n?(c=Ve(n),t[5]=n,t[6]=c):c=t[6];let l;t[7]!==a||t[8]!==i?(l=E.jsx(li,{variant:i,size:a}),t[7]=a,t[8]=i,t[9]=l):l=t[9];let u;return t[10]!==r||t[11]!==c||t[12]!==l?(u=E.jsx(ug,{"data-slot":"alert-dialog-cancel",className:c,render:l,...r}),t[10]=r,t[11]=c,t[12]=l,t[13]=u):u=t[13],u}function B8(e){const t=de.c(18),{open:n,children:r,onConfirm:s,onCancel:o}=e;let i;t[0]!==o?(i=p=>{p||o()},t[0]=o,t[1]=i):i=t[1];const a=i;let c;t[2]!==r?(c=E.jsx(N8,{children:E.jsx(j8,{className:"text-4xl",children:r})}),t[2]=r,t[3]=c):c=t[3];let l;t[4]!==s?(l=E.jsx(D8,{onClick:s,children:"Yes"}),t[4]=s,t[5]=l):l=t[5];let u;t[6]!==o?(u=E.jsx(V8,{onClick:o,children:"No"}),t[6]=o,t[7]=u):u=t[7];let f;t[8]!==l||t[9]!==u?(f=E.jsxs(L8,{children:[l,u]}),t[8]=l,t[9]=u,t[10]=f):f=t[10];let h;t[11]!==c||t[12]!==f?(h=E.jsxs(F8,{children:[c,f]}),t[11]=c,t[12]=f,t[13]=h):h=t[13];let d;return t[14]!==a||t[15]!==n||t[16]!==h?(d=E.jsx(A8,{open:n,onOpenChange:a,children:h}),t[14]=a,t[15]=n,t[16]=h,t[17]=d):d=t[17],d}const z8=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200s-89.5 200-200 200"})]}),U8=w.forwardRef(z8),W8=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8"})]}),q8=w.forwardRef(W8);function _E(e){const t=de.c(10);let n,r,s;t[0]!==e?({className:n,size:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]);const o=s===void 0?"default":s;let i;t[4]!==n?(i=Ve("ring-foreground/10 bg-card text-card-foreground gap-6 overflow-hidden rounded-xl py-6 text-sm shadow-xs ring-1 has-[>img:first-child]:pt-0 data-[size=sm]:gap-4 data-[size=sm]:py-4 *:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl group/card flex flex-col",n),t[4]=n,t[5]=i):i=t[5];let a;return t[6]!==r||t[7]!==o||t[8]!==i?(a=E.jsx("div",{"data-slot":"card","data-size":o,className:i,...r}),t[6]=r,t[7]=o,t[8]=i,t[9]=a):a=t[9],a}function xE(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("gap-1 rounded-t-xl px-6 group-data-[size=sm]/card:px-4 [.border-b]:pb-6 group-data-[size=sm]/card:[.border-b]:pb-4 group/card-header @container/card-header grid auto-rows-min items-start has-data-[slot=card-action]:grid-cols-[1fr_auto] has-data-[slot=card-description]:grid-rows-[auto_auto]",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"card-header",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function EE(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("text-base leading-normal font-medium group-data-[size=sm]/card:text-sm",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"card-title",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function RE(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("px-6 group-data-[size=sm]/card:px-4",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"card-content",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}const K8=e=>{const t=de.c(5),{log:n}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=E.jsx(xE,{children:E.jsx(EE,{children:"Log"})}),t[0]=r):r=t[0];let s;t[1]!==n?(s=n.map(H8),t[1]=n,t[2]=s):s=t[2];let o;return t[3]!==s?(o=E.jsxs(_E,{children:[r,E.jsx(RE,{children:E.jsx("div",{className:"h-[600px] overflow-auto px-4",children:s})})]}),t[3]=s,t[4]=o):o=t[4],o};function H8(e,t){return E.jsx("div",{className:"flex items-center gap-1",children:e.type==="move"?E.jsxs(E.Fragment,{children:[e.player===Er?E.jsx(U8,{}):E.jsx(q8,{className:"text-black"}),E.jsx("span",{children:e.pos})]}):E.jsx("span",{children:e.message})},t)}function G8(e){const t=de.c(2),{log:n}=e;let r;return t[0]!==n?(r=E.jsx(K8,{log:n}),t[0]=n,t[1]=r):r=t[1],r}const J8=w.forwardRef(function(t,n){const{className:r,render:s,orientation:o="horizontal",...i}=t,a=w.useMemo(()=>({orientation:o}),[o]);return wt("div",t,{state:a,ref:n,props:[{role:"separator","aria-orientation":o},i]})});function Xb(e){const t=de.c(10);let n,r,s;t[0]!==e?({className:n,orientation:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]);const o=s===void 0?"horizontal":s;let i;t[4]!==n?(i=Ve("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:w-px data-[orientation=vertical]:self-stretch",n),t[4]=n,t[5]=i):i=t[5];let a;return t[6]!==o||t[7]!==r||t[8]!==i?(a=E.jsx(J8,{"data-slot":"separator",orientation:o,className:i,...r}),t[6]=o,t[7]=r,t[8]=i,t[9]=a):a=t[9],a}function Zb(e,t){return t[e]===Yr.AI?"ai":"player"}function Y8(e){const t=de.c(25),{score:n,users:r,history:s}=e;let o,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=E.jsx(xE,{children:E.jsx(EE,{children:rD()})}),i=E.jsx(Xb,{}),t[0]=o,t[1]=i):(o=t[0],i=t[1]);let a;t[2]!==r?(a=Zb(Yn,r),t[2]=r,t[3]=a):a=t[3];let c;t[4]!==n.black||t[5]!==a?(c=E.jsxs("div",{children:["black(",a,"): ",n.black]}),t[4]=n.black,t[5]=a,t[6]=c):c=t[6];let l;t[7]!==r?(l=Zb(Jn,r),t[7]=r,t[8]=l):l=t[8];let u;t[9]!==n.white||t[10]!==l?(u=E.jsxs("div",{children:["white(",l,"): ",n.white]}),t[9]=n.white,t[10]=l,t[11]=u):u=t[11];let f;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=E.jsx(Xb,{}),t[12]=f):f=t[12];let h;t[13]!==s.win?(h=E.jsxs("div",{children:["win: ",s.win]}),t[13]=s.win,t[14]=h):h=t[14];let d;t[15]!==s.lose?(d=E.jsxs("div",{children:["lose: ",s.lose]}),t[15]=s.lose,t[16]=d):d=t[16];let p;t[17]!==s.draw?(p=E.jsxs("div",{children:["draw: ",s.draw]}),t[17]=s.draw,t[18]=p):p=t[18];let m;return t[19]!==p||t[20]!==c||t[21]!==u||t[22]!==h||t[23]!==d?(m=E.jsxs(_E,{className:"flex flex-col gap-2",children:[o,i,E.jsxs(RE,{className:"flex flex-col gap-1 text-sm",children:[c,u,f,h,d,p]})]}),t[19]=p,t[20]=c,t[21]=u,t[22]=h,t[23]=d,t[24]=m):m=t[24],m}function X8(e){const t=de.c(4),{score:n,users:r}=e,s=ml(M1);let o;return t[0]!==s||t[1]!==n||t[2]!==r?(o=E.jsx(Y8,{score:n,users:r,history:s}),t[0]=s,t[1]=n,t[2]=r,t[3]=o):o=t[3],o}const wo=new WeakMap,ul=new WeakMap,cu={current:[]};let wd=!1,ra=0;const Ui=new Set,Ac=new Map;function kE(e){const t=Array.from(e).sort((n,r)=>n instanceof wr&&n.options.deps.includes(r)?1:r instanceof wr&&r.options.deps.includes(n)?-1:0);for(const n of t){if(cu.current.includes(n))continue;cu.current.push(n),n.recompute();const r=ul.get(n);if(r)for(const s of r){const o=wo.get(s);o&&kE(o)}}}function Z8(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function Q8(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function OE(e){if(ra>0&&!Ac.has(e)&&Ac.set(e,e.prevState),Ui.add(e),!(ra>0)&&!wd)try{for(wd=!0;Ui.size>0;){const t=Array.from(Ui);Ui.clear();for(const n of t){const r=Ac.get(n)??n.prevState;n.prevState=r,Z8(n)}for(const n of t){const r=wo.get(n);r&&(cu.current.push(n),kE(r))}for(const n of t){const r=wo.get(n);if(r)for(const s of r)Q8(s)}}}finally{wd=!1,cu.current=[],Ac.clear()}}function Bn(e){ra++;try{e()}finally{if(ra--,ra===0){const t=Ui.values().next().value;t&&OE(t)}}}function eB(e){return typeof e=="function"}class zh{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var s,o;this.listeners.add(r);const i=(o=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:o.call(s,r,this);return()=>{this.listeners.delete(r),i?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):eB(t)?this.state=t(this.prevState):this.state=t,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),OE(this)}}class wr{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,r=new Array(n),s=new Array(n);for(let o=0;o<n;o++){const i=this.options.deps[o];r[o]=i.prevState,s[o]=i.state}return this.lastSeenDepValues=s,{prevDepVals:r,currDepVals:s,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const s=this.getDepVals();this.state=this.options.fn(s),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const o of this.options.deps)o instanceof wr&&o.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let o=0;o<s.length;o++)if(s[o]!==r[o]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const o=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),o?.()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof wr)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof zh){let r=wo.get(n);r||(r=new Set,wo.set(n,r)),r.add(this);let s=ul.get(this);s||(s=new Set,ul.set(this,s)),s.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof wr)this.unregisterFromGraph(n.options.deps);else if(n instanceof zh){const r=wo.get(n);r&&r.delete(this);const s=ul.get(this);s&&s.delete(n)}}}var tB=class{constructor(e,t){this.fn=e,this.options=t,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...n)=>{const r=Date.now()-this.lastExecutionTime;if(this.options.leading&&r>=this.options.wait)this.execute(...n);else if(this.lastArgs=n,!this.timeoutId&&this.options.trailing){const s=this.options.wait-r;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},s)}},this.execute=(...n)=>{this.fn(...n),this.options.onExecute?.(n,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function nB(e,t){return new tB(e,t).maybeExecute}class rB{#n=!0;#t;#e;#f;#r;#a;#s;#c;#d=0;#p=5;#i=!1;#l=!1;#o=null;#h=()=>{this.debugLog("Connected to event bus"),this.#a=!0,this.#i=!1,this.debugLog("Emitting queued events",this.#r),this.#r.forEach(t=>this.emitEventToBus(t)),this.#r=[],this.stopConnectLoop(),this.#e().removeEventListener("tanstack-connect-success",this.#h)};#u=()=>{if(this.#d<this.#p){this.#d++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#e().removeEventListener("tanstack-connect",this.#u),this.#l=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#m=()=>{this.#i||(this.#i=!0,this.#e().addEventListener("tanstack-connect-success",this.#h),this.#u())};constructor({pluginId:t,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=t,this.#n=r,this.#e=this.getGlobalTarget,this.#f=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#r=[],this.#a=!1,this.#l=!1,this.#s=null,this.#c=s}startConnectLoop(){this.#s!==null||this.#a||(this.debugLog(`Starting connect loop (every ${this.#c}ms)`),this.#s=setInterval(this.#u,this.#c))}stopConnectLoop(){this.#i=!1,this.#s!==null&&(clearInterval(this.#s),this.#s=null,this.#r=[],this.debugLog("Stopped connect loop"))}debugLog(...t){this.#f&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...t)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const t=typeof EventTarget<"u"?new EventTarget:void 0;return typeof t>"u"||typeof t.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),t)}getPluginId(){return this.#t}dispatchCustomEventShim(t,n){try{const r=new Event(t,{detail:n});this.#e().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(t,n){try{this.#e().dispatchEvent(new CustomEvent(t,{detail:n}))}catch{this.dispatchCustomEventShim(t,n)}}emitEventToBus(t){this.debugLog("Emitting event to client bus",t),this.dispatchCustomEvent("tanstack-dispatch-event",t)}createEventPayload(t,n){return{type:`${this.#t}:${t}`,payload:n,pluginId:this.#t}}emit(t,n){if(!this.#n){this.debugLog("Event bus client is disabled, not emitting event",t,n);return}if(this.#o&&(this.debugLog("Emitting event to internal event target",t,n),this.#o.dispatchEvent(new CustomEvent(`${this.#t}:${t}`,{detail:this.createEventPayload(t,n)}))),this.#l){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#a){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#r.push(this.createEventPayload(t,n)),typeof CustomEvent<"u"&&!this.#i&&(this.#m(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(t,n))}on(t,n,r){const s=r?.withEventTarget??!1,o=`${this.#t}:${t}`;if(s&&(this.#o||(this.#o=new EventTarget),this.#o.addEventListener(o,a=>{n(a.detail)})),!this.#n)return this.debugLog("Event bus client is disabled, not registering event",o),()=>{};const i=a=>{this.debugLog("Received event from bus",a.detail),n(a.detail)};return this.#e().addEventListener(o,i),this.debugLog("Registered event to bus",o),()=>{s&&this.#o?.removeEventListener(o,i),this.#e().removeEventListener(o,i)}}onAll(t){if(!this.#n)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;t(s)};return this.#e().addEventListener("tanstack-devtools-global",n),()=>this.#e().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(t){if(!this.#n)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||t(s)};return this.#e().addEventListener("tanstack-devtools-global",n),()=>this.#e().removeEventListener("tanstack-devtools-global",n)}}class sB extends rB{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}const gn=new sB;function Of(e,t){return typeof e=="function"?e(t):e}function Pc(e,t){return dg(t).reduce((r,s)=>{if(r===null)return null;if(typeof r<"u")return r[s]},e)}function $c(e,t,n){const r=dg(t);function s(o){if(!r.length)return Of(n,o);const i=r.shift();if(typeof i=="string"||typeof i=="number"&&!Array.isArray(o))return typeof o=="object"?(o===null&&(o={}),{...o,[i]:s(o[i])}):{[i]:s()};if(Array.isArray(o)&&typeof i=="number"){const a=o.slice(0,i);return[...a.length?a:new Array(i),s(o[i]),...o.slice(i+1)]}return[...new Array(i),s()]}return s(e)}function oB(e,t){const n=dg(t);function r(s){if(!s)return;if(n.length===1){const i=n[0];if(Array.isArray(s)&&typeof i=="number")return s.filter((l,u)=>u!==i);const{[i]:a,...c}=s;return c}const o=n.shift();if((typeof o=="string"||typeof o=="number"&&!Array.isArray(s))&&typeof s=="object")return{...s,[o]:r(s[o])};if(typeof o=="number"&&Array.isArray(s)){if(o>=s.length)return s;const i=s.slice(0,o);return[...i.length?i:new Array(o),r(s[o]),...s.slice(o+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(e)}const iB=/^(\d+)$/gm,aB=/\.(\d+)(?=\.)/gm,cB=/^(\d+)\./gm,lB=/\.(\d+$)/gm,uB=/\.{2,}/gm,Uh="__int__",Fc=`${Uh}$1`;function dg(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(iB,Fc).replace(aB,`.${Fc}.`).replace(cB,`${Fc}.`).replace(lB,`.${Fc}`).replace(uB,".").split(".").map(t=>{if(t.startsWith(Uh)){const n=t.substring(Uh.length),r=parseInt(n,10);return String(r)===n?r:n}return t})}function fB(e){return!(Array.isArray(e)&&e.length===0)}function Wh(e,t){const n=r=>r.validators.filter(Boolean).map(s=>({cause:s.cause,validate:s.fn}));return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!1},runValidation:n})}function qh(e,t){const{asyncDebounceMs:n}=t,{onBlurAsyncDebounceMs:r,onChangeAsyncDebounceMs:s,onDynamicAsyncDebounceMs:o}=t.validators||{},i=n??0,a=c=>c.validators.filter(Boolean).map(l=>{const u=l?.cause||e;let f=i;switch(u){case"change":f=s??i;break;case"blur":f=r??i;break;case"dynamic":f=o??i;break;case"submit":f=0;break}return e==="submit"&&(f=0),{cause:u,validate:l.fn,debounceMs:f}});return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!0},runValidation:a})}const Kh=e=>!!e&&typeof e=="object"&&"fields"in e;function Nr(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,o]of e)if(!t.has(s)||!Object.is(o,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!Nr(e[s],t[s]))return!1;return!0}const Qb=({newFormValidatorError:e,isPreviousErrorFromFormValidator:t,previousErrorValue:n})=>e?{newErrorValue:e,newSource:"form"}:t?{newErrorValue:void 0,newSource:void 0}:n?{newErrorValue:n,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},ev=({formLevelError:e,fieldLevelError:t})=>t?{newErrorValue:t,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function Kt(e,t){return e==null?t:{...e,...t}}let fs=256;const fl=[];let Nc;for(;fs--;)fl[fs]=(fs+256).toString(16).substring(1);function CE(){let e=0,t,n="";if(!Nc||fs+16>256){for(Nc=new Array(256),e=256;e--;)Nc[e]=256*Math.random()|0;e=0,fs=0}for(;e<16;e++)t=Nc[fs+e],e===6?n+=fl[t&15|64]:e===8?n+=fl[t&63|128]:n+=fl[t],e&1&&e>1&&e<11&&(n+="-");return fs++,n}const dB=nB(e=>gn.emit("form-state",{id:e.formId,state:e.store.state}),{wait:300}),ao=e=>{if(!e.validators)return e.runValidation({validators:[],form:e.form});const t=e.event.async,n=t?void 0:{fn:e.validators.onMount,cause:"mount"},r={fn:t?e.validators.onChangeAsync:e.validators.onChange,cause:"change"},s={fn:t?e.validators.onBlurAsync:e.validators.onBlur,cause:"blur"},o={fn:t?e.validators.onSubmitAsync:e.validators.onSubmit,cause:"submit"},i=t?void 0:{fn:()=>{},cause:"server"};switch(e.event.type){case"mount":return e.runValidation({validators:[n],form:e.form});case"submit":return e.runValidation({validators:[r,s,o,i],form:e.form});case"server":return e.runValidation({validators:[],form:e.form});case"blur":return e.runValidation({validators:[s,i],form:e.form});case"change":return e.runValidation({validators:[r,i],form:e.form});default:throw new Error(`Unknown validation event type: ${e.event.type}`)}};function hB(e,t){const n=new Map;for(const r of e){const s=r.path??[];let o=t,i="";for(let a=0;a<s.length;a++){const c=s[a];if(c===void 0)continue;const l=typeof c=="object"?c.key:c,u=Number(l);Array.isArray(o)&&!Number.isNaN(u)?i+=`[${u}]`:i+=(a>0?".":"")+String(l),typeof o=="object"&&o!==null?o=o[l]:o=void 0}n.set(i,(n.get(i)??[]).concat(r))}return Object.fromEntries(n)}const tv=(e,t)=>{const n=hB(e,t);return{form:n,fields:n}},So={validate({value:e,validationSource:t},n){const r=n["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return t==="field"?r.issues:tv(r.issues,e)},async validateAsync({value:e,validationSource:t},n){const r=await n["~standard"].validate(e);if(r.issues)return t==="field"?r.issues:tv(r.issues,e)}},IE=e=>!!e&&"~standard"in e,co={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function Lc(e){function t(u,f,h){const d=i(u,f,"move",h),p=Math.min(f,h),m=Math.max(f,h);for(let g=p;g<=m;g++)d.push(o(u,g));const y=Object.keys(e.fieldInfo).reduce((g,b)=>(b.startsWith(o(u,f))&&g.set(b,e.getFieldMeta(b)),g),new Map);c(d,f<h?"up":"down"),Object.keys(e.fieldInfo).filter(g=>g.startsWith(o(u,h))).forEach(g=>{const b=g.replace(o(u,h),o(u,f)),v=y.get(b);v&&e.setFieldMeta(g,v)})}function n(u,f){const h=i(u,f,"remove");c(h,"up")}function r(u,f,h){i(u,f,"swap",h).forEach(p=>{if(!p.toString().startsWith(o(u,f)))return;const m=p.toString().replace(o(u,f),o(u,h)),[y,g]=[e.getFieldMeta(p),e.getFieldMeta(m)];y&&e.setFieldMeta(m,y),g&&e.setFieldMeta(p,g)})}function s(u,f){const h=i(u,f,"insert");c(h,"down"),h.forEach(d=>{d.toString().startsWith(o(u,f))&&e.setFieldMeta(d,l())})}function o(u,f){return`${u}[${f}]`}function i(u,f,h,d){const p=[o(u,f)];switch(h){case"swap":p.push(o(u,d));break;case"move":{const[m,y]=[Math.min(f,d),Math.max(f,d)];for(let g=m;g<=y;g++)p.push(o(u,g));break}default:{const m=e.getFieldValue(u),y=Array.isArray(m)?m.length:0;for(let g=f+1;g<y;g++)p.push(o(u,g));break}}return Object.keys(e.fieldInfo).filter(m=>p.some(y=>m.startsWith(y)))}function a(u,f){return u.replace(/\[(\d+)\]/,(h,d)=>{const p=parseInt(d,10);return`[${f==="up"?p+1:Math.max(0,p-1)}]`})}function c(u,f){(f==="up"?u:[...u].reverse()).forEach(d=>{const p=a(d.toString(),f),m=e.getFieldMeta(p);m?e.setFieldMeta(d,m):e.setFieldMeta(d,l())})}const l=()=>co;return{handleArrayMove:t,handleArrayRemove:n,handleArraySwap:r,handleArrayInsert:s}}function Sd(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class nv{constructor(t){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const n=this.fieldMetaDerived.mount(),r=this.store.mount(),s=this.store.subscribe(()=>{dB(this)}),o=gn.on("request-form-state",u=>{u.payload.id===this._formId&&gn.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),i=gn.on("request-form-reset",u=>{u.payload.id===this._formId&&this.reset()}),a=gn.on("request-form-force-submit",u=>{u.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),c=()=>{a(),i(),o(),s(),n(),r(),gn.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:l}=this.options.validators||{};return gn.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),l&&this.validateSync("mount"),c},this.update=n=>{if(!n)return;const r=this.options;this.options=n;const s=!!n.transform?.deps?.some((a,c)=>a!==this.prevTransformArray[c]),o=n.defaultValues&&!Nr(n.defaultValues,r.defaultValues)&&!this.state.isTouched,i=!Nr(n.defaultState,r.defaultState)&&!this.state.isTouched;!o&&!i&&!s||(Bn(()=>{this.baseStore.setState(()=>Sd(Object.assign({},this.state,i?n.defaultState:{},o?{values:n.defaultValues}:{},s?{_force_re_eval:!this.state._force_re_eval}:{})))}),gn.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(n,r)=>{const{fieldMeta:s}=this.state,o=this.resetFieldMeta(s);n&&!r?.keepDefaultValues&&(this.options={...this.options,defaultValues:n}),this.baseStore.setState(()=>Sd({...this.options.defaultState,values:n??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:o}))},this.validateAllFields=async n=>{const r=[];return Bn(()=>{Object.values(this.fieldInfo).forEach(o=>{if(!o.instance)return;const i=o.instance;r.push(Promise.resolve().then(()=>i.validate(n,{skipFormValidation:!0}))),o.instance.state.meta.isTouched||o.instance.setMeta(a=>({...a,isTouched:!0}))})}),(await Promise.all(r)).flat()},this.validateArrayFieldsStartingFrom=async(n,r,s)=>{const o=this.getFieldValue(n),i=Array.isArray(o)?Math.max(o.length-1,0):null,a=[`${n}[${r}]`];for(let f=r+1;f<=(i??0);f++)a.push(`${n}[${f}]`);const c=Object.keys(this.fieldInfo).filter(f=>a.some(h=>f.startsWith(h))),l=[];return Bn(()=>{c.forEach(f=>{l.push(Promise.resolve().then(()=>this.validateField(f,s)))})}),(await Promise.all(l)).flat()},this.validateField=(n,r)=>{const s=this.fieldInfo[n]?.instance;return s?(s.state.meta.isTouched||s.setMeta(o=>({...o,isTouched:!0})),s.validate(r)):[]},this.validateSync=n=>{const r=Wh(n,{...this.options,form:this,validationLogic:this.options.validationLogic||ao});let s=!1;const o={};return Bn(()=>{for(const c of r){if(!c.validate)continue;const l=this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:u,fieldErrors:f}=dl(l),h=Ei(c.cause),d=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(f||{})]);for(const p of d){if(this.baseStore.state.fieldMetaBase[p]===void 0&&!f?.[p])continue;const m=this.getFieldMeta(p)??co,{errorMap:y,errorSourceMap:g}=m,b=f?.[p],{newErrorValue:v,newSource:S}=Qb({newFormValidatorError:b,isPreviousErrorFromFormValidator:g?.[h]==="form",previousErrorValue:y?.[h]});S==="form"&&(o[p]={...o[p],[h]:b}),y?.[h]!==v&&this.setFieldMeta(p,(_=co)=>({..._,errorMap:{..._.errorMap,[h]:v},errorSourceMap:{..._.errorSourceMap,[h]:S}}))}this.state.errorMap?.[h]!==u&&this.baseStore.setState(p=>({...p,errorMap:{...p.errorMap,[h]:u}})),(u||f)&&(s=!0)}const i=Ei("submit");this.state.errorMap?.[i]&&n!=="submit"&&!s&&this.baseStore.setState(c=>({...c,errorMap:{...c.errorMap,[i]:void 0}}));const a=Ei("server");this.state.errorMap?.[a]&&n!=="server"&&!s&&this.baseStore.setState(c=>({...c,errorMap:{...c.errorMap,[a]:void 0}}))}),{hasErrored:s,fieldsErrorMap:o}},this.validateAsync=async n=>{const r=qh(n,{...this.options,form:this,validationLogic:this.options.validationLogic||ao});this.state.isFormValidating||this.baseStore.setState(c=>({...c,isFormValidating:!0}));const s=[];let o;for(const c of r){if(!c.validate)continue;const l=Ei(c.cause);this.state.validationMetaMap[l]?.lastAbortController.abort();const f=new AbortController;this.state.validationMetaMap[l]={lastAbortController:f},s.push(new Promise(async h=>{let d;try{d=await new Promise((g,b)=>{setTimeout(async()=>{if(f.signal.aborted)return g(void 0);try{g(await this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:f.signal},type:"validateAsync"}))}catch(v){b(v)}},c.debounceMs)})}catch(g){d=g}const{formError:p,fieldErrors:m}=dl(d);m&&(o=o?{...o,...m}:m);const y=Ei(c.cause);for(const g of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[g]===void 0)continue;const b=this.getFieldMeta(g);if(!b)continue;const{errorMap:v,errorSourceMap:S}=b,_=o?.[g],{newErrorValue:k,newSource:I}=Qb({newFormValidatorError:_,isPreviousErrorFromFormValidator:S?.[y]==="form",previousErrorValue:v?.[y]});v?.[y]!==k&&this.setFieldMeta(g,x=>({...x,errorMap:{...x.errorMap,[y]:k},errorSourceMap:{...x.errorSourceMap,[y]:I}}))}this.baseStore.setState(g=>({...g,errorMap:{...g.errorMap,[y]:p}})),h(o?{fieldErrors:o,errorMapKey:y}:void 0)}))}let i=[];const a={};if(s.length){i=await Promise.all(s);for(const c of i)if(c?.fieldErrors){const{errorMapKey:l}=c;for(const[u,f]of Object.entries(c.fieldErrors)){const d={...a[u]||{},[l]:f};a[u]=d}}}return this.baseStore.setState(c=>({...c,isFormValidating:!1})),a},this.validate=n=>{const{hasErrored:r,fieldsErrorMap:s}=this.validateSync(n);return r&&!this.options.asyncAlways?s:this.validateAsync(n)},this._handleSubmit=async n=>{this.baseStore.setState(o=>({...o,isSubmitted:!1,submissionAttempts:o.submissionAttempts+1,isSubmitSuccessful:!1})),Bn(()=>{Object.values(this.fieldInfo).forEach(o=>{o.instance&&(o.instance.state.meta.isTouched||o.instance.setMeta(i=>({...i,isTouched:!0})))})});const r=n??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r});return}this.baseStore.setState(o=>({...o,isSubmitting:!0}));const s=()=>{this.baseStore.setState(o=>({...o,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){s(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),gn.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(o=>o.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){s(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),gn.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}Bn(()=>{Object.values(this.fieldInfo).forEach(o=>{o.instance?.options.listeners?.onSubmit?.({value:o.instance.state.value,fieldApi:o.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:r});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:r}),Bn(()=>{this.baseStore.setState(o=>({...o,isSubmitted:!0,isSubmitSuccessful:!0})),gn.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),s()})}catch(o){throw this.baseStore.setState(i=>({...i,isSubmitSuccessful:!1})),gn.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:o}),s(),o}},this.getFieldValue=n=>Pc(this.state.values,n),this.getFieldMeta=n=>this.state.fieldMeta[n],this.getFieldInfo=n=>this.fieldInfo[n]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(n,r)=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[n]:Of(r,s.fieldMetaBase[n])}}))},this.resetFieldMeta=n=>Object.keys(n).reduce((r,s)=>{const o=s;return r[o]=co,r},{}),this.setFieldValue=(n,r,s)=>{const o=s?.dontUpdateMeta??!1,i=s?.dontRunListeners??!1,a=s?.dontValidate??!1;Bn(()=>{o||this.setFieldMeta(n,c=>({...c,isTouched:!0,isDirty:!0,errorMap:{...c?.errorMap,onMount:void 0}})),this.baseStore.setState(c=>({...c,values:$c(c.values,n,r)}))}),i||this.getFieldInfo(n).instance?.triggerOnChangeListener(),a||this.validateField(n,"change")},this.deleteField=n=>{const s=[...Object.keys(this.fieldInfo).filter(o=>{const i=n.toString();return o!==i&&o.startsWith(i)}),n];this.baseStore.setState(o=>{const i={...o};return s.forEach(a=>{i.values=oB(i.values,a),delete this.fieldInfo[a],delete i.fieldMetaBase[a]}),i})},this.pushFieldValue=(n,r,s)=>{this.setFieldValue(n,o=>[...Array.isArray(o)?o:[],r],s)},this.insertFieldValue=async(n,r,s,o)=>{this.setFieldValue(n,a=>[...a.slice(0,r),s,...a.slice(r)],Kt(o,{dontValidate:!0}));const i=o?.dontValidate??!1;i||await this.validateField(n,"change"),Lc(this).handleArrayInsert(n,r),i||await this.validateArrayFieldsStartingFrom(n,r,"change")},this.replaceFieldValue=async(n,r,s,o)=>{this.setFieldValue(n,a=>a.map((c,l)=>l===r?s:c),Kt(o,{dontValidate:!0})),(o?.dontValidate??!1)||(await this.validateField(n,"change"),await this.validateArrayFieldsStartingFrom(n,r,"change"))},this.removeFieldValue=async(n,r,s)=>{const o=this.getFieldValue(n),i=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(n,c=>c.filter((l,u)=>u!==r),Kt(s,{dontValidate:!0})),Lc(this).handleArrayRemove(n,r),i!==null){const c=`${n}[${i}]`;this.deleteField(c)}(s?.dontValidate??!1)||(await this.validateField(n,"change"),await this.validateArrayFieldsStartingFrom(n,r,"change"))},this.swapFieldValues=(n,r,s,o)=>{this.setFieldValue(n,a=>{const c=a[r],l=a[s];return $c($c(a,`${r}`,l),`${s}`,c)},Kt(o,{dontValidate:!0})),Lc(this).handleArraySwap(n,r,s),(o?.dontValidate??!1)||(this.validateField(n,"change"),this.validateField(`${n}[${r}]`,"change"),this.validateField(`${n}[${s}]`,"change"))},this.moveFieldValues=(n,r,s,o)=>{this.setFieldValue(n,a=>{const c=[...a];return c.splice(s,0,c.splice(r,1)[0]),c},Kt(o,{dontValidate:!0})),Lc(this).handleArrayMove(n,r,s),(o?.dontValidate??!1)||(this.validateField(n,"change"),this.validateField(`${n}[${r}]`,"change"),this.validateField(`${n}[${s}]`,"change"))},this.clearFieldValues=(n,r)=>{const s=this.getFieldValue(n),o=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(n,[],Kt(r,{dontValidate:!0})),o!==null)for(let a=0;a<=o;a++){const c=`${n}[${a}]`;this.deleteField(c)}(r?.dontValidate??!1)||this.validateField(n,"change")},this.resetField=n=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[n]:co},values:this.options.defaultValues?$c(r.values,n,Pc(this.options.defaultValues,n)):r.values}))},this.setErrorMap=n=>{Bn(()=>{Object.entries(n).forEach(([r,s])=>{const o=r;if(Kh(s)){const{formError:i,fieldErrors:a}=dl(s);for(const c of Object.keys(this.fieldInfo))this.getFieldMeta(c)&&this.setFieldMeta(c,u=>({...u,errorMap:{...u.errorMap,[o]:a?.[c]},errorSourceMap:{...u.errorSourceMap,[o]:"form"}}));this.baseStore.setState(c=>({...c,errorMap:{...c.errorMap,[o]:i}}))}else this.baseStore.setState(i=>({...i,errorMap:{...i.errorMap,[o]:s}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((n,[r,s])=>(Object.keys(s).length&&s.errors.length&&(n[r]={errors:s.errors,errorMap:s.errorMap}),n),{})}),this.parseValuesWithSchema=n=>So.validate({value:this.state.values,validationSource:"form"},n),this.parseValuesWithSchemaAsync=n=>So.validateAsync({value:this.state.values,validationSource:"form"},n),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=t?.formId??CE(),this._devtoolsSubmissionOverride=!1,this.baseStore=new zh(Sd({...t?.defaultState,values:t?.defaultValues??t?.defaultState?.values})),this.fieldMetaDerived=new wr({deps:[this.baseStore],fn:({prevDepVals:n,currDepVals:r,prevVal:s})=>{const o=s,i=n?.[0],a=r[0];let c=0;const l={};for(const u of Object.keys(a.fieldMetaBase)){const f=a.fieldMetaBase[u],h=i?.fieldMetaBase[u],d=o?.[u],p=Pc(a.values,u);let m=d?.errors;if(!h||f.errorMap!==h.errorMap){m=Object.values(f.errorMap??{}).filter(S=>S!==void 0);const v=this.getFieldInfo(u)?.instance;v&&!v.options.disableErrorFlat&&(m=m.flat(1))}const y=!fB(m),g=!f.isDirty,b=Nr(p,Pc(this.options.defaultValues,u))||Nr(p,this.getFieldInfo(u)?.instance?.options.defaultValue);if(d&&d.isPristine===g&&d.isValid===y&&d.isDefaultValue===b&&d.errors===m&&f===h){l[u]=d,c++;continue}l[u]={...f,errors:m??[],isPristine:g,isValid:y,isDefaultValue:b}}return Object.keys(a.fieldMetaBase).length&&o&&c===Object.keys(a.fieldMetaBase).length?o:l}}),this.store=new wr({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:n,currDepVals:r,prevVal:s})=>{const o=s,i=n?.[0],a=r[0],c=r[1],l=Object.values(c).filter(Boolean),u=l.some(U=>U.isValidating),f=l.every(U=>U.isValid),h=l.some(U=>U.isTouched),d=l.some(U=>U.isBlurred),p=l.every(U=>U.isDefaultValue),m=h&&a.errorMap?.onMount,y=l.some(U=>U.isDirty),g=!y,b=!!(a.errorMap?.onMount||l.some(U=>U?.errorMap?.onMount)),v=!!u;let S=o?.errors??[];(!i||a.errorMap!==i.errorMap)&&(S=Object.values(a.errorMap).reduce((U,V)=>V===void 0?U:V&&Kh(V)?(U.push(V.form),U):(U.push(V),U),[]));const _=S.length===0,k=f&&_,I=this.options.canSubmitWhenInvalid??!1,x=a.submissionAttempts===0&&!h&&!b||!v&&!a.isSubmitting&&k||I;let R=a.errorMap;if(m&&(S=S.filter(U=>U!==a.errorMap.onMount),R=Object.assign(R,{onMount:void 0})),o&&i&&o.errorMap===R&&o.fieldMeta===this.fieldMetaDerived.state&&o.errors===S&&o.isFieldsValidating===u&&o.isFieldsValid===f&&o.isFormValid===_&&o.isValid===k&&o.canSubmit===x&&o.isTouched===h&&o.isBlurred===d&&o.isPristine===g&&o.isDefaultValue===p&&o.isDirty===y&&Nr(i,a))return o;let T={...a,errorMap:R,fieldMeta:this.fieldMetaDerived.state,errors:S,isFieldsValidating:u,isFieldsValid:f,isFormValid:_,isValid:k,canSubmit:x,isTouched:h,isBlurred:d,isPristine:g,isDefaultValue:p,isDirty:y};const M=this.options.transform?.deps??[];if(M.length!==this.prevTransformArray.length||M.some((U,V)=>U!==this.prevTransformArray[V])){const U=Object.assign({},this,{state:T});this.options.transform?.fn(U),T=U.state,this.prevTransformArray=M}return T}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(t||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(t){return IE(t.validate)?So[t.type](t.value,t.validate):t.validate(t.value)}handleSubmit(t){return this._handleSubmit(t)}}function dl(e){if(e){if(Kh(e)){const t=dl(e.form).formError,n=e.fields;return{formError:t,fieldErrors:n}}return{formError:e}}return{formError:void 0}}function Ei(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}class rv{constructor(t){this.options={},this.mount=()=>{const n=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const r=this.getInfo();r.instance=this,this.update(this.options);const{onMount:s}=this.options.validators||{};if(s){const o=this.runValidator({validate:s,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});o&&this.setMeta(i=>({...i,errorMap:{...i?.errorMap,onMount:o},errorSourceMap:{...i?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),n},this.update=n=>{if(this.options=n,this.name=n.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const r=this.form.getFieldValue(this.name);Nr(r,n.defaultValue)||this.form.setFieldValue(this.name,n.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{this.form.setFieldValue(this.name,n,Kt(r,{dontRunListeners:!0,dontValidate:!0})),r?.dontRunListeners||this.triggerOnChangeListener(),r?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{this.form.pushFieldValue(this.name,n,Kt(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(n,r,s)=>{this.form.insertFieldValue(this.name,n,r,Kt(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(n,r,s)=>{this.form.replaceFieldValue(this.name,n,r,Kt(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(n,r)=>{this.form.removeFieldValue(this.name,n,Kt(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(n,r,s)=>{this.form.swapFieldValues(this.name,n,r,Kt(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(n,r,s)=>{this.form.moveFieldValues(this.name,n,r,Kt(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=n=>{this.form.clearFieldValues(this.name,Kt(n,{dontRunListeners:!0})),n?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),s=[];for(const o of r){if(!o.instance)continue;const{onChangeListenTo:i,onBlurListenTo:a}=o.instance.options.validators||{};n==="change"&&i?.includes(this.name)&&s.push(o.instance),n==="blur"&&a?.includes(this.name)&&s.push(o.instance)}return s},this.validateSync=(n,r)=>{const s=Wh(n,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||ao}),i=this.getLinkedFields(n).reduce((l,u)=>{const f=Wh(n,{...u.options,form:u.form,validationLogic:u.form.options.validationLogic||ao});return f.forEach(h=>{h.field=u}),l.concat(f)},[]);let a=!1;Bn(()=>{const l=(u,f)=>{const h=jc(f.cause),d=f.validate?sv(u.runValidator({validate:f.validate,value:{value:u.store.state.value,validationSource:"field",fieldApi:u},type:"validate"})):void 0,p=r[h],{newErrorValue:m,newSource:y}=ev({formLevelError:p,fieldLevelError:d});u.state.meta.errorMap?.[h]!==m&&u.setMeta(g=>({...g,errorMap:{...g.errorMap,[h]:m},errorSourceMap:{...g.errorSourceMap,[h]:y}})),m&&(a=!0)};for(const u of s)l(this,u);for(const u of i)u.validate&&l(u.field,u)});const c=jc("submit");return this.state.meta.errorMap?.[c]&&n!=="submit"&&!a&&this.setMeta(l=>({...l,errorMap:{...l.errorMap,[c]:void 0},errorSourceMap:{...l.errorSourceMap,[c]:void 0}})),{hasErrored:a}},this.validateAsync=async(n,r)=>{const s=qh(n,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||ao}),o=await r,i=this.getLinkedFields(n),a=i.reduce((d,p)=>{const m=qh(n,{...p.options,form:p.form,validationLogic:p.form.options.validationLogic||ao});return m.forEach(y=>{y.field=p}),d.concat(m)},[]),c=[],l=[],u=s.some(d=>d.validate)||a.some(d=>d.validate);if(u){this.state.meta.isValidating||this.setMeta(d=>({...d,isValidating:!0}));for(const d of i)d.setMeta(p=>({...p,isValidating:!0}))}const f=(d,p,m)=>{const y=jc(p.cause);d.getInfo().validationMetaMap[y]?.lastAbortController.abort();const b=new AbortController;this.getInfo().validationMetaMap[y]={lastAbortController:b},m.push(new Promise(async v=>{let S;try{S=await new Promise((R,T)=>{this.timeoutIds.validations[p.cause]&&clearTimeout(this.timeoutIds.validations[p.cause]),this.timeoutIds.validations[p.cause]=setTimeout(async()=>{if(b.signal.aborted)return R(void 0);try{R(await this.runValidator({validate:p.validate,value:{value:d.store.state.value,fieldApi:d,signal:b.signal,validationSource:"field"},type:"validateAsync"}))}catch(M){T(M)}},p.debounceMs)})}catch(R){S=R}if(b.signal.aborted)return v(void 0);const _=sv(S),k=o[this.name]?.[y],{newErrorValue:I,newSource:x}=ev({formLevelError:k,fieldLevelError:_});d.setMeta(R=>({...R,errorMap:{...R?.errorMap,[y]:I},errorSourceMap:{...R.errorSourceMap,[y]:x}})),v(I)}))};for(const d of s)d.validate&&f(this,d,c);for(const d of a)d.validate&&f(d.field,d,l);let h=[];if((c.length||l.length)&&(h=await Promise.all(c),await Promise.all(l)),u){this.setMeta(d=>({...d,isValidating:!1}));for(const d of i)d.setMeta(p=>({...p,isValidating:!1}))}return h.filter(Boolean)},this.validate=(n,r)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=r?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:o}=this.validateSync(n,s[this.name]??{});if(o&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[jc(n)]?.lastAbortController.abort(),this.state.meta.errors;const i=r?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,i)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(r=>({...r,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=n=>{this.setMeta(r=>({...r,errorMap:{...r.errorMap,...n}}))},this.parseValueWithSchema=n=>So.validate({value:this.state.value,validationSource:"field"},n),this.parseValueWithSchemaAsync=n=>So.validateAsync({value:this.state.value,validationSource:"field"},n),this.triggerOnChangeListener=()=>{const n=this.form.options.listeners?.onChangeDebounceMs;n&&n>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},n)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const r=this.options.listeners?.onChangeDebounceMs;r&&r>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},r)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=t.form,this.name=t.name,this.options=t,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new wr({deps:[this.form.store],fn:({prevVal:n})=>{const r=n,s=this.form.getFieldMeta(this.name)??{...co,...t.defaultMeta};let o=this.form.getFieldValue(this.name);return!s.isTouched&&o===void 0&&this.options.defaultValue!==void 0&&!Nr(o,this.options.defaultValue)&&(o=this.options.defaultValue),r&&r.value===o&&r.meta===s?r:{value:o,meta:s}}})}get state(){return this.store.state}runValidator(t){return IE(t.validate)?So[t.type](t.value,t.validate):t.validate(t.value)}triggerOnBlurListener(){const t=this.form.options.listeners?.onBlurDebounceMs;t&&t>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},t)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const n=this.options.listeners?.onBlurDebounceMs;n&&n>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},n)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function sv(e){if(e)return e}function jc(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}const lu=typeof window<"u"?w.useLayoutEffect:w.useEffect;function pB(e){const[t,n]=w.useState(()=>({form:e.form,name:e.name})),[r,s]=w.useState(()=>new rv({...e}));(t.form!==e.form||t.name!==e.name)&&(s(new rv({...e})),n({form:e.form,name:e.name}));const o=Mr(r.store,e.mode==="array"?d=>Object.keys(d.value??[]).length:d=>d.value),i=Mr(r.store,d=>d.meta.isTouched),a=Mr(r.store,d=>d.meta.isBlurred),c=Mr(r.store,d=>d.meta.isDirty),l=Mr(r.store,d=>d.meta.errorMap),u=Mr(r.store,d=>d.meta.errorSourceMap),f=Mr(r.store,d=>d.meta.isValidating),h=w.useMemo(()=>{const p={...r,get state(){return{value:e.mode==="array"?r.state.value:o,get meta(){return{...r.state.meta,isTouched:i,isBlurred:a,isDirty:c,errorMap:l,errorSourceMap:u,isValidating:f}}}}};return p.Field=TE,p},[r,e.mode,o,i,a,c,l,u,f]);return lu(r.mount,[r]),lu(()=>{r.update(e)}),h}const TE=(({children:e,...t})=>{const n=pB(t),r=w.useMemo(()=>Of(e,n),[e,n]);return E.jsx(E.Fragment,{children:r})});function mB(){return w.useState(()=>CE())[0]}const gB=w.version.split(".")[0]==="17"?mB:w.useId;function yB({form:e,selector:t,children:n}){const r=Mr(e.store,t);return E.jsx(E.Fragment,{children:Of(n,r)})}function bB(e){const t=gB(),[n,r]=w.useState(e?.formId),[s,o]=w.useState(()=>new nv({...e,formId:e?.formId??t}));if(n!==e?.formId){const a=e?.formId??t;o(new nv({...e,formId:a})),r(a)}const i=w.useMemo(()=>{const a={...s,handleSubmit:((...c)=>s._handleSubmit(...c)),get formId(){return s._formId},get state(){return s.store.state}};return a.Field=function(l){return E.jsx(TE,{...l,form:s})},a.Subscribe=function(l){return E.jsx(yB,{form:s,selector:l.selector,children:l.children})},a},[s]);return lu(s.mount,[]),lu(()=>{s.update(e)}),i}function vB(e){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:s,onOpenChangeComplete:o,disablePointerDismissal:i=!1,modal:a=!0,actionsRef:c,handle:l,triggerId:u,defaultTriggerId:f=null}=e,h=Bs(!0),d=!!h,p=an(()=>l?.store??new Gx({open:n??r,activeTriggerId:u!==void 0?u:f,modal:a,disablePointerDismissal:i,nested:d})).current;p.useControlledProp("open",n,r),p.useControlledProp("activeTriggerId",u,f),p.useSyncedValues({disablePointerDismissal:i,nested:d,modal:a}),p.useContextCallback("onOpenChange",s),p.useContextCallback("onOpenChangeComplete",o);const m=p.useState("payload");Hx({store:p,actionsRef:c,parentContext:h?.store.context});const y=w.useMemo(()=>({store:p}),[p]);return E.jsx(lg.Provider,{value:y,children:typeof t=="function"?t({payload:m}):t})}const wB=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 6L6 18M6 6l12 12"})]}),SB=w.forwardRef(wB);function _B(e){const t=de.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(vB,{"data-slot":"dialog",...n}),t[2]=n,t[3]=r):r=t[3],r}function xB(e){const t=de.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(aE,{"data-slot":"dialog-portal",...n}),t[2]=n,t[3]=r):r=t[3],r}function EB(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(Jx,{"data-slot":"dialog-overlay",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function RB(e){const t=de.c(15);let n,r,s,o;t[0]!==e?({className:r,children:n,showCloseButton:o,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o):(n=t[1],r=t[2],s=t[3],o=t[4]);const i=o===void 0?!0:o;let a;t[5]===Symbol.for("react.memo_cache_sentinel")?(a=E.jsx(EB,{}),t[5]=a):a=t[5];let c;t[6]!==r?(c=Ve("bg-background data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 ring-foreground/10 fixed top-1/2 left-1/2 z-50 grid w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2 gap-6 rounded-xl p-6 text-sm ring-1 duration-100 outline-none sm:max-w-md",r),t[6]=r,t[7]=c):c=t[7];let l;t[8]!==i?(l=i&&E.jsxs(ug,{"data-slot":"dialog-close",render:E.jsx(li,{variant:"ghost",className:"absolute top-4 right-4",size:"icon-sm"}),children:[E.jsx(SB,{}),E.jsx("span",{className:"sr-only",children:"Close"})]}),t[8]=i,t[9]=l):l=t[9];let u;return t[10]!==n||t[11]!==s||t[12]!==c||t[13]!==l?(u=E.jsxs(xB,{children:[a,E.jsxs(sE,{"data-slot":"dialog-content",className:c,...s,children:[n,l]})]}),t[10]=n,t[11]=s,t[12]=c,t[13]=l,t[14]=u):u=t[14],u}function kB(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("flex flex-col gap-2",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"dialog-header",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function OB(e){const t=de.c(14);let n,r,s,o;t[0]!==e?({className:r,showCloseButton:o,children:n,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o):(n=t[1],r=t[2],s=t[3],o=t[4]);const i=o===void 0?!1:o;let a;t[5]!==r?(a=Ve("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),t[5]=r,t[6]=a):a=t[6];let c;t[7]!==i?(c=i&&E.jsx(ug,{render:E.jsx(li,{variant:"outline"}),children:"Close"}),t[7]=i,t[8]=c):c=t[8];let l;return t[9]!==n||t[10]!==s||t[11]!==a||t[12]!==c?(l=E.jsxs("div",{"data-slot":"dialog-footer",className:a,...s,children:[n,c]}),t[9]=n,t[10]=s,t[11]=a,t[12]=c,t[13]=l):l=t[13],l}function CB(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("leading-none font-medium",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(cE,{"data-slot":"dialog-title",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}const IB=ak({hint:Ig(),retract:Ig(),version:ck()});function Hh({controlled:e,default:t,name:n,state:r="value"}){const{current:s}=w.useRef(e!==void 0),[o,i]=w.useState(t),a=s?e:o,c=w.useCallback(l=>{s||i(l)},[]);return[a,c]}let ov=(function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({}),iv=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const TB={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},hg={valid(e){return e===null?null:e?{[iv.valid]:""}:{[iv.invalid]:""}}};function ME(e){return w.useMemo(()=>({checked(t){return e.indeterminate?{}:t?{[ov.checked]:""}:{[ov.unchecked]:""}},...hg}),[e.indeterminate])}const MB=w.createContext({invalid:void 0,name:void 0,validityData:{state:TB,errors:[],error:"",value:"",initialValue:null},setValidityData:Ht,disabled:void 0,touched:!1,setTouched:Ht,dirty:!1,setDirty:Ht,filled:!1,setFilled:Ht,focused:!1,setFocused:Ht,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=Ot)=>e,getInputValidationProps:(e=Ot)=>e,inputRef:{current:null},commit:async()=>{}}});function Cf(e=!0){const t=w.useContext(MB);if(t.setValidityData===Ht&&!e)throw new Error(xn(28));return t}const AB=w.createContext({disabled:!1});function PB(){return w.useContext(AB)}function $B(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const FB=w.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:Ht,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function pg(){return w.useContext(FB)}function AE(e){const{enabled:t=!0,value:n,id:r,name:s,controlRef:o,commit:i}=e,{formRef:a}=pg(),{invalid:c,markedDirtyRef:l,validityData:u,setValidityData:f}=Cf(),h=ye(e.getValue);fe(()=>{if(!t)return;let d=n;d===void 0&&(d=h()),u.initialValue===null&&d!==null&&f(p=>({...p,initialValue:d}))},[t,f,n,u.initialValue,h]),fe(()=>{!t||!r||a.current.fields.set(r,{getValue:h,name:s,controlRef:o,validityData:$B(u,c),validate(){let d=n;d===void 0&&(d=h()),l.current=!0,ws.flushSync(()=>i(d))}})},[i,o,t,a,h,r,c,l,s,u,n]),fe(()=>{const d=a.current.fields;return()=>{r&&d.delete(r)}},[a,r])}const NB=w.createContext({controlId:void 0,setControlId:Ht,labelId:void 0,setLabelId:Ht,messageIds:[],setMessageIds:Ht,getDescriptionProps:e=>e});function If(){return w.useContext(NB)}const LB=w.createContext(void 0);function jB(e=!0){const t=w.useContext(LB);if(t===void 0&&!e)throw new Error(xn(3));return t}const PE=w.createContext(void 0);function DB(){const e=w.useContext(PE);if(e===void 0)throw new Error(xn(14));return e}function $E(e,t){const n=w.useRef(e),r=ye(t);fe(()=>{n.current!==e&&r(n.current)},[e,r]),fe(()=>{n.current=e},[e])}const VB="data-parent",BB=w.forwardRef(function(t,n){const{checked:r,className:s,defaultChecked:o=!1,disabled:i=!1,id:a,indeterminate:c=!1,inputRef:l,name:u,onCheckedChange:f,parent:h=!1,readOnly:d=!1,render:p,required:m=!1,uncheckedValue:y,value:g,nativeButton:b=!1,...v}=t,{clearErrors:S}=pg(),{disabled:_,name:k,setDirty:I,setFilled:x,setFocused:R,setTouched:T,state:M,validationMode:B,validityData:U,shouldValidateOnChange:V,validation:$}=Cf(),O=PB(),{labelId:N,controlId:C,setControlId:L,getDescriptionProps:W}=If(),q=jB(),te=q?.parent,K=te&&q.allValues,ne=_||O.disabled||q?.disabled||i,A=k??u,j=g??A,F=iu(),G=iu();let H=C;K?H=h?G:`${te.id}-${j}`:a&&(H=a);let Z={};K&&(h?Z=q.parent.getParentProps():j&&(Z=q.parent.getChildProps(j)));const D=ye(f),{checked:X=r,indeterminate:ee=c,onCheckedChange:Ie,...ce}=Z,Y=q?.value,se=q?.setValue,we=q?.defaultValue,le=w.useRef(null),{getButtonProps:pe,buttonRef:J}=ac({disabled:ne,native:b}),ae=q?.validation??$,[Q,ue]=Hh({controlled:j&&Y&&!h?Y.includes(j):X,default:j&&we&&!h?we.includes(j):o,name:"Checkbox",state:"checked"});fe(()=>{if(L!==Ht)return L(H),()=>{L(void 0)}},[H,q,L,h]),AE({enabled:!q,id:F,commit:ae.commit,value:Q,controlRef:le,name:A,getValue:()=>Q});const re=w.useRef(null),Pe=Is(l,re,ae.inputRef);fe(()=>{re.current&&(re.current.indeterminate=ee,Q&&x(!0))},[Q,ee,x]),$E(Q,()=>{q&&!h||(S(A),x(Q),I(Q!==U.initialValue),V()?ae.commit(Q):ae.commit(Q,!0))});const De=sc({checked:Q,disabled:ne,name:h?void 0:A,id:H??void 0,required:m,ref:Pe,style:xf,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(Be){if(Be.nativeEvent.defaultPrevented)return;const ft=Be.target.checked,Xt=Ue(Sf,Be.nativeEvent);if(Ie?.(ft,Xt),D(ft,Xt),!Xt.isCanceled&&(ue(ft),j&&Y&&se&&!h)){const ar=ft?[...Y,j]:Y.filter(ze=>ze!==j);se(ar,Xt)}},onFocus(){le.current?.focus()}},g!==void 0?{value:(q?Q&&g:g)||""}:Ot,W,q?ae.getValidationProps:ae.getInputValidationProps),Ae=K?!!X:Q,Je=K&&ee||c;w.useEffect(()=>{te&&j&&te.disabledStatesRef.current.set(j,ne)},[te,ne,j]);const He=w.useMemo(()=>({...M,checked:Ae,disabled:ne,readOnly:d,required:m,indeterminate:Je}),[M,Ae,ne,d,m,Je]),ut=ME(He),Ze=wt("span",t,{state:He,ref:[J,le,n,q?.registerControlRef],props:[{id:F,role:"checkbox","aria-checked":ee?"mixed":Q,"aria-readonly":d||void 0,"aria-required":m||void 0,"aria-labelledby":N,[VB]:h?"":void 0,onFocus(){R(!0)},onBlur(){const Be=re.current;Be&&(T(!0),R(!1),B==="onBlur"&&ae.commit(q?Y:Be.checked))},onClick(Be){d||ne||(Be.preventDefault(),re.current?.click())}},W,ae.getValidationProps,v,ce,pe],stateAttributesMapping:ut});return E.jsxs(PE.Provider,{value:He,children:[Ze,!Q&&!q&&A&&!h&&y!==void 0&&E.jsx("input",{type:"hidden",name:A,value:y}),E.jsx("input",{...De})]})}),zB=w.forwardRef(function(t,n){const{render:r,className:s,keepMounted:o=!1,...i}=t,a=DB(),c=a.checked||a.indeterminate,{transitionStatus:l,setMounted:u}=oc(c),f=w.useRef(null),h=w.useMemo(()=>({...a,transitionStatus:l}),[a,l]);Vs({open:c,ref:f,onComplete(){c||u(!1)}});const d=ME(a),p=w.useMemo(()=>({...d,...ic,...hg}),[d]),m=o||c,y=wt("span",t,{enabled:m,ref:[n,f],state:h,stateAttributesMapping:p,props:i});return m?y:null}),UB=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 6L9 17l-5-5"})]}),FE=w.forwardRef(UB);function NE(e){const t=de.c(9);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("border-input dark:bg-input/30 data-checked:bg-primary data-checked:text-primary-foreground dark:data-checked:bg-primary data-checked:border-primary aria-invalid:aria-checked:border-primary aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 peer relative flex size-4 shrink-0 items-center justify-center rounded-[4px] border shadow-xs transition-shadow outline-none group-has-disabled/field:opacity-50 after:absolute after:-inset-x-3 after:-inset-y-2 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-[3px]",n),t[3]=n,t[4]=s):s=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=E.jsx(zB,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none [&>svg]:size-3.5",children:E.jsx(FE,{})}),t[5]=o):o=t[5];let i;return t[6]!==r||t[7]!==s?(i=E.jsx(BB,{"data-slot":"checkbox",className:s,...r,children:o}),t[6]=r,t[7]=s,t[8]=i):i=t[8],i}function WB(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("label",{"data-slot":"label",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function _d(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx("div",{"data-slot":"field-group",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}const qB=lE("data-[invalid=true]:text-destructive gap-3 group/field flex w-full",{variants:{orientation:{vertical:"flex-col [&>*]:w-full [&>.sr-only]:w-auto",horizontal:"flex-row items-center [&>[data-slot=field-label]]:flex-auto has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px",responsive:"flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto @md/field-group:[&>[data-slot=field-label]]:flex-auto @md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"}},defaultVariants:{orientation:"vertical"}});function mg(e){const t=de.c(11);let n,r,s;t[0]!==e?({className:n,orientation:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]);const o=s===void 0?"vertical":s;let i;t[4]!==n||t[5]!==o?(i=Ve(qB({orientation:o}),n),t[4]=n,t[5]=o,t[6]=i):i=t[6];let a;return t[7]!==o||t[8]!==r||t[9]!==i?(a=E.jsx("div",{role:"group","data-slot":"field","data-orientation":o,className:i,...r}),t[7]=o,t[8]=r,t[9]=i,t[10]=a):a=t[10],a}function gg(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("has-data-checked:bg-primary/5 has-data-checked:border-primary dark:has-data-checked:bg-primary/10 group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50 has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-3","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(WB,{"data-slot":"field-label",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function KB(e){const t=w.useRef(!0);t.current&&(t.current=!1,e())}const LE=w.createContext(null),jE=w.createContext(null);function ir(){const e=w.useContext(LE);if(e===null)throw new Error(xn(60));return e}function DE(){const e=w.useContext(jE);if(e===null)throw new Error(xn(61));return e}function HB(e={}){const{id:t,implicit:n=!1,controlRef:r}=e,{controlId:s,setControlId:o}=If(),i=iu(t);return fe(()=>{if(!(!n&&!t||o===Ht)){if(n){const a=r?.current;Ke(a)&&a.closest("label")!=null?o(t??null):o(s??i)}else t&&o(t);return()=>{t&&o(void 0)}}},[t,r,s,o,n,i]),s??i}const GB=(e,t)=>Object.is(e,t);function qo(e,t,n){return e==null||t==null?Object.is(e,t):n(e,t)}function xd(e,t,n){return!e||e.length===0?!1:e.some(r=>r===void 0?!1:qo(r,t,n))}function Gh(e,t,n){return!e||e.length===0?-1:e.findIndex(r=>r===void 0?!1:qo(r,t,n))}function JB(e,t,n){return e.filter(r=>!qo(r,t,n))}function Jh(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function YB(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function Wi(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return Jh(e)}function no(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?Jh(e.value):Jh(e)}function XB(e,t,n){if(n&&e!=null)return n(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(t&&!Array.isArray(t))return t[e]??Wi(e,n);if(Array.isArray(t)){const r=YB(t)?t.flatMap(s=>s.items):t;if(e==null){const s=r.find(o=>o.value==null);return s&&s.label!=null?s.label:Wi(e,n)}if(typeof e!="object"){const s=r.find(o=>o&&o.value===e);return s&&s.label!=null?s.label:Wi(e,n)}if("value"in e){const s=r.find(o=>o&&o.value===e.value);if(s&&s.label!=null)return s.label}}return Wi(e,n)}function ZB(e,t){return!Array.isArray(e)||e.length===0?"":e.map(n=>Wi(n,t)).join(", ")}const ve={id:he(e=>e.id),modal:he(e=>e.modal),multiple:he(e=>e.multiple),items:he(e=>e.items),itemToStringLabel:he(e=>e.itemToStringLabel),itemToStringValue:he(e=>e.itemToStringValue),isItemEqualToValue:he(e=>e.isItemEqualToValue),value:he(e=>e.value),open:he(e=>e.open),mounted:he(e=>e.mounted),forceMount:he(e=>e.forceMount),transitionStatus:he(e=>e.transitionStatus),openMethod:he(e=>e.openMethod),activeIndex:he(e=>e.activeIndex),selectedIndex:he(e=>e.selectedIndex),isActive:he((e,t)=>e.activeIndex===t),isSelected:he((e,t,n)=>{const r=e.isItemEqualToValue,s=e.value;return e.multiple?Array.isArray(s)&&s.some(o=>qo(o,n,r)):e.selectedIndex===t&&e.selectedIndex!==null?!0:qo(s,n,r)}),isSelectedByFocus:he((e,t)=>e.selectedIndex===t),popupProps:he(e=>e.popupProps),triggerProps:he(e=>e.triggerProps),triggerElement:he(e=>e.triggerElement),positionerElement:he(e=>e.positionerElement),listElement:he(e=>e.listElement),scrollUpArrowVisible:he(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:he(e=>e.scrollDownArrowVisible),hasScrollArrows:he(e=>e.hasScrollArrows),serializedValue:he(e=>{const{multiple:t,value:n,itemToStringValue:r}=e;return t&&Array.isArray(n)&&n.length===0?"":no(n,r)})};function QB(e){const{id:t,value:n,defaultValue:r=null,onValueChange:s,open:o,defaultOpen:i=!1,onOpenChange:a,name:c,disabled:l=!1,readOnly:u=!1,required:f=!1,modal:h=!0,actionsRef:d,inputRef:p,onOpenChangeComplete:m,items:y,multiple:g=!1,itemToStringLabel:b,itemToStringValue:v,isItemEqualToValue:S=GB,highlightItemOnHover:_=!0,children:k}=e,{clearErrors:I}=pg(),{setDirty:x,shouldValidateOnChange:R,validityData:T,setFilled:M,name:B,disabled:U,validation:V}=Cf(),{controlId:$}=If(),O=HB({id:t}),N=U||l,C=B??c,[L,W]=Hh({controlled:n,default:g?r??Th:r,name:"Select",state:"value"}),[q,te]=Hh({controlled:o,default:i,name:"Select",state:"open"}),K=w.useRef([]),ne=w.useRef([]),A=w.useRef(null),j=w.useRef(null),F=w.useRef(0),G=w.useRef(null),H=w.useRef([]),Z=w.useRef(!1),D=w.useRef(!1),X=w.useRef(null),ee=w.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),Ie=w.useRef(!1),{mounted:ce,setMounted:Y,transitionStatus:se}=oc(q),{openMethod:we,triggerProps:le,reset:pe}=Kx(q),J=an(()=>new zx({id:O,modal:h,multiple:g,itemToStringLabel:b,itemToStringValue:v,isItemEqualToValue:S,value:L,open:q,mounted:ce,transitionStatus:se,items:y,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,ae=Se(J,ve.activeIndex),Q=Se(J,ve.selectedIndex),ue=Se(J,ve.triggerElement),re=Se(J,ve.positionerElement),Pe=w.useMemo(()=>g&&Array.isArray(L)&&L.length===0?"":no(L,v),[g,L,v]),De=w.useMemo(()=>g&&Array.isArray(L)?L.map(je=>no(je,v)):no(L,v),[g,L,v]),Ae=kt(J.state.triggerElement);AE({id:O,commit:V.commit,value:L,controlRef:Ae,name:C,getValue:()=>De});const Je=w.useRef(L);fe(()=>{L!==Je.current&&J.set("forceMount",!0)},[J,L]),fe(()=>{M(L!==null)},[L,M]),fe(function(){if(q)return;const ht=H.current;if(g){const fn=Array.isArray(L)?L:[];if(fn.length===0){J.set("selectedIndex",null);return}const dn=fn[fn.length-1],Ws=Gh(ht,dn,S);J.set("selectedIndex",Ws===-1?null:Ws);return}const Ln=Gh(ht,L,S);J.set("selectedIndex",Ln===-1?null:Ln)},[g,q,L,H,S,J]),$E(L,()=>{I(C),x(L!==T.initialValue),R()?V.commit(L):V.commit(L,!0)});const He=ye((je,ht)=>{if(a?.(je,ht),!ht.isCanceled&&(te(je),!je&&J.state.activeIndex!==null)){const Ln=K.current[J.state.activeIndex];queueMicrotask(()=>{Ln?.setAttribute("tabindex","-1")})}}),ut=ye(()=>{Y(!1),J.set("activeIndex",null),pe(),m?.(!1)});Vs({enabled:!d,open:q,ref:A,onComplete(){q||ut()}}),w.useImperativeHandle(d,()=>({unmount:ut}),[ut]);const Ze=ye((je,ht)=>{s?.(je,ht),!ht.isCanceled&&W(je)}),Be=ye(()=>{const je=J.state.listElement||A.current;if(!je)return;const ht=je.scrollTop,Ln=je.scrollTop+je.clientHeight,fn=ht>1,dn=Ln<je.scrollHeight-1;J.state.scrollUpArrowVisible!==fn&&J.set("scrollUpArrowVisible",fn),J.state.scrollDownArrowVisible!==dn&&J.set("scrollDownArrowVisible",dn)}),ft=Wx({open:q,onOpenChange:He,elements:{reference:ue,floating:re}}),Xt=H4(ft,{enabled:!u&&!N,event:"mousedown"}),ar=jx(ft,{bubbles:!1}),ze=h6(ft,{enabled:!u&&!N,listRef:K,activeIndex:ae,selectedIndex:Q,disabledIndices:Th,onNavigate(je){je===null&&!q||J.set("activeIndex",je)},focusItemOnHover:!1}),St=g6(ft,{enabled:!u&&!N&&(q||!g),listRef:ne,activeIndex:ae,selectedIndex:Q,onMatch(je){q?J.set("activeIndex",je):Ze(H.current[je],Ue("none"))},onTypingChange(je){Z.current=je}}),{getReferenceProps:It,getFloatingProps:dt,getItemProps:En}=qx([Xt,ar,ze,St]),ln=w.useMemo(()=>sc(It(),le),[It,le]);KB(()=>{J.update({popupProps:dt(),triggerProps:ln})}),fe(()=>{J.update({id:O,modal:h,multiple:g,value:L,open:q,mounted:ce,transitionStatus:se,popupProps:dt(),triggerProps:ln,items:y,itemToStringLabel:b,itemToStringValue:v,isItemEqualToValue:S,openMethod:we})},[J,O,h,g,L,q,ce,se,dt,ln,y,b,v,S,we]);const un=w.useMemo(()=>({store:J,name:C,required:f,disabled:N,readOnly:u,multiple:g,itemToStringLabel:b,itemToStringValue:v,highlightItemOnHover:_,setValue:Ze,setOpen:He,listRef:K,popupRef:A,scrollHandlerRef:j,handleScrollArrowVisibility:Be,scrollArrowsMountedCountRef:F,getItemProps:En,events:ft.context.events,valueRef:G,valuesRef:H,labelsRef:ne,typingRef:Z,selectionRef:ee,selectedItemTextRef:X,validation:V,onOpenChangeComplete:m,keyboardActiveRef:D,alignItemWithTriggerActiveRef:Ie,initialValueRef:Je}),[J,C,f,N,u,g,b,v,_,Ze,He,En,ft.context.events,V,m,Be]),cr=Is(p,V.inputRef),Us=g&&Array.isArray(L)&&L.length>0,di=w.useMemo(()=>!g||!Array.isArray(L)||!C?null:L.map(je=>{const ht=no(je,v);return E.jsx("input",{type:"hidden",name:C,value:ht},ht)}),[g,L,C,v]);return E.jsx(LE.Provider,{value:un,children:E.jsxs(jE.Provider,{value:ft,children:[k,E.jsx("input",{...V.getInputValidationProps({onFocus(){J.state.triggerElement?.focus()},onChange(je){if(je.nativeEvent.defaultPrevented)return;const ht=je.target.value,Ln=Ue(Sf,je.nativeEvent);function fn(){if(g)return;const dn=H.current.find(Ws=>no(Ws,v).toLowerCase()===ht.toLowerCase());dn!=null&&(x(dn!==T.initialValue),Ze(dn,Ln),R()&&V.commit(dn))}J.set("forceMount",!0),queueMicrotask(fn)}}),id:t||$||void 0,name:g?void 0:C,value:Pe,disabled:N,required:f&&!Us,readOnly:u,ref:cr,style:xf,tabIndex:-1,"aria-hidden":!0}),di]})})}function ez(e){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e,"::before"),r=window.getComputedStyle(e,"::after");if(!(n.content!=="none"||r.content!=="none"))return t;const o=parseFloat(n.width)||0,i=parseFloat(n.height)||0,a=parseFloat(r.width)||0,c=parseFloat(r.height)||0,l=Math.max(t.width,o,a),u=Math.max(t.height,i,c),f=l-t.width,h=u-t.height;return{left:t.left-f/2,right:t.right+f/2,top:t.top-h/2,bottom:t.bottom+h/2}}const Dc=2,tz={...I6,...hg,value:()=>null},nz=w.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,...a}=t,{setTouched:c,setFocused:l,validationMode:u,state:f,disabled:h}=Cf(),{labelId:d}=If(),{store:p,setOpen:m,selectionRef:y,validation:g,readOnly:b,alignItemWithTriggerActiveRef:v,disabled:S,keyboardActiveRef:_}=ir(),k=h||S||o,I=Se(p,ve.open),x=Se(p,ve.value),R=Se(p,ve.triggerProps),T=Se(p,ve.positionerElement),M=Se(p,ve.listElement),B=Se(p,ve.serializedValue),U=kt(T),V=w.useRef(null),$=nn(),O=nn(),{getButtonProps:N,buttonRef:C}=ac({disabled:k,native:i}),L=ye(j=>{p.set("triggerElement",j)}),W=Is(n,V,C,L),q=nn(),te=nn();w.useEffect(()=>{if(I)return te.start(200,()=>{y.current.allowUnselectedMouseUp=!0,q.start(200,()=>{y.current.allowSelectedMouseUp=!0})}),()=>{q.clear(),te.clear()};y.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},O.clear()},[I,y,O,q,te]);const K=w.useMemo(()=>M?.id??va(T)?.id,[M,T]),ne=sc(R,{role:"combobox","aria-expanded":I?"true":"false","aria-haspopup":"listbox","aria-controls":I?K:void 0,"aria-labelledby":d,"aria-readonly":b||void 0,tabIndex:k?-1:0,ref:W,onFocus(j){l(!0),I&&v.current&&m(!1,Ue(_f,j.nativeEvent)),$.start(0,()=>{p.set("forceMount",!0)})},onBlur(){c(!0),l(!1),u==="onBlur"&&g.commit(x)},onPointerMove(){_.current=!1},onKeyDown(){_.current=!0},onMouseDown(j){if(I)return;const F=Kr(j.currentTarget);function G(H){if(!V.current)return;const Z=H.target;if(Ge(V.current,Z)||Ge(U.current,Z)||Z===V.current)return;const D=ez(V.current);H.clientX>=D.left-Dc&&H.clientX<=D.right+Dc&&H.clientY>=D.top-Dc&&H.clientY<=D.bottom+Dc||m(!1,Ue(w4,H))}O.start(0,()=>{F.addEventListener("mouseup",G,{once:!0})})}},g.getValidationProps,a,N);ne.role="combobox";const A=w.useMemo(()=>({...f,open:I,disabled:k,value:x,readOnly:b,placeholder:!B}),[f,I,k,x,b,B]);return wt("button",t,{ref:[n,V],state:A,stateAttributesMapping:tz,props:ne})}),rz={value:()=>null},sz=w.forwardRef(function(t,n){const{className:r,render:s,children:o,...i}=t,{store:a,valueRef:c}=ir(),l=Se(a,ve.value),u=Se(a,ve.items),f=Se(a,ve.itemToStringLabel),h=Se(a,ve.serializedValue),d=w.useMemo(()=>({value:l,placeholder:!h}),[l,h]),p=typeof o=="function"?o(l):o??(Array.isArray(l)?ZB(l,f):XB(l,u,f));return wt("span",t,{state:d,ref:[n,c],props:[{children:p},i],stateAttributesMapping:rz})}),oz=w.forwardRef(function(t,n){const{className:r,render:s,...o}=t,{store:i}=ir(),a=Se(i,ve.open),c=w.useMemo(()=>({open:a}),[a]);return wt("span",t,{state:c,ref:n,props:[{"aria-hidden":!0,children:""},o],stateAttributesMapping:C6})}),iz=w.createContext(void 0),az=w.forwardRef(function(t,n){const{store:r}=ir(),s=Se(r,ve.mounted),o=Se(r,ve.forceMount);return s||o?E.jsx(iz.Provider,{value:!0,children:E.jsx(Cx,{ref:n,...t})}):null}),VE=w.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function cz(){return w.useContext(VE)}function lz(e){const{children:t,elementsRef:n,labelsRef:r,onMapChange:s}=e,o=ye(s),i=w.useRef(0),a=an(fz).current,c=an(uz).current,[l,u]=w.useState(0),f=w.useRef(l),h=ye((g,b)=>{c.set(g,b??null),f.current+=1,u(f.current)}),d=ye(g=>{c.delete(g),f.current+=1,u(f.current)}),p=w.useMemo(()=>{const g=new Map;return Array.from(c.keys()).filter(v=>v.isConnected).sort(dz).forEach((v,S)=>{const _=c.get(v)??{};g.set(v,{..._,index:S})}),g},[c,l]);fe(()=>{if(typeof MutationObserver!="function"||p.size===0)return;const g=new MutationObserver(b=>{const v=new Set,S=_=>v.has(_)?v.delete(_):v.add(_);b.forEach(_=>{_.removedNodes.forEach(S),_.addedNodes.forEach(S)}),v.size===0&&(f.current+=1,u(f.current))});return p.forEach((b,v)=>{v.parentElement&&g.observe(v.parentElement,{childList:!0})}),()=>{g.disconnect()}},[p]),fe(()=>{f.current===l&&(n.current.length!==p.size&&(n.current.length=p.size),r&&r.current.length!==p.size&&(r.current.length=p.size),i.current=p.size),o(p)},[o,p,n,r,l]),fe(()=>()=>{n.current=[]},[n]),fe(()=>()=>{r&&(r.current=[])},[r]);const m=ye(g=>(a.add(g),()=>{a.delete(g)}));fe(()=>{a.forEach(g=>g(p))},[a,p]);const y=w.useMemo(()=>({register:h,unregister:d,subscribeMapChange:m,elementsRef:n,labelsRef:r,nextIndexRef:i}),[h,d,m,n,r,i]);return E.jsx(VE.Provider,{value:y,children:t})}function uz(){return new Map}function fz(){return new Set}function dz(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const hz=w.createContext(void 0);function pz(){return w.useContext(hz)?.direction??"ltr"}const mz=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:c}=t,{element:l,padding:u=0,offsetParent:f="real"}=kr(e,t)||{};if(l==null)return{};const h=lx(u),d={x:n,y:r},p=rg(s),m=ng(p),y=await i.getDimensions(l),g=p==="y",b=g?"top":"left",v=g?"bottom":"right",S=g?"clientHeight":"clientWidth",_=o.reference[m]+o.reference[p]-d[p]-o.floating[m],k=d[p]-o.reference[p],I=f==="real"?await i.getOffsetParent?.(l):a.floating;let x=a.floating[S]||o.floating[m];(!x||!await i.isElement?.(I))&&(x=a.floating[S]||o.floating[m]);const R=_/2-k/2,T=x/2-y[m]/2-1,M=Math.min(h[b],T),B=Math.min(h[v],T),U=M,V=x-y[m]-B,$=x/2-y[m]/2+R,O=Ph(U,$,V),N=!c.arrow&&Zr(s)!=null&&$!==O&&o.reference[m]/2-($<U?M:B)-y[m]/2<0,C=N?$<U?$-U:$-V:0;return{[p]:d[p]+C,data:{[p]:O,centerOffset:$-O-C,...N&&{alignmentOffset:C}},reset:N}}}),gz=(e,t)=>({...mz(e),options:[e,t]}),yz={name:"hide",async fn(e){const{width:t,height:n,x:r,y:s}=e.rects.reference,o=t===0&&n===0&&r===0&&s===0;return{data:{referenceHidden:(await P5().fn(e)).data?.referenceHidden||o}}}},bz={sideX:"left",sideY:"top"};function BE(e,t,n){const r=e==="inline-start"||e==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[t]}function av(e,t,n){const{rects:r,placement:s}=e;return{side:BE(t,sn(s),n),align:Zr(s)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function vz(e){const{anchor:t,positionMethod:n="absolute",side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,collisionBoundary:a,collisionPadding:c=5,sticky:l=!1,arrowPadding:u=5,disableAnchorTracking:f=!1,keepMounted:h=!1,floatingRootContext:d,mounted:p,collisionAvoidance:m,shiftCrossAxis:y=!1,nodeId:g,adaptiveOrigin:b,lazyFlip:v=!1,externalTree:S}=e,[_,k]=w.useState(null);!p&&_!==null&&k(null);const I=m.side||"flip",x=m.align||"flip",R=m.fallbackAxisSide||"end",T=typeof t=="function"?t:void 0,M=ye(T),B=T?M:t,U=kt(t),$=pz()==="rtl",O=_||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":$?"left":"right","inline-start":$?"right":"left"}[r],N=o==="center"?O:`${O}-${o}`;let C=c;const L=1,W=r==="bottom"?L:0,q=r==="top"?L:0,te=r==="right"?L:0,K=r==="left"?L:0;typeof C=="number"?C={top:C+W,right:C+K,bottom:C+q,left:C+te}:C&&(C={top:(C.top||0)+W,right:(C.right||0)+K,bottom:(C.bottom||0)+q,left:(C.left||0)+te});const ne={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:C},A=w.useRef(null),j=kt(s),F=kt(i),Z=[C5(ze=>{const St=av(ze,r,$),It=typeof j.current=="function"?j.current(St):j.current,dt=typeof F.current=="function"?F.current(St):F.current;return{mainAxis:It,crossAxis:dt,alignmentAxis:dt}},[typeof s!="function"?s:0,typeof i!="function"?i:0,$,r])],D=x==="none"&&I!=="shift",X=!D&&(l||y||I==="shift"),ee=I==="none"?null:M5({...ne,padding:{top:C.top+L,right:C.right+L,bottom:C.bottom+L,left:C.left+L},mainAxis:!y&&I==="flip",crossAxis:x==="flip"?"alignment":!1,fallbackAxisSideDirection:R}),Ie=D?null:I5(ze=>{const St=Kr(ze.elements.floating).documentElement;return{...ne,rootBoundary:y?{x:0,y:0,width:St.clientWidth,height:St.clientHeight}:void 0,mainAxis:x!=="none",crossAxis:X,limiter:l||y?void 0:T5(It=>{if(!A.current)return{};const{width:dt,height:En}=A.current.getBoundingClientRect(),ln=wn(sn(It.placement)),un=ln==="y"?dt:En,cr=ln==="y"?C.left+C.right:C.top+C.bottom;return{offset:un/2+cr/2}})}},[ne,l,y,C,x]);I==="shift"||x==="shift"||o==="center"?Z.push(Ie,ee):Z.push(ee,Ie),Z.push(A5({...ne,apply({elements:{floating:ze},rects:{reference:St},availableWidth:It,availableHeight:dt}){Object.entries({"--available-width":`${It}px`,"--available-height":`${dt}px`,"--anchor-width":`${St.width}px`,"--anchor-height":`${St.height}px`}).forEach(([En,ln])=>{ze.style.setProperty(En,ln)})}}),gz(()=>({element:A.current||document.createElement("div"),padding:u,offsetParent:"floating"}),[u]),{name:"transformOrigin",fn(ze){const{elements:St,middlewareData:It,placement:dt,rects:En,y:ln}=ze,un=sn(dt),cr=wn(un),Us=A.current,di=It.arrow?.x||0,je=It.arrow?.y||0,ht=Us?.clientWidth||0,Ln=Us?.clientHeight||0,fn=di+ht/2,dn=je+Ln/2,Ws=Math.abs(It.shift?.y||0),Cg=En.reference.height/2,hi=typeof s=="function"?s(av(ze,r,$)):s,ek=Ws>hi,tk={top:`${fn}px calc(100% + ${hi}px)`,bottom:`${fn}px ${-hi}px`,left:`calc(100% + ${hi}px) ${dn}px`,right:`${-hi}px ${dn}px`}[un],nk=`${fn}px ${En.reference.y+Cg-ln}px`;return St.floating.style.setProperty("--transform-origin",X&&cr==="y"&&ek?nk:tk),{}}},yz,b),fe(()=>{!p&&d&&d.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[p,d]);const ce=w.useMemo(()=>({elementResize:!f&&typeof ResizeObserver<"u",layoutShift:!f&&typeof IntersectionObserver<"u"}),[f]),{refs:Y,elements:se,x:we,y:le,middlewareData:pe,update:J,placement:ae,context:Q,isPositioned:ue,floatingStyles:re}=c6({rootContext:d,placement:N,middleware:Z,strategy:n,whileElementsMounted:h?void 0:(...ze)=>Db(...ze,ce),nodeId:g,externalTree:S}),{sideX:Pe,sideY:De}=pe.adaptiveOrigin||bz,Ae=ue?n:"fixed",Je=w.useMemo(()=>b?{position:Ae,[Pe]:we,[De]:le}:{position:Ae,...re},[b,Ae,Pe,we,De,le,re]),He=w.useRef(null);fe(()=>{if(!p)return;const ze=U.current,St=typeof ze=="function"?ze():ze,dt=(cv(St)?St.current:St)||null||null;dt!==He.current&&(Y.setPositionReference(dt),He.current=dt)},[p,Y,B,U]),w.useEffect(()=>{if(!p)return;const ze=U.current;typeof ze!="function"&&cv(ze)&&ze.current!==He.current&&(Y.setPositionReference(ze.current),He.current=ze.current)},[p,Y,B,U]),w.useEffect(()=>{if(h&&p&&se.domReference&&se.floating)return Db(se.domReference,se.floating,J,ce)},[h,p,se,J,ce]);const ut=sn(ae),Ze=BE(r,ut,$),Be=Zr(ae)||"center",ft=!!pe.hide?.referenceHidden;fe(()=>{v&&p&&ue&&k(ut)},[v,p,ue,ut]);const Xt=w.useMemo(()=>({position:"absolute",top:pe.arrow?.y,left:pe.arrow?.x}),[pe.arrow]),ar=pe.arrow?.centerOffset!==0;return w.useMemo(()=>({positionerStyles:Je,arrowStyles:Xt,arrowRef:A,arrowUncentered:ar,side:Ze,align:Be,physicalSide:ut,anchorHidden:ft,refs:Y,context:Q,isPositioned:ue,update:J}),[Je,Xt,A,ar,Ze,Be,ut,ft,Y,Q,ue,J])}function cv(e){return e!=null&&"current"in e}const zE=w.createContext(void 0);function yg(){const e=w.useContext(zE);if(!e)throw new Error(xn(59));return e}function uu(e,t){e&&Object.assign(e.style,t)}const UE={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},wz={position:"fixed"},Sz=w.forwardRef(function(t,n){const{anchor:r,positionMethod:s="absolute",className:o,render:i,side:a="bottom",align:c="center",sideOffset:l=0,alignOffset:u=0,collisionBoundary:f="clipping-ancestors",collisionPadding:h,arrowPadding:d=5,sticky:p=!1,disableAnchorTracking:m,alignItemWithTrigger:y=!0,collisionAvoidance:g=m4,...b}=t,{store:v,listRef:S,labelsRef:_,alignItemWithTriggerActiveRef:k,selectedItemTextRef:I,valuesRef:x,initialValueRef:R,popupRef:T,setValue:M}=ir(),B=DE(),U=Se(v,ve.open),V=Se(v,ve.mounted),$=Se(v,ve.modal),O=Se(v,ve.value),N=Se(v,ve.openMethod),C=Se(v,ve.positionerElement),L=Se(v,ve.triggerElement),W=Se(v,ve.isItemEqualToValue),q=w.useRef(null),te=w.useRef(null),[K,ne]=w.useState(y),A=V&&K&&N!=="touch";!V&&K!==y&&ne(y),fe(()=>{V||(ve.scrollUpArrowVisible(v.state)&&v.set("scrollUpArrowVisible",!1),ve.scrollDownArrowVisible(v.state)&&v.set("scrollDownArrowVisible",!1))},[v,V]),w.useImperativeHandle(k,()=>A),nx((A||$)&&U&&N!=="touch",L);const j=vz({anchor:r,floatingRootContext:B,positionMethod:s,mounted:V,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,disableAnchorTracking:m??A,collisionAvoidance:g,keepMounted:!0}),F=A?"none":j.side,G=A?wz:j.positionerStyles,H=w.useMemo(()=>{const Y={};return U||(Y.pointerEvents="none"),{role:"presentation",hidden:!V,style:{...G,...Y}}},[U,V,G]),Z=w.useMemo(()=>({open:U,side:F,align:j.align,anchorHidden:j.anchorHidden}),[U,F,j.align,j.anchorHidden]),D=ye(Y=>{v.set("positionerElement",Y)}),X=wt("div",t,{ref:[n,D],state:Z,stateAttributesMapping:kf,props:[H,b]}),ee=w.useRef(0),Ie=ye(Y=>{if(Y.size===0&&ee.current===0||x.current.length===0)return;const se=ee.current;if(ee.current=Y.size,Y.size===se)return;const we=Ue(Sf);if(se!==0&&!v.state.multiple&&O!==null&&Gh(x.current,O,W)===-1){const pe=R.current,ae=pe!=null&&xd(x.current,pe,W)?pe:null;M(ae,we),ae===null&&(v.set("selectedIndex",null),I.current=null)}if(se!==0&&v.state.multiple&&Array.isArray(O)){const le=O.filter(pe=>xd(x.current,pe,W));(le.length!==O.length||le.some(pe=>!xd(O,pe,W)))&&(M(le,we),le.length===0&&(v.set("selectedIndex",null),I.current=null))}if(U&&A){v.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const le={height:""};uu(C,le),uu(T.current,le)}}),ce=w.useMemo(()=>({...j,side:F,alignItemWithTriggerActive:A,setControlledAlignItemWithTrigger:ne,scrollUpArrowRef:q,scrollDownArrowRef:te}),[j,F,A,ne]);return E.jsx(lz,{elementsRef:S,labelsRef:_,onMapChange:Ie,children:E.jsxs(zE.Provider,{value:ce,children:[V&&$&&E.jsx(iE,{inert:oE(!U),cutout:L}),X]})})});function WE(e){const t=e.currentTarget.getBoundingClientRect();return t.top+1<=e.clientY&&e.clientY<=t.bottom-1&&t.left+1<=e.clientX&&e.clientX<=t.right-1}const Vc="base-ui-disable-scrollbar",Yh={className:Vc,element:E.jsx("style",{href:Vc,precedence:"base-ui:low",children:`.${Vc}{scrollbar-width:none}.${Vc}::-webkit-scrollbar{display:none}`})},_z=w.createContext(void 0);function xz(e){return w.useContext(_z)}function Ez(e){return e==="starting"?h4:Ot}const Rz={...kf,...ic},kz=w.forwardRef(function(t,n){const{render:r,className:s,...o}=t,{store:i,popupRef:a,onOpenChangeComplete:c,setOpen:l,valueRef:u,selectedItemTextRef:f,keyboardActiveRef:h,multiple:d,handleScrollArrowVisibility:p,scrollHandlerRef:m}=ir(),{side:y,align:g,alignItemWithTriggerActive:b,setControlledAlignItemWithTrigger:v,scrollDownArrowRef:S,scrollUpArrowRef:_}=yg(),k=xz()!=null,I=DE(),x=nn(),R=Se(i,ve.id),T=Se(i,ve.open),M=Se(i,ve.mounted),B=Se(i,ve.popupProps),U=Se(i,ve.transitionStatus),V=Se(i,ve.triggerElement),$=Se(i,ve.positionerElement),O=Se(i,ve.listElement),N=w.useRef(0),C=w.useRef(!1),L=w.useRef(0),W=w.useRef(!1),q=w.useRef({}),te=yf(),K=ye(F=>{if(!$||!a.current||!W.current)return;if(C.current||!b){p();return}const G=$.style.top==="0px",H=$.style.bottom==="0px",Z=$.getBoundingClientRect().height,D=Kr($),X=getComputedStyle($),ee=parseFloat(X.marginTop),Ie=parseFloat(X.marginBottom),ce=D.documentElement.clientHeight-ee-Ie,Y=F.scrollTop,se=F.scrollHeight,we=F.clientHeight,le=se-we;let pe=null,J=null,ae=!1;if(G){const Q=le-Y,ue=Z+Q,re=Math.min(ue,ce);pe=re,re!==ce?J=le:ae=!0}else if(H){const Q=Y-0,ue=Z+Q,re=Math.min(ue,ce),Pe=ue-ce;pe=re,re!==ce?J=0:(ae=!0,Y<le&&(J=Y-(Q-Pe)))}pe!=null&&($.style.height=`${pe}px`),J!=null&&(F.scrollTop=J),ae&&(C.current=!0),p()});w.useImperativeHandle(m,()=>K,[K]),Vs({open:T,ref:a,onComplete(){T&&c?.(!0)}});const ne=w.useMemo(()=>({open:T,transitionStatus:U,side:y,align:g}),[T,U,y,g]);fe(()=>{!$||!a.current||Object.keys(q.current).length||(q.current={top:$.style.top||"0",left:$.style.left||"0",right:$.style.right,height:$.style.height,bottom:$.style.bottom,minHeight:$.style.minHeight,maxHeight:$.style.maxHeight,marginTop:$.style.marginTop,marginBottom:$.style.marginBottom})},[a,$]),fe(()=>{M||b||(W.current=!1,C.current=!1,N.current=0,L.current=0,uu($,q.current))},[M,b,$,a]),fe(()=>{const F=a.current;if(!(!M||!V||!$||!F)){if(!b){W.current=!0,te.request(p);return}queueMicrotask(()=>{const G=getComputedStyle($),H=getComputedStyle(F),Z=Kr(V),D=vt($),X=V.getBoundingClientRect(),ee=$.getBoundingClientRect(),Ie=X.left,ce=X.height,Y=O||F,se=Y.scrollHeight,we=parseFloat(H.borderBottomWidth),le=parseFloat(G.marginTop)||10,pe=parseFloat(G.marginBottom)||10,J=parseFloat(G.minHeight)||100,ae=5,Q=5,ue=20,re=Z.documentElement.clientHeight-le-pe,Pe=Z.documentElement.clientWidth,De=re-X.bottom+ce,Ae=f.current,Je=u.current;let He=0,ut=0;if(Ae&&Je){const un=Je.getBoundingClientRect(),cr=Ae.getBoundingClientRect(),Us=un.left-Ie,di=cr.left-ee.left,je=un.top-X.top+un.height/2,ht=cr.top-ee.top+cr.height/2;He=Us-di,ut=ht-je}const Ze=De+ut+pe+we;let Be=Math.min(re,Ze);const ft=re-le-pe,Xt=Ze-Be,ar=Math.max(ae,Ie+He),ze=Pe-Q,St=Math.max(0,ar+ee.width-ze);$.style.left=`${ar-St}px`,$.style.height=`${Be}px`,$.style.maxHeight="auto",$.style.marginTop=`${le}px`,$.style.marginBottom=`${pe}px`,F.style.height="100%";const It=Y.scrollHeight-Y.clientHeight,dt=Xt>=It;dt&&(Be=Math.min(re,ee.height)-(Xt-It));const En=X.top<ue||X.bottom>re-ue||Be<Math.min(se,J),ln=(D.visualViewport?.scale??1)!==1&&ex;if(En||ln){W.current=!0,uu($,q.current),ws.flushSync(()=>v(!1));return}if(dt){const un=Math.max(0,re-Ze);$.style.top=ee.height>=ft?"0":`${un}px`,$.style.height=`${Be}px`,Y.scrollTop=Y.scrollHeight-Y.clientHeight,N.current=Math.max(J,Be)}else $.style.bottom="0",N.current=Math.max(J,Be),Y.scrollTop=Xt;N.current===re&&(C.current=!0),p(),setTimeout(()=>{W.current=!0})})}},[i,M,$,V,u,f,a,p,b,v,te,S,_,O]),w.useEffect(()=>{if(!b||!$||!M)return;const F=vt($);function G(H){l(!1,Ue(_4,H))}return F.addEventListener("resize",G),()=>{F.removeEventListener("resize",G)}},[l,b,$,M]);const A={...O?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":d||void 0,id:`${R}-list`},onKeyDown(F){h.current=!0,k&&rE.has(F.key)&&F.stopPropagation()},onMouseMove(){h.current=!1},onPointerLeave(F){if(WE(F)||F.pointerType==="touch")return;const G=F.currentTarget;x.start(0,()=>{i.set("activeIndex",null),G.focus({preventScroll:!0})})},onScroll(F){O||m.current?.(F.currentTarget)},...b&&{style:O?{height:"100%"}:UE}},j=wt("div",t,{ref:[n,a],state:ne,stateAttributesMapping:Rz,props:[B,A,Ez(U),{className:!O&&b?Yh.className:void 0},o]});return E.jsxs(w.Fragment,{children:[Yh.element,E.jsx(Ix,{context:I,modal:!1,disabled:!M,restoreFocus:!0,children:j})]})}),Oz=w.forwardRef(function(t,n){const{className:r,render:s,...o}=t,{store:i,scrollHandlerRef:a}=ir(),{alignItemWithTriggerActive:c}=yg(),l=Se(i,ve.hasScrollArrows),u=Se(i,ve.openMethod),f=Se(i,ve.multiple),d={id:`${Se(i,ve.id)}-list`,role:"listbox","aria-multiselectable":f||void 0,onScroll(m){a.current?.(m.currentTarget)},...c&&{style:UE},className:l&&u!=="touch"?Yh.className:void 0},p=ye(m=>{i.set("listElement",m)});return wt("div",t,{ref:[n,p],props:[d,o]})});let qE=(function(e){return e[e.None=0]="None",e[e.GuessFromOrder=1]="GuessFromOrder",e})({});function Cz(e={}){const{label:t,metadata:n,textRef:r,indexGuessBehavior:s,index:o}=e,{register:i,unregister:a,subscribeMapChange:c,elementsRef:l,labelsRef:u,nextIndexRef:f}=cz(),h=w.useRef(-1),[d,p]=w.useState(o??(s===qE.GuessFromOrder?()=>{if(h.current===-1){const g=f.current;f.current+=1,h.current=g}return h.current}:-1)),m=w.useRef(null),y=w.useCallback(g=>{if(m.current=g,d!==-1&&g!==null&&(l.current[d]=g,u)){const b=t!==void 0;u.current[d]=b?t:r?.current?.textContent??g.textContent}},[d,l,u,t,r]);return fe(()=>{if(o!=null)return;const g=m.current;if(g)return i(g,n),()=>{a(g)}},[o,i,a,n]),fe(()=>{if(o==null)return c(g=>{const b=m.current?g.get(m.current)?.index:null;b!=null&&p(b)})},[o,c,p]),w.useMemo(()=>({ref:y,index:d}),[d,y])}const KE=w.createContext(void 0);function bg(){const e=w.useContext(KE);if(!e)throw new Error(xn(57));return e}const Iz=w.memo(w.forwardRef(function(t,n){const{render:r,className:s,value:o=null,label:i,disabled:a=!1,nativeButton:c=!1,...l}=t,u=w.useRef(null),f=Cz({label:i,textRef:u,indexGuessBehavior:qE.GuessFromOrder}),{store:h,getItemProps:d,setOpen:p,setValue:m,selectionRef:y,typingRef:g,valuesRef:b,keyboardActiveRef:v,multiple:S,highlightItemOnHover:_}=ir(),k=nn(),I=Se(h,ve.isActive,f.index),x=Se(h,ve.isSelected,f.index,o),R=Se(h,ve.isSelectedByFocus,f.index),T=Se(h,ve.isItemEqualToValue),M=f.index,B=M!==-1,U=w.useRef(null),V=kt(M);fe(()=>{if(!B)return;const j=b.current;return j[M]=o,()=>{delete j[M]}},[B,M,o,b]),fe(()=>{if(!B)return;const j=h.state.value;let F=j;S&&Array.isArray(j)&&j.length>0&&(F=j[j.length-1]),F!==void 0&&qo(F,o,T)&&h.set("selectedIndex",M)},[B,M,S,T,h,o]);const $=w.useMemo(()=>({disabled:a,selected:x,highlighted:I}),[a,x,I]),O=d({active:I,selected:x});O.onFocus=void 0,O.id=void 0;const N=w.useRef(null),C=w.useRef("mouse"),L=w.useRef(!1),{getButtonProps:W,buttonRef:q}=ac({disabled:a,focusableWhenDisabled:!0,native:c});function te(j){const F=h.state.value;if(S){const G=Array.isArray(F)?F:[],H=x?JB(G,o,T):[...G,o];m(H,Ue(fd,j))}else m(o,Ue(fd,j)),p(!1,Ue(fd,j))}const K={role:"option","aria-selected":x,"aria-disabled":a||void 0,tabIndex:I?0:-1,onFocus(){h.set("activeIndex",M)},onMouseEnter(){!v.current&&h.state.selectedIndex===null&&h.set("activeIndex",M)},onMouseMove(){_&&h.set("activeIndex",M)},onMouseLeave(j){!_||v.current||WE(j)||k.start(0,()=>{h.state.activeIndex===M&&h.set("activeIndex",null)})},onTouchStart(){y.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(j){N.current=j.key,h.set("activeIndex",M)},onClick(j){L.current=!1,!(j.type==="keydown"&&N.current===null)&&(a||N.current===" "&&g.current||C.current!=="touch"&&!I||(N.current=null,te(j.nativeEvent)))},onPointerEnter(j){C.current=j.pointerType},onPointerDown(j){C.current=j.pointerType,L.current=!0},onMouseUp(j){if(a)return;if(L.current){L.current=!1;return}const F=!y.current.allowSelectedMouseUp&&x,G=!y.current.allowUnselectedMouseUp&&!x;F||G||C.current!=="touch"&&!I||te(j.nativeEvent)}},ne=wt("div",t,{ref:[q,n,f.ref,U],state:$,props:[O,K,l,W]}),A=w.useMemo(()=>({selected:x,indexRef:V,textRef:u,selectedByFocus:R,hasRegistered:B}),[x,V,u,R,B]);return E.jsx(KE.Provider,{value:A,children:ne})})),Tz=w.forwardRef(function(t,n){const r=t.keepMounted??!1,{selected:s}=bg();return r||s?E.jsx(Mz,{...t,ref:n}):null}),Mz=w.memo(w.forwardRef((e,t)=>{const{render:n,className:r,keepMounted:s,...o}=e,{selected:i}=bg(),a=w.useRef(null),{transitionStatus:c,setMounted:l}=oc(i),u=w.useMemo(()=>({selected:i,transitionStatus:c}),[i,c]),f=wt("span",e,{ref:[t,a],state:u,props:[{"aria-hidden":!0,children:""},o],stateAttributesMapping:ic});return Vs({open:i,ref:a,onComplete(){i||l(!1)}}),f})),Az=w.memo(w.forwardRef(function(t,n){const{indexRef:r,textRef:s,selectedByFocus:o,hasRegistered:i}=bg(),{selectedItemTextRef:a}=ir(),{className:c,render:l,...u}=t,f=w.useCallback(d=>{if(!d||!i)return;const p=a.current===null||!a.current.isConnected;(o||p&&r.current===0)&&(a.current=d)},[a,r,o,i]);return wt("div",t,{ref:[f,n,s],props:u})})),HE=w.forwardRef(function(t,n){const{render:r,className:s,direction:o,keepMounted:i=!1,...a}=t,{store:c,popupRef:l,listRef:u,handleScrollArrowVisibility:f,scrollArrowsMountedCountRef:h}=ir(),{side:d,scrollDownArrowRef:p,scrollUpArrowRef:m}=yg(),y=o==="up"?ve.scrollUpArrowVisible:ve.scrollDownArrowVisible,g=Se(c,y),b=Se(c,ve.openMethod),v=g&&b!=="touch",S=nn(),_=o==="up"?m:p,{transitionStatus:k,setMounted:I}=oc(v);fe(()=>(h.current+=1,c.state.hasScrollArrows||c.set("hasScrollArrows",!0),()=>{h.current=Math.max(0,h.current-1),h.current===0&&c.state.hasScrollArrows&&c.set("hasScrollArrows",!1)}),[c,h]),Vs({open:v,ref:_,onComplete(){v||I(!1)}});const x=w.useMemo(()=>({direction:o,visible:v,side:d,transitionStatus:k}),[o,v,d,k]),T=wt("div",t,{ref:[n,_],state:x,props:[{"aria-hidden":!0,children:o==="up"?"":"",style:{position:"absolute"},onMouseMove(B){if(B.movementX===0&&B.movementY===0||S.isStarted())return;c.set("activeIndex",null);function U(){const V=c.state.listElement??l.current;if(!V)return;c.set("activeIndex",null),f();const $=V.scrollTop===0,O=Math.round(V.scrollTop+V.clientHeight)>=V.scrollHeight;if(u.current.length===0&&(o==="up"?c.set("scrollUpArrowVisible",!$):c.set("scrollDownArrowVisible",!O)),o==="up"&&$||o==="down"&&O){S.clear();return}if((c.state.listElement||l.current)&&u.current&&u.current.length>0){const C=u.current,L=_.current?.offsetHeight||0;if(o==="up"){let W=0;const q=V.scrollTop+L;for(let K=0;K<C.length;K+=1){const ne=C[K];if(ne&&ne.offsetTop>=q){W=K;break}}const te=Math.max(0,W-1);if(te<W){const K=C[te];K&&(V.scrollTop=Math.max(0,K.offsetTop-L))}else V.scrollTop=0}else{let W=C.length-1;const q=V.scrollTop+V.clientHeight-L;for(let K=0;K<C.length;K+=1){const ne=C[K];if(ne&&ne.offsetTop+ne.offsetHeight>q){W=Math.max(0,K-1);break}}const te=Math.min(C.length-1,W+1);if(te>W){const K=C[te];K&&(V.scrollTop=K.offsetTop+K.offsetHeight-V.clientHeight+L)}else V.scrollTop=V.scrollHeight-V.clientHeight}}S.start(40,U)}S.start(40,U)},onMouseLeave(){S.clear()}},a]});return v||i?T:null}),Pz=w.forwardRef(function(t,n){return E.jsx(HE,{...t,ref:n,direction:"down"})}),$z=w.forwardRef(function(t,n){return E.jsx(HE,{...t,ref:n,direction:"up"})}),Fz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m6 9l6 6l6-6"})]}),GE=w.forwardRef(Fz),Nz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15l-6-6l-6 6"})]}),Lz=w.forwardRef(Nz),JE=QB;function YE(e){const t=de.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("flex flex-1 text-left",n),t[3]=n,t[4]=s):s=t[4];let o;return t[5]!==r||t[6]!==s?(o=E.jsx(sz,{"data-slot":"select-value",className:s,...r}),t[5]=r,t[6]=s,t[7]=o):o=t[7],o}function XE(e){const t=de.c(13);let n,r,s,o;t[0]!==e?({className:r,size:o,children:n,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o):(n=t[1],r=t[2],s=t[3],o=t[4]);const i=o===void 0?"default":o;let a;t[5]!==r?(a=Ve("border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 flex w-fit items-center justify-between gap-1.5 rounded-md border bg-transparent py-2 pr-2 pl-2.5 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-[3px] data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-1.5 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),t[5]=r,t[6]=a):a=t[6];let c;t[7]===Symbol.for("react.memo_cache_sentinel")?(c=E.jsx(oz,{render:E.jsx(GE,{className:"text-muted-foreground pointer-events-none size-4"})}),t[7]=c):c=t[7];let l;return t[8]!==n||t[9]!==s||t[10]!==i||t[11]!==a?(l=E.jsxs(nz,{"data-slot":"select-trigger","data-size":i,className:a,...s,children:[n,c]}),t[8]=n,t[9]=s,t[10]=i,t[11]=a,t[12]=l):l=t[12],l}function ZE(e){const t=de.c(26);let n,r,s,o,i,a,c,l;t[0]!==e?({className:r,children:n,side:o,sideOffset:i,align:a,alignOffset:c,alignItemWithTrigger:l,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o,t[5]=i,t[6]=a,t[7]=c,t[8]=l):(n=t[1],r=t[2],s=t[3],o=t[4],i=t[5],a=t[6],c=t[7],l=t[8]);const u=o===void 0?"bottom":o,f=i===void 0?4:i,h=a===void 0?"center":a,d=c===void 0?0:c,p=l===void 0?!0:l;let m;t[9]!==r?(m=Ve("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 relative isolate z-50 max-h-(--available-height) w-(--anchor-width) min-w-36 origin-(--transform-origin) overflow-x-hidden overflow-y-auto rounded-md shadow-md ring-1 duration-100",r),t[9]=r,t[10]=m):m=t[10];let y;t[11]===Symbol.for("react.memo_cache_sentinel")?(y=E.jsx(jz,{}),t[11]=y):y=t[11];let g;t[12]!==n?(g=E.jsx(Oz,{children:n}),t[12]=n,t[13]=g):g=t[13];let b;t[14]===Symbol.for("react.memo_cache_sentinel")?(b=E.jsx(Dz,{}),t[14]=b):b=t[14];let v;t[15]!==s||t[16]!==m||t[17]!==g?(v=E.jsxs(kz,{"data-slot":"select-content",className:m,...s,children:[y,g,b]}),t[15]=s,t[16]=m,t[17]=g,t[18]=v):v=t[18];let S;return t[19]!==h||t[20]!==p||t[21]!==d||t[22]!==u||t[23]!==f||t[24]!==v?(S=E.jsx(az,{children:E.jsx(Sz,{side:u,sideOffset:f,align:h,alignOffset:d,alignItemWithTrigger:p,className:"isolate z-50",children:v})}),t[19]=h,t[20]=p,t[21]=d,t[22]=u,t[23]=f,t[24]=v,t[25]=S):S=t[25],S}function QE(e){const t=de.c(13);let n,r,s;t[0]!==e?({className:r,children:n,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]);let o;t[4]!==r?(o=Ve("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),t[4]=r,t[5]=o):o=t[5];let i;t[6]!==n?(i=E.jsx(Az,{className:"flex flex-1 shrink-0 gap-2 whitespace-nowrap",children:n}),t[6]=n,t[7]=i):i=t[7];let a;t[8]===Symbol.for("react.memo_cache_sentinel")?(a=E.jsx(Tz,{render:E.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:E.jsx(FE,{className:"pointer-events-none"})}),t[8]=a):a=t[8];let c;return t[9]!==s||t[10]!==o||t[11]!==i?(c=E.jsxs(Iz,{"data-slot":"select-item",className:o,...s,children:[i,a]}),t[9]=s,t[10]=o,t[11]=i,t[12]=c):c=t[12],c}function jz(e){const t=de.c(9);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("bg-popover top-0 z-10 flex w-full cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",n),t[3]=n,t[4]=s):s=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=E.jsx(Lz,{}),t[5]=o):o=t[5];let i;return t[6]!==r||t[7]!==s?(i=E.jsx($z,{"data-slot":"select-scroll-up-button",className:s,...r,children:o}),t[6]=r,t[7]=s,t[8]=i):i=t[8],i}function Dz(e){const t=de.c(9);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let s;t[3]!==n?(s=Ve("bg-popover bottom-0 z-10 flex w-full cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",n),t[3]=n,t[4]=s):s=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=E.jsx(GE,{}),t[5]=o):o=t[5];let i;return t[6]!==r||t[7]!==s?(i=E.jsx(Pz,{"data-slot":"select-scroll-down-button",className:s,...r,children:o}),t[6]=r,t[7]=s,t[8]=i):i=t[8],i}const Vz=[["v1","V1"],["v2","V2"],["v3","V3 (V2 + min-max)"],["v3OverviewBoost","V4.5 (V2 + min-max * overview boost)"],["v3IteratedOverview","V4.4 (V2 + min-max * 3 * overview boost)"],["v3OverviewIterated","V4.3 (V2 + min-max * 3 + overview boost)"],["v3OverviewLatestIterated","V4.2 (V2 + min-max * 3 + overview boost applied latest)"],["v3OverviewLatest","V4.1 (V2 + min-max + overview boost applied latest)"],["v3Overview","V4 (V2 + min-max + overview boost)"],["v2Overview","V2 + overview"],["v1MinMax","V1 + min-max"],["v1Overview","V1 + min-max + overview"]];function Bz(e){const t=de.c(31),{isOpen:n,onClose:r,onHintChange:s,onRetractChange:o,onVersionChange:i}=e;let a;t[0]!==r?(a=k=>{k||r()},t[0]=r,t[1]=a):a=t[1];const c=a;let l,u;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={hint:!1,retract:!1,version:"v3Overview"},u={onChange:IB},t[2]=l,t[3]=u):(l=t[2],u=t[3]);let f;t[4]!==s||t[5]!==o||t[6]!==i?(f={defaultValues:l,validators:u,listeners:{onChange:k=>{const{formApi:I}=k,{hint:x,retract:R,version:T}=I.state.values;s(x),o(R),i(T)}}},t[4]=s,t[5]=o,t[6]=i,t[7]=f):f=t[7];const h=bB(f);let d;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=E.jsx(kB,{children:E.jsx(CB,{children:LD()})}),t[8]=d):d=t[8];let p;t[9]!==h?(p=k=>{k.preventDefault(),h.handleSubmit()},t[9]=h,t[10]=p):p=t[10];let m;t[11]!==h.Field?(m=E.jsx(_d,{children:E.jsx(h.Field,{name:"hint",children:qz})}),t[11]=h.Field,t[12]=m):m=t[12];let y;t[13]!==h.Field?(y=E.jsx(_d,{children:E.jsx(h.Field,{name:"retract",children:Wz})}),t[13]=h.Field,t[14]=y):y=t[14];let g;t[15]!==h.Field?(g=E.jsx(_d,{children:E.jsx(h.Field,{name:"version",children:zz})}),t[15]=h.Field,t[16]=g):g=t[16];let b;t[17]!==r?(b=E.jsx(OB,{children:E.jsx(li,{onClick:r,children:"OK"})}),t[17]=r,t[18]=b):b=t[18];let v;t[19]!==b||t[20]!==m||t[21]!==y||t[22]!==g?(v=E.jsxs("div",{className:"flex flex-col gap-2",children:[m,y,g,b]}),t[19]=b,t[20]=m,t[21]=y,t[22]=g,t[23]=v):v=t[23];let S;t[24]!==v||t[25]!==p?(S=E.jsxs(RB,{children:[d,E.jsx("form",{onSubmit:p,children:v})]}),t[24]=v,t[25]=p,t[26]=S):S=t[26];let _;return t[27]!==n||t[28]!==c||t[29]!==S?(_=E.jsx(_B,{open:n,onOpenChange:c,children:S}),t[27]=n,t[28]=c,t[29]=S,t[30]=_):_=t[30],_}function zz(e){const t=e.state.meta.isTouched&&!e.state.meta.isValid;return E.jsxs(mg,{"data-invalid":t,children:[E.jsx(gg,{htmlFor:e.name,children:dD()}),E.jsxs(JE,{name:e.name,defaultValue:"v3Overview",value:e.state.value,onValueChange:e.handleChange,children:[E.jsx(XE,{children:E.jsx(YE,{})}),E.jsx(ZE,{children:Vz.map(Uz)})]})]})}function Uz(e){const[t,n]=e;return E.jsx(QE,{value:t,children:n},t)}function Wz(e){const t=e.state.meta.isTouched&&!e.state.meta.isValid;return E.jsxs(mg,{orientation:"horizontal","data-invalid":t,children:[E.jsx(NE,{id:e.name,name:e.name,checked:e.state.value,onBlur:e.handleBlur,onCheckedChange:n=>e.handleChange(n===!0)}),E.jsx("div",{className:"leading-none",children:E.jsx(gg,{htmlFor:e.name,children:lD()})})]})}function qz(e){const t=e.state.meta.isTouched&&!e.state.meta.isValid;return E.jsxs(mg,{orientation:"horizontal","data-invalid":t,children:[E.jsx(NE,{id:e.name,name:e.name,checked:e.state.value,onBlur:e.handleBlur,onCheckedChange:n=>e.handleChange(n===!0)}),E.jsx("div",{className:"leading-none",children:E.jsx(gg,{htmlFor:e.name,children:iD()})})]})}function Kz(e){const t=de.c(5),n=qc(C1),r=qc(I1),s=qc(O1);let o;return t[0]!==e||t[1]!==s||t[2]!==r||t[3]!==n?(o=E.jsx(Bz,{...e,onHintChange:n,onRetractChange:r,onVersionChange:s}),t[0]=e,t[1]=s,t[2]=r,t[3]=n,t[4]=o):o=t[4],o}const Hz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"m487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14c-11.1-35.6-30-67.8-54.7-94.6c-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7c-36.7-8.2-74.3-7.8-109.2 0c-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3c-24.7 26.7-43.6 58.9-54.7 94.6c-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14c11.1 35.6 30 67.8 54.7 94.6c3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7c36.7 8.2 74.3 7.8 109.2 0c5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3c24.7-26.7 43.6-58.9 54.7-94.6c1.5-5.5-.7-11.3-5.6-14.1M256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80s80 35.9 80 80s-35.9 80-80 80"})]}),Gz=w.forwardRef(Hz),Jz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M400 54.1c63 45 104 118.6 104 201.9c0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4C7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31c-41.5 30.8-68 79.6-68 134.9c-.1 92.3 74.5 168.1 168 168.1c91.6 0 168.6-74.2 168-169.1c-.3-51.8-24.7-101.8-68.1-134c-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8M296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24"})]}),Yz=w.forwardRef(Jz),Xz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215c-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176c0-97.267-78.716-176-176-176c-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12"})]}),Zz=w.forwardRef(Xz),Qz=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 640 512",width:"1.5em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32S80 82.1 80 144s50.1 112 112 112m76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2M480 256c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96m48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4c24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48c0-61.9-50.1-112-112-112"})]}),eU=w.forwardRef(Qz);function tU(){const e=de.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=tt(),e[0]=t):t=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=E.jsx(XE,{children:E.jsx(YE,{placeholder:"Select a language"})}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=E.jsxs(JE,{value:t,onValueChange:K1,children:[n,E.jsx(ZE,{children:Kl.map(nU)})]}),e[2]=r):r=e[2],r}function nU(e){return E.jsx(QE,{value:e,children:e},e)}var rU=function(e){w.useEffect(e,[])},Xs=function(e){var t=w.useRef(e);return t.current=e,t};const sU=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"})]}),oU=w.forwardRef(sU),iU=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[E.jsx("circle",{cx:12,cy:12,r:4}),E.jsx("path",{d:"M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"})]})]}),aU=w.forwardRef(iU);function lv(e){const t=de.c(22),{selectedTheme:n,value:r,setTheme:s,children:o}=e,i=`theme-switch-${r}`,a=n===r;let c,l;t[0]!==s||t[1]!==r?(c=()=>s(r),l=()=>s(r),t[0]=s,t[1]=r,t[2]=c,t[3]=l):(c=t[2],l=t[3]);let u;t[4]!==i||t[5]!==a||t[6]!==c||t[7]!==l||t[8]!==r?(u=E.jsx("input",{"aria-label":r,id:i,type:"radio",value:r,checked:a,onClick:c,onChange:l,className:"absolute m-0 appearance-none p-0"}),t[4]=i,t[5]=a,t[6]=c,t[7]=l,t[8]=r,t[9]=u):u=t[9];const f=`theme-switch-${r}`,h=n===r&&"border-shadow border";let d;t[10]!==h?(d=Ve("group flex size-8 cursor-pointer items-center justify-center rounded-full",h),t[10]=h,t[11]=d):d=t[11];let p;t[12]!==r?(p=E.jsx("span",{className:"sr-only",children:r}),t[12]=r,t[13]=p):p=t[13];let m;t[14]!==o||t[15]!==f||t[16]!==d||t[17]!==p?(m=E.jsxs("label",{htmlFor:f,className:d,children:[p,o]}),t[14]=o,t[15]=f,t[16]=d,t[17]=p,t[18]=m):m=t[18];let y;return t[19]!==m||t[20]!==u?(y=E.jsxs("div",{className:"-mt-px first:-ml-px last:-mr-px",children:[u,m]}),t[19]=m,t[20]=u,t[21]=y):y=t[21],y}const cU=()=>{const e=de.c(20),{systemTheme:t,setTheme:n,theme:r,resolvedTheme:s}=lk(),o=t===void 0?"light":t,i=s===void 0?r:s;let a;e[0]!==o?(a=()=>typeof window>"u"?"light":localStorage.getItem("theme")||o,e[0]=o,e[1]=a):a=e[1];const c=a,[l,u]=w.useState(c);let f;e[2]!==n?(f=S=>{u(S),n(S)},e[2]=n,e[3]=f):f=e[3];const h=f;let d;e[4]!==i||e[5]!==h||e[6]!==l?(d=()=>{i&&l!==i&&h(i)},e[4]=i,e[5]=h,e[6]=l,e[7]=d):d=e[7],rU(d);let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=E.jsx("legend",{className:"sr-only",children:"Select a display theme:"}),e[8]=p):p=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=E.jsx(aU,{}),e[9]=m):m=e[9];let y;e[10]!==h||e[11]!==l?(y=E.jsx(lv,{value:"light",selectedTheme:l,setTheme:h,children:m}),e[10]=h,e[11]=l,e[12]=y):y=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=E.jsx(oU,{}),e[13]=g):g=e[13];let b;e[14]!==h||e[15]!==l?(b=E.jsx(lv,{value:"dark",selectedTheme:l,setTheme:h,children:g}),e[14]=h,e[15]=l,e[16]=b):b=e[16];let v;return e[17]!==y||e[18]!==b?(v=E.jsxs("fieldset",{className:"border-shadow m-0 flex h-8 rounded-full border p-0",children:[p,y,b]}),e[17]=y,e[18]=b,e[19]=v):v=e[19],v};function qi(e){const t=de.c(16);let n,r,s,o,i;if(t[0]!==e){const{className:u,variant:f,size:h,icon:d,children:p,ref:m,...y}=e;r=u,s=d,n=p,i=m,o=y,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=o,t[5]=i}else n=t[1],r=t[2],s=t[3],o=t[4],i=t[5];let a;t[6]!==r?(a=Ve(r,"gap-1"),t[6]=r,t[7]=a):a=t[7];let c;t[8]!==s?(c=E.jsx("span",{children:s}),t[8]=s,t[9]=c):c=t[9];let l;return t[10]!==n||t[11]!==o||t[12]!==i||t[13]!==a||t[14]!==c?(l=E.jsxs(li,{ref:i,className:a,...o,children:[c,n]}),t[10]=n,t[11]=o,t[12]=i,t[13]=a,t[14]=c,t[15]=l):l=t[15],l}qi.displayName="IconButton";function lU(e){const t=de.c(23),{setHuman:n,reboot:r,allowRetract:s,onUndo:o,onOpenSetting:i}=e;let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=E.jsx("h1",{className:"text-4xl font-bold tracking-tight lg:text-5xl",children:q3()}),t[0]=a):a=t[0];let c;t[1]===Symbol.for("react.memo_cache_sentinel")?(c=E.jsx(eU,{}),t[1]=c):c=t[1];let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=E.jsx("span",{children:G3()}),t[2]=l):l=t[2];let u;t[3]!==n?(u=E.jsx(qi,{icon:c,onClick:n,children:l}),t[3]=n,t[4]=u):u=t[4];let f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=E.jsx(Yz,{}),t[5]=f):f=t[5];let h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx("span",{children:X3()}),t[6]=h):h=t[6];let d;t[7]!==r?(d=E.jsx(qi,{icon:f,onClick:r,children:h}),t[7]=r,t[8]=d):d=t[8];let p;t[9]===Symbol.for("react.memo_cache_sentinel")?(p=E.jsx(Zz,{}),t[9]=p):p=t[9];const m=!s;let y;t[10]!==o||t[11]!==m?(y=E.jsx(qi,{icon:p,disabled:m,onClick:o}),t[10]=o,t[11]=m,t[12]=y):y=t[12];let g;t[13]===Symbol.for("react.memo_cache_sentinel")?(g=E.jsx(Gz,{}),t[13]=g):g=t[13];let b;t[14]!==i?(b=E.jsx(qi,{icon:g,onClick:i}),t[14]=i,t[15]=b):b=t[15];let v,S;t[16]===Symbol.for("react.memo_cache_sentinel")?(v=E.jsx(cU,{}),S=E.jsx(tU,{}),t[16]=v,t[17]=S):(v=t[16],S=t[17]);let _;return t[18]!==y||t[19]!==b||t[20]!==u||t[21]!==d?(_=E.jsxs("nav",{className:"flex justify-between p-2 pr-16",children:[a,E.jsxs("div",{className:"flex gap-2",children:[u,d,y," ",b,v,S]})]}),t[18]=y,t[19]=b,t[20]=u,t[21]=d,t[22]=_):_=t[22],_}function uU(e){const t=de.c(2);let n;return t[0]!==e?(n=E.jsx(lU,{...e}),t[0]=e,t[1]=n):n=t[1],n}function fU(e){const t=de.c(39),{showReplay:n,message:r,children:s,onRestart:o,users:i,log:a,score:c,onCloseConfirm:l,allowRetract:u,setHuman:f,reboot:h,onUndo:d}=e,[p,m]=w.useState(!1);let y;t[0]===Symbol.for("react.memo_cache_sentinel")?(y=()=>m(!0),t[0]=y):y=t[0];const g=y;let b;t[1]===Symbol.for("react.memo_cache_sentinel")?(b=()=>m(!1),t[1]=b):b=t[1];const v=b;let S;t[2]!==u||t[3]!==d||t[4]!==h||t[5]!==f?(S=E.jsx(uU,{onOpenSetting:g,allowRetract:u,setHuman:f,reboot:h,onUndo:d}),t[2]=u,t[3]=d,t[4]=h,t[5]=f,t[6]=S):S=t[6];let _;t[7]!==r?(_=E.jsx("span",{className:"text-destructive self-end",children:r}),t[7]=r,t[8]=_):_=t[8];let k;t[9]!==s||t[10]!==_?(k=E.jsxs("div",{className:"flex flex-col",children:[s,_]}),t[9]=s,t[10]=_,t[11]=k):k=t[11];let I;t[12]!==c||t[13]!==i?(I=E.jsx(X8,{users:i,score:c}),t[12]=c,t[13]=i,t[14]=I):I=t[14];let x;t[15]===Symbol.for("react.memo_cache_sentinel")?(x=E.jsx(eV,{}),t[15]=x):x=t[15];let R;t[16]!==I?(R=E.jsxs("div",{children:[I,x]}),t[16]=I,t[17]=R):R=t[17];let T;t[18]!==a?(T=E.jsx("div",{className:"hidden max-w-64 grow lg:block",children:E.jsx(G8,{log:a})}),t[18]=a,t[19]=T):T=t[19];let M;t[20]!==k||t[21]!==R||t[22]!==T?(M=E.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row",children:[k,R,T]}),t[20]=k,t[21]=R,t[22]=T,t[23]=M):M=t[23];let B;t[24]===Symbol.for("react.memo_cache_sentinel")?(B=eD(),t[24]=B):B=t[24];let U;t[25]!==l||t[26]!==o||t[27]!==n?(U=E.jsx(B8,{open:n,onConfirm:o,onCancel:l,children:B}),t[25]=l,t[26]=o,t[27]=n,t[28]=U):U=t[28];let V;t[29]!==p?(V=E.jsx(Kz,{isOpen:p,onClose:v}),t[29]=p,t[30]=V):V=t[30];let $;t[31]!==M||t[32]!==U||t[33]!==V||t[34]!==S?($=E.jsxs("div",{className:"container",children:[S,M,U,V]}),t[31]=M,t[32]=U,t[33]=V,t[34]=S,t[35]=$):$=t[35];let O;t[36]===Symbol.for("react.memo_cache_sentinel")?(O=E.jsx(uk,{children:E.jsx(QD,{href:"https://github.com/DanSnow/react-reversi"})}),t[36]=O):O=t[36];let N;return t[37]!==$?(N=E.jsxs(E.Fragment,{children:[$,O]}),t[37]=$,t[38]=N):N=t[38],N}var Ed,uv;function dU(){if(uv)return Ed;uv=1,Ed=o,o.default=o,o.stable=l,o.stableStringify=l;var e="[...]",t="[Circular]",n=[],r=[];function s(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(h,d,p,m){typeof m>"u"&&(m=s()),a(h,"",0,[],void 0,0,m);var y;try{r.length===0?y=JSON.stringify(h,d,p):y=JSON.stringify(h,f(d),p)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;n.length!==0;){var g=n.pop();g.length===4?Object.defineProperty(g[0],g[1],g[3]):g[0][g[1]]=g[2]}}return y}function i(h,d,p,m){var y=Object.getOwnPropertyDescriptor(m,p);y.get!==void 0?y.configurable?(Object.defineProperty(m,p,{value:h}),n.push([m,p,d,y])):r.push([d,p,h]):(m[p]=h,n.push([m,p,d]))}function a(h,d,p,m,y,g,b){g+=1;var v;if(typeof h=="object"&&h!==null){for(v=0;v<m.length;v++)if(m[v]===h){i(t,h,d,y);return}if(typeof b.depthLimit<"u"&&g>b.depthLimit){i(e,h,d,y);return}if(typeof b.edgesLimit<"u"&&p+1>b.edgesLimit){i(e,h,d,y);return}if(m.push(h),Array.isArray(h))for(v=0;v<h.length;v++)a(h[v],v,v,m,h,g,b);else{var S=Object.keys(h);for(v=0;v<S.length;v++){var _=S[v];a(h[_],_,v,m,h,g,b)}}m.pop()}}function c(h,d){return h<d?-1:h>d?1:0}function l(h,d,p,m){typeof m>"u"&&(m=s());var y=u(h,"",0,[],void 0,0,m)||h,g;try{r.length===0?g=JSON.stringify(y,d,p):g=JSON.stringify(y,f(d),p)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;n.length!==0;){var b=n.pop();b.length===4?Object.defineProperty(b[0],b[1],b[3]):b[0][b[1]]=b[2]}}return g}function u(h,d,p,m,y,g,b){g+=1;var v;if(typeof h=="object"&&h!==null){for(v=0;v<m.length;v++)if(m[v]===h){i(t,h,d,y);return}try{if(typeof h.toJSON=="function")return}catch{return}if(typeof b.depthLimit<"u"&&g>b.depthLimit){i(e,h,d,y);return}if(typeof b.edgesLimit<"u"&&p+1>b.edgesLimit){i(e,h,d,y);return}if(m.push(h),Array.isArray(h))for(v=0;v<h.length;v++)u(h[v],v,v,m,h,g,b);else{var S={},_=Object.keys(h).sort(c);for(v=0;v<_.length;v++){var k=_[v];u(h[k],k,v,m,h,g,b),S[k]=h[k]}if(typeof y<"u")n.push([y,d,h]),y[d]=S;else return S}m.pop()}}function f(h){return h=typeof h<"u"?h:function(d,p){return p},function(d,p){if(r.length>0)for(var m=0;m<r.length;m++){var y=r[m];if(y[1]===d&&y[0]===p){p=y[2],r.splice(m,1);break}}return h.call(this,d,p)}}return Ed}function hU(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function pU(){const e=hU();if(e.__xstate__)return e.__xstate__}const mU=e=>{if(typeof window>"u")return;const t=pU();t&&t.register(e)};class fv{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const eR=".",gU="",tR="",yU="#",bU="*",nR="xstate.init",vU="xstate.error",Ms="xstate.stop";function wU(e,t){return{type:`xstate.after.${e}.${t}`}}function Xh(e,t){return{type:`xstate.done.state.${e}`,output:t}}function SU(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function rR(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function sR(e){return{type:nR,input:e}}function jn(e){setTimeout(()=>{throw e})}const _U=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vg(e,t){const n=dv(e),r=dv(t);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(s=>s in r?vg(n[s],r[s]):!1)}function wg(e){if(aR(e))return e;const t=[];let n="";for(let r=0;r<e.length;r++){switch(e.charCodeAt(r)){case 92:n+=e[r+1],r++;continue;case 46:t.push(n),n="";continue}n+=e[r]}return t.push(n),t}function dv(e){if(wR(e))return e.value;if(typeof e!="string")return e;const t=wg(e);return oR(t)}function oR(e){if(e.length===1)return e[0];const t={};let n=t;for(let r=0;r<e.length-1;r++)if(r===e.length-2)n[e[r]]=e[r+1];else{const s=n;n={},s[e[r]]=n}return t}function hv(e,t){const n={},r=Object.keys(e);for(let s=0;s<r.length;s++){const o=r[s];n[o]=t(e[o],o,e,s)}return n}function iR(e){return aR(e)?e:[e]}function mr(e){return e===void 0?[]:iR(e)}function Zh(e,t,n,r){return typeof e=="function"?e({context:t,event:n,self:r}):e}function aR(e){return Array.isArray(e)}function xU(e){return e.type.startsWith("xstate.error.actor")}function ro(e){return iR(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function cR(e){if(!(e===void 0||e===gU))return mr(e)}function fu(e,t,n){const r=typeof e=="object",s=r?e:void 0;return{next:(r?e.next:e)?.bind(s),error:(r?e.error:t)?.bind(s),complete:(r?e.complete:n)?.bind(s)}}function pv(e,t){return`${t}.${e}`}function Sg(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,r,s]=n,i=e.getStateNodeById(s).config.invoke;return(Array.isArray(i)?i[r]:i).src}function EU(e){return[...new Set([...e._nodes.flatMap(t=>t.ownEvents)])]}function lR(e,t){if(t===e||t===bU)return!0;if(!t.endsWith(".*"))return!1;const n=t.split("."),r=e.split(".");for(let s=0;s<n.length;s++){const o=n[s],i=r[s];if(o==="*")return s===n.length-1;if(o!==i)return!1}return!0}function mv(e,t){return`${e.sessionId}.${t}`}let RU=0;function kU(e,t){const n=new Map,r=new Map,s=new WeakMap,o=new Set,i={},{clock:a,logger:c}=t,l={schedule:(h,d,p,m,y=Math.random().toString(36).slice(2))=>{const g={source:h,target:d,event:p,delay:m,id:y,startedAt:Date.now()},b=mv(h,y);f._snapshot._scheduledEvents[b]=g;const v=a.setTimeout(()=>{delete i[b],delete f._snapshot._scheduledEvents[b],f._relay(h,d,p)},m);i[b]=v},cancel:(h,d)=>{const p=mv(h,d),m=i[p];delete i[p],delete f._snapshot._scheduledEvents[p],m!==void 0&&a.clearTimeout(m)},cancelAll:h=>{for(const d in f._snapshot._scheduledEvents){const p=f._snapshot._scheduledEvents[d];p.source===h&&l.cancel(h,p.id)}}},u=h=>{if(!o.size)return;const d={...h,rootId:e.sessionId};o.forEach(p=>p.next?.(d))},f={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${RU++}`,_register:(h,d)=>(n.set(h,d),h),_unregister:h=>{n.delete(h.sessionId);const d=s.get(h);d!==void 0&&(r.delete(d),s.delete(h))},get:h=>r.get(h),getAll:()=>Object.fromEntries(r.entries()),_set:(h,d)=>{const p=r.get(h);if(p&&p!==d)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,d),s.set(d,h)},inspect:h=>{const d=fu(h);return o.add(d),{unsubscribe(){o.delete(d)}}},_sendInspectionEvent:u,_relay:(h,d,p)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:d,event:p}),d._send(p)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const h=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const d in h){const{source:p,target:m,event:y,delay:g,id:b}=h[d];l.schedule(p,m,y,g,b)}},_clock:a,_logger:c};return f}let Rd=!1;const _g=1;let Wt=(function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e})({});const OU={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class uR{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new fv(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Wt.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...OU,...n},{clock:s,logger:o,parent:i,syncSnapshot:a,id:c,systemId:l,inspect:u}=r;this.system=i?i.system:kU(this,{clock:s,logger:o}),u&&!i&&this.system.inspect(fu(u)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=i,this._syncSnapshot=a,this.options=r,this.src=r.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const h=this.eventListeners.get(f.type),d=this.eventListeners.get("*");if(!h&&!d)return;const p=[...h?h.values():[],...d?d.values():[]];for(const m of p)try{m(f)}catch(y){jn(y)}},actionExecutor:f=>{const h=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const d=Rd;try{Rd=!0,f.exec(f.info,f.params)}finally{Rd=d}};this._processingStatus===Wt.Running?h():this._deferred.push(h)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this.systemId=l,this.system._set(l,this)),this._initState(n?.snapshot??n?.state),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(t,n){this._snapshot=t;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...t,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{s.next?.(t)}catch(o){jn(o)}break;case"done":for(const s of this.observers)try{s.next?.(t)}catch(o){jn(o)}this._stopProcedure(),this._complete(),this._doneEvent=SU(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,r){const s=fu(t,n,r);if(this._processingStatus!==Wt.Stopped)this.observers.add(s);else switch(this._snapshot.status){case"done":try{s.complete?.()}catch(o){jn(o)}break;case"error":{const o=this._snapshot.error;if(!s.error)jn(o);else try{s.error(o)}catch(i){jn(i)}break}}return{unsubscribe:()=>{this.observers.delete(s)}}}on(t,n){let r=this.eventListeners.get(t);r||(r=new Set,this.eventListeners.set(t,r));const s=n.bind(void 0);return r.add(s),{unsubscribe:()=>{r.delete(s)}}}start(){if(this._processingStatus===Wt.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=Wt.Running;const t=sR(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,r;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(s){r={err:s}}if(r){const{err:s}=r;this._snapshot={...this._snapshot,status:"error",error:s},this._error(s);return}this.update(n,t),t.type===Ms&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Wt.Stopped?this:(this.mailbox.clear(),this._processingStatus===Wt.NotStarted?(this._processingStatus=Wt.Stopped,this):(this.mailbox.enqueue({type:Ms}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(n){jn(n)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||jn(t);return}let n=!1;for(const r of this.observers){const s=r.error;n||=!s;try{s?.(t)}catch(o){jn(o)}}this.observers.clear(),n&&jn(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,rR(this.id,t))}_stopProcedure(){return this._processingStatus!==Wt.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new fv(this._process.bind(this)),this._processingStatus=Wt.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Wt.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:mU)(this)}toJSON(){return{xstate$$type:_g,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[_U](){return this}getSnapshot(){return this._snapshot}}function er(e,...[t]){return new uR(e,t)}const CU=er;function IU(e,t,n,r,{sendId:s}){const o=typeof s=="function"?s(n,r):s;return[t,{sendId:o},void 0]}function TU(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function Tf(e){function t(n,r){}return t.type="xstate.cancel",t.sendId=e,t.resolve=IU,t.execute=TU,t}function MU(e,t,n,r,{id:s,systemId:o,src:i,input:a,syncSnapshot:c}){const l=typeof i=="string"?Sg(t.machine,i):i,u=typeof s=="function"?s(n):s;let f,h;return l&&(h=typeof a=="function"?a({context:t.context,event:n.event,self:e.self}):a,f=er(l,{id:u,src:i,parent:e.self,syncSnapshot:c,systemId:o,input:h})),[As(t,{children:{...t.children,[u]:f}}),{id:s,systemId:o,actorRef:f,src:i,input:h},void 0]}function AU(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==Wt.Stopped&&t.start()})}function Mf(...[e,{id:t,systemId:n,input:r,syncSnapshot:s=!1}={}]){function o(i,a){}return o.type="xstate.spawnChild",o.id=t,o.systemId=n,o.src=e,o.input=r,o.syncSnapshot=s,o.resolve=MU,o.execute=AU,o}function PU(e,t,n,r,{actorRef:s}){const o=typeof s=="function"?s(n,r):s,i=typeof o=="string"?t.children[o]:o;let a=t.children;return i&&(a={...a},delete a[i.id]),[As(t,{children:a}),i,void 0]}function $U(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==Wt.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function ui(e){function t(n,r){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=PU,t.execute=$U,t}const FU=ui;function NU(e,t,{stateValue:n}){if(typeof n=="string"&&lc(n)){const r=e.machine.getStateNodeById(n);return e._nodes.some(s=>s===r)}return e.matches(n)}function LU(e){function t(){return!1}return t.check=NU,t.stateValue=e,t}function jU(e,{context:t,event:n},{guards:r}){return!zs(r[0],t,n,e)}function DU(e){function t(n,r){return!1}return t.check=jU,t.guards=[e],t}function VU(e,{context:t,event:n},{guards:r}){return r.every(s=>zs(s,t,n,e))}function BU(e){function t(n,r){return!1}return t.check=VU,t.guards=e,t}function zU(e,{context:t,event:n},{guards:r}){return r.some(s=>zs(s,t,n,e))}function UU(e){function t(n,r){return!1}return t.check=zU,t.guards=e,t}function zs(e,t,n,r){const{machine:s}=r,o=typeof e=="function",i=o?e:s.implementations.guards[typeof e=="string"?e:e.type];if(!o&&!i)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof i!="function")return zs(i,t,n,r);const a={context:t,event:n},c=o||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in i?i.check(r,a,i):i(a,c)}const xg=e=>e.type==="atomic"||e.type==="final";function Ko(e){return Object.values(e.states).filter(t=>t.type!=="history")}function cc(e,t){const n=[];if(t===e)return n;let r=e.parent;for(;r&&r!==t;)n.push(r),r=r.parent;return n}function du(e){const t=new Set(e),n=dR(t);for(const r of t)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))gv(r).forEach(s=>t.add(s));else if(r.type==="parallel"){for(const s of Ko(r))if(s.type!=="history"&&!t.has(s)){const o=gv(s);for(const i of o)t.add(i)}}for(const r of t){let s=r.parent;for(;s;)t.add(s),s=s.parent}return t}function fR(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const s=n[0];if(s){if(xg(s))return s.key}else return{}}const r={};for(const s of n)r[s.key]=fR(s,t);return r}function dR(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function hR(e,t){const n=du(t);return fR(e,dR(n))}function Eg(e,t){return t.type==="compound"?Ko(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?Ko(t).every(n=>Eg(e,n)):t.type==="final"}const lc=e=>e[0]===yU;function WU(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(r=>lR(t,r)).sort((r,s)=>s.length-r.length).flatMap(r=>e.transitions.get(r))}function qU(e){const t=e.config.after;if(!t)return[];const n=s=>{const o=wU(s,e.id),i=o.type;return e.entry.push(Af(o,{id:i,delay:s})),e.exit.push(Tf(i)),i};return Object.keys(t).flatMap(s=>{const o=t[s],i=typeof o=="string"?{target:o}:o,a=Number.isNaN(+s)?s:+s,c=n(a);return mr(i).map(l=>({...l,event:c,delay:a}))}).map(s=>{const{delay:o}=s;return{...ss(e,s.event,s),delay:o}})}function ss(e,t,n){const r=cR(n.target),s=n.reenter??!1,o=GU(e,r),i={...n,actions:mr(n.actions),guard:n.guard,target:o,source:e,reenter:s,eventType:t,toJSON:()=>({...i,source:`#${e.id}`,target:o?o.map(a=>`#${a.id}`):void 0})};return i}function KU(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===tR)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=e.config.on[n];t.set(n,ro(r).map(s=>ss(e,n,s)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,ro(e.config.onDone).map(r=>ss(e,n,r)))}for(const n of e.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;t.set(r,ro(n.onDone).map(s=>ss(e,r,s)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;t.set(r,ro(n.onError).map(s=>ss(e,r,s)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;t.set(r,ro(n.onSnapshot).map(s=>ss(e,r,s)))}}for(const n of e.after){let r=t.get(n.eventType);r||(r=[],t.set(n.eventType,r)),r.push(n)}return t}function HU(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const r={source:e,actions:!t||typeof t=="string"?[]:mr(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return r}function GU(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(lc(n))return e.machine.getStateNodeById(n);const r=n[0]===eR;if(r&&!e.parent)return hu(e,n.slice(1));const s=r?e.key+n:n;if(e.parent)try{return hu(e.parent,s)}catch(o){throw new Error(`Invalid transition definition for state node '${e.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function pR(e){const t=cR(e.config.target);return t?{target:t.map(n=>typeof n=="string"?hu(e.parent,n):n)}:e.parent.initial}function ds(e){return e.type==="history"}function gv(e){const t=mR(e);for(const n of t)for(const r of cc(n,e))t.add(r);return t}function mR(e){const t=new Set;function n(r){if(!t.has(r)){if(t.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const s of Ko(r))n(s)}}return n(e),t}function Ho(e,t){if(lc(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function hu(e,t){if(typeof t=="string"&&lc(t))try{return e.machine.getStateNodeById(t)}catch{}const n=wg(t).slice();let r=e;for(;n.length;){const s=n.shift();if(!s.length)break;r=Ho(r,s)}return r}function Sa(e,t){if(typeof t=="string"){const s=e.states[t];if(!s)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,s]}const n=Object.keys(t),r=n.map(s=>Ho(e,s)).filter(Boolean);return[e.machine.root,e].concat(r,n.reduce((s,o)=>{const i=Ho(e,o);if(!i)return s;const a=Sa(i,t[o]);return s.concat(a)},[]))}function JU(e,t,n,r){const o=Ho(e,t).next(n,r);return!o||!o.length?e.next(n,r):o}function YU(e,t,n,r){const s=Object.keys(t),o=Ho(e,s[0]),i=Rg(o,t[s[0]],n,r);return!i||!i.length?e.next(n,r):i}function XU(e,t,n,r){const s=[];for(const o of Object.keys(t)){const i=t[o];if(!i)continue;const a=Ho(e,o),c=Rg(a,i,n,r);c&&s.push(...c)}return s.length?s:e.next(n,r)}function Rg(e,t,n,r){return typeof t=="string"?JU(e,t,n,r):Object.keys(t).length===1?YU(e,t,n,r):XU(e,t,n,r)}function ZU(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function Hr(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function QU(e,t){const n=new Set(e),r=new Set(t);for(const s of n)if(r.has(s))return!0;for(const s of r)if(n.has(s))return!0;return!1}function gR(e,t,n){const r=new Set;for(const s of e){let o=!1;const i=new Set;for(const a of r)if(QU(Qh([s],t,n),Qh([a],t,n)))if(Hr(s.source,a.source))i.add(a);else{o=!0;break}if(!o){for(const a of i)r.delete(a);r.add(s)}}return Array.from(r)}function e7(e){const[t,...n]=e;for(const r of cc(t,void 0))if(n.every(s=>Hr(s,r)))return r}function kg(e,t){if(!e.target)return[];const n=new Set;for(const r of e.target)if(ds(r))if(t[r.id])for(const s of t[r.id])n.add(s);else for(const s of kg(pR(r),t))n.add(s);else n.add(r);return[...n]}function yR(e,t){const n=kg(e,t);if(!n)return;if(!e.reenter&&n.every(s=>s===e.source||Hr(s,e.source)))return e.source;const r=e7(n.concat(e.source));if(r)return r;if(!e.reenter)return e.source.machine.root}function Qh(e,t,n){const r=new Set;for(const s of e)if(s.target?.length){const o=yR(s,n);s.reenter&&s.source===o&&r.add(o);for(const i of t)Hr(i,o)&&r.add(i)}return[...r]}function t7(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ep(e,t,n,r,s,o){if(!e.length)return t;const i=new Set(t._nodes);let a=t.historyValue;const c=gR(e,i,a);let l=t;s||([l,a]=o7(l,r,n,c,i,a,o,n.actionExecutor)),l=Go(l,r,n,c.flatMap(f=>f.actions),o,void 0),l=r7(l,r,n,c,i,o,a,s);const u=[...i];l.status==="done"&&(l=Go(l,r,n,u.sort((f,h)=>h.order-f.order).flatMap(f=>f.exit),o,void 0));try{return a===t.historyValue&&t7(t._nodes,i)?l:As(l,{_nodes:u,historyValue:a})}catch(f){throw f}}function n7(e,t,n,r,s){if(r.output===void 0)return;const o=Xh(s.id,s.output!==void 0&&s.parent?Zh(s.output,e.context,t,n.self):void 0);return Zh(r.output,e.context,o,n.self)}function r7(e,t,n,r,s,o,i,a){let c=e;const l=new Set,u=new Set;s7(r,i,u,l),a&&u.add(e.machine.root);const f=new Set;for(const h of[...l].sort((d,p)=>d.order-p.order)){s.add(h);const d=[];d.push(...h.entry);for(const p of h.invoke)d.push(Mf(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(u.has(h)){const p=h.initial.actions;d.push(...p)}if(c=Go(c,t,n,d,o,h.invoke.map(p=>p.id)),h.type==="final"){const p=h.parent;let m=p?.type==="parallel"?p:p?.parent,y=m||h;for(p?.type==="compound"&&o.push(Xh(p.id,h.output!==void 0?Zh(h.output,c.context,t,n.self):void 0));m?.type==="parallel"&&!f.has(m)&&Eg(s,m);)f.add(m),o.push(Xh(m.id)),y=m,m=m.parent;if(m)continue;c=As(c,{status:"done",output:n7(c,t,n,c.machine.root,y)})}}return c}function s7(e,t,n,r){for(const s of e){const o=yR(s,t);for(const a of s.target||[])!ds(a)&&(s.source!==a||s.source!==o||s.reenter)&&(r.add(a),n.add(a)),lo(a,t,n,r);const i=kg(s,t);for(const a of i){const c=cc(a,o);o?.type==="parallel"&&c.push(o),bR(r,t,n,c,!s.source.parent&&s.reenter?void 0:o)}}}function lo(e,t,n,r){if(ds(e))if(t[e.id]){const s=t[e.id];for(const o of s)r.add(o),lo(o,t,n,r);for(const o of s)kd(o,e.parent,r,t,n)}else{const s=pR(e);for(const o of s.target)r.add(o),s===e.parent?.initial&&n.add(e.parent),lo(o,t,n,r);for(const o of s.target)kd(o,e.parent,r,t,n)}else if(e.type==="compound"){const[s]=e.initial.target;ds(s)||(r.add(s),n.add(s)),lo(s,t,n,r),kd(s,e,r,t,n)}else if(e.type==="parallel")for(const s of Ko(e).filter(o=>!ds(o)))[...r].some(o=>Hr(o,s))||(ds(s)||(r.add(s),n.add(s)),lo(s,t,n,r))}function bR(e,t,n,r,s){for(const o of r)if((!s||Hr(o,s))&&e.add(o),o.type==="parallel")for(const i of Ko(o).filter(a=>!ds(a)))[...e].some(a=>Hr(a,i))||(e.add(i),lo(i,t,n,e))}function kd(e,t,n,r,s){bR(n,r,s,cc(e,t))}function o7(e,t,n,r,s,o,i,a){let c=e;const l=Qh(r,s,o);l.sort((f,h)=>h.order-f.order);let u;for(const f of l)for(const h of ZU(f)){let d;h.history==="deep"?d=p=>xg(p)&&Hr(p,f):d=p=>p.parent===f,u??={...o},u[h.id]=Array.from(s).filter(d)}for(const f of l)c=Go(c,t,n,[...f.exit,...f.invoke.map(h=>ui(h.id))],i,void 0),s.delete(f);return[c,u||o]}function i7(e,t){return e.implementations.actions[t]}function vR(e,t,n,r,s,o){const{machine:i}=e;let a=e;for(const c of r){const l=typeof c=="function",u=l?c:i7(i,typeof c=="string"?c:c.type),f={context:a.context,event:t,self:n.self,system:n.system},h=l||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:a.context,event:t}):c.params:void 0;if(!u||!("resolve"in u)){n.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:f,params:h,exec:u});continue}const d=u,[p,m,y]=d.resolve(n,a,f,h,u,s);a=p,"retryResolve"in d&&o?.push([d,m]),"execute"in d&&n.actionExecutor({type:d.type,info:f,params:m,exec:d.execute.bind(null,n,m)}),y&&(a=vR(a,t,n,y,s,o))}return a}function Go(e,t,n,r,s,o){const i=o?[]:void 0,a=vR(e,t,n,r,{internalQueue:s,deferredActorIds:o},i);return i?.forEach(([c,l])=>{c.retryResolve(n,a,l)}),a}function Od(e,t,n,r){let s=e;const o=[];function i(l,u,f){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:u,snapshot:l,_transitions:f}),o.push(l)}if(t.type===Ms)return s=As(yv(s,t,n),{status:"stopped"}),i(s,t,[]),{snapshot:s,microstates:o};let a=t;if(a.type!==nR){const l=a,u=xU(l),f=bv(l,s);if(u&&!f.length)return s=As(e,{status:"error",error:l.error}),i(s,l,[]),{snapshot:s,microstates:o};s=ep(f,e,n,a,!1,r),i(s,l,f)}let c=!0;for(;s.status==="active";){let l=c?a7(s,a):[];const u=l.length?s:void 0;if(!l.length){if(!r.length)break;a=r.shift(),l=bv(a,s)}s=ep(l,s,n,a,!1,r),c=s!==u,i(s,a,l)}return s.status!=="active"&&yv(s,a,n),{snapshot:s,microstates:o}}function yv(e,t,n){return Go(e,t,n,Object.values(e.children).map(r=>ui(r)),[],void 0)}function bv(e,t){return t.machine.getTransitionData(t,e)}function a7(e,t){const n=new Set,r=e._nodes.filter(xg);for(const s of r)e:for(const o of[s].concat(cc(s,void 0)))if(o.always){for(const i of o.always)if(i.guard===void 0||zs(i.guard,e.context,t,e)){n.add(i);break e}}return gR(Array.from(n),new Set(e._nodes),e.historyValue)}function c7(e,t){const n=du(Sa(e,t));return hR(e,[...n])}function wR(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const l7=function(t){return vg(t,this.value)},u7=function(t){return this.tags.has(t)},f7=function(t){const n=this.machine.getTransitionData(this,t);return!!n?.length&&n.some(r=>r.target!==void 0||r.actions.length)},d7=function(){const{_nodes:t,tags:n,machine:r,getMeta:s,toJSON:o,can:i,hasTag:a,matches:c,...l}=this;return{...l,tags:Array.from(n)}},h7=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function hl(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:hR(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:l7,hasTag:u7,can:f7,getMeta:h7,toJSON:d7}}function As(e,t={}){return hl({...e,...t},e.machine)}function p7(e){if(typeof e!="object"||e===null)return{};const t={};for(const n in e){const r=e[n];Array.isArray(r)&&(t[n]=r.map(s=>({id:s.id})))}return t}function m7(e,t){const{_nodes:n,tags:r,machine:s,children:o,context:i,can:a,hasTag:c,matches:l,getMeta:u,toJSON:f,...h}=e,d={};for(const m in o){const y=o[m];d[m]={snapshot:y.getPersistedSnapshot(t),src:y.src,systemId:y.systemId,syncSnapshot:y._syncSnapshot}}return{...h,context:SR(i),children:d,historyValue:p7(h.historyValue)}}function SR(e){let t;for(const n in e){const r=e[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)t??=Array.isArray(e)?e.slice():{...e},t[n]={xstate$$type:_g,id:r.id};else{const s=SR(r);s!==r&&(t??=Array.isArray(e)?e.slice():{...e},t[n]=s)}}return t??e}function g7(e,t,n,r,{event:s,id:o,delay:i},{internalQueue:a}){const c=t.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${s}" }) instead`);const l=typeof s=="function"?s(n,r):s;let u;if(typeof i=="string"){const f=c&&c[i];u=typeof f=="function"?f(n,r):f}else u=typeof i=="function"?i(n,r):i;return typeof u!="number"&&a.push(l),[t,{event:l,id:o,delay:u},void 0]}function y7(e,t){const{event:n,delay:r,id:s}=t;if(typeof r=="number"){e.defer(()=>{const o=e.self;e.system.scheduler.schedule(o,o,n,r,s)});return}}function Af(e,t){function n(r,s){}return n.type="xstate.raise",n.event=e,n.id=t?.id,n.delay=t?.delay,n.resolve=g7,n.execute=y7,n}function _R(e,t){return{config:e,transition:(n,r,s)=>({...n,context:e(n.context,r,s)}),getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:typeof t=="function"?t({input:r}):t}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const vv=new WeakMap;function b7(e){return{config:e,start:(n,r)=>{const{self:s,system:o,emit:i}=r,a={receivers:void 0,dispose:void 0};vv.set(s,a),a.dispose=e({input:n.input,system:o,self:s,sendBack:c=>{s.getSnapshot().status!=="stopped"&&s._parent&&o._relay(s,s._parent,c)},receive:c=>{a.receivers??=new Set,a.receivers.add(c)},emit:i})},transition:(n,r,s)=>{const o=vv.get(s.self);return r.type===Ms?(n={...n,status:"stopped",error:void 0},o.dispose?.(),n):(o.receivers?.forEach(i=>i(r)),n)},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,input:r}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const wv="xstate.observable.next",pu="xstate.observable.error",mu="xstate.observable.complete";function v7(e){return{config:e,transition:(n,r)=>{if(n.status!=="active")return n;switch(r.type){case wv:return{...n,context:r.data};case pu:return{...n,status:"error",error:r.data,input:void 0,_subscription:void 0};case mu:return{...n,status:"done",input:void 0,_subscription:void 0};case Ms:return n._subscription.unsubscribe(),{...n,status:"stopped",input:void 0,_subscription:void 0};default:return n}},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:void 0,input:r,_subscription:void 0}),start:(n,{self:r,system:s,emit:o})=>{n.status!=="done"&&(n._subscription=e({input:n.input,system:s,self:r,emit:o}).subscribe({next:i=>{s._relay(r,r,{type:wv,data:i})},error:i=>{s._relay(r,r,{type:pu,data:i})},complete:()=>{s._relay(r,r,{type:mu})}}))},getPersistedSnapshot:({_subscription:n,...r})=>r,restoreSnapshot:n=>({...n,_subscription:void 0})}}function w7(e){return{config:e,transition:(n,r)=>{if(n.status!=="active")return n;switch(r.type){case pu:return{...n,status:"error",error:r.data,input:void 0,_subscription:void 0};case mu:return{...n,status:"done",input:void 0,_subscription:void 0};case Ms:return n._subscription.unsubscribe(),{...n,status:"stopped",input:void 0,_subscription:void 0};default:return n}},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:void 0,input:r,_subscription:void 0}),start:(n,{self:r,system:s,emit:o})=>{n.status!=="done"&&(n._subscription=e({input:n.input,system:s,self:r,emit:o}).subscribe({next:i=>{r._parent&&s._relay(r,r._parent,i)},error:i=>{s._relay(r,r,{type:pu,data:i})},complete:()=>{s._relay(r,r,{type:mu})}}))},getPersistedSnapshot:({_subscription:n,...r})=>r,restoreSnapshot:n=>({...n,_subscription:void 0})}}const Sv="xstate.promise.resolve",_v="xstate.promise.reject",Bc=new WeakMap;function xR(e){return{config:e,transition:(n,r,s)=>{if(n.status!=="active")return n;switch(r.type){case Sv:{const o=r.data;return{...n,status:"done",output:o,input:void 0}}case _v:return{...n,status:"error",error:r.data,input:void 0};case Ms:return Bc.get(s.self)?.abort(),{...n,status:"stopped",input:void 0};default:return n}},start:(n,{self:r,system:s,emit:o})=>{if(n.status!=="active")return;const i=new AbortController;Bc.set(r,i),Promise.resolve(e({input:n.input,system:s,self:r,signal:i.signal,emit:o})).then(c=>{r.getSnapshot().status==="active"&&(Bc.delete(r),s._relay(r,r,{type:Sv,data:c}))},c=>{r.getSnapshot().status==="active"&&(Bc.delete(r),s._relay(r,r,{type:_v,data:c}))})},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,input:r}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const S7=_R(e=>{},void 0);function _7(){return er(S7)}function x7(e,{machine:t,context:n},r,s){const o=(i,a)=>{if(typeof i=="string"){const c=Sg(t,i);if(!c)throw new Error(`Actor logic '${i}' not implemented in machine '${t.id}'`);const l=er(c,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:typeof a?.input=="function"?a.input({context:n,event:r,self:e.self}):a?.input,src:i,systemId:a?.systemId});return s[l.id]=l,l}else return er(i,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:i,systemId:a?.systemId})};return(i,a)=>{const c=o(i,a);return s[c.id]=c,e.defer(()=>{c._processingStatus!==Wt.Stopped&&c.start()}),c}}function E7(e,t,n,r,{assignment:s}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},i={context:t.context,event:n.event,spawn:x7(e,t,n.event,o),self:e.self,system:e.system};let a={};if(typeof s=="function")a=s(i,r);else for(const l of Object.keys(s)){const u=s[l];a[l]=typeof u=="function"?u(i,r):u}const c=Object.assign({},t.context,a);return[As(t,{context:c,children:Object.keys(o).length?{...t.children,...o}:t.children}),void 0,void 0]}function Qt(e){function t(n,r){}return t.type="xstate.assign",t.assignment=e,t.resolve=E7,t}const xv=new WeakMap;function Zs(e,t,n){let r=xv.get(e);return r?t in r||(r[t]=n()):(r={[t]:n()},xv.set(e,r)),r[t]}const R7={},Ri=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class _a{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(eR),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?hv(this.config.states,(r,s)=>new _a(r,{_parent:this,_key:s,_machine:this.machine})):R7,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=mr(this.config.entry).slice(),this.exit=mr(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=mr(t.tags).slice()}_initialize(){this.transitions=KU(this),this.config.always&&(this.always=ro(this.config.always).map(t=>ss(this,tR,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Ri),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Ri),eventType:null})}:void 0,history:this.history,states:hv(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(Ri)})),entry:this.entry.map(Ri),exit:this.exit.map(Ri),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Zs(this,"invoke",()=>mr(this.config.invoke).map((t,n)=>{const{src:r,systemId:s}=t,o=t.id??pv(this.id,n),i=typeof r=="string"?r:`xstate.invoke.${pv(this.id,n)}`;return{...t,src:i,id:o,systemId:s,toJSON(){const{onDone:a,onError:c,...l}=t;return{...l,type:"xstate.invoke",src:i,id:o}}}}))}get on(){return Zs(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(s=>[n,s])).reduce((n,[r,s])=>(n[r]=n[r]||[],n[r].push(s),n),{}))}get after(){return Zs(this,"delayedTransitions",()=>qU(this))}get initial(){return Zs(this,"initial",()=>HU(this,this.config.initial))}next(t,n){const r=n.type,s=[];let o;const i=Zs(this,`candidates-${r}`,()=>WU(this,r));for(const a of i){const{guard:c}=a,l=t.context;let u=!1;try{u=!c||zs(c,l,n,t)}catch(f){const h=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${f.message}`)}if(u){s.push(...a.actions),o=a;break}}return o?[o]:void 0}get events(){return Zs(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const r of Object.keys(t)){const s=t[r];if(s.states)for(const o of s.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),n=new Set(t.filter(r=>this.transitions.get(r).some(s=>!(!s.target&&!s.actions.length&&!s.reenter))));return Array.from(n)}}const k7="#";class Pf{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new _a(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:r,actors:s,delays:o}=this.implementations;return new Pf(this.config,{actions:{...n,...t.actions},guards:{...r,...t.guards},actors:{...s,...t.actors},delays:{...o,...t.delays}})}resolveState(t){const n=c7(this.root,t.value),r=du(Sa(this.root,n));return hl({_nodes:[...r],context:t.context||{},children:{},status:Eg(r,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,r){return Od(t,n,r,[]).snapshot}microstep(t,n,r){return Od(t,n,r,[]).microstates}getTransitionData(t,n){return Rg(this.root,t.value,t,n)||[]}getPreInitialState(t,n,r){const{context:s}=this.config,o=hl({context:typeof s!="function"&&s?s:{},_nodes:[this.root],children:{},status:"active"},this);return typeof s=="function"?Go(o,n,t,[Qt(({spawn:a,event:c,self:l})=>s({spawn:a,input:c.input,self:l}))],r,void 0):o}getInitialSnapshot(t,n){const r=sR(n),s=[],o=this.getPreInitialState(t,r,s),i=ep([{target:[...mR(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,t,r,!0,s),{snapshot:a}=Od(i,r,t,s);return a}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=wg(t),r=n.slice(1),s=lc(n[0])?n[0].slice(k7.length):n[0],o=this.idMap.get(s);if(!o)throw new Error(`Child state node '#${s}' does not exist on machine '${this.id}'`);return hu(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return m7(t,n)}restoreSnapshot(t,n){const r={},s=t.children;Object.keys(s).forEach(f=>{const h=s[f],d=h.snapshot,p=h.src,m=typeof p=="string"?Sg(this,p):p;if(!m)return;const y=er(m,{id:f,parent:n.self,syncSnapshot:h.syncSnapshot,snapshot:d,src:p,systemId:h.systemId});r[f]=y});function o(f,h){if(h instanceof _a)return h;try{return f.machine.getStateNodeById(h.id)}catch{}}function i(f,h){if(!h||typeof h!="object")return{};const d={};for(const p in h){const m=h[p];for(const y of m){const g=o(f,y);g&&(d[p]??=[],d[p].push(g))}}return d}const a=i(this.root,t.historyValue),c=hl({...t,children:r,_nodes:Array.from(du(Sa(this.root,t.value))),historyValue:a},this),l=new Set;function u(f,h){if(!l.has(f)){l.add(f);for(const d in f){const p=f[d];if(p&&typeof p=="object"){if("xstate$$type"in p&&p.xstate$$type===_g){f[d]=h[p.id];continue}u(p,h)}}}}return u(c.context,r),c}}function O7(e,t,n,r,{event:s}){const o=typeof s=="function"?s(n,r):s;return[t,{event:o},void 0]}function C7(e,{event:t}){e.defer(()=>e.emit(t))}function hs(e){function t(n,r){}return t.type="xstate.emit",t.event=e,t.resolve=O7,t.execute=C7,t}let gu=(function(e){return e.Parent="#_parent",e.Internal="#_internal",e})({});function I7(e,t,n,r,{to:s,event:o,id:i,delay:a},c){const l=t.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const u=typeof o=="function"?o(n,r):o;let f;if(typeof a=="string"){const p=l&&l[a];f=typeof p=="function"?p(n,r):p}else f=typeof a=="function"?a(n,r):a;const h=typeof s=="function"?s(n,r):s;let d;if(typeof h=="string"){if(h===gu.Parent?d=e.self._parent:h===gu.Internal?d=e.self:h.startsWith("#_")?d=t.children[h.slice(2)]:d=c.deferredActorIds?.includes(h)?h:t.children[h],!d)throw new Error(`Unable to send event to actor '${h}' from machine '${t.machine.id}'.`)}else d=h||e.self;return[t,{to:d,targetId:typeof h=="string"?h:void 0,event:u,id:i,delay:f},void 0]}function T7(e,t,n){typeof n.to=="string"&&(n.to=t.children[n.to])}function M7(e,t){e.defer(()=>{const{to:n,event:r,delay:s,id:o}=t;if(typeof s=="number"){e.system.scheduler.schedule(e.self,n,r,s,o);return}e.system._relay(e.self,n,r.type===vU?rR(e.self.id,r.data):r)})}function uc(e,t,n){function r(s,o){}return r.type="xstate.sendTo",r.to=e,r.event=t,r.id=n?.id,r.delay=n?.delay,r.resolve=I7,r.retryResolve=T7,r.execute=M7,r}function ER(e,t){return uc(gu.Parent,e,t)}function A7(e,t){return uc(e,({event:n})=>n,t)}function P7(e,t,n,r,{collect:s}){const o=[],i=function(c){o.push(c)};return i.assign=(...a)=>{o.push(Qt(...a))},i.cancel=(...a)=>{o.push(Tf(...a))},i.raise=(...a)=>{o.push(Af(...a))},i.sendTo=(...a)=>{o.push(uc(...a))},i.sendParent=(...a)=>{o.push(ER(...a))},i.spawnChild=(...a)=>{o.push(Mf(...a))},i.stopChild=(...a)=>{o.push(ui(...a))},i.emit=(...a)=>{o.push(hs(...a))},s({context:n.context,event:n.event,enqueue:i,check:a=>zs(a,t.context,n.event,t),self:e.self,system:e.system},r),[t,void 0,o]}function RR(e){function t(n,r){}return t.type="xstate.enqueueActions",t.collect=e,t.resolve=P7,t}function $7(e,t,n,r,{value:s,label:o}){return[t,{value:typeof s=="function"?s(n,r):s,label:o},void 0]}function F7({logger:e},{value:t,label:n}){n?e(n,t):e(t)}function kR(e=({context:n,event:r})=>({context:n,event:r}),t){function n(r,s){}return n.type="xstate.log",n.value=e,n.label=t,n.resolve=$7,n.execute=F7,n}function tp(e,t){const n=mr(t);if(!n.some(s=>lR(e.type,s))){const s=n.length===1?`type matching "${n[0]}"`:`one of types matching "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(e)} to have ${s}`)}}function OR(e,t){return new Pf(e,t)}function $f(e){const t=er(e);return{self:t,defer:()=>{},id:"",logger:()=>{},sessionId:"",stopChild:()=>{},system:t.system,emit:()=>{},actionExecutor:()=>{}}}function N7(e,...[t]){const n=$f(e);return e.getInitialSnapshot(n,t)}function L7(e,t,n){const r=$f(e);return r.self._snapshot=t,e.transition(t,n,r)}function Og({schemas:e,actors:t,actions:n,guards:r,delays:s}){return{assign:Qt,sendTo:uc,raise:Af,log:kR,cancel:Tf,stopChild:ui,enqueueActions:RR,emit:hs,spawnChild:Mf,createStateConfig:o=>o,createAction:o=>o,createMachine:o=>OR({...o,schemas:e},{actors:t,actions:n,guards:r,delays:s}),extend:o=>Og({schemas:e,actors:t,actions:{...n,...o.actions},guards:{...r,...o.guards},delays:{...s,...o.delays}})}}class j7{constructor(){this.timeouts=new Map,this._now=0,this._id=0,this._flushing=!1,this._flushingInvalidated=!1}now(){return this._now}getId(){return this._id++}setTimeout(t,n){this._flushingInvalidated=this._flushing;const r=this.getId();return this.timeouts.set(r,{start:this.now(),timeout:n,fn:t}),r}clearTimeout(t){this._flushingInvalidated=this._flushing,this.timeouts.delete(t)}set(t){if(this._now>t)throw new Error("Unable to travel back in time");this._now=t,this.flushTimeouts()}flushTimeouts(){if(this._flushing){this._flushingInvalidated=!0;return}this._flushing=!0;const t=[...this.timeouts].sort(([n,r],[s,o])=>{const i=r.start+r.timeout;return o.start+o.timeout>i?-1:1});for(const[n,r]of t){if(this._flushingInvalidated){this._flushingInvalidated=!1,this._flushing=!1,this.flushTimeouts();return}this.now()-r.start>=r.timeout&&(this.timeouts.delete(n),r.fn.call(null))}this._flushing=!1}increment(t){this._now+=t,this.flushTimeouts()}}function D7(e){return new Promise((t,n)=>{e.subscribe({complete:()=>{t(e.getSnapshot().output)},error:n})})}function V7(e,t,n){const r=[],s=$f(e);return s.actionExecutor=i=>{r.push(i)},[e.transition(t,n,s),r]}function B7(e,...[t]){const n=[],r=$f(e);return r.actionExecutor=o=>{n.push(o)},[e.getInitialSnapshot(r,t),n]}const z7={timeout:1/0};function U7(e,t,n){const r={...z7,...n};return new Promise((s,o)=>{const{signal:i}=r;if(i?.aborted){o(i.reason);return}let a=!1;const c=r.timeout===1/0?void 0:setTimeout(()=>{l(),o(new Error(`Timeout of ${r.timeout} ms exceeded`))},r.timeout),l=()=>{clearTimeout(c),a=!0,h?.unsubscribe(),f&&i.removeEventListener("abort",f)};function u(d){t(d)&&(l(),s(d))}let f,h;u(e.getSnapshot()),!a&&(i&&(f=()=>{l(),o(i.reason)},i.addEventListener("abort",f)),h=e.subscribe({next:u,error:d=>{l(),o(d)},complete:()=>{l(),o(new Error("Actor terminated without satisfying predicate"))}}),a&&h.unsubscribe())})}const W7=Object.freeze(Object.defineProperty({__proto__:null,Actor:uR,SimulatedClock:j7,SpecialTargets:gu,StateMachine:Pf,StateNode:_a,__unsafe_getAllOwnEventDescriptors:EU,and:BU,assertEvent:tp,assign:Qt,cancel:Tf,createActor:er,createEmptyActor:_7,createMachine:OR,emit:hs,enqueueActions:RR,forwardTo:A7,fromCallback:b7,fromEventObservable:w7,fromObservable:v7,fromPromise:xR,fromTransition:_R,getInitialSnapshot:N7,getNextSnapshot:L7,getStateNodes:Sa,initialTransition:B7,interpret:CU,isMachineSnapshot:wR,log:kR,matchesState:vg,not:DU,or:UU,pathToStateValue:oR,raise:Af,sendParent:ER,sendTo:uc,setup:Og,spawnChild:Mf,stateIn:LU,stop:FU,stopChild:ui,toObserver:fu,toPromise:D7,transition:V7,waitFor:U7},Symbol.toStringTag,{value:"Module"})),Ev=dp(W7);var zc={exports:{}},Rv;function kv(){return Rv||(Rv=1,(function(e,t){const{hasOwnProperty:n}=Object.prototype,r=g();r.configure=g,r.stringify=r,r.default=r,t.stringify=r,t.configure=g,e.exports=r;const s=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function o(b){return b.length<5e3&&!s.test(b)?`"${b}"`:JSON.stringify(b)}function i(b,v){if(b.length>200||v)return b.sort(v);for(let S=1;S<b.length;S++){const _=b[S];let k=S;for(;k!==0&&b[k-1]>_;)b[k]=b[k-1],k--;b[k]=_}return b}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function c(b){return a.call(b)!==void 0&&b.length!==0}function l(b,v,S){b.length<S&&(S=b.length);const _=v===","?"":" ";let k=`"0":${_}${b[0]}`;for(let I=1;I<S;I++)k+=`${v}"${I}":${_}${b[I]}`;return k}function u(b){if(n.call(b,"circularValue")){const v=b.circularValue;if(typeof v=="string")return`"${v}"`;if(v==null)return v;if(v===Error||v===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function f(b){let v;if(n.call(b,"deterministic")&&(v=b.deterministic,typeof v!="boolean"&&typeof v!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return v===void 0?!0:v}function h(b,v){let S;if(n.call(b,v)&&(S=b[v],typeof S!="boolean"))throw new TypeError(`The "${v}" argument must be of type boolean`);return S===void 0?!0:S}function d(b,v){let S;if(n.call(b,v)){if(S=b[v],typeof S!="number")throw new TypeError(`The "${v}" argument must be of type number`);if(!Number.isInteger(S))throw new TypeError(`The "${v}" argument must be an integer`);if(S<1)throw new RangeError(`The "${v}" argument must be >= 1`)}return S===void 0?1/0:S}function p(b){return b===1?"1 item":`${b} items`}function m(b){const v=new Set;for(const S of b)(typeof S=="string"||typeof S=="number")&&v.add(String(S));return v}function y(b){if(n.call(b,"strict")){const v=b.strict;if(typeof v!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(v)return S=>{let _=`Object can not safely be stringified. Received type ${typeof S}`;throw typeof S!="function"&&(_+=` (${S.toString()})`),new Error(_)}}}function g(b){b={...b};const v=y(b);v&&(b.bigint===void 0&&(b.bigint=!1),"circularValue"in b||(b.circularValue=Error));const S=u(b),_=h(b,"bigint"),k=f(b),I=typeof k=="function"?k:void 0,x=d(b,"maximumDepth"),R=d(b,"maximumBreadth");function T($,O,N,C,L,W){let q=O[$];switch(typeof q=="object"&&q!==null&&typeof q.toJSON=="function"&&(q=q.toJSON($)),q=C.call(O,$,q),typeof q){case"string":return o(q);case"object":{if(q===null)return"null";if(N.indexOf(q)!==-1)return S;let te="",K=",";const ne=W;if(Array.isArray(q)){if(q.length===0)return"[]";if(x<N.length+1)return'"[Array]"';N.push(q),L!==""&&(W+=L,te+=`
${W}`,K=`,
${W}`);const Z=Math.min(q.length,R);let D=0;for(;D<Z-1;D++){const ee=T(String(D),q,N,C,L,W);te+=ee!==void 0?ee:"null",te+=K}const X=T(String(D),q,N,C,L,W);if(te+=X!==void 0?X:"null",q.length-1>R){const ee=q.length-R-1;te+=`${K}"... ${p(ee)} not stringified"`}return L!==""&&(te+=`
${ne}`),N.pop(),`[${te}]`}let A=Object.keys(q);const j=A.length;if(j===0)return"{}";if(x<N.length+1)return'"[Object]"';let F="",G="";L!==""&&(W+=L,K=`,
${W}`,F=" ");const H=Math.min(j,R);k&&!c(q)&&(A=i(A,I)),N.push(q);for(let Z=0;Z<H;Z++){const D=A[Z],X=T(D,q,N,C,L,W);X!==void 0&&(te+=`${G}${o(D)}:${F}${X}`,G=K)}if(j>R){const Z=j-R;te+=`${G}"...":${F}"${p(Z)} not stringified"`,G=K}return L!==""&&G.length>1&&(te=`
${W}${te}
${ne}`),N.pop(),`{${te}}`}case"number":return isFinite(q)?String(q):v?v(q):"null";case"boolean":return q===!0?"true":"false";case"undefined":return;case"bigint":if(_)return String(q);default:return v?v(q):void 0}}function M($,O,N,C,L,W){switch(typeof O=="object"&&O!==null&&typeof O.toJSON=="function"&&(O=O.toJSON($)),typeof O){case"string":return o(O);case"object":{if(O===null)return"null";if(N.indexOf(O)!==-1)return S;const q=W;let te="",K=",";if(Array.isArray(O)){if(O.length===0)return"[]";if(x<N.length+1)return'"[Array]"';N.push(O),L!==""&&(W+=L,te+=`
${W}`,K=`,
${W}`);const j=Math.min(O.length,R);let F=0;for(;F<j-1;F++){const H=M(String(F),O[F],N,C,L,W);te+=H!==void 0?H:"null",te+=K}const G=M(String(F),O[F],N,C,L,W);if(te+=G!==void 0?G:"null",O.length-1>R){const H=O.length-R-1;te+=`${K}"... ${p(H)} not stringified"`}return L!==""&&(te+=`
${q}`),N.pop(),`[${te}]`}N.push(O);let ne="";L!==""&&(W+=L,K=`,
${W}`,ne=" ");let A="";for(const j of C){const F=M(j,O[j],N,C,L,W);F!==void 0&&(te+=`${A}${o(j)}:${ne}${F}`,A=K)}return L!==""&&A.length>1&&(te=`
${W}${te}
${q}`),N.pop(),`{${te}}`}case"number":return isFinite(O)?String(O):v?v(O):"null";case"boolean":return O===!0?"true":"false";case"undefined":return;case"bigint":if(_)return String(O);default:return v?v(O):void 0}}function B($,O,N,C,L){switch(typeof O){case"string":return o(O);case"object":{if(O===null)return"null";if(typeof O.toJSON=="function"){if(O=O.toJSON($),typeof O!="object")return B($,O,N,C,L);if(O===null)return"null"}if(N.indexOf(O)!==-1)return S;const W=L;if(Array.isArray(O)){if(O.length===0)return"[]";if(x<N.length+1)return'"[Array]"';N.push(O),L+=C;let F=`
${L}`;const G=`,
${L}`,H=Math.min(O.length,R);let Z=0;for(;Z<H-1;Z++){const X=B(String(Z),O[Z],N,C,L);F+=X!==void 0?X:"null",F+=G}const D=B(String(Z),O[Z],N,C,L);if(F+=D!==void 0?D:"null",O.length-1>R){const X=O.length-R-1;F+=`${G}"... ${p(X)} not stringified"`}return F+=`
${W}`,N.pop(),`[${F}]`}let q=Object.keys(O);const te=q.length;if(te===0)return"{}";if(x<N.length+1)return'"[Object]"';L+=C;const K=`,
${L}`;let ne="",A="",j=Math.min(te,R);c(O)&&(ne+=l(O,K,R),q=q.slice(O.length),j-=O.length,A=K),k&&(q=i(q,I)),N.push(O);for(let F=0;F<j;F++){const G=q[F],H=B(G,O[G],N,C,L);H!==void 0&&(ne+=`${A}${o(G)}: ${H}`,A=K)}if(te>R){const F=te-R;ne+=`${A}"...": "${p(F)} not stringified"`,A=K}return A!==""&&(ne=`
${L}${ne}
${W}`),N.pop(),`{${ne}}`}case"number":return isFinite(O)?String(O):v?v(O):"null";case"boolean":return O===!0?"true":"false";case"undefined":return;case"bigint":if(_)return String(O);default:return v?v(O):void 0}}function U($,O,N){switch(typeof O){case"string":return o(O);case"object":{if(O===null)return"null";if(typeof O.toJSON=="function"){if(O=O.toJSON($),typeof O!="object")return U($,O,N);if(O===null)return"null"}if(N.indexOf(O)!==-1)return S;let C="";const L=O.length!==void 0;if(L&&Array.isArray(O)){if(O.length===0)return"[]";if(x<N.length+1)return'"[Array]"';N.push(O);const ne=Math.min(O.length,R);let A=0;for(;A<ne-1;A++){const F=U(String(A),O[A],N);C+=F!==void 0?F:"null",C+=","}const j=U(String(A),O[A],N);if(C+=j!==void 0?j:"null",O.length-1>R){const F=O.length-R-1;C+=`,"... ${p(F)} not stringified"`}return N.pop(),`[${C}]`}let W=Object.keys(O);const q=W.length;if(q===0)return"{}";if(x<N.length+1)return'"[Object]"';let te="",K=Math.min(q,R);L&&c(O)&&(C+=l(O,",",R),W=W.slice(O.length),K-=O.length,te=","),k&&(W=i(W,I)),N.push(O);for(let ne=0;ne<K;ne++){const A=W[ne],j=U(A,O[A],N);j!==void 0&&(C+=`${te}${o(A)}:${j}`,te=",")}if(q>R){const ne=q-R;C+=`${te}"...":"${p(ne)} not stringified"`}return N.pop(),`{${C}}`}case"number":return isFinite(O)?String(O):v?v(O):"null";case"boolean":return O===!0?"true":"false";case"undefined":return;case"bigint":if(_)return String(O);default:return v?v(O):void 0}}function V($,O,N){if(arguments.length>1){let C="";if(typeof N=="number"?C=" ".repeat(Math.min(N,10)):typeof N=="string"&&(C=N.slice(0,10)),O!=null){if(typeof O=="function")return T("",{"":$},[],O,C,"");if(Array.isArray(O))return M("",$,[],m(O),C,"")}if(C.length!==0)return B("",$,[],C,"")}return U("",$,[])}return V}})(zc,zc.exports)),zc.exports}var Cd,Ov;function q7(){if(Ov)return Cd;Ov=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(x,R)=>{for(var T in R)e(x,T,{get:R[T],enumerable:!0})},o=(x,R,T,M)=>{if(R&&typeof R=="object"||typeof R=="function")for(let B of n(R))!r.call(x,B)&&B!==T&&e(x,B,{get:()=>R[B],enumerable:!(M=t(R,B))||M.enumerable});return x},i=x=>o(e({},"__esModule",{value:!0}),x),a={};s(a,{WebSocket:()=>b,default:()=>k}),Cd=i(a),(!globalThis.EventTarget||!globalThis.Event)&&console.error(`
  PartySocket requires a global 'EventTarget' class to be available!
  You can polyfill this global by adding this to your code before any partysocket imports: 
  
  \`\`\`
  import 'partysocket/event-target-polyfill';
  \`\`\`
  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.
`);var c=class extends Event{message;error;constructor(x,R){super("error",R),this.message=x.message,this.error=x}},l=class extends Event{code;reason;wasClean=!0;constructor(x=1e3,R="",T){super("close",T),this.code=x,this.reason=R}},u={Event,ErrorEvent:c,CloseEvent:l};function f(x,R){if(!x)throw new Error(R)}function h(x){return new x.constructor(x.type,x)}function d(x){return"data"in x?new MessageEvent(x.type,x):"code"in x||"reason"in x?new l(x.code||1999,x.reason||"unknown reason",x):"error"in x?new c(x.error,x):new Event(x.type,x)}var p=typeof process<"u"&&typeof process.versions?.node<"u"&&typeof document>"u",m=p?d:h,y={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},g=!1,b=class rs extends EventTarget{_ws;_retryCount=-1;_uptimeTimeout;_connectTimeout;_shouldReconnect=!0;_connectLock=!1;_binaryType="blob";_closeCalled=!1;_messageQueue=[];_debugLogger=console.log.bind(console);_url;_protocols;_options;constructor(R,T,M={}){super(),this._url=R,this._protocols=T,this._options=M,this._options.startClosed&&(this._shouldReconnect=!1),this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return rs.CONNECTING}get OPEN(){return rs.OPEN}get CLOSING(){return rs.CLOSING}get CLOSED(){return rs.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(R){this._binaryType=R,this._ws&&(this._ws.binaryType=R)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((T,M)=>(typeof M=="string"?T+=M.length:M instanceof Blob?T+=M.size:T+=M.byteLength,T),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?rs.CLOSED:rs.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}onclose=null;onerror=null;onmessage=null;onopen=null;close(R=1e3,T){if(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(R,T)}reconnect(R,T){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(R,T),this._connect())}send(R){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",R),this._ws.send(R);else{const{maxEnqueuedMessages:T=y.maxEnqueuedMessages}=this._options;this._messageQueue.length<T&&(this._debug("enqueue",R),this._messageQueue.push(R))}}_debug(...R){this._options.debug&&this._debugLogger("RWS>",...R)}_getNextDelay(){const{reconnectionDelayGrowFactor:R=y.reconnectionDelayGrowFactor,minReconnectionDelay:T=y.minReconnectionDelay,maxReconnectionDelay:M=y.maxReconnectionDelay}=this._options;let B=0;return this._retryCount>0&&(B=T*Math.pow(R,this._retryCount-1),B>M&&(B=M)),this._debug("next delay",B),B}_wait(){return new Promise(R=>{setTimeout(R,this._getNextDelay())})}_getNextProtocols(R){if(!R)return Promise.resolve(null);if(typeof R=="string"||Array.isArray(R))return Promise.resolve(R);if(typeof R=="function"){const T=R();if(!T)return Promise.resolve(null);if(typeof T=="string"||Array.isArray(T))return Promise.resolve(T);if(T.then)return T}throw Error("Invalid protocols")}_getNextUrl(R){if(typeof R=="string")return Promise.resolve(R);if(typeof R=="function"){const T=R();if(typeof T=="string")return Promise.resolve(T);if(T.then)return T}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;const{maxRetries:R=y.maxRetries,connectionTimeout:T=y.connectionTimeout}=this._options;if(this._retryCount>=R){this._debug("max retries reached",this._retryCount,">=",R);return}this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)])).then(([M,B])=>{if(this._closeCalled){this._connectLock=!1;return}!this._options.WebSocket&&typeof WebSocket>"u"&&!g&&(console.error(` No WebSocket implementation available. You should define options.WebSocket. 

For example, if you're using node.js, run \`npm install ws\`, and then in your code:

import PartySocket from 'partysocket';
import WS from 'ws';

const partysocket = new PartySocket({
  host: "127.0.0.1:1999",
  room: "test-room",
  WebSocket: WS
});

`),g=!0);const U=this._options.WebSocket||WebSocket;this._debug("connect",{url:M,protocols:B}),this._ws=B?new U(M,B):new U(M),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),T)}).catch(M=>{this._connectLock=!1,this._handleError(new u.ErrorEvent(Error(M.message),this))})}_handleTimeout(){this._debug("timeout event"),this._handleError(new u.ErrorEvent(Error("TIMEOUT"),this))}_disconnect(R=1e3,T){if(this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(R,T),this._handleClose(new u.CloseEvent(R,T,this))}catch{}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_handleOpen=R=>{this._debug("open event");const{minUptime:T=y.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),T),f(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(M=>this._ws?.send(M)),this._messageQueue=[],this.onopen&&this.onopen(R),this.dispatchEvent(m(R))};_handleMessage=R=>{this._debug("message event"),this.onmessage&&this.onmessage(R),this.dispatchEvent(m(R))};_handleError=R=>{this._debug("error event",R.message),this._disconnect(void 0,R.message==="TIMEOUT"?"timeout":void 0),this.onerror&&this.onerror(R),this._debug("exec error listeners"),this.dispatchEvent(m(R)),this._connect()};_handleClose=R=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(R),this.dispatchEvent(m(R))};_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}},v=x=>x[1]!==null&&x[1]!==void 0;function S(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();let x=new Date().getTime(),R=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(T){let M=Math.random()*16;return x>0?(M=(x+M)%16|0,x=Math.floor(x/16)):(M=(R+M)%16|0,R=Math.floor(R/16)),(T==="x"?M:M&3|8).toString(16)})}function _(x,R,T={}){const{host:M,path:B,protocol:U,room:V,party:$,query:O}=x;let N=M.replace(/^(http|https|ws|wss):\/\//,"");if(N.endsWith("/")&&(N=N.slice(0,-1)),B&&B.startsWith("/"))throw new Error("path must not start with a slash");const C=$??"main",L=B?`/${B}`:"",W=U||(N.startsWith("localhost:")||N.startsWith("127.0.0.1:")||N.startsWith("192.168.")||N.startsWith("10.")||N.startsWith("172.")&&N.split(".")[1]>="16"&&N.split(".")[1]<="31"||N.startsWith("[::ffff:7f00:1]:")?R:R+"s"),q=`${W}://${N}/${$?`parties/${$}`:"party"}/${V}${L}`,te=(ne={})=>`${q}?${new URLSearchParams([...Object.entries(T),...Object.entries(ne).filter(v)])}`,K=typeof O=="function"?async()=>te(await O()):te(O);return{host:N,path:L,room:V,name:C,protocol:W,partyUrl:q,urlProvider:K}}var k=class extends b{constructor(x){const R=I(x);super(R.urlProvider,R.protocols,R.socketOptions),this.partySocketOptions=x,this.setWSProperties(R)}_pk;_pkurl;name;room;host;path;updateProperties(x){const R=I({...this.partySocketOptions,...x,host:x.host??this.host,room:x.room??this.room,path:x.path??this.path});this._url=R.urlProvider,this._protocols=R.protocols,this._options=R.socketOptions,this.setWSProperties(R)}setWSProperties(x){const{_pk:R,_pkurl:T,name:M,room:B,host:U,path:V}=x;this._pk=R,this._pkurl=T,this.name=M,this.room=B,this.host=U,this.path=V}reconnect(x,R){if(!this.room||!this.host)throw new Error("The room and host must be set before connecting, use `updateProperties` method to set them or pass them to the constructor.");super.reconnect(x,R)}get id(){return this._pk}get roomUrl(){return this._pkurl}static async fetch(x,R){const T=_(x,"http"),M=typeof T.urlProvider=="string"?T.urlProvider:await T.urlProvider();return(x.fetch??fetch)(M,R)}};function I(x){const{id:R,host:T,path:M,party:B,room:U,protocol:V,query:$,protocols:O,...N}=x,C=R||S(),L=_(x,"ws",{_pk:C});return{_pk:C,_pkurl:L.partyUrl,name:L.name,room:L.room,host:L.host,path:L.path,protocols:O,socketOptions:N,urlProvider:L.urlProvider}}return Cd}var K7=(function(){function e(){this.keyToValue=new Map,this.valueToKey=new Map}return e.prototype.set=function(t,n){this.keyToValue.set(t,n),this.valueToKey.set(n,t)},e.prototype.getByKey=function(t){return this.keyToValue.get(t)},e.prototype.getByValue=function(t){return this.valueToKey.get(t)},e.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},e})(),CR=(function(){function e(t){this.generateIdentifier=t,this.kv=new K7}return e.prototype.register=function(t,n){this.kv.getByValue(t)||(n||(n=this.generateIdentifier(t)),this.kv.set(n,t))},e.prototype.clear=function(){this.kv.clear()},e.prototype.getIdentifier=function(t){return this.kv.getByValue(t)},e.prototype.getValue=function(t){return this.kv.getByKey(t)},e})(),H7=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),G7=(function(e){H7(t,e);function t(){var n=e.call(this,function(r){return r.name})||this;return n.classToAllowedProps=new Map,n}return t.prototype.register=function(n,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(n,r.allowProps),e.prototype.register.call(this,n,r.identifier)):e.prototype.register.call(this,n,r)},t.prototype.getAllowedProps=function(n){return this.classToAllowedProps.get(n)},t})(CR),J7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o};function Y7(e){if("values"in Object)return Object.values(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function X7(e,t){var n=Y7(e);if("find"in n)return n.find(t);for(var r=n,s=0;s<r.length;s++){var o=r[s];if(t(o))return o}}function Jo(e,t){Object.entries(e).forEach(function(n){var r=J7(n,2),s=r[0],o=r[1];return t(o,s)})}function pl(e,t){return e.indexOf(t)!==-1}function Cv(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r))return r}}var Z7=(function(){function e(){this.transfomers={}}return e.prototype.register=function(t){this.transfomers[t.name]=t},e.prototype.findApplicable=function(t){return X7(this.transfomers,function(n){return n.isApplicable(t)})},e.prototype.findByName=function(t){return this.transfomers[t]},e})(),Q7=function(e){return Object.prototype.toString.call(e).slice(8,-1)},IR=function(e){return typeof e>"u"},e9=function(e){return e===null},xa=function(e){return typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype},np=function(e){return xa(e)&&Object.keys(e).length===0},Gr=function(e){return Array.isArray(e)},t9=function(e){return typeof e=="string"},n9=function(e){return typeof e=="number"&&!isNaN(e)},r9=function(e){return typeof e=="boolean"},s9=function(e){return e instanceof RegExp},Ea=function(e){return e instanceof Map},Ra=function(e){return e instanceof Set},TR=function(e){return Q7(e)==="Symbol"},o9=function(e){return e instanceof Date&&!isNaN(e.valueOf())},i9=function(e){return e instanceof Error},Iv=function(e){return typeof e=="number"&&isNaN(e)},a9=function(e){return r9(e)||e9(e)||IR(e)||n9(e)||t9(e)||TR(e)},c9=function(e){return typeof e=="bigint"},l9=function(e){return e===1/0||e===-1/0},u9=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},f9=function(e){return e instanceof URL},MR=function(e){return e.replace(/\./g,"\\.")},Id=function(e){return e.map(String).map(MR).join(".")},sa=function(e){for(var t=[],n="",r=0;r<e.length;r++){var s=e.charAt(r),o=s==="\\"&&e.charAt(r+1)===".";if(o){n+=".",r++;continue}var i=s===".";if(i){t.push(n),n="";continue}n+=s}var a=n;return t.push(a),t},rp=function(){return rp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},rp.apply(this,arguments)},sp=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},op=function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e};function Dn(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}var AR=[Dn(IR,"undefined",function(){return null},function(){}),Dn(c9,"bigint",function(e){return e.toString()},function(e){return typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)}),Dn(o9,"Date",function(e){return e.toISOString()},function(e){return new Date(e)}),Dn(i9,"Error",function(e,t){var n={name:e.name,message:e.message};return t.allowedErrorProps.forEach(function(r){n[r]=e[r]}),n},function(e,t){var n=new Error(e.message);return n.name=e.name,n.stack=e.stack,t.allowedErrorProps.forEach(function(r){n[r]=e[r]}),n}),Dn(s9,"regexp",function(e){return""+e},function(e){var t=e.slice(1,e.lastIndexOf("/")),n=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,n)}),Dn(Ra,"set",function(e){return op([],sp(e.values()))},function(e){return new Set(e)}),Dn(Ea,"map",function(e){return op([],sp(e.entries()))},function(e){return new Map(e)}),Dn(function(e){return Iv(e)||l9(e)},"number",function(e){return Iv(e)?"NaN":e>0?"Infinity":"-Infinity"},Number),Dn(function(e){return e===0&&1/e===-1/0},"number",function(){return"-0"},Number),Dn(f9,"URL",function(e){return e.toString()},function(e){return new URL(e)})];function Ff(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}var PR=Ff(function(e,t){if(TR(e)){var n=!!t.symbolRegistry.getIdentifier(e);return n}return!1},function(e,t){var n=t.symbolRegistry.getIdentifier(e);return["symbol",n]},function(e){return e.description},function(e,t,n){var r=n.symbolRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),d9=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(e,t){return e[t.name]=t,e},{}),$R=Ff(u9,function(e){return["typed-array",e.constructor.name]},function(e){return op([],sp(e))},function(e,t){var n=d9[t[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(e)});function FR(e,t){if(e?.constructor){var n=!!t.classRegistry.getIdentifier(e.constructor);return n}return!1}var NR=Ff(FR,function(e,t){var n=t.classRegistry.getIdentifier(e.constructor);return["class",n]},function(e,t){var n=t.classRegistry.getAllowedProps(e.constructor);if(!n)return rp({},e);var r={};return n.forEach(function(s){r[s]=e[s]}),r},function(e,t,n){var r=n.classRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(r.prototype),e)}),LR=Ff(function(e,t){return!!t.customTransformerRegistry.findApplicable(e)},function(e,t){var n=t.customTransformerRegistry.findApplicable(e);return["custom",n.name]},function(e,t){var n=t.customTransformerRegistry.findApplicable(e);return n.serialize(e)},function(e,t,n){var r=n.customTransformerRegistry.findByName(t[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(e)}),h9=[NR,PR,LR,$R],Tv=function(e,t){var n=Cv(h9,function(s){return s.isApplicable(e,t)});if(n)return{value:n.transform(e,t),type:n.annotation(e,t)};var r=Cv(AR,function(s){return s.isApplicable(e,t)});if(r)return{value:r.transform(e,t),type:r.annotation}},jR={};AR.forEach(function(e){jR[e.annotation]=e});var p9=function(e,t,n){if(Gr(t))switch(t[0]){case"symbol":return PR.untransform(e,t,n);case"class":return NR.untransform(e,t,n);case"custom":return LR.untransform(e,t,n);case"typed-array":return $R.untransform(e,t,n);default:throw new Error("Unknown transformation: "+t)}else{var r=jR[t];if(!r)throw new Error("Unknown transformation: "+t);return r.untransform(e,n)}},uo=function(e,t){for(var n=e.keys();t>0;)n.next(),t--;return n.next().value};function DR(e){if(pl(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(pl(e,"prototype"))throw new Error("prototype is not allowed as a property");if(pl(e,"constructor"))throw new Error("constructor is not allowed as a property")}var m9=function(e,t){DR(t);for(var n=0;n<t.length;n++){var r=t[n];if(Ra(e))e=uo(e,+r);else if(Ea(e)){var s=+r,o=+t[++n]==0?"key":"value",i=uo(e,s);switch(o){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[r]}return e},ip=function(e,t,n){if(DR(t),t.length===0)return n(e);for(var r=e,s=0;s<t.length-1;s++){var o=t[s];if(Gr(r)){var i=+o;r=r[i]}else if(xa(r))r=r[o];else if(Ra(r)){var a=+o;r=uo(r,a)}else if(Ea(r)){var c=s===t.length-2;if(c)break;var a=+o,l=+t[++s]==0?"key":"value",u=uo(r,a);switch(l){case"key":r=u;break;case"value":r=r.get(u);break}}}var f=t[t.length-1];if(Gr(r)?r[+f]=n(r[+f]):xa(r)&&(r[f]=n(r[f])),Ra(r)){var h=uo(r,+f),d=n(h);h!==d&&(r.delete(h),r.add(d))}if(Ea(r)){var a=+t[t.length-2],p=uo(r,a),l=+f==0?"key":"value";switch(l){case"key":{var m=n(p);r.set(m,r.get(p)),m!==p&&r.delete(p);break}case"value":{r.set(p,n(r.get(p)));break}}}return e},pr=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},Dr=function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e};function ap(e,t,n){if(n===void 0&&(n=[]),!!e){if(!Gr(e)){Jo(e,function(i,a){return ap(i,t,Dr(Dr([],pr(n)),pr(sa(a))))});return}var r=pr(e,2),s=r[0],o=r[1];o&&Jo(o,function(i,a){ap(i,t,Dr(Dr([],pr(n)),pr(sa(a))))}),t(s,n)}}function g9(e,t,n){return ap(t,function(r,s){e=ip(e,s,function(o){return p9(o,r,n)})}),e}function y9(e,t){function n(i,a){var c=m9(e,sa(a));i.map(sa).forEach(function(l){e=ip(e,l,function(){return c})})}if(Gr(t)){var r=pr(t,2),s=r[0],o=r[1];s.forEach(function(i){e=ip(e,sa(i),function(){return e})}),o&&Jo(o,n)}else Jo(t,n);return e}var b9=function(e,t){return xa(e)||Gr(e)||Ea(e)||Ra(e)||FR(e,t)};function v9(e,t,n){var r=n.get(e);r?r.push(t):n.set(e,[t])}function w9(e,t){var n={},r=void 0;return e.forEach(function(s){if(!(s.length<=1)){t||(s=s.map(function(c){return c.map(String)}).sort(function(c,l){return c.length-l.length}));var o=pr(s),i=o[0],a=o.slice(1);i.length===0?r=a.map(Id):n[Id(i)]=a.map(Id)}}),r?np(n)?[r]:[r,n]:np(n)?void 0:n}var VR=function(e,t,n,r,s,o,i){var a;s===void 0&&(s=[]),o===void 0&&(o=[]),i===void 0&&(i=new Map);var c=a9(e);if(!c){v9(e,s,t);var l=i.get(e);if(l)return r?{transformedValue:null}:l}if(!b9(e,n)){var u=Tv(e,n),f=u?{transformedValue:u.value,annotations:[u.type]}:{transformedValue:e};return c||i.set(e,f),f}if(pl(o,e))return{transformedValue:null};var h=Tv(e,n),d=(a=h?.value)!==null&&a!==void 0?a:e,p=Gr(d)?[]:{},m={};Jo(d,function(g,b){var v=VR(g,t,n,r,Dr(Dr([],pr(s)),[b]),Dr(Dr([],pr(o)),[e]),i);p[b]=v.transformedValue,Gr(v.annotations)?m[b]=v.annotations:xa(v.annotations)&&Jo(v.annotations,function(S,_){m[MR(b)+"."+_]=S})});var y=np(m)?{transformedValue:p,annotations:h?[h.type]:void 0}:{transformedValue:p,annotations:h?[h.type,m]:m};return c||i.set(e,y),y};function BR(e){return Object.prototype.toString.call(e).slice(8,-1)}function Mv(e){return BR(e)==="Array"}function S9(e){if(BR(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function _9(e,t,n,r,s){const o={}.propertyIsEnumerable.call(r,t)?"enumerable":"nonenumerable";o==="enumerable"&&(e[t]=n),s&&o==="nonenumerable"&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function cp(e,t={}){if(Mv(e))return e.map(s=>cp(s,t));if(!S9(e))return e;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e);return[...n,...r].reduce((s,o)=>{if(Mv(t.props)&&!t.props.includes(o))return s;const i=e[o],a=cp(i,t);return _9(s,o,a,e,t.nonenumerable),s},{})}var os=function(){return os=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},os.apply(this,arguments)},x9=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},E9=function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e},tr=(function(){function e(t){var n=t===void 0?{}:t,r=n.dedupe,s=r===void 0?!1:r;this.classRegistry=new G7,this.symbolRegistry=new CR(function(o){var i;return(i=o.description)!==null&&i!==void 0?i:""}),this.customTransformerRegistry=new Z7,this.allowedErrorProps=[],this.dedupe=s}return e.prototype.serialize=function(t){var n=new Map,r=VR(t,n,this,this.dedupe),s={json:r.transformedValue};r.annotations&&(s.meta=os(os({},s.meta),{values:r.annotations}));var o=w9(n,this.dedupe);return o&&(s.meta=os(os({},s.meta),{referentialEqualities:o})),s},e.prototype.deserialize=function(t){var n=t.json,r=t.meta,s=cp(n);return r?.values&&(s=g9(s,r.values,this)),r?.referentialEqualities&&(s=y9(s,r.referentialEqualities)),s},e.prototype.stringify=function(t){return JSON.stringify(this.serialize(t))},e.prototype.parse=function(t){return this.deserialize(JSON.parse(t))},e.prototype.registerClass=function(t,n){this.classRegistry.register(t,n)},e.prototype.registerSymbol=function(t,n){this.symbolRegistry.register(t,n)},e.prototype.registerCustom=function(t,n){this.customTransformerRegistry.register(os({name:n},t))},e.prototype.allowErrorProps=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(t=this.allowedErrorProps).push.apply(t,E9([],x9(n)))},e.defaultInstance=new e,e.serialize=e.defaultInstance.serialize.bind(e.defaultInstance),e.deserialize=e.defaultInstance.deserialize.bind(e.defaultInstance),e.stringify=e.defaultInstance.stringify.bind(e.defaultInstance),e.parse=e.defaultInstance.parse.bind(e.defaultInstance),e.registerClass=e.defaultInstance.registerClass.bind(e.defaultInstance),e.registerSymbol=e.defaultInstance.registerSymbol.bind(e.defaultInstance),e.registerCustom=e.defaultInstance.registerCustom.bind(e.defaultInstance),e.allowErrorProps=e.defaultInstance.allowErrorProps.bind(e.defaultInstance),e})(),R9=tr.serialize,k9=tr.deserialize,O9=tr.stringify,C9=tr.parse,I9=tr.registerClass,T9=tr.registerCustom,M9=tr.registerSymbol,A9=tr.allowErrorProps;const P9=Object.freeze(Object.defineProperty({__proto__:null,SuperJSON:tr,allowErrorProps:A9,default:tr,deserialize:k9,parse:C9,registerClass:I9,registerCustom:T9,registerSymbol:M9,serialize:R9,stringify:O9},Symbol.toStringTag,{value:"Module"})),$9=dp(P9);var Td={},ki={},Uc={},Av;function zR(){if(Av)return Uc;Av=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.default=n;let e;const t=new Uint8Array(16);function n(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Uc}var Qs={},Oi={},Ci={},Pv;function F9(){if(Pv)return Ci;Pv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Ci.default=e,Ci}var $v;function Nf(){if($v)return Oi;$v=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.default=void 0;var e=t(F9());function t(s){return s&&s.__esModule?s:{default:s}}function n(s){return typeof s=="string"&&e.default.test(s)}var r=n;return Oi.default=r,Oi}var Fv;function Lf(){if(Fv)return Qs;Fv=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.default=void 0,Qs.unsafeStringify=r;var e=t(Nf());function t(i){return i&&i.__esModule?i:{default:i}}const n=[];for(let i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function r(i,a=0){return n[i[a+0]]+n[i[a+1]]+n[i[a+2]]+n[i[a+3]]+"-"+n[i[a+4]]+n[i[a+5]]+"-"+n[i[a+6]]+n[i[a+7]]+"-"+n[i[a+8]]+n[i[a+9]]+"-"+n[i[a+10]]+n[i[a+11]]+n[i[a+12]]+n[i[a+13]]+n[i[a+14]]+n[i[a+15]]}function s(i,a=0){const c=r(i,a);if(!(0,e.default)(c))throw TypeError("Stringified UUID is invalid");return c}var o=s;return Qs.default=o,Qs}var Nv;function N9(){if(Nv)return ki;Nv=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.default=void 0;var e=n(zR()),t=Lf();function n(l){return l&&l.__esModule?l:{default:l}}let r,s,o=0,i=0;function a(l,u,f){let h=u&&f||0;const d=u||new Array(16);l=l||{};let p=l.node||r,m=l.clockseq!==void 0?l.clockseq:s;if(p==null||m==null){const _=l.random||(l.rng||e.default)();p==null&&(p=r=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),m==null&&(m=s=(_[6]<<8|_[7])&16383)}let y=l.msecs!==void 0?l.msecs:Date.now(),g=l.nsecs!==void 0?l.nsecs:i+1;const b=y-o+(g-i)/1e4;if(b<0&&l.clockseq===void 0&&(m=m+1&16383),(b<0||y>o)&&l.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=y,i=g,s=m,y+=122192928e5;const v=((y&268435455)*1e4+g)%4294967296;d[h++]=v>>>24&255,d[h++]=v>>>16&255,d[h++]=v>>>8&255,d[h++]=v&255;const S=y/4294967296*1e4&268435455;d[h++]=S>>>8&255,d[h++]=S&255,d[h++]=S>>>24&15|16,d[h++]=S>>>16&255,d[h++]=m>>>8|128,d[h++]=m&255;for(let _=0;_<6;++_)d[h+_]=p[_];return u||(0,t.unsafeStringify)(d)}var c=a;return ki.default=c,ki}var Ii={},Ir={},Ti={},Lv;function UR(){if(Lv)return Ti;Lv=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.default=void 0;var e=t(Nf());function t(s){return s&&s.__esModule?s:{default:s}}function n(s){if(!(0,e.default)(s))throw TypeError("Invalid UUID");let o;const i=new Uint8Array(16);return i[0]=(o=parseInt(s.slice(0,8),16))>>>24,i[1]=o>>>16&255,i[2]=o>>>8&255,i[3]=o&255,i[4]=(o=parseInt(s.slice(9,13),16))>>>8,i[5]=o&255,i[6]=(o=parseInt(s.slice(14,18),16))>>>8,i[7]=o&255,i[8]=(o=parseInt(s.slice(19,23),16))>>>8,i[9]=o&255,i[10]=(o=parseInt(s.slice(24,36),16))/1099511627776&255,i[11]=o/4294967296&255,i[12]=o>>>24&255,i[13]=o>>>16&255,i[14]=o>>>8&255,i[15]=o&255,i}var r=n;return Ti.default=r,Ti}var jv;function WR(){if(jv)return Ir;jv=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.URL=Ir.DNS=void 0,Ir.default=i;var e=Lf(),t=n(UR());function n(a){return a&&a.__esModule?a:{default:a}}function r(a){a=unescape(encodeURIComponent(a));const c=[];for(let l=0;l<a.length;++l)c.push(a.charCodeAt(l));return c}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ir.DNS=s;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ir.URL=o;function i(a,c,l){function u(f,h,d,p){var m;if(typeof f=="string"&&(f=r(f)),typeof h=="string"&&(h=(0,t.default)(h)),((m=h)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+f.length);if(y.set(h),y.set(f,h.length),y=l(y),y[6]=y[6]&15|c,y[8]=y[8]&63|128,d){p=p||0;for(let g=0;g<16;++g)d[p+g]=y[g];return d}return(0,e.unsafeStringify)(y)}try{u.name=a}catch{}return u.DNS=s,u.URL=o,u}return Ir}var Mi={},Dv;function L9(){if(Dv)return Mi;Dv=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.default=void 0;function e(d){if(typeof d=="string"){const p=unescape(encodeURIComponent(d));d=new Uint8Array(p.length);for(let m=0;m<p.length;++m)d[m]=p.charCodeAt(m)}return t(r(s(d),d.length*8))}function t(d){const p=[],m=d.length*32,y="0123456789abcdef";for(let g=0;g<m;g+=8){const b=d[g>>5]>>>g%32&255,v=parseInt(y.charAt(b>>>4&15)+y.charAt(b&15),16);p.push(v)}return p}function n(d){return(d+64>>>9<<4)+14+1}function r(d,p){d[p>>5]|=128<<p%32,d[n(p)-1]=p;let m=1732584193,y=-271733879,g=-1732584194,b=271733878;for(let v=0;v<d.length;v+=16){const S=m,_=y,k=g,I=b;m=c(m,y,g,b,d[v],7,-680876936),b=c(b,m,y,g,d[v+1],12,-389564586),g=c(g,b,m,y,d[v+2],17,606105819),y=c(y,g,b,m,d[v+3],22,-1044525330),m=c(m,y,g,b,d[v+4],7,-176418897),b=c(b,m,y,g,d[v+5],12,1200080426),g=c(g,b,m,y,d[v+6],17,-1473231341),y=c(y,g,b,m,d[v+7],22,-45705983),m=c(m,y,g,b,d[v+8],7,1770035416),b=c(b,m,y,g,d[v+9],12,-1958414417),g=c(g,b,m,y,d[v+10],17,-42063),y=c(y,g,b,m,d[v+11],22,-1990404162),m=c(m,y,g,b,d[v+12],7,1804603682),b=c(b,m,y,g,d[v+13],12,-40341101),g=c(g,b,m,y,d[v+14],17,-1502002290),y=c(y,g,b,m,d[v+15],22,1236535329),m=l(m,y,g,b,d[v+1],5,-165796510),b=l(b,m,y,g,d[v+6],9,-1069501632),g=l(g,b,m,y,d[v+11],14,643717713),y=l(y,g,b,m,d[v],20,-373897302),m=l(m,y,g,b,d[v+5],5,-701558691),b=l(b,m,y,g,d[v+10],9,38016083),g=l(g,b,m,y,d[v+15],14,-660478335),y=l(y,g,b,m,d[v+4],20,-405537848),m=l(m,y,g,b,d[v+9],5,568446438),b=l(b,m,y,g,d[v+14],9,-1019803690),g=l(g,b,m,y,d[v+3],14,-187363961),y=l(y,g,b,m,d[v+8],20,1163531501),m=l(m,y,g,b,d[v+13],5,-1444681467),b=l(b,m,y,g,d[v+2],9,-51403784),g=l(g,b,m,y,d[v+7],14,1735328473),y=l(y,g,b,m,d[v+12],20,-1926607734),m=u(m,y,g,b,d[v+5],4,-378558),b=u(b,m,y,g,d[v+8],11,-2022574463),g=u(g,b,m,y,d[v+11],16,1839030562),y=u(y,g,b,m,d[v+14],23,-35309556),m=u(m,y,g,b,d[v+1],4,-1530992060),b=u(b,m,y,g,d[v+4],11,1272893353),g=u(g,b,m,y,d[v+7],16,-155497632),y=u(y,g,b,m,d[v+10],23,-1094730640),m=u(m,y,g,b,d[v+13],4,681279174),b=u(b,m,y,g,d[v],11,-358537222),g=u(g,b,m,y,d[v+3],16,-722521979),y=u(y,g,b,m,d[v+6],23,76029189),m=u(m,y,g,b,d[v+9],4,-640364487),b=u(b,m,y,g,d[v+12],11,-421815835),g=u(g,b,m,y,d[v+15],16,530742520),y=u(y,g,b,m,d[v+2],23,-995338651),m=f(m,y,g,b,d[v],6,-198630844),b=f(b,m,y,g,d[v+7],10,1126891415),g=f(g,b,m,y,d[v+14],15,-1416354905),y=f(y,g,b,m,d[v+5],21,-57434055),m=f(m,y,g,b,d[v+12],6,1700485571),b=f(b,m,y,g,d[v+3],10,-1894986606),g=f(g,b,m,y,d[v+10],15,-1051523),y=f(y,g,b,m,d[v+1],21,-2054922799),m=f(m,y,g,b,d[v+8],6,1873313359),b=f(b,m,y,g,d[v+15],10,-30611744),g=f(g,b,m,y,d[v+6],15,-1560198380),y=f(y,g,b,m,d[v+13],21,1309151649),m=f(m,y,g,b,d[v+4],6,-145523070),b=f(b,m,y,g,d[v+11],10,-1120210379),g=f(g,b,m,y,d[v+2],15,718787259),y=f(y,g,b,m,d[v+9],21,-343485551),m=o(m,S),y=o(y,_),g=o(g,k),b=o(b,I)}return[m,y,g,b]}function s(d){if(d.length===0)return[];const p=d.length*8,m=new Uint32Array(n(p));for(let y=0;y<p;y+=8)m[y>>5]|=(d[y/8]&255)<<y%32;return m}function o(d,p){const m=(d&65535)+(p&65535);return(d>>16)+(p>>16)+(m>>16)<<16|m&65535}function i(d,p){return d<<p|d>>>32-p}function a(d,p,m,y,g,b){return o(i(o(o(p,d),o(y,b)),g),m)}function c(d,p,m,y,g,b,v){return a(p&m|~p&y,d,p,g,b,v)}function l(d,p,m,y,g,b,v){return a(p&y|m&~y,d,p,g,b,v)}function u(d,p,m,y,g,b,v){return a(p^m^y,d,p,g,b,v)}function f(d,p,m,y,g,b,v){return a(m^(p|~y),d,p,g,b,v)}var h=e;return Mi.default=h,Mi}var Vv;function j9(){if(Vv)return Ii;Vv=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.default=void 0;var e=n(WR()),t=n(L9());function n(o){return o&&o.__esModule?o:{default:o}}var s=(0,e.default)("v3",48,t.default);return Ii.default=s,Ii}var Ai={},Pi={},Bv;function D9(){if(Bv)return Pi;Bv=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Pi.default=t,Pi}var zv;function V9(){if(zv)return Ai;zv=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0;var e=r(D9()),t=r(zR()),n=Lf();function r(i){return i&&i.__esModule?i:{default:i}}function s(i,a,c){if(e.default.randomUUID&&!a&&!i)return e.default.randomUUID();i=i||{};const l=i.random||(i.rng||t.default)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,a){c=c||0;for(let u=0;u<16;++u)a[c+u]=l[u];return a}return(0,n.unsafeStringify)(l)}var o=s;return Ai.default=o,Ai}var $i={},Fi={},Uv;function B9(){if(Uv)return Fi;Uv=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.default=void 0;function e(s,o,i,a){switch(s){case 0:return o&i^~o&a;case 1:return o^i^a;case 2:return o&i^o&a^i&a;case 3:return o^i^a}}function t(s,o){return s<<o|s>>>32-o}function n(s){const o=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){const u=unescape(encodeURIComponent(s));s=[];for(let f=0;f<u.length;++f)s.push(u.charCodeAt(f))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);const a=s.length/4+2,c=Math.ceil(a/16),l=new Array(c);for(let u=0;u<c;++u){const f=new Uint32Array(16);for(let h=0;h<16;++h)f[h]=s[u*64+h*4]<<24|s[u*64+h*4+1]<<16|s[u*64+h*4+2]<<8|s[u*64+h*4+3];l[u]=f}l[c-1][14]=(s.length-1)*8/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=(s.length-1)*8&4294967295;for(let u=0;u<c;++u){const f=new Uint32Array(80);for(let g=0;g<16;++g)f[g]=l[u][g];for(let g=16;g<80;++g)f[g]=t(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);let h=i[0],d=i[1],p=i[2],m=i[3],y=i[4];for(let g=0;g<80;++g){const b=Math.floor(g/20),v=t(h,5)+e(b,d,p,m)+y+o[b]+f[g]>>>0;y=m,m=p,p=t(d,30)>>>0,d=h,h=v}i[0]=i[0]+h>>>0,i[1]=i[1]+d>>>0,i[2]=i[2]+p>>>0,i[3]=i[3]+m>>>0,i[4]=i[4]+y>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var r=n;return Fi.default=r,Fi}var Wv;function z9(){if(Wv)return $i;Wv=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.default=void 0;var e=n(WR()),t=n(B9());function n(o){return o&&o.__esModule?o:{default:o}}var s=(0,e.default)("v5",80,t.default);return $i.default=s,$i}var Ni={},qv;function U9(){if(qv)return Ni;qv=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Ni.default=e,Ni}var Li={},Kv;function W9(){if(Kv)return Li;Kv=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0;var e=t(Nf());function t(s){return s&&s.__esModule?s:{default:s}}function n(s){if(!(0,e.default)(s))throw TypeError("Invalid UUID");return parseInt(s.slice(14,15),16)}var r=n;return Li.default=r,Li}var Hv;function q9(){return Hv||(Hv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.default}});var t=u(N9()),n=u(j9()),r=u(V9()),s=u(z9()),o=u(U9()),i=u(W9()),a=u(Nf()),c=u(Lf()),l=u(UR());function u(f){return f&&f.__esModule?f:{default:f}}})(Td)),Td}var so=null;typeof WebSocket<"u"?so=WebSocket:typeof MozWebSocket<"u"?so=MozWebSocket:typeof global<"u"?so=global.WebSocket||global.MozWebSocket:typeof window<"u"?so=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(so=self.WebSocket||self.MozWebSocket);const K9=so,H9=Object.freeze(Object.defineProperty({__proto__:null,default:K9},Symbol.toStringTag,{value:"Module"})),Gv=dp(H9);var Md,Jv;function G9(){if(Jv)return Md;Jv=1;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,i=(A,j)=>{for(var F in j)t(A,F,{get:j[F],enumerable:!0})},a=(A,j,F,G)=>{if(j&&typeof j=="object"||typeof j=="function")for(let H of r(j))!o.call(A,H)&&H!==F&&t(A,H,{get:()=>j[H],enumerable:!(G=n(j,H))||G.enumerable});return A},c=(A,j,F)=>(F=A!=null?e(s(A)):{},a(!A||!A.__esModule?t(F,"default",{value:A,enumerable:!0}):F,A)),l=A=>a(t({},"__esModule",{value:!0}),A),u={};i(u,{createBrowserInspector:()=>M,createBrowserReceiver:()=>U,createInspector:()=>_,createSkyInspector:()=>C,createWebSocketInspector:()=>K,createWebSocketReceiver:()=>ne}),Md=l(u);var f=c(dU()),h=Ev;function d(A){return typeof A=="string"?{type:A}:A}var p=typeof process<"u"&&typeof process.versions?.node<"u"&&typeof document>"u",m={version:"0.4.0"};function y(A){typeof window<"u"?(window.requestIdleCallback||window.requestAnimationFrame)(A):setTimeout(A,0)}var g=c(kv());function b(A){let j=A;do j=j._parent;while(j?._parent);return j}function v(A){return(typeof A=="string"?void 0:b(A)?.sessionId)??void 0}var S={filter:()=>!0,serialize:A=>A,autoStart:!0,maxDeferredEvents:200,sanitizeEvent:A=>A,sanitizeContext:A=>A};function _(A,j){function F(H){if(j?.filter&&!j.filter(H))return;const Z=j?.sanitizeContext||j?.sanitizeEvent?H:{...H};j?.sanitizeContext&&(Z.type==="@xstate.actor"||Z.type==="@xstate.snapshot")&&(Z.snapshot={...Z.snapshot,context:j.sanitizeContext(Z.snapshot.context)}),j?.sanitizeEvent&&(Z.type==="@xstate.event"||Z.type==="@xstate.snapshot")&&(Z.event=j.sanitizeEvent(Z.event));const D=j?.serialize?.(Z)??Z;A.send(D)}return{adapter:A,actor:(H,Z,D)=>{const X=typeof H=="string"?H:H.sessionId,ee=H?.logic?.config,Ie=ee?(0,g.default)(ee):void 0,ce=D?.rootId??typeof H=="string"?void 0:v(H),Y=D?.parentId??typeof H=="string"?void 0:H._parent?.sessionId,se=ee?ee.id:X;F({type:"@xstate.actor",name:se,sessionId:X,createdAt:Date.now().toString(),_version:m.version,rootId:ce,parentId:Y,id:null,definition:Ie,snapshot:Z??{status:"active"}})},event:(H,Z,D)=>{const X=typeof H=="string"?H:H.sessionId,ee=D?.source?typeof D.source=="string"?D.source:D.source.sessionId:void 0;F({type:"@xstate.event",sourceId:ee,sessionId:X,event:d(Z),id:Math.random().toString(),createdAt:Date.now().toString(),rootId:"anonymous",_version:m.version})},snapshot:(H,Z,D)=>{const X=typeof H=="string"?H:H.sessionId;F({type:"@xstate.snapshot",snapshot:{status:"active",...Z},event:D?.event??{type:""},sessionId:X,id:null,createdAt:Date.now().toString(),rootId:"anonymous",_version:m.version})},inspect:{next:H=>{y(function(){const D=k(H);D&&F(D)})}},start(){A.start?.()},stop(){A.stop?.()}}}function k(A){switch(A.type){case"@xstate.actor":{const j=A.actorRef,G=j?.logic?.config;let H=j.id;H===j.sessionId&&G&&(H=G.id);const Z=typeof G=="object"?(0,g.default)(G,(D,X)=>typeof X=="function"?{type:X.name}:X):(0,g.default)({id:H});return{name:H,type:"@xstate.actor",definition:Z,_version:m.version,createdAt:Date.now().toString(),id:null,rootId:A.rootId,parentId:A.actorRef._parent?.sessionId,sessionId:A.actorRef.sessionId,snapshot:A.actorRef.getSnapshot()}}case"@xstate.event":return{type:"@xstate.event",event:A.event,sourceId:A.sourceRef?.sessionId,sessionId:A.actorRef.sessionId,_version:m.version,createdAt:Date.now().toString(),id:null,rootId:A.rootId};case"@xstate.snapshot":return{type:"@xstate.snapshot",event:A.event,snapshot:JSON.parse((0,g.default)(A.snapshot)),sessionId:A.actorRef.sessionId,_version:m.version,createdAt:Date.now().toString(),id:null,rootId:A.rootId};default:{if(A.type.startsWith("@xstate."))return;console.warn(`Unhandled inspection event type: ${A.type}`);return}}}var I=class{constructor(){}start(){}stop(){}send(A){}},x="@statelyai.connected";function R(A){return typeof A=="object"&&A!==null&&typeof A.type=="string"}function T(A){return typeof A=="object"&&A!==null&&typeof A.type=="string"&&typeof A._version=="string"}function M(A){const j=A?.window??(typeof window>"u"?void 0:window);if(!j)return console.error("Window does not exist; inspector cannot be started."),new I;const F={...S,url:"https://stately.ai/inspect",filter:()=>!0,serialize:Z=>JSON.parse((0,f.default)(Z)),autoStart:!0,iframe:null,...A,window:j},G=new V(F),H=_(G,F);return F.autoStart&&H.start(),H}var B={replayCount:0,window:typeof window<"u"?window:void 0};function U(A){const F={...B,...A}.window,G=F.self===F.top?F.opener:F.parent,H=new Set;F.addEventListener("message",D=>{T(D.data)&&H.forEach(X=>X.next?.(D.data))});const Z={subscribe(D){const X=(0,h.toObserver)(D);return H.add(X),{unsubscribe(){H.delete(X)}}}};return G&&G.postMessage({type:x},"*"),Z}var V=class{constructor(A){this.options=A}status="disconnected";deferredEvents=[];targetWindow=null;start(){this.targetWindow=this.options.iframe?null:this.options.window.open(String(this.options.url),"xstateinspector"),this.options.iframe&&(this.options.iframe.addEventListener("load",()=>{this.targetWindow=this.options.iframe?.contentWindow??null}),this.options.iframe?.setAttribute("src",String(this.options.url))),this.options.window.addEventListener("message",A=>{R(A.data)&&A.data.type==="@statelyai.connected"&&(this.status="connected",this.deferredEvents.forEach(j=>{const F=this.options.serialize(j);this.targetWindow?.postMessage(F,"*")}))})}stop(){this.targetWindow?.postMessage({type:"@statelyai.disconnected"},"*"),this.status="disconnected"}send(A){if(this.options.filter(A)){if(this.options.send)this.options.send(A);else if(this.status==="connected"){const F=this.options.serialize(A);this.targetWindow?.postMessage(F,"*")}this.deferredEvents.push(A),this.deferredEvents.length>this.options.maxDeferredEvents&&this.deferredEvents.shift()}}},$=c(q7()),O=$9,N=q9();function C(A={}){const{host:j,apiBaseURL:F}={host:"stately-sky-beta.mellson.partykit.dev",apiBaseURL:"https://stately.ai/registry/api/sky"},G=F.replace("/api/sky",""),{apiKey:H,onerror:Z,...D}=A,X=(0,N.v4)(),ee=`inspect-${X}`,Ie=new $.default({host:j,room:ee,WebSocket:p?Gv:void 0}),ce=`${G}/inspect/${X}`;return Ie.onerror=Z??console.error,Ie.onopen=()=>{console.log("Connected to Sky, link to your live inspect session:"),console.log(ce)},p?_({...D,send(Y){const se=H?{apiKey:H,...Y}:Y;Ie.send((0,O.stringify)(se))}}):M({...D,url:ce,send(Y){const se=H?{apiKey:H,...Y}:Y;Ie.send((0,O.stringify)(se))}})}var L=c(Gv),W=c(kv()),q=Ev,te=class{ws;status="closed";deferredEvents=[];options;constructor(A){this.options={...S,filter:()=>!0,serialize:j=>JSON.parse((0,W.default)(j)),autoStart:!0,url:"ws://localhost:8080",...A}}start(){const A=()=>{this.ws=new L.default(this.options.url),this.ws.onopen=()=>{console.log("websocket open"),this.status="open",this.deferredEvents.forEach(j=>{const F=S.serialize(j),G=this.options.serialize(F);this.ws.send((0,W.default)(G))})},this.ws.onclose=()=>{console.log("websocket closed")},this.ws.onerror=async j=>{console.error("websocket error",j),await new Promise(F=>setTimeout(F,5e3)),console.warn("restarting"),A()},this.ws.onmessage=j=>{typeof j.data=="string"&&console.log("message",j.data)}};A()}stop(){this.ws.close(),this.status="closed"}send(A){this.status==="open"?this.ws.send((0,W.default)(A)):(this.deferredEvents.push(A),this.deferredEvents.length>this.options.maxDeferredEvents&&this.deferredEvents.shift())}};function K(A){const j=new te(A);return _(j,A)}function ne(A){const j={server:"ws://localhost:8080",...A},F=new Set,G=new L.default(j.server);return G.onopen=()=>{console.log("websocket open"),G.onmessage=Z=>{if(typeof Z.data!="string")return;console.log("message",Z.data);const D=JSON.parse(Z.data);F.forEach(X=>{X.next?.(D)})}},{subscribe(Z){const D=(0,q.toObserver)(Z);return F.add(D),{unsubscribe(){F.delete(D)}}}}}return Md}G9();var J9=w.useLayoutEffect;const qR=(e,t)=>{t(e);const n=e.getSnapshot().children;n&&Object.values(n).forEach(r=>{qR(r,t)})};function Y9(e){const t=[];qR(e,r=>{t.push([r,r.getSnapshot()]),r.observers=new Set});const n=e.system.getSnapshot?.();e.stop(),e.system._snapshot=n,t.forEach(([r,s])=>{r._processingStatus=0,r._snapshot=s})}function X9(e,...[t]){let[[n,r],s]=w.useState(()=>{const o=er(e,t);return[e.config,o]});if(e.config!==n){const o=er(e,{...t,snapshot:r.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});s([e.config,o]),r=o}return J9(()=>{r.logic.implementations=e.implementations}),r}function Z9(e,t){return e===t}function Yv(e,t,n=Z9){const r=w.useCallback(i=>{if(!e)return()=>{};const{unsubscribe:a}=e.subscribe(i);return a},[e]),s=w.useCallback(()=>e?.getSnapshot(),[e]);return Qv.useSyncExternalStoreWithSelector(r,s,s,t,n)}function Q9(e,...[t]){const n=X9(e,t),r=w.useCallback(()=>n.getSnapshot(),[n]),s=w.useCallback(i=>{const{unsubscribe:a}=n.subscribe(i);return a},[n]),o=Bx.useSyncExternalStore(s,r,r);return w.useEffect(()=>(n.start(),()=>{Y9(n)}),[n]),[o,n.send,n]}function eW(e,...[t]){return Q9(e,t)}const fi=[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[1,1],[1,-1],[-1,1]];function yu(e,t){return e<8&&e>=0&&t<8&&t>=0}function ka(e){return e===Er?js:Er}function KR(e){return Gm(e)}function tW(e,t,{row:n,col:r}){const s=jf(t);return e[n][r]===s}function bu(e){return!e||KR(e)}function nW(e,t,n){return yu(t,n)&&!bu(e[t][n])?e[t][n]:null}function jf(e){return e===Er?$1:s3}function rW(e,t,n){return fi.reduce((r,[s,o])=>r+ +!!nW(e,t+s,n+o),0)}function HR(e,t=!0){const{score:n}=z(e,Tw(lO({score:Cp})));return z(qy(z(e,Cw(r=>r.score===n))),On(r=>t?CL(r):qy(r[0])),$L,ya(r=>ku(r)),Tm)}function fc({board:e,player:t,row:n,col:r,rd:s,cd:o}){let i=0,a=!1;if(!yu(n,r)||!bu(e[n][r]))return 0;let c=n+s,l=r+o;for(;yu(c,l);){if(bu(e[c][l])||e[c][l]===t){a=e[c][l]===t;break}i+=1,c+=s,l+=o}return a&&i>0?i:0}function sW({board:e,player:t,row:n,col:r,rd:s,cd:o}){if(!fc({board:e,player:t,row:n,col:r,rd:s,cd:o}))return!1;const i=xr(t);let a=n+s,c=r+o;for(;yu(a,c)&&!(bu(e[a][c])||e[a][c]===i);)N1(e,{row:a,col:c},i),a+=s,c+=o;return!0}function Oa({board:e,row:t,col:n,player:r}){return oi(e,s=>{const o=xr(r);for(let i=0;i<8;i+=1){const[a,c]=fi[i];sW({board:s,player:r,row:t,col:n,rd:a,cd:c})}s[t][n]=o})}function lp(e){return oi(e,t=>{for(let n=0;n<8;n+=1)for(let r=0;r<8;r+=1){const s=t[n][r];s&&KR(s)&&(t[n][r]=null)}})}function GR({board:e,player:t}){const n=jf(t);let r=0;const s=oi(e,o=>{for(let i=0;i<8;i+=1)for(let a=0;a<8;a+=1)if(!o[i][a])for(let l=0;l<8;l+=1){const[u,f]=fi[l];if(fc({board:o,player:t,row:i,col:a,rd:u,cd:f})){o[i][a]=n,r+=1;break}}});return{count:r,board:s}}function oW(e){return z(e,Tp,Cw(Gm),xw)}function Xv(e,t){let n=0;for(let r=0;r<e.length;r++){const s=e[r];for(let o=0;o<s.length;o++)s[o]===t&&(n+=1)}return n}function up(e,t,n,r){const s=fi.map(([l,u])=>fc({board:e,player:t,row:n,col:r,rd:l,cd:u})),o=n===0||n===7,i=r===0||r===7;let a=0;return n===0&&r===0||n===7&&r===7?a=200:o&&(r===1||r===6)||(n===1||n===6)&&i?a=-80:n===0||r===0||n===7||r===7?a=80:n===1||r===1||n===6||r===6?a=-20:(n===2||r===2||n===5||r===5)&&(a=20),Fw(s)*2+a}function iW(e,t,n,r){return up(e,t,n,r)+Df(e,n,r,t)}function Ar(e,t,n,r){const s=fi.map(([l,u])=>fc({board:e,player:t,row:n,col:r,rd:l,cd:u})),o=aW(e,n,r),i=oi(e,l=>{const u=xr(t);N1(l,{row:n,col:r},u)}),a=cW(i,t,n,r,o);return Fw(s)*2+(a?o:Math.abs(o)*2)-a}function Zv(e,t,n,r){return Ar(e,t,n,r)+Df(e,n,r,t)}function Df(e,t,n,r){return lW(Oa({board:e,row:t,col:n,player:r}),r)}function aW(e,t,n){const r=rW(e,t,n),s=t===0||t===7,o=n===0||n===7;return YR(t,n)?1e8:s&&(n===1||n===6)||(t===1||t===6)&&o?r>0?-300:15e3:XR(t,n)?1500+r*100:t===1||n===1||t===6||n===6?-200:t===2||n===2||t===5||n===5?50:0}function cW(e,t,n,r,s){const o=fi.map(([c,l])=>fc({board:e,player:ka(t),row:n-c,col:r-l,rd:c,cd:l})),i=Tw([0,...o],Cp);return i>0?s>0?i*2+s*20:-s*50+i*5:-1e4}function lW(e,t){let n=0;const r=ka(t),s=xr(r),o=xr(t);let i=0,a=0;for(let c=0;c<e.length;c++){const l=e[c];for(let u=0;u<l.length;u++)YR(c,u)?l[u]===o?(n+=1e8,i+=1):l[u]===s&&(n+=-4e8,a+=1):XR(c,u)?l[u]===o?(n+=1e3,i+=1):l[u]===s&&(n+=-6e3,a+=1):l[u]===o?(n+=1,i+=1):l[u]===s&&(n+=-2,a+=1)}return i===0?Number.MIN_SAFE_INTEGER:a===0?Number.MAX_SAFE_INTEGER:n}function ji(e){return(t,n,r,s)=>{const{score:o}=JR(e,t,n,r,s);return o}}function JR(e,t,n,r,s,o=!1){const i=ka(n),a=jf(i),{board:c}=GR({board:lp(Oa({board:t,row:r,col:s,player:n})),player:i});if(Xv(c,i)===0||Xv(c,a)===0)return{score:Number.MAX_SAFE_INTEGER,nextBoard:c};const l=[];for(let f=0;f<c.length;f++){const h=c[f];for(let d=0;d<h.length;d++)h[d]===a&&l.push({score:e(c,n,f,d)+(o?Df(t,f,d,n):0),row:f,col:d})}if(!fo(l))return{score:Number.MIN_SAFE_INTEGER,nextBoard:c};const u=HR(l,!1);return{score:-u.score,nextBoard:lp(Oa({board:c,row:u.row,col:u.col,player:ka(n)}))}}function Wc(e,t){return(n,r,s,o)=>{ia(t>=1);let i;for(let a=0;a<t;a++){const{score:c,nextBoard:l}=JR(e,n,r,s,o);n=l,i=c}return i}}function Tr(e){return(t,n,r,s)=>e(t,n,r,s)+Df(t,r,s,n)}const uW={v1:up,v2:Ar,v3:ji(Ar),v3OverviewBoost:Tr(Wc(Tr(Ar),1)),v3IteratedOverview:Tr(Wc(Tr(Ar),3)),v3OverviewIterated:Tr(Wc(Tr(Ar),3)),v3OverviewLatestIterated:Tr(Wc(Ar,3)),v3OverviewLatest:Tr(ji(Ar)),v3Overview:ji(Zv),v2Overview:Zv,v1MinMax:ji(up),v1Overview:ji(iW)},fW="v3OverviewIterated";function YR(e,t){return(e===0||e===7)&&(t===0||t===7)}function XR(e,t){return e===0||t===0||e===7||t===7}function dW({board:e,version:t,ai:n}){const r=[],s=uW[t];ia(s);const o=jf(n);for(let i=0;i<8;i+=1)for(let a=0;a<8;a+=1)if(e[i][a]===o){const c=s(e,n,i,a);r.push({row:i,col:a,score:c})}return ia(fo(r)),r}function ZR(e){return xR(({input:{board:t,player:n}})=>z(TL(()=>{const r=dW({board:t,ai:n,version:e});return HR(r)}),PL(300),ya(({row:r,col:s})=>({point:{row:r,col:s},nextBoard:Oa({board:t,col:s,row:r,player:n})})),NL))}const hW=e=>z(e,Tp,WO(t=>t),l1(Jn,Yn),t=>({[Jn]:[],[Yn]:[],...t}),kO(xw),t=>({white:t[Jn],black:t[Yn]})),pW=Og({actions:{initialGame:Qt({board:()=>ad,users:({event:e})=>(tp(e,"start"),e.users),boardHistory:[]}),resetGame:Qt({board:ad,users:Wl,boardHistory:[]}),placeCandidate:Qt({board:({context:e})=>{const{board:t}=z(e.board,lp,n=>GR({board:n,player:e.currentPlayer}));return t}}),resetSwitch:Qt({switchCount:0}),switchPlayer:Qt({currentPlayer:({context:e})=>ka(e.currentPlayer)}),increaseSwitch:Qt({switchCount:({context:e})=>e.switchCount+1}),setBoard:Qt({board:({event:e})=>(ia(e.type==="placed"),e.nextBoard),boardHistory:({context:e})=>[...e.boardHistory,e.board]}),revertTurn:Qt({board:({context:e})=>{if(e.boardHistory.length<2)return console.warn("Cannot undo: not enough history."),e.board;const t=[...e.boardHistory];return t.pop(),t.pop()||e.board},boardHistory:({context:e})=>{if(e.boardHistory.length<2)return e.boardHistory;const t=[...e.boardHistory];return t.pop(),t.pop(),t},currentPlayer:({context:e})=>e.currentPlayer,switchCount:0})},guards:{isEnded:({context:e})=>e.switchCount>=2,isNoValidMoves:({context:e})=>oW(e.board)===0,isCurrentUserIsAI:({context:e})=>B1(e.users,e.currentPlayer)===Yr.AI},actors:{aiPlaceChess:ZR(fW)}}).createMachine({context:{board:ad,switchCount:0,users:Wl,currentPlayer:js,boardHistory:[]},id:"Reversi",initial:"IDLE",states:{IDLE:{on:{start:{target:"PLACE_CHESS",actions:{type:"initialGame"}}}},GAME_LOOP:{always:{target:"PLACE_CHESS"}},PLACE_CHESS:{entry:{type:"placeCandidate"},on:{placed:{target:"GAME_LOOP",actions:[hs(({event:e,context:t})=>(tp(e,"placed"),{type:"placed",point:e.point,player:t.currentPlayer})),{type:"resetSwitch"},{type:"switchPlayer"},{type:"setBoard"}]},undo:{actions:[{type:"revertTurn"},{type:"placeCandidate"},hs(()=>({type:"undoOccurred"}))],target:"PLACE_CHESS"},restart:{target:"IDLE",actions:"resetGame"}},always:[{guard:"isEnded",target:"ENDED"},{guard:"isNoValidMoves",target:"GAME_LOOP",actions:[{type:"increaseSwitch"},hs(({context:e})=>({type:"noValidMove",player:e.currentPlayer})),{type:"switchPlayer"}]},{guard:"isCurrentUserIsAI",target:"AI_TURN"}]},AI_TURN:{entry:[{type:"increaseSwitch"},{type:"placeCandidate"}],invoke:{src:"aiPlaceChess",input:({context:e})=>({board:e.board,player:e.currentPlayer}),onDone:{actions:[Qt({board:({event:e})=>e.output.nextBoard,boardHistory:({context:e})=>[...e.boardHistory,e.board]}),hs(({event:e,context:t})=>({type:"placed",point:e.output.point,player:t.currentPlayer})),{type:"resetSwitch"},{type:"switchPlayer"}],target:"GAME_LOOP"}}},ENDED:{on:{restart:{target:"IDLE",actions:"resetGame"}}}}}),mW={inspect:void 0};function gW({onBeforePlaceChess:e,onGameStart:t,onGameSettled:n,onNoValidMove:r,onPlaced:s,onUndoOccurred:o}){const i=Xs(e),a=Xs(t),c=Xs(n),l=Xs(r),u=Xs(s),f=Xs(o),h=ml(O1),d=w.useMemo(()=>ZR(h),[h]),[p,m,y]=eW(pW.provide({actors:{aiPlaceChess:d}}),{inspect:mW.inspect}),g=Yv(y,({context:_})=>_.users),b=Yv(y,({context:_})=>hW(_.board)),v=w.useCallback(({col:_,row:k})=>{if(B1(p.context.users,p.context.currentPlayer)!==Yr.Human||!tW(p.context.board,p.context.currentPlayer,{row:k,col:_}))return;i.current();const I=Oa({board:p.context.board,col:_,row:k,player:p.context.currentPlayer});m({type:"placed",point:{row:k,col:_},nextBoard:I})},[p.context.board,p.context.currentPlayer,p.context.users,i,m]),S=p.matches("ENDED");return w.useEffect(()=>{if(!S){a.current();return}c.current({users:g,score:b})},[S,c,a]),w.useEffect(()=>{const{unsubscribe:_}=y.on("noValidMove",x=>l.current(x)),{unsubscribe:k}=y.on("placed",x=>u.current(x)),{unsubscribe:I}=y.on("undoOccurred",()=>f.current());return()=>{_(),k(),I()}},[y,l,u,f]),{machine:p,send:m,score:b,users:g,placeChess:v}}function NW(){const[e,t]=w.useState(""),[n,r]=w.useState(""),[s,o]=Nj([]),[i,a]=w.useState(!1),c=qc(M1),{users:l,score:u,send:f,placeChess:h,machine:d}=gW({onGameStart:()=>{t("")},onGameSettled:({users:k,score:I})=>{r(""),t(bW(I,k)),a(!0);const x=yW(I,k);ct(x)&&c(R=>{R[x.value]+=1})},onNoValidMove:({player:k})=>{r(TD({player:k===Er?J1():G1()}))},onBeforePlaceChess:()=>{r("")},onPlaced:({player:k,point:{row:I,col:x}})=>{o(R=>{R.push({type:"move",pos:`(${I}, ${x})`,player:k})})},onUndoOccurred:()=>{o(k=>{k.pop(),k.pop(),k.push({type:"undo",message:"Undo last turn"})})}}),p=ml(I1),m=ml(C1),y=w.useCallback(()=>{f({type:"start",users:_3})},[f]),g=w.useCallback(()=>{f({type:"restart"}),o([])},[f,o]),b=w.useCallback(()=>{f({type:"undo"})},[f]),v=w.useCallback(k=>{f({type:"start",users:{...Wl,[g3(k)]:Yr.AI}})},[f]),S=w.useCallback(()=>{f({type:"restart"})},[f]),_=w.useCallback(()=>{a(!1)},[]);return E.jsx(fU,{message:n,users:l,log:s,score:u,onRestart:S,showReplay:i,allowRetract:p,setHuman:y,reboot:g,onUndo:b,onCloseConfirm:_,children:E.jsxs(Si.Root,{children:[E.jsx(Si.Background,{}),E.jsx(Si.Chesses,{hint:m,board:d.context.board,onPlaceChess:h}),d.matches("IDLE")&&E.jsx(Si.ChooseColor,{onStart:v}),e&&E.jsx(Si.Overlay,{children:e})]})})}function yW(e,t){const n=QR(e),r=t.B!==t.W;return z(n,Fa(s=>{const o=t[V1(s)]===Yr.Human;return r?be(o?"win":"lose"):ge()}),gr(()=>r?be("draw"):ge()))}function bW(e,t){const n=QR(e),r=t.B!==t.W;return z(n,Ip(s=>{const o=t[V1(s)]===Yr.Human;if(o&&r)return mD();if(!o&&r)return bD();if(s===js)return ED();if(s===Er)return OD();ia(!1)}),lt(()=>SD()))}function QR(e){return e.black>e.white?be(js):e.black<e.white?be(Er):ge()}export{NW as component};
