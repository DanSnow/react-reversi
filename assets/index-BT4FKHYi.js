const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Board-CWgFC3Hg.js","assets/main-CHwKZILN.js","assets/ReactKonvaCore-BpNKwv1g.js","assets/index-DQpxLe6e.js","assets/Chesses-n8v5thjJ.js","assets/Overlay-CqboaVuQ.js","assets/index-TrBWybo1.js","assets/SmartSettingModal-CG2C2M9c.js"])))=>i.map(i=>d[i]);
import{r as w,a as Dr,R as ky,_ as _r,c as ye,j as E,b as nl,d as Ay,g as My,e as Qr,f as Py,w as Bd,u as Do,z as Ny,C as $y,h as rl,i as Yo,k as jy}from"./main-CHwKZILN.js";const qt=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,o=t.length;r<o;r++)n=t[r](n);return n}}},Ly={pipe(){return qt(this,arguments)}},ol=(function(){function e(){}return e.prototype=Ly,e})(),pe=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(o){return t(o,n)}};case 3:return function(n,r,o){return arguments.length>=3?t(n,r,o):function(s){return t(s,n,r)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},on=e=>e,Dy=on,sl=e=>()=>e,vr=sl(null),Wd=sl(void 0),Hd=Wd;function We(e,...t){return qt(e,t)}function Fn(e){const t=new WeakMap;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}const oa=e=>{const t=new Set(Reflect.ownKeys(e));if(e.constructor===Object)return t;e instanceof Error&&t.delete("stack");const n=Object.getPrototypeOf(e);let r=n;for(;r!==null&&r!==Object.prototype;){const o=Reflect.ownKeys(r);for(let s=0;s<o.length;s++)t.add(o[s]);r=Object.getPrototypeOf(r)}return t.has("constructor")&&typeof e.constructor=="function"&&n===e.constructor.prototype&&t.delete("constructor"),t},sa=new WeakSet;function qd(e){return typeof e=="string"}function ri(e){return typeof e=="number"}function Fy(e){return typeof e=="bigint"}function zy(e){return typeof e=="symbol"}function Vy(e){return qd(e)||ri(e)||zy(e)}function il(e){return typeof e=="function"}function Uy(e){return e!=null}function By(e){return!0}function Wy(e){return typeof e=="object"&&e!==null||il(e)}const ot=pe(2,(e,t)=>Wy(e)&&t in e),St="~effect/interfaces/Hash",ze=e=>{switch(typeof e){case"number":return cl(e);case"bigint":return Ge(e.toString(10));case"boolean":return Ge(String(e));case"symbol":return Ge(String(e));case"string":return Ge(e);case"undefined":return Ge("undefined");case"function":case"object":{if(e===null)return Ge("null");if(e instanceof Date)return Ge(e.toISOString());if(e instanceof RegExp)return Ge(e.toString());{if(sa.has(e))return ia(e);if(Cc.has(e))return Cc.get(e);const t=Yy(e,()=>Hy(e)?e[St]():typeof e=="function"?ia(e):Array.isArray(e)?Kd(e):e instanceof Map?Gy(e):e instanceof Set?Ky(e):Gd(e));return Cc.set(e,t),t}}default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},ia=e=>(Rc.has(e)||Rc.set(e,cl(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Rc.get(e)),At=pe(2,(e,t)=>e*53^t),Li=e=>e&3221225471|e>>>1&1073741824,Hy=e=>ot(e,St),cl=e=>{if(e!==e)return Ge("NaN");if(e===1/0)return Ge("Infinity");if(e===-1/0)return Ge("-Infinity");let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Li(t)},Ge=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return Li(t)},qy=(e,t)=>{let n=12289;for(const r of t)n^=At(ze(r),ze(e[r]));return Li(n)},Gd=e=>qy(e,oa(e)),al=(e,t)=>n=>{let r=e;for(const o of n)r^=t(o);return Li(r)},Kd=al(6151,ze),Gy=al(Ge("Map"),([e,t])=>At(ze(e),ze(t))),Ky=al(Ge("Set"),ze),Rc=new WeakMap,Cc=new WeakMap,Oc=new WeakSet;function Yy(e,t){if(Oc.has(e))return Ge("[Circular]");Oc.add(e);const n=t();return Oc.delete(e),n}const _t="~effect/interfaces/Equal";function Ct(){return arguments.length===1?e=>rr(e,arguments[0]):rr(arguments[0],arguments[1])}function rr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const n=typeof e;return n!==typeof t?!1:n==="number"&&e!==e&&t!==t?!0:n!=="object"&&n!=="function"||sa.has(e)||sa.has(t)?!1:Zy(e,t,Xy)}function Jy(e,t,n){const r=Tc.has(e),o=Ic.has(t);if(r&&o)return!0;if(r||o)return!1;Tc.add(e),Ic.add(t);const s=n();return Tc.delete(e),Ic.delete(t),s}const Tc=new WeakSet,Ic=new WeakSet;function Xy(e,t){if(ze(e)!==ze(t))return!1;if(e instanceof Date)return t instanceof Date?e.toISOString()===t.toISOString():!1;if(e instanceof RegExp)return t instanceof RegExp?e.toString()===t.toString():!1;const n=yu(e),r=yu(t);if(n!==r)return!1;const o=n&&r;return typeof e=="function"&&!o?!1:Jy(e,t,()=>o?e[_t](t):Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:Qy(e,t):e instanceof Map?!(t instanceof Map)||e.size!==t.size?!1:nb(e,t):e instanceof Set?!(t instanceof Set)||e.size!==t.size?!1:ob(e,t):eb(e,t))}function Zy(e,t,n){let r=Ts.get(e);if(!r)r=new WeakMap,Ts.set(e,r);else if(r.has(t))return r.get(t);const o=n(e,t);r.set(t,o);let s=Ts.get(t);return s||(s=new WeakMap,Ts.set(t,s)),s.set(e,o),o}const Ts=new WeakMap;function Qy(e,t){for(let n=0;n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function eb(e,t){const n=oa(e),r=oa(t);if(n.size!==r.size)return!1;for(const o of n)if(!r.has(o)||!rr(e[o],t[o]))return!1;return!0}function tb(e,t){return function(r,o){for(const[s,i]of r){let c=!1;for(const[l,a]of o)if(e(s,l)&&t(i,a)){c=!0;break}if(!c)return!1}return!0}}const nb=tb(rr,rr);function rb(e){return function(n,r){for(const o of n){let s=!1;for(const i of r)if(e(o,i)){s=!0;break}if(!s)return!1}return!0}}const ob=rb(rr),yu=e=>ot(e,_t),sb=()=>Ct,ll=Symbol.for("~effect/Inspectable/redactable"),ib=e=>ot(e,ll);function cb(e){return ib(e)?Yd(e):e}function Yd(e){return e[ll](globalThis[Gs]?.services??ab)}const Gs="~effect/Fiber/currentFiber",ab={"~effect/ServiceMap":{},mapUnsafe:new Map,pipe(){return qt(this,arguments)}};function tt(e,t){const n=t?.space??0,r=new WeakSet,o=n?typeof n=="number"?" ".repeat(n):n:"",s=a=>o.repeat(a),i=(a,u)=>{const f=a?.constructor;return f&&f!==Object.prototype.constructor&&f.name?`${f.name}(${u})`:u},c=a=>{try{return Reflect.ownKeys(a)}catch{return["[ownKeys threw]"]}};function l(a,u=0){if(Array.isArray(a)){if(r.has(a))return bu;if(r.add(a),!o||a.length<=1)return`[${a.map(p=>l(p,u)).join(",")}]`;const f=a.map(p=>l(p,u+1)).join(`,
`+s(u+1));return`[
${s(u+1)}${f}
${s(u)}]`}if(a instanceof Date)return ub(a);if(!t?.ignoreToString&&ot(a,"toString")&&typeof a.toString=="function"&&a.toString!==Object.prototype.toString&&a.toString!==Array.prototype.toString){const f=fb(a);return a instanceof Error&&a.cause?`${f} (cause: ${l(a.cause,u)})`:f}if(typeof a=="string")return JSON.stringify(a);if(typeof a=="number"||a==null||typeof a=="boolean"||typeof a=="symbol")return String(a);if(typeof a=="bigint")return String(a)+"n";if(typeof a=="object"||typeof a=="function"){if(r.has(a))return bu;if(r.add(a),ll in a)return tt(Yd(a));if(Symbol.iterator in a)return`${a.constructor.name}(${l(Array.from(a),u)})`;const f=c(a);if(!o||f.length<=1){const d=`{${f.map(m=>`${oi(m)}:${l(a[m],u)}`).join(",")}}`;return i(a,d)}const p=`{
${f.map(d=>`${s(u+1)}${oi(d)}: ${l(a[d],u+1)}`).join(`,
`)}
${s(u)}}`;return i(a,p)}return String(a)}return l(e,0)}const bu="[Circular]";function oi(e){return typeof e=="string"?JSON.stringify(e):String(e)}function lb(e){return e.map(t=>`[${oi(t)}]`).join("")}function ub(e){try{return e.toISOString()}catch{return"Invalid Date"}}function fb(e){try{const t=e.toString();return typeof t=="string"?t:String(t)}catch{return"[toString threw]"}}const Di=Symbol.for("nodejs.util.inspect.custom"),Fi=e=>{try{if(ot(e,"toJSON")&&il(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Fi)}catch{return"[toJSON threw]"}return cb(e)};class zi{called=!1;self;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}[Symbol.iterator](){return new zi(this.self)}}const Fr="~effect/Effect/internal",Jd={[Fr]:e=>e()},db={[Fr]:e=>{try{return e()}finally{}}},pb=Jd[Fr](()=>new Error().stack)?.includes(Fr)===!0,eo=pb?Jd[Fr]:db[Fr],zn="~effect/Effect",Jo="~effect/Exit",hb={_A:on,_E:on,_R:on},Xd=`${zn}/identifier`,Ee=`${zn}/args`,nt=`${zn}/evaluate`,Mt=`${zn}/successCont`,sn=`${zn}/failureCont`,zr=`${zn}/ensureCont`,Yn=Symbol.for("effect/Effect/Yield"),hs={pipe(){return qt(this,arguments)},toJSON(){return{...this}},toString(){return tt(this.toJSON(),{ignoreToString:!0,space:2})},[Di](){return this.toJSON()}},Vi={[Symbol.iterator](){return new zi(this)}},mb={...Vi,pipe(){return qt(this,arguments)}},gb={[zn]:hb,...hs,[Symbol.iterator](){return new zi(this)},asEffect(){return this},toJSON(){return{_id:"Effect",op:this[Xd],...Ee in this?{args:this[Ee]}:void 0}}},yb=e=>ot(e,zn),bb=e=>ot(e,Jo),Ks="~effect/Cause",kc="~effect/Cause/Reason",Zd=e=>ot(e,Ks);class ms{[Ks];reasons;constructor(t){this[Ks]=Ks,this.reasons=t}pipe(){return qt(this,arguments)}toJSON(){return{_id:"Cause",failures:this.reasons.map(t=>t.toJSON())}}toString(){return`Cause(${tt(this.reasons)})`}[Di](){return this.toJSON()}[_t](t){return Zd(t)&&this.reasons.length===t.reasons.length&&this.reasons.every((n,r)=>Ct(n,t.reasons[r]))}[St](){return Kd(this.reasons)}}const vu=new WeakMap;class ul{[kc];annotations;_tag;constructor(t,n,r){if(this[kc]=kc,this._tag=t,n!==Ui&&typeof r=="object"&&r!==null&&n.size>0){const o=vu.get(r);o&&(n=new Map([...o,...n])),vu.set(r,n)}this.annotations=n}annotate(t,n){if(t.mapUnsafe.size===0)return this;const r=new Map(this.annotations);t.mapUnsafe.forEach((s,i)=>{n?.overwrite!==!0&&r.has(i)||r.set(i,s)});const o=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return o.annotations=r,o}pipe(){return qt(this,arguments)}toString(){return tt(this)}[Di](){return this.toString()}}const Ui=new Map;class vb extends ul{error;constructor(t,n=Ui){super("Fail",n,t),this.error=t}toString(){return`Fail(${tt(this.error)})`}toJSON(){return{_tag:"Fail",error:this.error}}[_t](t){return Qd(t)&&Ct(this.error,t.error)&&Ct(this.annotations,t.annotations)}[St](){return At(Ge(this._tag))(At(ze(this.error))(ze(this.annotations)))}}const wb=e=>new ms([new vb(e)]);class xb extends ul{defect;constructor(t,n=Ui){super("Die",n,t),this.defect=t}toString(){return`Die(${tt(this.defect)})`}toJSON(){return{_tag:"Die",defect:this.defect}}[_t](t){return _b(t)&&Ct(this.defect,t.defect)&&Ct(this.annotations,t.annotations)}[St](){return At(Ge(this._tag))(At(ze(this.defect))(ze(this.annotations)))}}const Sb=e=>new ms([new xb(e)]),ca=pe(e=>Zd(e[0]),(e,t,n)=>t.mapUnsafe.size===0?e:new ms(e.reasons.map(r=>r.annotate(t,n)))),Qd=e=>e._tag==="Fail",_b=e=>e._tag==="Die",ep=e=>e._tag==="Interrupt";function Eb(e){return Xo("Effect.evaluate: Not implemented")}const gs=e=>({...gb,[Xd]:e.op,[nt]:e[nt]??Eb,[Mt]:e[Mt],[sn]:e[sn],[zr]:e[zr]}),mn=e=>{const t=gs(e);return function(){const n=Object.create(t);return n[Ee]=e.single===!1?arguments:arguments[0],n}},tp=e=>{const t={...gs(e),[Jo]:Jo,_tag:e.op,get[e.prop](){return this[Ee]},toString(){return`${e.op}(${tt(this[Ee])})`},toJSON(){return{_id:"Exit",_tag:e.op,[e.prop]:this[Ee]}},[_t](n){return bb(n)&&n._tag===this._tag&&Ct(this[Ee],n[Ee])},[St](){return At(Ge(e.op),ze(this[Ee]))}};return function(n){const r=Object.create(t);return r[Ee]=n,r}},Ut=tp({op:"Success",prop:"value",[nt](e){const t=e.getCont(Mt);return t?t[Mt](this[Ee],e,this):e.yieldWith(this)}}),np={key:"effect/Cause/StackTrace"},ys=tp({op:"Failure",prop:"cause",[nt](e){let t=this[Ee],n=!1;e.currentStackFrame&&(t=ca(t,{mapUnsafe:new Map([[np.key,e.currentStackFrame]])}),n=!0);let r=e.getCont(sn);for(;e.interruptible&&e._interruptedCause&&r;)r=e.getCont(sn);return r?r[sn](t,e,n?void 0:this):e.yieldWith(n?this:ys(t))}}),bs=e=>ys(wb(e)),Xo=e=>ys(Sb(e)),Fo=mn({op:"WithFiber",[nt](e){return this[Ee](e)}}),Rb=(function(){class e extends globalThis.Error{asEffect(){return bs(this)}}return Object.assign(e.prototype,mb),e})(),Cb=(function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends Rb{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}})(),Ob=e=>{class t extends Cb{_tag=e}return t.prototype.name=e,t},wu="~effect/Cause/NoSuchElementError";class Tb extends Ob("NoSuchElementError"){[wu]=wu;constructor(t){super({message:t})}}const rp="~effect/data/Option",op={[rp]:{_A:e=>e},...hs,...Vi},Ib=Object.assign(Object.create(op),{_tag:"Some",_op:"Some",[_t](e){return sp(e)&&cp(e)&&Ct(this.value,e.value)},[St](){return At(ze(this._tag))(ze(this.value))},toString(){return`some(${tt(this.value)})`},toJSON(){return{_id:"Option",_tag:this._tag,value:Fi(this.value)}},asEffect(){return Ut(this.value)}}),kb=ze("None"),Ab=Object.assign(Object.create(op),{_tag:"None",_op:"None",[_t](e){return sp(e)&&ip(e)},[St](){return kb},toString(){return"none()"},toJSON(){return{_id:"Option",_tag:this._tag}},asEffect(){return bs(new Tb)}}),sp=e=>ot(e,rp),ip=e=>e._tag==="None",cp=e=>e._tag==="Some",ap=Object.create(Ab),lp=e=>{const t=Object.create(Ib);return t.value=e,t},up="~effect/data/Result",fp={[up]:{_A:e=>e,_E:e=>e},...hs,...Vi},Mb=Object.assign(Object.create(fp),{_tag:"Success",_op:"Success",[_t](e){return dp(e)&&pp(e)&&Ct(this.success,e.success)},[St](){return At(ze(this._tag))(ze(this.success))},toString(){return`success(${tt(this.success)})`},toJSON(){return{_id:"Result",_tag:this._tag,value:Fi(this.success)}},asEffect(){return Ut(this.success)}}),Pb=Object.assign(Object.create(fp),{_tag:"Failure",_op:"Failure",[_t](e){return dp(e)&&fl(e)&&Ct(this.failure,e.failure)},[St](){return At(ze(this._tag))(ze(this.failure))},toString(){return`failure(${tt(this.failure)})`},toJSON(){return{_id:"Result",_tag:this._tag,failure:Fi(this.failure)}},asEffect(){return bs(this.failure)}}),dp=e=>ot(e,up),fl=e=>e._tag==="Failure",pp=e=>e._tag==="Success",Nb=e=>{const t=Object.create(Pb);return t.failure=e,t},$b=e=>{const t=Object.create(Mb);return t.success=e,t},jb=e=>fl(e)?ap:lp(e.success);function hp(e){return(t,n)=>t===n?0:e(t,n)}const mp=hp((e,t)=>globalThis.Number.isNaN(e)&&globalThis.Number.isNaN(t)?0:globalThis.Number.isNaN(e)?-1:globalThis.Number.isNaN(t)?1:e<t?-1:1);function Lb(e){const t=Object.keys(e);return hp((n,r)=>{for(const o of t){const s=e[o](n[o],r[o]);if(s!==0)return s}return 0})}const Db=e=>pe(2,(t,n)=>t===n||e(t,n)>-1?t:n),Bt=()=>ap,$e=lp,vs=ip,si=cp,Fb=jb,zb=pe(2,(e,t)=>vs(e)?t():e.value),Vb=pe(2,(e,t)=>vs(e)?t():e),Ub=pe(2,(e,t)=>{if(si(e))return e.value;throw t()}),gp=Ub(()=>new Error("getOrThrow called on a None")),dl=pe(2,(e,t)=>vs(e)?Bt():$e(t(e.value))),Bb=pe(2,(e,t)=>vs(e)?Bt():t(e.value)),Bi=$b,Wi=Nb,Rt=fl,yp=pp,Wb=pe(2,(e,t)=>Rt(e)?Wi(t(e.failure)):Bi(e.success)),Hb=pe(2,(e,t)=>{if(yp(e))return e.success;throw t(e.failure)}),qb=Hb(on),bp=(e,t,...n)=>{const r=e(t,...n);return r===!0?Bi(t):r===!1?Wi(t):r},vp=e=>e.length>0,Gb=()=>({}),Kb=pe(2,(e,t)=>Object.hasOwn(e,t)),Yb=pe(2,(e,t)=>Kb(e,t)?$e(e[t]):Bt()),Jb=pe(2,(e,t)=>{const n={...e};for(const r of Xb(e))n[r]=t(e[r],r);return n}),Xb=e=>Object.keys(e),xu=pe(3,(e,t,n)=>({...e,[t]:n})),aa=globalThis.Array,Rn=pe(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new aa(n);for(let o=0;o<n;o++)r[o]=t(o);return r}),Vr=e=>aa.isArray(e)?e:aa.from(e),wp=pe(2,(e,t)=>[...e,t]),Zb=pe(2,(e,t)=>Vr(e).concat(Vr(t))),Qb=e=>e.length===0,ev=Qb,Zo=vp,la=vp,xp=e=>e.length;function tv(e,t){return e<0||e>=t.length}const nv=pe(2,(e,t)=>{const n=Math.floor(t);if(tv(n,e))throw new Error(`Index out of bounds: ${n}`);return e[n]}),rv=nv(0),ov=e=>e.slice(1),sv=pe(2,(e,t)=>{const n={};for(const r of e){const o=t(r);Object.hasOwn(n,o)?n[o].push(r):n[o]=[r]}return n}),iv=pe(3,(e,t,n)=>{const r=Vr(e),o=Vr(t);return la(r)?la(o)?lv(n)(Zb(r,o)):r:o}),cv=pe(2,(e,t)=>iv(e,t,sb())),av=pe(2,(e,t)=>{if(ev(e))return[];const n=[];for(let r=0;r<e.length;r++){const o=t(e[r],r);for(let s=0;s<o.length;s++)n.push(o[s])}return n}),Sp=av(on),_p=pe(2,(e,t)=>{const n=Vr(e),r=[];for(let o=0;o<n.length;o++){const s=bp(t,n[o],o);Rt(s)||r.push(s.success)}return r}),Ep=pe(2,(e,t)=>e.reduce(Db(t))),lv=pe(2,(e,t)=>{const n=Vr(e);if(la(n)){const r=[rv(n)],o=ov(n);for(const s of o)r.every(i=>!t(s,i))&&r.push(s);return r}return[]}),ua="~effect/time/Duration",uv=BigInt(0),fv=BigInt(1e3),dv=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,Rp=e=>{if(Cp(e))return e;if(ri(e))return _u(e);if(Fy(e))return Ac(e);if(Array.isArray(e)&&e.length===2&&e.every(ri))return Number.isNaN(e[0])||Number.isNaN(e[1])?gv:e[0]===-1/0||e[1]===-1/0?bv:e[0]===1/0||e[1]===1/0?yv:Ac(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(qd(e)){const t=dv.exec(e);if(t){const[n,r,o]=t,s=Number(r);switch(o){case"nano":case"nanos":return Ac(BigInt(r));case"micro":case"micros":return vv(BigInt(r));case"milli":case"millis":return _u(s);case"second":case"seconds":return wv(s);case"minute":case"minutes":return xv(s);case"hour":case"hours":return Sv(s);case"day":case"days":return _v(s);case"week":case"weeks":return Ev(s)}}}throw new Error(`Invalid Input: ${e}`)},Su={_tag:"Millis",millis:0},pv={_tag:"Infinity"},hv={_tag:"NegativeInfinity"},mv={[ua]:ua,[St](){return Gd(this.value)},[_t](e){return Cp(e)&&Iv(this,e)},toString(){switch(this.value._tag){case"Infinity":return"Infinity";case"NegativeInfinity":return"-Infinity";case"Nanos":return`${this.value.nanos} nanos`;case"Millis":return`${this.value.millis} millis`}},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",nanos:String(this.value.nanos)};case"Infinity":return{_id:"Duration",_tag:"Infinity"};case"NegativeInfinity":return{_id:"Duration",_tag:"NegativeInfinity"}}},[Di](){return this.toJSON()},pipe(){return qt(this,arguments)}},Nt=e=>{const t=Object.create(mv);return ri(e)?isNaN(e)||e===0||Object.is(e,-0)?t.value=Su:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=e>0?pv:hv:e===uv?t.value=Su:t.value={_tag:"Nanos",nanos:e},t},Cp=e=>ot(e,ua),gv=Nt(0),yv=Nt(1/0),bv=Nt(-1/0),Ac=e=>Nt(e),vv=e=>Nt(e*fv),_u=e=>Nt(e),wv=e=>Nt(e*1e3),xv=e=>Nt(e*6e4),Sv=e=>Nt(e*36e5),_v=e=>Nt(e*864e5),Ev=e=>Nt(e*6048e5),Rv=e=>Cv(Rp(e),{onMillis:on,onNanos:t=>Number(t)/1e6,onInfinity:()=>1/0,onNegativeInfinity:()=>-1/0}),Eu=e=>{switch(e.value._tag){case"Infinity":case"NegativeInfinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},Cv=pe(2,(e,t)=>{switch(e.value._tag){case"Millis":return t.onMillis(e.value.millis);case"Nanos":return t.onNanos(e.value.nanos);case"Infinity":return t.onInfinity();case"NegativeInfinity":return(t.onNegativeInfinity??t.onInfinity)()}}),Ov=pe(3,(e,t,n)=>e.value._tag==="Infinity"||e.value._tag==="NegativeInfinity"||t.value._tag==="Infinity"||t.value._tag==="NegativeInfinity"?n.onInfinity(e,t):e.value._tag==="Millis"?t.value._tag==="Millis"?n.onMillis(e.value.millis,t.value.millis):n.onNanos(Eu(e),t.value.nanos):n.onNanos(e.value.nanos,Eu(t))),Tv=(e,t)=>Ov(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r,onInfinity:(n,r)=>n.value._tag===r.value._tag}),Iv=pe(2,(e,t)=>Tv(e,t)),kv="~effect/ServiceMap/Service",Av=function(){const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const t=new Error;Error.stackTraceLimit=e;function n(){}const r=n;return Object.setPrototypeOf(r,Mv),Object.defineProperty(r,"stack",{get(){return t.stack}}),arguments.length>0?(r.key=arguments[0],arguments[1]?.defaultValue&&(r[fa]=fa,r.defaultValue=arguments[1].defaultValue),r):function(o,s){return r.key=o,s?.make&&(r.make=s.make),r}},Mv={[kv]:{_Service:e=>e,_Identifier:e=>e},...hs,...Vi,toJSON(){return{_id:"Service",key:this.key,stack:this.stack}},asEffect(){return(this.asEffect=sl(Fo(t=>Ut(Mc(t.services,this)))))()},of(e){return e},serviceMap(e){return Tp(this,e)},use(e){return Fo(t=>e(Mc(t.services,this)))},useSync(e){return Fo(t=>Ut(e(Mc(t.services,this))))}},fa="~effect/ServiceMap/Reference",Op="~effect/ServiceMap",pl=e=>{const t=Object.create(Pv);return t.mapUnsafe=e,t},Pv={...hs,[Op]:{_Services:e=>e},toJSON(){return{_id:"ServiceMap",services:Array.from(this.mapUnsafe).map(([e,t])=>({key:e,value:t}))}},[_t](e){if(!Nv(e)||this.mapUnsafe.size!==e.mapUnsafe.size)return!1;for(const t of this.mapUnsafe.keys())if(!e.mapUnsafe.has(t)||!Ct(this.mapUnsafe.get(t),e.mapUnsafe.get(t)))return!1;return!0},[St](){return cl(this.mapUnsafe.size)}},Nv=e=>ot(e,Op),hl=()=>$v,$v=pl(new Map),Tp=(e,t)=>pl(new Map([[e.key,t]])),jv=pe(3,(e,t,n)=>{const r=new Map(e.mapUnsafe);return r.set(t.key,n),pl(r)}),Lv=pe(2,(e,t)=>{if(!e.mapUnsafe.has(t.key)){if(fa in t)return Ip(t);throw Fv(t)}return e.mapUnsafe.get(t.key)}),Mc=Lv,Dv=(e,t)=>e.mapUnsafe.has(t.key)?e.mapUnsafe.get(t.key):Ip(t),Pc="~effect/ServiceMap/defaultValue",Ip=e=>Pc in e?e[Pc]:e[Pc]=e.defaultValue(),Fv=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},lr=Av,da=lr("effect/Scheduler",{defaultValue:()=>new ml}),zv="setImmediate"in globalThis?e=>{const t=globalThis.setImmediate(e);return()=>globalThis.clearImmediate(t)}:e=>{const t=setTimeout(e,0);return()=>clearTimeout(t)};class Vv{buckets=[];scheduleTask(t,n){const r=this.buckets,o=r.length;let s,i=0;for(;i<o&&!(r[i][0]>n);i++)s=r[i];s&&s[0]===n?s[1].push(t):i===o?r.push([n,[t]]):r.splice(i,0,[n,[t]])}drain(){const t=this.buckets;return this.buckets=[],t}}class ml{tasks=new Vv;running=void 0;executionMode;setImmediate;constructor(t="async",n=zv){this.executionMode=t,this.setImmediate=n}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running===void 0&&(this.running=this.setImmediate(this.afterScheduled))}afterScheduled=()=>{this.running=void 0,this.runTasks()};runTasks(){const t=this.tasks.drain();for(let n=0;n<t.length;n++){const r=t[n][1];for(let o=0;o<r.length;o++)r[o]()}}shouldYield(t){return t.currentOpCount>=t.maxOpsBeforeYield}flush(){for(;this.tasks.buckets.length>0;)this.running!==void 0&&(this.running(),this.running=void 0),this.runTasks()}}const Uv=lr("effect/Scheduler/MaxOpsBeforeYield",{defaultValue:()=>2048}),Bv="effect/Tracer/ParentSpan",Wv="effect/Tracer",Hv=lr("effect/References/CurrentStackFrame",{defaultValue:Wd}),qv=lr("effect/References/CurrentLogLevel",{defaultValue:()=>"Info"}),Gv=lr("effect/References/MinimumLogLevel",{defaultValue:()=>"Info"}),Kv="effect/observability/Metric/FiberRuntimeMetricsKey",Yv="dev";class Jv extends ul{fiberId;constructor(t,n=Ui){super("Interrupt",n,"Interrupted"),this.fiberId=t}toString(){return`Interrupt(${this.fiberId})`}toJSON(){return{_tag:"Interrupt",fiberId:this.fiberId}}[_t](t){return ep(t)&&this.fiberId===t.fiberId&&this.annotations===t.annotations}[St](){return At(Ge(`${this._tag}:${this.fiberId}`))(ia(this.annotations))}}const Xv=e=>new ms([new Jv(e)]),Hi=e=>{for(let t=0;t<e.reasons.length;t++){const n=e.reasons[t];if(n._tag==="Fail")return Bi(n.error)}return Wi(e)},Zv=e=>e.reasons.some(ep),Qv=pe(2,(e,t)=>{if(e.reasons.length===0)return t;if(t.reasons.length===0)return e;const n=new ms(cv(e.reasons,t.reasons));return Ct(e,n)?e:n}),e0=e=>{const t={Fail:[],Die:[],Interrupt:[]};for(let n=0;n<e.reasons.length;n++)t[e.reasons[n]._tag].push(e.reasons[n]);return t},kp=e=>{const t=e0(e);return t.Fail.length>0?t.Fail[0].error:t.Die.length>0?t.Die[0].defect:t.Interrupt.length>0?new globalThis.Error("All fibers interrupted without error"):new globalThis.Error("Empty cause")},Ru=`~effect/Fiber/${Yv}`,t0={_A:on,_E:on},n0={id:0},Cu=(()=>{let e=0,t;return{increment(){e++,t??=globalThis.setInterval(Hd,2147483647)},decrement(){e--,e===0&&t!==void 0&&(globalThis.clearInterval(t),t=void 0)}}})();class r0{constructor(t,n=!0){this[Ru]=t0,this.setServices(t),this.id=++n0.id,this.currentOpCount=0,this.currentLoopCount=0,this.interruptible=n,this._stack=[],this._observers=[],this._exit=void 0,this._children=void 0,this._interruptedCause=void 0,this._yielded=void 0}[Ru];id;interruptible;currentOpCount;currentLoopCount;_stack;_observers;_exit;_currentExit;_children;_interruptedCause;_yielded;services;currentScheduler;currentTracerContext;currentSpan;currentLogLevel;minimumLogLevel;currentStackFrame;runtimeMetrics;maxOpsBeforeYield;getRef(t){return Dv(this.services,t)}addObserver(t){return this._exit?(t(this._exit),Hd):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}interruptUnsafe(t,n){if(this._exit)return;let r=Xv(t);this.currentStackFrame&&(r=ca(r,Tp(np,this.currentStackFrame))),n&&(r=ca(r,n)),this._interruptedCause=this._interruptedCause?Qv(this._interruptedCause,r):r,this.interruptible&&this.evaluate(Ur(this._interruptedCause))}pollUnsafe(){return this._exit}evaluate(t){if(this.runtimeMetrics?.recordFiberStart(this.services),this._exit)return;if(this._yielded!==void 0){const r=this._yielded;this._yielded=void 0,r()}const n=this.runLoop(t);if(n!==Yn){this._exit=n,this.runtimeMetrics?.recordFiberEnd(this.services,this._exit);for(let r=0;r<this._observers.length;r++)this._observers[r](n);this._observers.length=0}}runLoop(t){const n=globalThis[Gs];globalThis[Gs]=this;let r=!1,o=t;this.currentOpCount=0;const s=++this.currentLoopCount;try{for(;;){if(this.currentOpCount++,!r&&this.currentScheduler.shouldYield(this)){r=!0;const i=o;o=ur(Mp,()=>i)}if(o=this.currentTracerContext?this.currentTracerContext(o,this):o[nt](this),s!==this.currentLoopCount)return Yn;if(o===Yn){const i=this._yielded;return Jo in i?(this._yielded=void 0,i):Yn}}}catch(i){return ot(o,nt)?this.runLoop(Xo(i)):Xo(`Fiber.runLoop: Not a valid effect: ${String(o)}`)}finally{globalThis[Gs]=n}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[zr]&&n[zr](this);if(r)return r[t]=r,r;if(n[t])return n}}yieldWith(t){return this._yielded=t,Yn}children(){return this._children??=new Set}pipe(){return qt(this,arguments)}setServices(t){this.services=t,this.currentScheduler=this.getRef(da),this.currentSpan=t.mapUnsafe.get(Bv),this.currentLogLevel=this.getRef(qv),this.minimumLogLevel=this.getRef(Gv),this.currentStackFrame=t.mapUnsafe.get(Hv.key),this.maxOpsBeforeYield=this.getRef(Uv),this.runtimeMetrics=t.mapUnsafe.get(Kv);const n=t.mapUnsafe.get(Wv);this.currentTracerContext=n?n.context:void 0}get currentSpanLocal(){return this.currentSpan?._tag==="Span"?this.currentSpan:void 0}}const ln=Ut,Ur=ys,Ap=bs,Pr=mn({op:"Sync",[nt](e){const t=this[Ee](),n=e.getCont(Mt);return n?n[Mt](t,e):e.yieldWith(Ut(t))}}),pa=mn({op:"Suspend",[nt](e){return this[Ee]()}}),o0=mn({op:"Yield",[nt](e){let t=!1;return e.currentScheduler.scheduleTask(()=>{t||e.evaluate(Np)},this[Ee]??0),e.yieldWith(()=>{t=!0})}}),Mp=o0(0),s0=e=>ln($e(e)),i0=ln(Bt()),c0=e=>Xo(e),a0=e=>pa(()=>Ap(eo(e))),l0=ln(void 0),u0=mn({op:"Async",single:!1,[nt](e){const t=eo(()=>this[Ee][0].bind(e.currentScheduler));let n=!1,r=!1;const o=this[Ee][1]?new AbortController:void 0,s=t(i=>{n||(n=!0,r?e.evaluate(i):r=i)},o?.signal);return r!==!1?r:(r=!0,Cu.increment(),e._yielded=()=>{n=!0,Cu.decrement()},o===void 0&&s===void 0||e._stack.push(f0(()=>(n=!0,o?.abort(),s??Np))),Yn)}}),f0=mn({op:"AsyncFinalizer",[zr](e){e.interruptible&&(e.interruptible=!1,e._stack.push(j0))},[sn](e,t){return Zv(e)?ur(this[Ee](),()=>Ur(e)):Ur(e)}}),d0=e=>u0(e,e.length>=2),p0=(e,...t)=>t.length===0?function(){return Ou(()=>e.apply(this,arguments))}:function(){let n=Ou(()=>e.apply(this,arguments));for(const r of t)n=r(n);return n},Ou=e=>{try{const t=e();let n;for(;;){const r=t.next(n);if(r.done)return ln(r.value);const s=r.value.asEffect(),i=s;if(i&&i._tag==="Success"){n=i.value;continue}else{if(i&&i._tag==="Failure")return s;{let c=!0;return pa(()=>c?(c=!1,ur(s,l=>Tu(t,l))):pa(()=>Tu(e())))}}}}catch(t){return c0(t)}},Tu=mn({op:"Iterator",single:!1,[Mt](e,t){const n=this[Ee][0];for(;;){const r=n.next(e);if(r.done)return ln(r.value);const o=r.value.asEffect();if(ut(o)){if(o._tag==="Failure")return o}else return t._stack.push(this),o;e=o.value}},[nt](e){return this[Mt](this[Ee][1],e)}}),h0=pe(2,(e,t)=>ur(e,n=>yb(t)?t:eo(()=>t(n)))),ur=pe(2,(e,t)=>{const n=Object.create(m0);return n[Ee]=e,n[Mt]=t.length!==1?r=>t(r):t,n}),m0=gs({op:"OnSuccess",[nt](e){return e._stack.push(this),this[Ee]}}),ut=e=>Jo in e,g0=pe(2,(e,t)=>ut(e)?e._tag==="Success"?t(e.value):e:ur(e,t)),Pp=pe(2,(e,t)=>ur(e,n=>ln(eo(()=>t(n))))),y0=pe(2,(e,t)=>ut(e)?x0(e,t):Pp(e,t)),b0=pe(2,(e,t)=>ut(e)?S0(e,t):C0(e,t)),v0=pe(2,(e,t)=>{if(ut(e)){if(e._tag==="Success")return e;const n=Hi(e.cause);return Rt(n)?e:t(n.success)}return $p(e,t)}),w0=e=>e._tag==="Success",Np=Ut(void 0),x0=pe(2,(e,t)=>e._tag==="Success"?Ut(t(e.value)):e),S0=pe(2,(e,t)=>{if(e._tag==="Success")return e;const n=Hi(e.cause);return Rt(n)?e:bs(t(n.success))}),_0=pe(2,(e,t)=>{const n=Object.create(E0);return n[Ee]=e,n[sn]=t.length!==1?r=>t(r):t,n}),E0=gs({op:"OnFailure",[nt](e){return e._stack.push(this),this[Ee]}}),R0=pe(3,(e,t,n)=>_0(e,r=>{const o=bp(t,r);return Rt(o)?Ur(o.failure):eo(()=>n(o.success,r))})),$p=pe(2,(e,t)=>R0(e,Hi,n=>t(n))),C0=pe(2,(e,t)=>$p(e,n=>a0(()=>t(n)))),O0=e=>A0(e,{onFailure:Bt,onSuccess:$e}),T0=pe(2,(e,t)=>{const n=Object.create(I0);return n[Ee]=e,n[Mt]=t.onSuccess.length!==1?r=>t.onSuccess(r):t.onSuccess,n[sn]=t.onFailure.length!==1?r=>t.onFailure(r):t.onFailure,n}),I0=gs({op:"OnSuccessAndFailure",[nt](e){return e._stack.push(this),this[Ee]}}),k0=pe(2,(e,t)=>T0(e,{onFailure:n=>{const r=n.reasons.find(Qd);return r?eo(()=>t.onFailure(r.error)):Ur(n)},onSuccess:t.onSuccess})),A0=pe(2,(e,t)=>k0(e,{onFailure:n=>Pr(()=>t.onFailure(n)),onSuccess:n=>Pr(()=>t.onSuccess(n))})),M0=e=>ut(e)?Ut(e):P0(e),P0=mn({op:"Exit",[nt](e){return e._stack.push(this),this[Ee]},[Mt](e,t,n){return ln(n??Ut(e))},[sn](e,t,n){return ln(n??ys(e))}}),N0=pe(2,(e,t)=>h0(K0(t),e)),$0=mn({op:"SetInterruptible",[zr](e){if(e.interruptible=this[Ee],e._interruptedCause&&e.interruptible)return()=>Ur(e._interruptedCause)}}),j0=$0(!0),jp=e=>(t,n)=>{const r=n?.scheduler||!e.mapUnsafe.has(da.key)&&new ml,o=new r0(r?jv(e,da,r):e,n?.uninterruptible!==!0);if(o.evaluate(t),o._exit)return o;if(n?.signal)if(n.signal.aborted)o.interruptUnsafe();else{const s=()=>o.interruptUnsafe();n.signal.addEventListener("abort",s,{once:!0}),o.addObserver(()=>n.signal.removeEventListener("abort",s))}return o},L0=e=>{const t=jp(e);return(n,r)=>{const o=t(n,r);return new Promise(s=>{o.addObserver(i=>s(i))})}},D0=e=>{const t=L0(e);return(n,r)=>t(n,r).then(o=>{if(o._tag==="Failure")throw kp(o.cause);return o.value})},F0=D0(hl()),Lp=e=>{const t=jp(e);return n=>{if(ut(n))return n;const r=new ml("sync"),o=t(n,{scheduler:r});return r.flush(),o._exit??Xo(o)}},z0=Lp(hl()),V0=e=>{const t=Lp(e);return n=>{const r=t(n);if(r._tag==="Failure")throw kp(r.cause);return r.value}},U0=V0(hl()),B0=lr("effect/Clock",{defaultValue:()=>new H0}),W0=2**31-1;class H0{currentTimeMillisUnsafe(){return Date.now()}currentTimeMillis=Pr(()=>this.currentTimeMillisUnsafe());currentTimeNanosUnsafe(){return q0()}currentTimeNanos=Pr(()=>this.currentTimeNanosUnsafe());sleep(t){const n=Rv(t);return n<=0?Mp:d0(r=>{if(n>W0)return;const o=setTimeout(()=>r(l0),n);return Pr(()=>clearTimeout(o))})}}const Iu=(function(){const e=BigInt(1e6);if(typeof performance>"u"||typeof performance.now>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))})(),q0=(function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return Iu;const t=Iu()-e.bigint();return()=>t+e.bigint()})(),G0=e=>Fo(t=>e(t.getRef(B0))),K0=e=>G0(t=>t.sleep(Rp(e))),Y0=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;Y0&&process.stdout.isTTY;const tr=Hi,J0=w0,Dp=e=>{let t=0;for(const n of e)t+=n;return t},X0=lr("effect/Random",{defaultValue:()=>({nextIntUnsafe(){return Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER-Number.MIN_SAFE_INTEGER+1))+Number.MIN_SAFE_INTEGER},nextDoubleUnsafe(){return Math.random()}})}),Pn=ln,Fp=i0,Z0=s0,Q0=Pr,Pe=Ap,ew=Fo,tw=ur,nw=O0,nr=M0,gl=Pp,rw=N0,ow=F0,qi=U0,sw=z0,iw=y0,Gi=b0,Ir=g0,cw=v0,yl=p0;function mo(e,t,n){return t==="__proto__"?Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}):e[t]=n,e}function ha(e){return e.checks?e.checks[e.checks.length-1].annotations:e.annotations}function aw(e){return t=>ha(t)?.[e]}const lw=aw("brands"),bl=Fn(e=>e.getExpected(bl)),uw=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),ma="~effect/SchemaIssue/Issue";function fw(e){return ot(e,ma)}let Gt=class{[ma]=ma;toString(){return ww(this)}},dw=class extends Gt{_tag="Filter";actual;filter;issue;constructor(t,n,r){super(),this.actual=t,this.filter=n,this.issue=r}};class pw extends Gt{_tag="Encoding";ast;actual;issue;constructor(t,n,r){super(),this.ast=t,this.actual=n,this.issue=r}}class ht extends Gt{_tag="Pointer";path;issue;constructor(t,n){super(),this.path=t,this.issue=n}}class Ys extends Gt{_tag="MissingKey";annotations;constructor(t){super(),this.annotations=t}}class zp extends Gt{_tag="UnexpectedKey";ast;actual;constructor(t,n){super(),this.ast=t,this.actual=n}}class Ke extends Gt{_tag="Composite";ast;actual;issues;constructor(t,n,r){super(),this.ast=t,this.actual=n,this.issues=r}}class Ki extends Gt{_tag="InvalidType";ast;actual;constructor(t,n){super(),this.ast=t,this.actual=n}}class Js extends Gt{_tag="InvalidValue";actual;annotations;constructor(t,n){super(),this.actual=t,this.annotations=n}}class hw extends Gt{_tag="AnyOf";ast;actual;issues;constructor(t,n,r){super(),this.ast=t,this.actual=n,this.issues=r}}class mw extends Gt{_tag="OneOf";ast;actual;successes;constructor(t,n,r){super(),this.ast=t,this.actual=n,this.successes=r}}function gw(e,t){if(fw(t))return t;if(t!==void 0)return typeof t=="boolean"?t?void 0:new Js($e(e)):typeof t=="string"?new Js($e(e),{message:t}):new ht(t.path,new Js($e(e),{message:t.message}))}const yw=e=>{const t=Qo(e);if(t!==void 0)return t;switch(e._tag){case"InvalidType":return ga(bl(e.ast),ku(e.actual));case"InvalidValue":return`Invalid data ${ku(e.actual)}`;case"MissingKey":return"Missing key";case"UnexpectedKey":return`Unexpected key with value ${tt(e.actual)}`;case"Forbidden":return"Forbidden operation";case"OneOf":return`Expected exactly one member to match the input ${tt(e.actual)}`}},bw=e=>Qo(e.issue)??Qo(e);function ga(e,t){return`Expected ${e}, got ${t}`}function Er(e,t,n,r){switch(e._tag){case"Filter":{const o=r(e);if(o!==void 0)return[{path:t,message:o}];switch(e.issue._tag){case"InvalidValue":return[{path:t,message:ga(Vp(e.filter),tt(e.actual))}];default:return Er(e.issue,t,n,r)}}case"Encoding":return Er(e.issue,t,n,r);case"Pointer":return Er(e.issue,[...t,...e.path],n,r);case"Composite":return e.issues.flatMap(o=>Er(o,t,n,r));case"AnyOf":{const o=Qo(e);if(e.issues.length===0){if(o!==void 0)return[{path:t,message:o}];const s=ga(bl(e.ast),tt(e.actual));return[{path:t,message:s}]}return e.issues.flatMap(s=>Er(s,t,n,r))}default:return[{path:t,message:n(e)}]}}function Vp(e){const t=e.annotations?.expected;if(typeof t=="string")return t;switch(e._tag){case"Filter":return"<filter>";case"FilterGroup":return e.checks.map(n=>Vp(n)).join(" & ")}}function vw(){return e=>Er(e,[],yw,bw).map(xw).join(`
`)}const ww=vw();function xw(e){let t=e.message;if(e.path&&e.path.length>0){const n=lb(e.path);t+=`
  at ${n}`}return t}function Qo(e){switch(e._tag){case"InvalidType":case"OneOf":case"Composite":case"AnyOf":return go(e.ast.annotations);case"InvalidValue":case"Forbidden":return go(e.annotations);case"MissingKey":return go(e.annotations,"messageMissingKey");case"UnexpectedKey":return go(e.ast.annotations,"messageUnexpectedKey");case"Filter":return go(e.filter.annotations);case"Encoding":return Qo(e.issue)}}function go(e,t="message"){const n=e?.[t];if(typeof n=="string")return n}function ku(e){return vs(e)?"no value provided":tt(e.value)}class es extends ol{run;constructor(t){super(),this.run=t}map(t){return new es((n,r)=>this.run(n,r).pipe(iw(dl(t))))}compose(t){return Au(this)?t:Au(t)?this:new es((n,r)=>this.run(n,r).pipe(Ir(o=>t.run(o,r))))}}const Up=new es(Pn);function Au(e){return e.run===Up.run}function Mu(){return Up}function Br(e){return Sw(dl(e))}function Sw(e){return new es(t=>Pn(e(t)))}function _w(){return Br(globalThis.String)}const ya="~effect/SchemaTransformation/Transformation";class or{[ya]=ya;_tag="Transformation";decode;encode;constructor(t,n){this.decode=t,this.encode=n}flip(){return new or(this.encode,this.decode)}compose(t){return new or(this.decode.compose(t.decode),t.encode.compose(this.encode))}}function Ew(e){return ot(e,ya)}const Rw=e=>Ew(e)?e:new or(e.decode,e.encode),Cw=new or(Mu(),Mu());function Ow(){return Cw}function to(e){return t=>t._tag===e}const Tw=to("Declaration"),Iw=to("Never"),ii=to("Literal"),kw=to("Arrays"),Aw=to("Objects"),Mw=to("Union");class sr{to;transformation;constructor(t,n){this.to=t,this.transformation=n}}const Bp={};class Pu{isOptional;isMutable;defaultValue;annotations;constructor(t,n,r=void 0,o=void 0){this.isOptional=t,this.isMutable=n,this.defaultValue=r,this.annotations=o}}const Nu="~effect/Schema";let fr=class{[Nu]=Nu;annotations;checks;encoding;context;constructor(t=void 0,n=void 0,r=void 0,o=void 0){this.annotations=t,this.checks=n,this.encoding=r,this.context=o}toString(){return`<${this._tag}>`}},Pw=class extends fr{_tag="Null";getParser(){return sh(this,null)}getExpected(){return"null"}};const Nw=new Pw;class $w extends fr{_tag="Unknown";getParser(){return _l(this,By)}getExpected(){return"unknown"}}const $u=new $w;let jw=class extends fr{_tag="Enum";enums;constructor(t,n,r,o,s){super(n,r,o,s),this.enums=t}getParser(){const t=new Set(this.enums.map(([,n])=>n));return _l(this,n=>t.has(n))}toCodecStringTree(){if(this.enums.some(([t,n])=>typeof n=="number")){const t=Object.fromEntries(this.enums.map(([n,r])=>[globalThis.String(r),r]));return Ft(this,[new sr(new Jp(Object.keys(t).map(n=>new vl(n)),"anyOf"),new or(Br(n=>t[n]),_w()))])}return this}getExpected(){return this.enums.map(([t,n])=>JSON.stringify(n)).join(" | ")}},vl=class extends fr{_tag="Literal";literal;constructor(t,n,r,o,s){if(super(n,r,o,s),typeof t=="number"&&!globalThis.Number.isFinite(t))throw new Error(`A numeric literal must be finite, got ${tt(t)}`);this.literal=t}getParser(){return sh(this,this.literal)}toCodecJson(){return typeof this.literal=="bigint"?ju(this):this}toCodecStringTree(){return typeof this.literal=="string"?this:ju(this)}getExpected(){return typeof this.literal=="string"?JSON.stringify(this.literal):globalThis.String(this.literal)}};function ju(e){const t=globalThis.String(e.literal);return Ft(e,[new sr(new vl(t),new or(Br(()=>e.literal),Br(()=>t)))])}class wl extends fr{_tag="Arrays";isMutable;elements;rest;constructor(t,n,r,o,s,i,c){super(o,s,i,c),this.isMutable=t,this.elements=n,this.rest=r;const l=n.findIndex(On);if(l!==-1&&(n.slice(l+1).some(a=>!On(a))||r.length>1))throw new Error("A required element cannot follow an optional element. ts(1257)");if(r.length>1&&r.slice(1).some(On))throw new Error("An optional element cannot follow a rest element. ts(1266)")}getParser(t){const n=this,r=n.elements.map(i=>({ast:i,parser:t(i)})),o=n.rest.map(i=>({ast:i,parser:t(i)})),s=r.length;return yl(function*(i,c){if(i._tag==="None")return i;const l=i.value;if(!Array.isArray(l))return yield*Pe(new Ki(n,i));const a=[];let u;const f=c.errors==="all";let p=0;for(;p<s;p++){const m=r[p],h=p<l.length?$e(l[p]):Bt(),b=m.parser(h,c),g=ut(b)?b:yield*nr(b);if(g._tag==="Failure"){const y=tr(g.cause);if(Rt(y))return yield*g;const v=new ht([p],y.success);if(f)u?u.push(v):u=[v];else return yield*Pe(new Ke(n,i,[v]))}else if(g.value._tag==="Some")a[p]=g.value.value;else if(!On(m.ast)){const y=new ht([p],new Ys(m.ast.context?.annotations));if(f)u?u.push(y):u=[y];else return yield*Pe(new Ke(n,i,[y]))}}const d=l.length;if(n.rest.length>0){const[m,...h]=o,b=m.ast.context?.annotations;for(;p<d-h.length;p++){const g=m.parser($e(l[p]),c),y=ut(g)?g:yield*nr(g);if(y._tag==="Failure"){const v=tr(y.cause);if(Rt(v))return yield*y;const x=new ht([p],v.success);if(f)u?u.push(x):u=[x];else return yield*Pe(new Ke(n,i,[x]))}else if(y.value._tag==="Some")a[p]=y.value.value;else{const v=new ht([p],new Ys(b));if(f)u?u.push(v):u=[v];else return yield*Pe(new Ke(n,i,[v]))}}for(let g=0;g<h.length;g++)if(!(d<p+1)){const y=h[g],v=y.ast.context?.annotations,x=y.parser($e(l[p]),c),S=ut(x)?x:yield*nr(x);if(S._tag==="Failure"){const O=tr(S.cause);if(Rt(O))return yield*S;const I=new ht([p],O.success);if(f)u?u.push(I):u=[I];else return yield*Pe(new Ke(n,i,[I]))}else if(S.value._tag==="Some")a[p]=S.value.value;else{const O=new ht([p],new Ys(v));if(f)u?u.push(O):u=[O];else return yield*Pe(new Ke(n,i,[O]))}}}else for(let m=s;m<=d-1;m++){const h=new ht([m],new zp(n,l[m]));if(f)u?u.push(h):u=[h];else return yield*Pe(new Ke(n,i,[h]))}return u?yield*Pe(new Ke(n,i,u)):$e(a)})}recur(t){const n=ts(this.elements,t),r=ts(this.rest,t);return n===this.elements&&r===this.rest?this:new wl(this.isMutable,n,r,this.annotations,this.checks,void 0,this.context)}getExpected(){return"array"}}const Wp="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",Lw=new globalThis.RegExp(`(?:${Wp}|Infinity|-Infinity|NaN)`);function Hp(e,t){const n=Ji(t);switch(n._tag){case"String":return Object.keys(e);case"TemplateLiteral":{const r=Jw(n);return Object.keys(e).filter(o=>r.test(o))}case"Symbol":return Object.getOwnPropertySymbols(e);case"Number":return Object.keys(e).filter(r=>Lw.test(r));case"Union":return[...new Set(n.types.flatMap(r=>Hp(e,r)))];default:return[]}}class qp{name;type;constructor(t,n){this.name=t,this.type=n}}class Gp{parameter;type;merge;constructor(t,n,r){if(this.parameter=t,this.type=n,this.merge=r,On(n)&&!nh(n))throw new Error("Cannot use `Schema.optionalKey` with index signatures, use `Schema.optional` instead.")}}class xl extends fr{_tag="Objects";propertySignatures;indexSignatures;constructor(t,n,r,o,s,i){super(r,o,s,i),this.propertySignatures=t,this.indexSignatures=n;const c=t.map(l=>l.name).filter((l,a,u)=>u.indexOf(l)!==a);if(c.length>0)throw new Error(`Duplicate identifiers: ${JSON.stringify(c)}. ts(2300)`)}getParser(t){const n=this,r=[],o=new Set,s=[],i=n.propertySignatures.length;for(const l of n.propertySignatures)r.push(l.name),o.add(l.name),s.push({ps:l,parser:t(l.type),name:l.name,type:l.type});const c=n.indexSignatures.length;return n.propertySignatures.length===0&&n.indexSignatures.length===0?_l(n,Uy):yl(function*(l,a){if(l._tag==="None")return l;const u=l.value;if(!(typeof u=="object"&&u!==null&&!Array.isArray(u)))return yield*Pe(new Ki(n,l));const f={};let p;const d=a.errors==="all",m=a.onExcessProperty==="error",h=a.onExcessProperty==="preserve";let b;if(n.indexSignatures.length===0&&(m||h)){b=Reflect.ownKeys(u);for(let g=0;g<b.length;g++){const y=b[g];if(!o.has(y))if(m){const v=new ht([y],new zp(n,u[y]));if(d){p?p.push(v):p=[v];continue}else return yield*Pe(new Ke(n,l,[v]))}else mo(f,y,u[y])}}for(let g=0;g<i;g++){const y=s[g],v=Object.hasOwn(u,y.name)?$e(u[y.name]):Bt(),x=y.parser(v,a),S=ut(x)?x:yield*nr(x);if(S._tag==="Failure"){const O=tr(S.cause);if(Rt(O))return yield*S;const I=new ht([y.name],O.success);if(d){p?p.push(I):p=[I];continue}else return yield*Pe(new Ke(n,l,[I]))}else if(S.value._tag==="Some")mo(f,y.name,S.value.value);else if(!On(y.type)){const O=new ht([y.name],new Ys(y.type.context?.annotations));if(d){p?p.push(O):p=[O];continue}else return yield*Pe(new Ke(n,l,[O]))}}if(c>0)for(let g=0;g<c;g++){const y=n.indexSignatures[g],v=Hp(u,y.parameter);for(let x=0;x<v.length;x++){const S=v[x],I=t(ih(y.parameter))($e(S),a),_=ut(I)?I:yield*nr(I);if(_._tag==="Failure"){const G=tr(_.cause);if(Rt(G))return yield*_;const B=new ht([S],G.success);if(d){p?p.push(B):p=[B];continue}return yield*Pe(new Ke(n,l,[B]))}const R=$e(u[S]),D=t(y.type)(R,a),L=ut(D)?D:yield*nr(D);if(L._tag==="Failure"){const G=tr(L.cause);if(Rt(G))return yield*L;const B=new ht([S],G.success);if(d){p?p.push(B):p=[B];continue}else return yield*Pe(new Ke(n,l,[B]))}else if(_.value._tag==="Some"&&L.value._tag==="Some"){const G=_.value.value,B=L.value.value;if(y.merge&&y.merge.decode&&Object.hasOwn(f,G)){const[H,C]=y.merge.decode.combine([G,f[G]],[G,B]);mo(f,H,C)}else mo(f,G,B)}}}if(p)return yield*Pe(new Ke(n,l,p));if(a.propertyOrder==="original"){const g=(b??Reflect.ownKeys(u)).concat(r),y={};for(const v of g)Object.hasOwn(f,v)&&mo(y,v,f[v]);return $e(y)}return $e(f)})}rebuild(t,n){const r=ts(this.propertySignatures,s=>{const i=t(s.type);return i===s.type?s:new qp(s.name,i)}),o=ts(this.indexSignatures,s=>{const i=t(s.parameter),c=t(s.type),l=n?s.merge?.flip():s.merge;return i===s.parameter&&c===s.type&&l===s.merge?s:new Gp(i,c,l)});return r===this.propertySignatures&&o===this.indexSignatures?this:new xl(r,o,this.annotations,this.checks,void 0,this.context)}flip(t){return this.rebuild(t,!0)}recur(t){return this.rebuild(t,!1)}getExpected(){return this.propertySignatures.length===0&&this.indexSignatures.length===0?"object | array":"object"}}function Dw(e){return e.ast}function Sl(e,t,n){return new Jp(e.map(Dw),t,void 0,n)}function Kp(e){switch(e._tag){case"Null":return["null"];case"Undefined":case"Void":return["undefined"];case"String":case"TemplateLiteral":return["string"];case"Number":return["number"];case"Boolean":return["boolean"];case"Symbol":case"UniqueSymbol":return["symbol"];case"BigInt":return["bigint"];case"Arrays":return["array"];case"ObjectKeyword":return["object","array","function"];case"Objects":return e.propertySignatures.length||e.indexSignatures.length?["object"]:["object","array"];case"Enum":return Array.from(new Set(e.enums.map(([,t])=>typeof t)));case"Literal":return[typeof e.literal];case"Union":return Array.from(new Set(e.types.flatMap(Kp)));default:return["null","undefined","string","number","boolean","symbol","bigint","object","array","function"]}}function Yp(e){switch(e._tag){case"Declaration":{const t=e.annotations?.["~sentinels"];return Array.isArray(t)&&t.length?t:void 0}case"Objects":{const t=e.propertySignatures.flatMap(n=>ii(n.type)&&!On(n.type)?[{key:n.name,literal:n.type.literal}]:[]);return t.length?t:void 0}case"Arrays":{const t=e.elements.flatMap((n,r)=>ii(n)&&!On(n)?[{key:r,literal:n.literal}]:[]);return t.length?t:void 0}case"Suspend":return Yp(e.thunk())}}const Lu=new WeakMap;function Fw(e){let t=Lu.get(e);if(t)return t;t={};for(const n of e){const r=Ji(n);if(Iw(r))continue;const o=Kp(r),s=Yp(r);t.byType??={};for(const i of o)(t.byType[i]??=[]).push(n);if(s?.length){t.bySentinel??=new Map;for(const{key:i,literal:c}of s){let l=t.bySentinel.get(i);l||t.bySentinel.set(i,l=new Map);let a=l.get(c);a||l.set(c,a=[]),a.push(n)}}else{t.otherwise??={};for(const i of o)(t.otherwise[i]??=[]).push(n)}}return Lu.set(e,t),t}function Du(e){return t=>{const n=Ji(t);return n._tag==="Literal"?n.literal===e:n._tag==="UniqueSymbol"?n.symbol===e:!0}}function zw(e,t){const n=Fw(t),r=e===null?"null":Array.isArray(e)?"array":typeof e;if(n.bySentinel){const o=n.otherwise?.[r]??[];if(r==="object"||r==="array"){for(const[s,i]of n.bySentinel)if(Object.hasOwn(e,s)){const c=i.get(e[s]);if(c)return[...c,...o].filter(Du(e))}}return o}return(n.byType?.[r]??[]).filter(Du(e))}let Jp=class Xp extends fr{_tag="Union";types;mode;constructor(t,n,r,o,s,i){super(r,o,s,i),this.types=t,this.mode=n}getParser(t){const n=this;return yl(function*(r,o){if(r._tag==="None")return r;const s=r.value,i=n.mode==="oneOf",c=zw(s,n.types);let l;const a={out:void 0,successes:[]};for(let u=0;u<c.length;u++){const f=c[u],d=t(f)(r,o),m=ut(d)?d:yield*nr(d);if(m._tag==="Failure"){const h=tr(m.cause);if(Rt(h))return yield*m;l?l.push(h.success):l=[h.success];continue}else{if(a.out&&i)return a.successes.push(f),yield*Pe(new mw(n,s,a.successes));if(a.out=m.value,a.successes.push(f),!i)break}}return a.out?a.out:yield*Pe(new hw(n,s,l??[]))})}recur(t){const n=ts(this.types,t);return n===this.types?this:new Xp(n,this.mode,this.annotations,this.checks,void 0,this.context)}getExpected(t){const n=this.annotations?.expected;if(typeof n=="string")return n;if(this.types.length===0)return"never";const r=this.types.map(o=>{const s=Ji(o);switch(s._tag){case"Arrays":{const i=s.elements.filter(ii);if(i.length>0)return`${Fu(s.isMutable)}[ ${i.map(c=>t(c)+zu(c.context?.isOptional)).join(", ")}, ... ]`;break}case"Objects":{const i=s.propertySignatures.filter(c=>ii(c.type));if(i.length>0)return`{ ${i.map(c=>`${Fu(c.type.context?.isMutable)}${oi(c.name)}${zu(c.type.context?.isOptional)}: ${t(c.type)}`).join(", ")}, ... }`;break}}return t(s)});return Array.from(new Set(r)).join(" | ")}};function Fu(e){return e?"":"readonly "}function zu(e){return e?"?":""}class ci extends ol{_tag="Filter";run;annotations;aborted;constructor(t,n=void 0,r=!1){super(),this.run=t,this.annotations=n,this.aborted=r}annotate(t){return new ci(this.run,{...this.annotations,...t},this.aborted)}abort(){return new ci(this.run,this.annotations,!0)}and(t,n){return new ai([this,t],n)}}class ai extends ol{_tag="FilterGroup";checks;annotations;constructor(t,n=void 0){super(),this.checks=t,this.annotations=n}annotate(t){return new ai(this.checks,{...this.annotations,...t})}and(t,n){return new ai([this,t],n)}}function Zp(e,t,n=!1){return new ci((r,o,s)=>gw(r,e(r,o,s)),t,n)}function Yi(e,t){const n=Object.getOwnPropertyDescriptors(e);return t(n),Object.create(Object.getPrototypeOf(e),n)}function Ft(e,t){return e.encoding===t?e:Yi(e,n=>{n.encoding.value=t})}function Vw(e,t){return e.context===t?e:Yi(e,n=>{n.context.value=t})}function Qp(e,t){if(e.checks){const n=e.checks[e.checks.length-1];return eh(e,wp(e.checks.slice(0,-1),n.annotate(t)))}return Yi(e,n=>{n.annotations.value={...n.annotations.value,...t}})}function eh(e,t){return e.checks===t?e:Yi(e,n=>{n.checks.value=t})}function Uw(e,t){return eh(e,e.checks?[...e.checks,...t]:t)}function Bw(e,t){const n=e,r=n[n.length-1],o=t(r.to);return o!==r.to?wp(e.slice(0,e.length-1),new sr(o,r.transformation)):e}function Ww(e,t,n){const r=new sr(e,t);return Ft(n,n.encoding?[...n.encoding,r]:[r])}function Hw(e,t){const n=lw(e),r=n?[...n,t]:[t];return Qp(e,{brands:r})}function ts(e,t){let n=!1;const r=new Array(e.length);for(let o=0;o<e.length;o++){const s=e[o],i=t(s);i!==s&&(n=!0),r[o]=i}return n?r:e}function qw(e,t){const n=e.context?new Pu(e.context.isOptional,e.context.isMutable,e.context.defaultValue,{...e.context.annotations,...t}):new Pu(!1,!1,void 0,t);return Vw(e,n)}function Gw(e,t,n){return Ww(e,n,t)}function th(e){switch(e._tag){case"Literal":return{literals:Vy(e.literal)?[e.literal]:[],parameters:[]};case"UniqueSymbol":return{literals:[e.symbol],parameters:[]};case"String":case"Number":case"Symbol":case"TemplateLiteral":return{literals:[],parameters:[e]};case"Union":{const t={literals:[],parameters:[]};for(let n=0;n<e.types.length;n++){const r=th(e.types[n]);t.literals=t.literals.concat(r.literals),t.parameters=t.parameters.concat(r.parameters)}return t}}return{literals:[],parameters:[]}}function Kw(e,t,n){const{literals:r,parameters:o}=th(e);return new xl(r.map(s=>new qp(s,t)),o.map(s=>new Gp(s,t,n)))}function On(e){return e.context?.isOptional??!1}const ns=Fn(e=>{if(e.encoding)return ns(Ft(e,void 0));const t=e;return t.recur?.(ns)??t}),Ji=Fn(e=>ns(Nr(e)));function Yw(e,t){const n=t,r=n.length,o=n[r-1],s=[new sr(Nr(Ft(e,void 0)),n[0].transformation.flip())];for(let c=1;c<r;c++)s.unshift(new sr(Nr(n[c-1].to),n[c].transformation.flip()));const i=Nr(o.to);return i.encoding?Ft(i,[...i.encoding,...s]):Ft(i,s)}const Nr=Fn(e=>{if(e.encoding)return Yw(e,e.encoding);const t=e;return t.flip?.(Nr)??t.recur?.(Nr)??t});function nh(e){switch(e._tag){case"Undefined":return!0;case"Union":return e.types.some(nh);default:return!1}}function rh(e,t){return e.encodedParts.map(n=>Xw(n,oh(n),t)).join("")}const Jw=Fn(e=>new globalThis.RegExp(`^${rh(e,!0)}$`));function oh(e){switch(e._tag){case"Literal":return uw(globalThis.String(e.literal));case"String":return Qw;case"Number":return Wp;case"BigInt":return e1;case"TemplateLiteral":return rh(e,!1);case"Union":return e.types.map(oh).join("|")}}function Xw(e,t,n){if(Mw(e)){if(!n)return`(?:${t})`}else if(!n)return t;return`(${t})`}function sh(e,t){const n=Z0(t);return r=>r._tag==="None"?Fp:r.value===t?n:Pe(new Ki(e,r))}function _l(e,t){return n=>n._tag==="None"?Fp:t(n.value)?Pn(n):Pe(new Ki(e,n))}function Zw(e){function t(n){return n.encoding?Ft(n,Bw(n.encoding,t)):e(n)}return Fn(t)}const ih=Zw(e=>{switch(e._tag){default:return e;case"Number":return e.toCodecStringTree();case"Union":return e.recur(ih)}}),Qw="[\\s\\S]*?",e1="-?\\d+";function li(e,t,n,r,o){for(let s=0;s<e.length;s++){const i=e[s];if(i._tag==="FilterGroup")li(i.checks,t,n,r,o);else{const c=i.run(t,r,o);if(c&&(n.push(new dw(t,i,c)),i.aborted||o?.errors!=="all"))return}}}function t1(e,t){const n=[];if(li(e,t,n,$u,{errors:"all"}),Zo(n)){const r=new Ke($u,$e(t),n);return Wi(r)}return Bi(t)}const n1="~effect/Schema/Class",ch="~structural";class r1{constructor(t){this.issue=t}_tag="BrandError";name="BrandError";issue;get message(){return this.issue.toString()}toString(){return`BrandError(${this.message})`}}function Xi(e){return o1(Zp(e))}function o1(...e){const t=n=>Wb(t1(e,n),r=>new r1(r));return Object.assign(n=>qb(t(n)),{option:n=>Fb(t(n)),result:t,is:n=>yp(t(n)),checks:e})}const s1=pe(2,(e,t)=>i1(e,(n,r)=>t.includes(n)?[n,r]:void 0)),ah=e=>e;function i1(e,t){const n={};for(const r in e){const o=t(r,e[r]);if(o){const[s,i]=o;n[s]=i}}return n}const No=Fn(e=>{switch(e._tag){case"Declaration":{const t=e.annotations?.[n1];if(il(t)){const n=t(e.typeParameters),r=No(n.to);return Ft(e,r===n.to?[n]:[new sr(r,n.transformation)])}return e}case"Objects":case"Arrays":return e.recur(t=>{const n=t.context?.defaultValue;return n?Ft(No(t),n):No(t)});case"Suspend":return e.recur(No);default:return e}});function c1(e){const t=No(ns(e.ast)),n=El(t);return(r,o)=>n(r,o?.parseOptions)}function a1(e){const t=c1(e);return(n,r)=>qi(Gi(t(n,r),o=>new Error(o.toString(),{cause:o})))}function l1(e){return u1(e.ast)}function u1(e){const t=d1(El(ns(e)));return n=>J0(t(n,Bp))}function lh(e){return El(e.ast)}function f1(e){return p1(lh(e))}function El(e){const t=Xs(e);return(n,r)=>Ir(t($e(n),r??Bp),o=>o._tag==="None"?Pe(new Js(o)):Pn(o.value))}function d1(e){return(t,n)=>sw(e(t,n))}function p1(e){return(t,n)=>qi(Gi(e(t,n),r=>new Error(r.toString(),{cause:r})))}const Xs=Fn(e=>{let t;if(!e.context&&!e.encoding&&!e.checks)return(r,o)=>(t??=e.getParser(Xs),t(r,ha(e)?.parseOptions??o));const n=kw(e)||Aw(e)||Tw(e)&&e.typeParameters.length>0;return(r,o)=>{o=ha(e)?.parseOptions??o;const s=e.encoding;let i;if(s){const l=s,a=l.length;for(let u=a-1;u>=0;u--){const f=l[u],p=f.to,d=Xs(p);if(i=i?Ir(i,m=>d(m,o)):d(r,o),f.transformation._tag==="Transformation"){const m=f.transformation.decode;i=Ir(i,h=>m.run(h,o))}else i=f.transformation.decode(i,o)}i=Gi(i,u=>new pw(e,r,u))}t??=e.getParser(Xs);let c=i?Ir(i,l=>t(l,o)):t(r,o);if(e.checks){const l=e.checks;o?.errors==="all"&&n&&si(r)&&(c=cw(c,a=>{const u=[];li(l.filter(p=>p.annotations?.[ch]),r.value,u,e,o);const f=Zo(u)?a._tag==="Composite"&&a.ast===e?new Ke(e,a.actual,[...a.issues,...u]):new Ke(e,r,[a,...u]):a;return Pe(f)})),c=Ir(c,a=>{if(si(a)){const u=a.value,f=[];if(li(l,u,f,e,o),Zo(f))return Pe(new Ke(e,a,f))}return Pn(a)})}return c}}),Vu="~effect/Schema/Schema",h1={[Vu]:Vu,pipe(){return qt(this,arguments)},annotate(e){return this.rebuild(Qp(this.ast,e))},annotateKey(e){return this.rebuild(qw(this.ast,e))},check(...e){return this.rebuild(Uw(this.ast,e))}};function uh(e,t){const n=Object.create(h1);return t&&Object.assign(n,t),n.ast=e,n.rebuild=r=>uh(r,t),n.makeUnsafe=a1(n),n}const Uu="~effect/Schema/SchemaError";class m1{[Uu]=Uu;_tag="SchemaError";name="SchemaError";issue;constructor(t){this.issue=t}get message(){return this.issue.toString()}toString(){return`SchemaError(${this.message})`}}const no=l1;function g1(e){const t=lh(e);return(n,r)=>Gi(t(n,r),o=>new m1(o))}const y1=f1,gn=uh;function fh(e){const t=gn(new vl(e),{literal:e,transform(n){return t.pipe(S1(fh(n),{decode:Br(()=>n),encode:Br(()=>e)}))}});return t}function b1(e){return gn(new jw(Object.keys(e).filter(t=>typeof e[e[t]]!="number").map(t=>[t,e[t]])),{enums:e})}const v1=gn(Nw);function w1(e,t,n){return gn(Kw(e.ast,t.ast,void 0),{key:e,value:t})}const Bu=ah(e=>gn(new wl(!1,[],[e.ast]),{schema:e}));function dh(e,t){return gn(e,{members:t,mapMembers(n,r){const o=n(this.members);return dh(Sl(o,this.ast.mode,r?.unsafePreserveChecks?this.ast.checks:void 0),o)}})}function ba(e,t){return dh(Sl(e,"anyOf",void 0),e)}function ws(e){const t=e.map(fh);return gn(Sl(t,"anyOf",void 0),{literals:e,members:t,mapMembers(n){return ba(n(this.members))},pick(n){return ws(n)},transform(n){return ba(t.map((r,o)=>r.transform(n[o])))}})}const x1=ah(e=>ba([e,v1]));function ro(e){return t=>gn(Hw(t.ast,e),{schema:t,identifier:e})}function S1(e,t){return n=>gn(Gw(n.ast,e.ast,t?Rw(t):Ow()),{from:n,to:e})}const _1=Zp;function Wu(e,t,n){return e=Math.max(0,Math.floor(e)),t=Math.max(0,Math.floor(t)),_1(r=>r.length>=e&&r.length<=t,{expected:e===t?`a value with a length of ${e}`:`a value with a length between ${e} and ${t}`,meta:{_tag:"isLengthBetween",minimum:e,maximum:t},[ch]:!0,toArbitraryConstraint:{string:{minLength:e,maxLength:t},array:{minLength:e,maxLength:t}},...n})}const E1=X0,R1=e=>ew(t=>Pn(e(t.getRef(E1)))),C1=(e,t,n)=>R1(o=>{const s=Math.ceil(e),i=Math.floor(t);return Math.floor(o.nextDoubleUnsafe()*(i-s+1))+s}),Le={Remove:"remove",Replace:"replace",Add:"add"},ph=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),O1=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),Zs=Symbol.iterator,bt={mutable:"mutable",immutable:"immutable"},Rl={};function zo(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Hu(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,t);if(r)return r;n=Reflect.getPrototypeOf(n)}}}function Cl(e){return Object.getPrototypeOf(e)===Set.prototype}function Ol(e){return Object.getPrototypeOf(e)===Map.prototype}function mt(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function Nn(e){return!!we(e)}function we(e){return typeof e!="object"?null:e?.[ph]}function Tl(e){var t;const n=we(e);return n?(t=n.copy)!==null&&t!==void 0?t:n.original:e}function Pt(e,t){if(!e||typeof e!="object")return!1;let n;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!t?.mark&&((n=t.mark(e,bt))===bt.immutable||typeof n=="function")}function hh(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const n=e.parent.copy,r=we(un(n,e.key));if(r!==null&&r?.original!==e.original)return null;const o=e.parent.type===3,s=o?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key;if(!(o&&n.size>s||zo(n,s)))return null;t.push(s)}if(e.parent)return hh(e.parent,t);t.reverse();try{T1(e.copy,t)}catch{return null}return t}function dr(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function un(e,t){return dr(e)===2?e.get(t):e[t]}function xs(e,t,n){dr(e)===2?e.set(t,n):e[t]=n}function Nc(e,t){const n=we(e);return(n?mt(n):e)[t]}function cn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function va(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function Xn(e,t){return t?e:[""].concat(e).map(n=>{const r=`${n}`;return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function T1(e,t){for(let n=0;n<t.length-1;n+=1){const r=t[n];if(e=un(dr(e)===3?Array.from(e):e,r),typeof e!="object")throw new Error(`Cannot resolve patch at '${t.join("/")}'.`)}return e}function I1(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let r=Reflect.getOwnPropertyDescriptor(e,n);if(r.enumerable&&r.configurable&&r.writable){t[n]=e[n];return}r.writable||(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(r={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]}),Reflect.defineProperty(t,n,r)}),t}const k1=Object.prototype.propertyIsEnumerable;function mh(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set){if(!Cl(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e.values())}return Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values())}else if(e instanceof Map){if(!Ol(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e)}return new Map(e)}else if(t?.mark&&(n=t.mark(e,bt),n!==void 0)&&n!==bt.mutable){if(n===bt.immutable)return I1(e);if(typeof n=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return n()}throw new Error(`Unsupported mark result: ${n}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o]}),Object.getOwnPropertySymbols(e).forEach(o=>{k1.call(e,o)&&(r[o]=e[o])}),r}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function rt(e){e.copy||(e.copy=mh(e.original,e.options))}function $o(e){if(!Pt(e))return Tl(e);if(Array.isArray(e))return e.map($o);if(e instanceof Map){const n=Array.from(e.entries()).map(([r,o])=>[r,$o(o)]);if(!Ol(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Map(n)}if(e instanceof Set){const n=Array.from(e).map($o);if(!Cl(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Set(n)}const t=Object.create(Object.getPrototypeOf(e));for(const n in e)t[n]=$o(e[n]);return t}function Qs(e){return Nn(e)?$o(e):e}function zt(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&zt(e.parent))}function qu(){throw new Error("Cannot modify frozen object")}function Rr(e,t,n,r,o){{n=n??new WeakMap,r=r??[],o=o??[];const i=n.has(e)?n.get(e):e;if(r.length>0){const c=r.indexOf(i);if(i&&typeof i=="object"&&c!==-1)throw r[0]===i?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${o.slice(0,c).map((l,a)=>{if(typeof l=="symbol")return`[${l.toString()}]`;const u=r[a];return typeof l=="object"&&(u instanceof Map||u instanceof Set)?Array.from(u.keys()).indexOf(l):l}).join("/")}`);r.push(i),o.push(t)}else r.push(i)}if(Object.isFrozen(e)||Nn(e)){r.pop(),o.pop();return}switch(dr(e)){case 2:for(const[c,l]of e)Rr(c,c,n,r,o),Rr(l,c,n,r,o);e.set=e.clear=e.delete=qu;break;case 3:for(const c of e)Rr(c,c,n,r,o);e.add=e.clear=e.delete=qu;break;case 1:Object.freeze(e);let i=0;for(const c of e)Rr(c,i,n,r,o),i+=1;break;default:Object.freeze(e),Object.keys(e).forEach(c=>{const l=e[c];Rr(l,c,n,r,o)})}r.pop(),o.pop()}function Il(e,t){const n=dr(e);if(n===0)Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)});else if(n===1){let r=0;for(const o of e)t(r,o,e),r+=1}else e.forEach((r,o)=>t(o,r,e))}function gh(e,t,n){if(Nn(e)||!Pt(e,n)||t.has(e)||Object.isFrozen(e))return;const r=e instanceof Set,o=r?new Map:void 0;if(t.add(e),Il(e,(s,i)=>{var c;if(Nn(i)){const l=we(i);rt(l);const a=!((c=l.assignedMap)===null||c===void 0)&&c.size||l.operated?l.copy:l.original;xs(r?o:e,s,a)}else gh(i,t,n)}),o){const s=e,i=Array.from(s);s.clear(),i.forEach(c=>{s.add(o.has(c)?o.get(c):c)})}}function A1(e,t){const n=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&gh(un(n,t),e.finalities.handledSet,e.options)}function wa(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(Tl(t))}))}function xa(e,t,n,r){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&r){const s=hh(e);s&&t(e,s,n,r)}e.finalized=!0}}function kl(e,t,n,r){const o=we(n);o&&(o.callbacks||(o.callbacks=[]),o.callbacks.push((s,i)=>{var c;const l=e.type===3?e.setMap:e.copy;if(cn(un(l,t),n)){let a=o.original;o.copy&&(a=o.copy),wa(e),xa(e,r,s,i),e.options.enableAutoFreeze&&(e.options.updatedValues=(c=e.options.updatedValues)!==null&&c!==void 0?c:new WeakMap,e.options.updatedValues.set(a,o.original)),xs(l,t,a)}}),e.options.enableAutoFreeze&&o.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),Pt(n,e.options)&&e.finalities.draft.push(()=>{const s=e.type===3?e.setMap:e.copy;cn(un(s,t),n)&&A1(e,t)})}function M1(e,t,n,r,o){let{original:s,assignedMap:i,options:c}=e,l=e.copy;l.length<s.length&&([s,l]=[l,s],[n,r]=[r,n]);for(let a=0;a<s.length;a+=1)if(i.get(a.toString())&&l[a]!==s[a]){const u=t.concat([a]),f=Xn(u,o);n.push({op:Le.Replace,path:f,value:Qs(l[a])}),r.push({op:Le.Replace,path:f,value:Qs(s[a])})}for(let a=s.length;a<l.length;a+=1){const u=t.concat([a]),f=Xn(u,o);n.push({op:Le.Add,path:f,value:Qs(l[a])})}if(s.length<l.length){const{arrayLengthAssignment:a=!0}=c.enablePatches;if(a){const u=t.concat(["length"]),f=Xn(u,o);r.push({op:Le.Replace,path:f,value:s.length})}else for(let u=l.length;s.length<u;u-=1){const f=t.concat([u-1]),p=Xn(f,o);r.push({op:Le.Remove,path:p})}}}function P1({original:e,copy:t,assignedMap:n},r,o,s,i){n.forEach((c,l)=>{const a=un(e,l),u=Qs(un(t,l)),f=c?zo(e,l)?Le.Replace:Le.Add:Le.Remove;if(cn(a,u)&&f===Le.Replace)return;const p=r.concat(l),d=Xn(p,i);o.push(f===Le.Remove?{op:f,path:d}:{op:f,path:d,value:u}),s.push(f===Le.Add?{op:Le.Remove,path:d}:f===Le.Remove?{op:Le.Add,path:d,value:a}:{op:Le.Replace,path:d,value:a})})}function N1({original:e,copy:t},n,r,o,s){let i=0;e.forEach(c=>{if(!t.has(c)){const l=n.concat([i]),a=Xn(l,s);r.push({op:Le.Remove,path:a,value:c}),o.unshift({op:Le.Add,path:a,value:c})}i+=1}),i=0,t.forEach(c=>{if(!e.has(c)){const l=n.concat([i]),a=Xn(l,s);r.push({op:Le.Add,path:a,value:c}),o.unshift({op:Le.Remove,path:a,value:c})}i+=1})}function rs(e,t,n,r){const{pathAsArray:o=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return P1(e,t,n,r,o);case 1:return M1(e,t,n,r,o);case 3:return N1(e,t,n,r,o)}}const ui=(e,t,n=!1)=>{if(typeof e=="object"&&e!==null&&(!Pt(e,t)||n))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Sa={get size(){return mt(we(this)).size},has(e){return mt(we(this)).has(e)},set(e,t){const n=we(this),r=mt(n);return(!r.has(e)||!cn(r.get(e),t))&&(rt(n),zt(n),n.assignedMap.set(e,!0),n.copy.set(e,t),kl(n,e,t,rs)),this},delete(e){if(!this.has(e))return!1;const t=we(this);return rt(t),zt(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=we(this);if(this.size){rt(e),zt(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const n=we(this);mt(n).forEach((r,o)=>{e.call(t,this.get(o),o,this)})},get(e){var t,n;const r=we(this),o=mt(r).get(e),s=((n=(t=r.options).mark)===null||n===void 0?void 0:n.call(t,o,bt))===bt.mutable;if(r.options.strict&&ui(o,r.options,s),s||r.finalized||!Pt(o,r.options)||o!==r.original.get(e))return o;const i=Rl.createDraft({original:o,parentDraft:r,key:e,finalities:r.finalities,options:r.options});return rt(r),r.copy.set(e,i),i},keys(){return mt(we(this)).keys()},values(){const e=this.keys();return{[Zs]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[Zs]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[Zs](){return this.entries()}},$1=Reflect.ownKeys(Sa),Gu=(e,t,{isValuesIterator:n})=>()=>{var r,o;const s=t.next();if(s.done)return s;const i=s.value;let c=e.setMap.get(i);const l=we(c),a=((o=(r=e.options).mark)===null||o===void 0?void 0:o.call(r,c,bt))===bt.mutable;if(e.options.strict&&ui(i,e.options,a),!a&&!l&&Pt(i,e.options)&&!e.finalized&&e.original.has(i)){const u=Rl.createDraft({original:i,parentDraft:e,key:i,finalities:e.finalities,options:e.options});e.setMap.set(i,u),c=u}else l&&(c=l.proxy);return{done:!1,value:n?c:[c,c]}},fi={get size(){return we(this).setMap.size},has(e){const t=we(this);if(t.setMap.has(e))return!0;rt(t);const n=we(e);return!!(n&&t.setMap.has(n.original))},add(e){const t=we(this);return this.has(e)||(rt(t),zt(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),kl(t,e,e,rs)),this},delete(e){if(!this.has(e))return!1;const t=we(this);rt(t),zt(t);const n=we(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=we(this);rt(e),zt(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=we(this);rt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:Gu(e,t,{isValuesIterator:!0})}},entries(){const e=we(this);rt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:Gu(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[Zs](){return this.values()},forEach(e,t){const n=this.values();let r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}};Set.prototype.difference&&Object.assign(fi,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});const j1=Reflect.ownKeys(fi),yh={get(e,t,n){var r,o;const s=(r=e.copy)===null||r===void 0?void 0:r[t];if(s&&e.finalities.draftsCache.has(s))return s;if(t===ph)return e;let i;if(e.options.mark){const a=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if(i=e.options.mark(a,bt),i===bt.mutable)return e.options.strict&&ui(a,e.options,!0),a}const c=mt(e);if(c instanceof Map&&$1.includes(t))return t==="size"?Object.getOwnPropertyDescriptor(Sa,"size").get.call(e.proxy):Sa[t].bind(e.proxy);if(c instanceof Set&&j1.includes(t))return t==="size"?Object.getOwnPropertyDescriptor(fi,"size").get.call(e.proxy):fi[t].bind(e.proxy);if(!zo(c,t)){const a=Hu(c,t);return a?"value"in a?a.value:(o=a.get)===null||o===void 0?void 0:o.call(e.proxy):void 0}const l=c[t];if(e.options.strict&&ui(l,e.options),e.finalized||!Pt(l,e.options))return l;if(l===Nc(e.original,t)){if(rt(e),e.copy[t]=Al({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof i=="function"){const a=we(e.copy[t]);return rt(a),zt(a),a.copy}return e.copy[t]}return Nn(l)&&e.finalities.draftsCache.add(l),l},set(e,t,n){var r;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let o;if(e.type===1&&t!=="length"&&!(Number.isInteger(o=Number(t))&&o>=0&&(t===0||o===0||String(o)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const s=Hu(mt(e),t);if(s?.set)return s.set.call(e.proxy,n),!0;const i=Nc(mt(e),t),c=we(i);return c&&cn(c.original,n)?(e.copy[t]=n,e.assignedMap=(r=e.assignedMap)!==null&&r!==void 0?r:new Map,e.assignedMap.set(t,!1),!0):(cn(n,i)&&(n!==void 0||zo(e.original,t))||(rt(e),zt(e),zo(e.original,t)&&cn(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,kl(e,t,n,rs)),!0)},has(e,t){return t in mt(e)},ownKeys(e){return Reflect.ownKeys(mt(e))},getOwnPropertyDescriptor(e,t){const n=mt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return e.type===1?yh.set.call(this,e,t,void 0,e.proxy):(Nc(e.original,t)!==void 0||t in e.original?(rt(e),zt(e),e.assignedMap.set(t,!1)):(e.assignedMap=(n=e.assignedMap)!==null&&n!==void 0?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function Al(e){const{original:t,parentDraft:n,key:r,finalities:o,options:s}=e,i=dr(t),c={type:i,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:o,options:s,setMap:i===3?new Map(t.entries()):void 0};(r||"key"in e)&&(c.key=r);const{proxy:l,revoke:a}=Proxy.revocable(i===1?Object.assign([],c):c,yh);if(o.revoke.push(a),c.proxy=l,n){const u=n;u.finalities.draft.push((f,p)=>{var d,m;const h=we(l);let b=u.type===3?u.setMap:u.copy;const g=un(b,r),y=we(g);if(y){let v=y.original;y.operated&&(v=Tl(g)),wa(y),xa(y,rs,f,p),u.options.enableAutoFreeze&&(u.options.updatedValues=(d=u.options.updatedValues)!==null&&d!==void 0?d:new WeakMap,u.options.updatedValues.set(v,y.original)),xs(b,r,v)}(m=h.callbacks)===null||m===void 0||m.forEach(v=>{v(f,p)})})}else{const u=we(l);u.finalities.draft.push((f,p)=>{wa(u),xa(u,rs,f,p)})}return l}Rl.createDraft=Al;function L1(e,t,n,r,o){var s;const i=we(e),c=(s=i?.original)!==null&&s!==void 0?s:e,l=!!t.length;if(i?.operated)for(;i.finalities.draft.length>0;)i.finalities.draft.pop()(n,r);const a=l?t[0]:i?i.operated?i.copy:i.original:e;return i&&va(i),o&&Rr(a,a,i?.options.updatedValues),[a,n&&l?[{op:Le.Replace,path:[],value:t[0]}]:n,r&&l?[{op:Le.Replace,path:[],value:c}]:r]}function D1(e,t){var n;const r={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let o,s;t.enablePatches&&(o=[],s=[]);const c=((n=t.mark)===null||n===void 0?void 0:n.call(t,e,bt))===bt.mutable||!Pt(e,t)?e:Al({original:e,parentDraft:null,finalities:r,options:t});return[c,(l=[])=>{const[a,u,f]=L1(c,l,o,s,t.enableAutoFreeze);return t.enablePatches?[a,u,f]:a}]}function _a(e){const{rootDraft:t,value:n,useRawReturn:r=!1,isRoot:o=!0}=e;Il(n,(s,i,c)=>{const l=we(i);if(l&&t&&l.finalities===t.finalities){e.isContainDraft=!0;const a=l.original;if(c instanceof Set){const u=Array.from(c);c.clear(),u.forEach(f=>c.add(s===f?a:f))}else xs(c,s,a)}else typeof i=="object"&&i!==null&&(e.value=i,e.isRoot=!1,_a(e))}),o&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),r&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function bh(e){var t;const n=we(e);if(!Pt(e,n?.options))return e;const r=dr(e);if(n&&!n.operated)return n.original;let o;function s(){o=r===2?Ol(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e):r===3?Array.from(n.setMap.values()):mh(e,n?.options)}if(n){n.finalized=!0;try{s()}finally{n.finalized=!1}}else o=e;if(Il(o,(i,c)=>{if(n&&cn(un(n.original,i),c))return;const l=bh(c);l!==c&&(o===e&&s(),xs(o,i,l))}),r===3){const i=(t=n?.original)!==null&&t!==void 0?t:o;return Cl(i)?new Set(o):new(Object.getPrototypeOf(i)).constructor(o)}return o}function Ku(e){if(!Nn(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return bh(e)}const F1=e=>function t(n,r,o){var s,i,c;if(typeof n=="function"&&typeof r!="function")return function(S,...O){return t(S,I=>n.call(this,I,...O),r)};const l=n,a=r;let u=o;if(typeof r!="function"&&(u=r),u!==void 0&&Object.prototype.toString.call(u)!=="[object Object]")throw new Error(`Invalid options: ${u}, 'options' should be an object.`);u=Object.assign(Object.assign({},e),u);const f=Nn(l)?Ku(l):l,p=Array.isArray(u.mark)?((S,O)=>{for(const I of u.mark){if(typeof I!="function")throw new Error(`Invalid mark: ${I}, 'mark' should be a function.`);const _=I(S,O);if(_)return _}}):u.mark,d=(s=u.enablePatches)!==null&&s!==void 0?s:!1,m=(i=u.strict)!==null&&i!==void 0?i:!1,b={enableAutoFreeze:(c=u.enableAutoFreeze)!==null&&c!==void 0?c:!1,mark:p,strict:m,enablePatches:d};if(!Pt(f,b)&&typeof f=="object"&&f!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[g,y]=D1(f,b);if(typeof r!="function"){if(!Pt(f,b))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[g,y]}let v;try{v=a(g)}catch(S){throw va(we(g)),S}const x=S=>{const O=we(g);if(!Nn(S)){if(S!==void 0&&!cn(S,g)&&O?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const _=S?.[O1];if(_){const R=_[0];return b.strict&&typeof S=="object"&&S!==null&&_a({rootDraft:O,value:S,useRawReturn:!0}),y([R])}if(S!==void 0)return typeof S=="object"&&S!==null&&_a({rootDraft:O,value:S}),y([S])}if(S===g||S===void 0)return y([]);const I=we(S);if(b===I.options){if(I.operated)throw new Error("Cannot return a modified child draft.");return y([Ku(S)])}return y([S])};return v instanceof Promise?v.then(x,S=>{throw va(we(g)),S}):x(v)},oo=F1();Object.prototype.constructor.toString();function z1(e,t){w.useRef({patches:[],inversePatches:[]});const n=w.useRef(0),r=w.useRef(0);let o=n.current;w.useEffect((()=>{n.current=o,r.current=o})),o+=1,r.current+=1;const[s,i]=w.useState((()=>typeof e=="function"?e():e)),c=w.useCallback((l=>{i((a=>oo(a,typeof l=="function"?l:()=>l,t)))}),[]);return w.useEffect((()=>{})),[s,c]}const V1=Dr("v3Overview"),U1=Dr(!1),B1=Dr(!1),W1=Dr("svg"),H1={};let q1=0;function G1(e,t){const n="atom"+ ++q1,r={toString(){return(H1?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=K1,r.write=Y1),t&&(r.write=t),r}function K1(e){return e(this)}function Y1(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const $c=new WeakMap;function J1(e,t){return n=()=>G1((o=>o(e)),((o,s,i)=>s(e,oo(o(e),typeof i=="function"?i:()=>i,t)))),r=e,($c.has(r)?$c:$c.set(r,n())).get(r);var n,r}w.createContext(void 0);const X1=e=>{e.status||(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})))};ky.use;const Ml={},Z1=Symbol((Ml?"production":void 0)!=="production"?"RESET":""),vh=e=>typeof e?.then=="function";function Q1(e=()=>{try{return window.localStorage}catch(n){(Ml?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,o;const s={getItem:(l,a)=>{var u,f;const p=m=>{if(m=m||"",r!==m){try{o=JSON.parse(m,t?.reviver)}catch{return a}r=m}return o},d=(f=(u=e())==null?void 0:u.getItem(l))!=null?f:null;return vh(d)?d.then(p):p(d)},setItem:(l,a)=>{var u;return(u=e())==null?void 0:u.setItem(l,JSON.stringify(a,void 0))},removeItem:l=>{var a;return(a=e())==null?void 0:a.removeItem(l)}},i=l=>(a,u,f)=>l(a,p=>{let d;try{d=JSON.parse(p||"")}catch{d=f}u(d)});let c;try{c=(n=e())==null?void 0:n.subscribe}catch{}return!c&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(c=(l,a)=>{if(!(e()instanceof window.Storage))return()=>{};const u=f=>{f.storageArea===e()&&f.key===l&&a(f.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),c&&(s.subscribe=i(c)),s}const ex=Q1();function tx(e,t,n=ex,r){const o=Dr(t);return(Ml?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.onMount=i=>{i(n.getItem(e,t));let c;return n.subscribe&&(c=n.subscribe(e,i,t)),c},Dr(i=>i(o),(i,c,l)=>{const a=typeof l=="function"?l(i(o)):l;return a===Z1?(c(o,t),n.removeItem(e)):vh(a)?a.then(u=>(c(o,u),n.setItem(e,u))):(c(o,a),n.setItem(e,a))})}const wh=J1(tx("react-reversi-history",{draw:0,lose:0,win:0})),nx={Root:w.lazy(()=>_r(()=>import("./Board-CWgFC3Hg.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.Board}))),Background:w.lazy(()=>_r(()=>import("./index-DQpxLe6e.js"),__vite__mapDeps([3,1,2])).then(e=>({default:e.Background}))),Chesses:w.lazy(()=>_r(()=>import("./Chesses-n8v5thjJ.js"),__vite__mapDeps([4,1,2])).then(e=>({default:e.Chesses}))),Overlay:w.lazy(()=>_r(()=>import("./Overlay-CqboaVuQ.js"),__vite__mapDeps([5,1,2])).then(e=>({default:e.Overlay}))),ChooseColor:w.lazy(()=>_r(()=>import("./index-TrBWybo1.js"),__vite__mapDeps([6,1,2])).then(e=>({default:e.ChooseColor})))};function rx(){const e=ye.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsx("rect",{fill:"green",width:"640",height:"640","data-testid":"background"}),e[0]=t):t=e[0],t}function ox(e){const t=ye.c(3),{col:n}=e,r=n*80,o=n*80;let s;return t[0]!==r||t[1]!==o?(s=E.jsx("line",{stroke:"black",strokeWidth:"1px",x1:r,x2:o,y1:"0",y2:"640","data-testid":"column"}),t[0]=r,t[1]=o,t[2]=s):s=t[2],s}function sx(e){const t=ye.c(3),{row:n}=e,r=n*80,o=n*80;let s;return t[0]!==r||t[1]!==o?(s=E.jsx("line",{stroke:"black",strokeWidth:"1px",y1:r,y2:o,x1:"0",x2:"640","data-testid":"row"}),t[0]=r,t[1]=o,t[2]=s):s=t[2],s}function ix(){const e=ye.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsxs(E.Fragment,{children:[Rn(9,ax),Rn(9,cx)]}),e[0]=t):t=e[0],t}function cx(e){return E.jsx(ox,{col:e},e)}function ax(e){return E.jsx(sx,{row:e},e)}function lx(){return E.jsxs(E.Fragment,{children:[E.jsx(rx,{}),E.jsx(ix,{})]})}const ux=w.memo(lx);function fx(e){const t=ye.c(2),{children:n}=e;let r;return t[0]!==n?(r=E.jsx("svg",{height:"640px",width:"640px",children:n}),t[0]=n,t[1]=r):r=t[1],r}const $n="W",jn="B",Pl="WC",Nl="BC",$l="@app/Chess",dx=ws([jn,$n,Nl,Pl]),xh=We(dx,ro($l)),px=no(xh),fn=Xi(px),Yu=fn(jn),Ea=fn($n),hx=fn(Nl),Sh=fn(Pl),mx=ws([jn,$n]),gx=We(mx,ro($l));no(gx);const yx=ws([Nl,Pl]),bx=We(yx,ro($l)),jl=no(bx),vx="@app/Board",wx=Bu(We(Bu(x1(xh)).check(Wu(8,8)))).check(Wu(8,8)),xx=We(wx,ro(vx)),Sx=no(xx),_x=Xi(Sx);function _h(e,{col:t,row:n},r){const o=e;o[n][t]=r}const jc=_x([Rn(8,vr),Rn(8,vr),Rn(8,vr),[null,null,null,Yu,Ea,null,null,null],[null,null,null,Ea,Yu,null,null,null],Rn(8,vr),Rn(8,vr),Rn(8,vr)]),Ex="@app/Player",Eh=ws([jn,$n]),Rh=We(Eh,ro(Ex)),Rx=no(Rh),Cx=y1(Rh),Ch=Xi(Rx),Oh=Dy,pr=Ch(jn),dn=Ch($n);var Vn=(e=>(e.Human="Human",e.AI="AI",e))(Vn||{});const Ox=b1(Vn),Tx="@app/Users",Th=We(w1(Eh,Ox),ro(Tx)),Ix=no(Th),kx=g1(Th);Xi(Ix);const di=We(Gb(),xu(pr,"Human"),xu(dn,"Human"),kx,qi),Ax=di;function Mx(e,t){return We(e,Yb(t),gp)}const Ih=pe(2,Mx);function kh(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=kh(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ll(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=kh(e))&&(r&&(r+=" "),r+=t);return r}function Ju(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Px(...e){return t=>{let n=!1;const r=e.map(o=>{const s=Ju(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():Ju(e[o],null)}}}}var Nx=Symbol.for("react.lazy"),pi=nl[" use ".trim().toString()];function $x(e){return typeof e=="object"&&e!==null&&"then"in e}function Ah(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Nx&&"_payload"in e&&$x(e._payload)}function jx(e){const t=Dx(e),n=w.forwardRef((r,o)=>{let{children:s,...i}=r;Ah(s)&&typeof pi=="function"&&(s=pi(s._payload));const c=w.Children.toArray(s),l=c.find(zx);if(l){const a=l.props.children,u=c.map(f=>f===l?w.Children.count(a)>1?w.Children.only(null):w.isValidElement(a)?a.props.children:null:f);return E.jsx(t,{...i,ref:o,children:w.isValidElement(a)?w.cloneElement(a,void 0,u):null})}return E.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var Lx=jx("Slot");function Dx(e){const t=w.forwardRef((n,r)=>{let{children:o,...s}=n;if(Ah(o)&&typeof pi=="function"&&(o=pi(o._payload)),w.isValidElement(o)){const i=Ux(o),c=Vx(s,o.props);return o.type!==w.Fragment&&(c.ref=r?Px(r,i):i),w.cloneElement(o,c)}return w.Children.count(o)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fx=Symbol("radix.slottable");function zx(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Fx}function Vx(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Ux(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Bx(e,t){const n={},r=Object.keys(e);for(let o=0;o<r.length;o++){const s=r[o];t(s)&&(n[s]=e[s])}return n}var Wx=(e={})=>{const t=e.compose||Ll,n=e.shouldForwardProp||(o=>o[0]!=="$"),r=o=>{const s=(i,c=n)=>{const l=(a,...u)=>{const f=typeof a=="function",p=!f&&String.raw({raw:a},...u);return w.forwardRef((d,m)=>{const{className:h,asChild:b,...g}=d,y=typeof i=="function"?i(d):i||{},v=Bx({...y,...g},c),x=e.forwardAsChild&&typeof o!="string",S=!x&&b?Lx:o,O=f?a(d):p;return E.jsx(S,{ref:m,className:typeof O=="function"?I=>t(O(I),typeof h=="function"?h(I):h):t(O,h),...x?{asChild:b}:{},...v})})};return l.transientProps=a=>s(i,typeof a=="function"?f=>!a(f):f=>!a.includes(f)),i===void 0&&(l.attrs=a=>s(a,c)),l};return s()};return new Proxy(o=>r(o),{get(o,s){return r(s)}})},Dl=Wx();const Hx=Dl.circle`pointer-events-none`;function qx(e){const t=ye.c(16),{color:n,row:r,col:o,isCandidate:s,showHint:i,onClick:c}=e;let l;t[0]!==o||t[1]!==c||t[2]!==r?(l=()=>{c({row:r,col:o})},t[0]=o,t[1]=c,t[2]=r,t[3]=l):l=t[3];const a=l,u=o*80,f=r*80;let p;t[4]!==a||t[5]!==u||t[6]!==f?(p=E.jsx("rect",{onClick:a,width:"80",height:"80",fillOpacity:"0",x:u,y:f}),t[4]=a,t[5]=u,t[6]=f,t[7]=p):p=t[7];const d=s?i?"0.3":"0":"1",m=o*80+40,h=r*80+40;let b;t[8]!==n||t[9]!==d||t[10]!==m||t[11]!==h?(b=E.jsx(Hx,{fill:n,fillOpacity:d,cx:m,cy:h,r:30}),t[8]=n,t[9]=d,t[10]=m,t[11]=h,t[12]=b):b=t[12];let g;return t[13]!==p||t[14]!==b?(g=E.jsxs(E.Fragment,{children:[p,b]}),t[13]=p,t[14]=b,t[15]=g):g=t[15],g}function Gx(e){const t=ye.c(9),{board:n,hint:r,onPlaceChess:o}=e;let s;if(t[0]!==n||t[1]!==r||t[2]!==o){let c;t[4]!==r||t[5]!==o?(c=(l,a)=>l.map((u,f)=>u?E.jsx(qx,{row:a,col:f,showHint:r,color:u===Ea||u===Sh?"white":"black",isCandidate:jl(u),onClick:o},a*8+f):null),t[4]=r,t[5]=o,t[6]=c):c=t[6],s=n.flatMap(c),t[0]=n,t[1]=r,t[2]=o,t[3]=s}else s=t[3];let i;return t[7]!==s?(i=E.jsx(E.Fragment,{children:s}),t[7]=s,t[8]=i):i=t[8],i}const Kx={},Yx="en",hi=["en","zh-TW"],Mh="PARAGLIDE_LOCALE",Fl=["localStorage","preferredLanguage","baseLocale"],Xu=[];let Zu,Qu;function Jx(e){if(Xu.length===0)return;const t=typeof e=="string"?e:e.href;if(Zu===t)return Qu;const n=new URL(t,"http://dummy.com");let r;for(const o of Xu)if(new Kx(o.match,n.href).exec(n.href)){r=o;break}return Zu=t,Qu=r,r}function Ph(e){const t=Jx(e);return t&&t.exclude!==!0&&Array.isArray(t.strategy)?t.strategy:Fl}globalThis.__paraglide={};let ef=!1,Ye=()=>{let e=Fl;typeof window<"u"&&window.location?.href&&(e=Ph(window.location.href));const t=Xx(e);if(t)return ef||(ef=!0,Nh(t,{reload:!1})),t;throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};function Xx(e,t){let n;for(const r of e){if(r==="baseLocale")n=Yx;else if(r==="preferredLanguage")n=eS();else if(r==="localStorage")n=localStorage.getItem(Mh)??void 0;else if($h(r)&&mi.has(r)){const o=mi.get(r);if(o){const s=o.getLocale();if(s instanceof Promise)continue;n=s}}if(n!==void 0)return Qx(n)}}const Zx=e=>{window.location.reload()};let Nh=(e,t)=>{const n={reload:!0,...t};let r;try{r=Ye()}catch{}const o=[];let s=Fl;typeof window<"u"&&window.location?.href&&(s=Ph(window.location.href));for(const c of s)if(c!=="baseLocale"){if(c==="localStorage"&&typeof window<"u")localStorage.setItem(Mh,e);else if($h(c)&&mi.has(c)){const l=mi.get(c);if(l){let a=l.setLocale(e);a instanceof Promise&&(a=a.catch(u=>{throw new Error(`Custom strategy "${c}" setLocale failed.`,{cause:u})}),o.push(a))}}}const i=()=>{n.reload&&window.location&&e!==r&&Zx()};if(o.length)return Promise.all(o).then(()=>{i()});i()};function tf(e){return typeof e!="string"?!1:e?hi.some(t=>t.toLowerCase()===e.toLowerCase()):!1}function Qx(e){if(typeof e!="string")throw new Error(`Invalid locale: ${e}. Expected a string.`);const t=e.toLowerCase(),n=hi.find(r=>r.toLowerCase()===t);if(!n)throw new Error(`Invalid locale: ${e}. Expected one of: ${hi.join(", ")}`);return n}function eS(){if(!navigator?.languages?.length)return;const e=navigator.languages.map(t=>({fullTag:t.toLowerCase(),baseTag:t.split("-")[0]?.toLowerCase()}));for(const t of e){if(tf(t.fullTag))return t.fullTag;if(tf(t.baseTag))return t.baseTag}}const mi=new Map;function $h(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}const tS=()=>"Reversi",nS=()=>"",rS=(e={},t={})=>(t.locale??Ye())==="en"?tS():nS(),oS=()=>"Play with friend",sS=()=>"",iS=(e={},t={})=>(t.locale??Ye())==="en"?oS():sS(),cS=()=>"Restart",aS=()=>"",lS=(e={},t={})=>(t.locale??Ye())==="en"?cS():aS(),uS=()=>"Play Again?",fS=()=>"",dS=(e={},t={})=>(t.locale??Ye())==="en"?uS():fS(),pS=()=>"Score",hS=()=>"",mS=(e={},t={})=>(t.locale??Ye())==="en"?pS():hS(),gS=()=>"You win!",yS=()=>"",bS=(e={},t={})=>(t.locale??Ye())==="en"?gS():yS(),vS=()=>"You lose!",wS=()=>"",xS=(e={},t={})=>(t.locale??Ye())==="en"?vS():wS(),SS=()=>"Draw!",_S=()=>"!",ES=(e={},t={})=>(t.locale??Ye())==="en"?SS():_S(),RS=()=>"Black wins!",CS=()=>"",OS=(e={},t={})=>(t.locale??Ye())==="en"?RS():CS(),TS=()=>"White wins!",IS=()=>"",kS=(e={},t={})=>(t.locale??Ye())==="en"?TS():IS(),AS=e=>`No valid move for ${e?.player}!`,MS=e=>`${e?.player}`,PS=(e,t={})=>(t.locale??Ye())==="en"?AS(e):MS(e),NS=()=>"Black",$S=()=>"",jh=(e={},t={})=>(t.locale??Ye())==="en"?NS():$S(),jS=()=>"White",LS=()=>"",Lh=(e={},t={})=>(t.locale??Ye())==="en"?jS():LS(),DS=e=>`Version: ${e?.version}`,FS=e=>`: ${e?.version}`,zS=(e,t={})=>(t.locale??Ye())==="en"?DS(e):FS(e);function Dh(e,t,n){return new Intl.DateTimeFormat(e,n).format(new Date(t))}const VS=e=>`Updated at: ${Dh("en",e?.updatedAt,{})}`,US=e=>`: ${Dh("zh-TW",e?.updatedAt,{})}`,BS=(e,t={})=>(t.locale??Ye())==="en"?VS(e):US(e),WS=e=>`Start a new game as ${e?.player} vs AI`,HS=e=>`${e?.player} vs AI`,qS=(e,t={})=>(t.locale??Ye())==="en"?WS(e):HS(e),GS=Dl.text`pointer-events-none text-4xl`;function nf(e){const t=ye.c(19),{x:n,y:r,color:o,children:s,background:i,onClick:c,value:l}=e;let a;t[0]!==l?(a=qS({player:l===pr?jh():Lh()}),t[0]=l,t[1]=a):a=t[1];let u;t[2]!==c||t[3]!==l?(u=()=>c(l),t[2]=c,t[3]=l,t[4]=u):u=t[4];let f;t[5]!==i||t[6]!==n||t[7]!==r?(f=E.jsx("circle",{fill:i,cx:n,cy:r,r:80}),t[5]=i,t[6]=n,t[7]=r,t[8]=f):f=t[8];const p=r+10;let d;t[9]!==s||t[10]!==o||t[11]!==p||t[12]!==n?(d=E.jsx(GS,{fill:o,textAnchor:"middle",x:n,y:p,children:s}),t[9]=s,t[10]=o,t[11]=p,t[12]=n,t[13]=d):d=t[13];let m;return t[14]!==a||t[15]!==u||t[16]!==f||t[17]!==d?(m=E.jsxs("g",{role:"button",className:"cursor-pointer","aria-description":a,onClick:u,children:[f,d]}),t[14]=a,t[15]=u,t[16]=f,t[17]=d,t[18]=m):m=t[18],m}function KS(e){const t=ye.c(2),{onStart:n}=e;let r;return t[0]!==n?(r=E.jsxs(E.Fragment,{children:[E.jsx(nf,{color:"white",background:"black",x:160,y:300,value:dn,onClick:n,children:"Black"}),E.jsx(nf,{color:"black",background:"white",x:480,y:300,value:pr,onClick:n,children:"White"})]}),t[0]=n,t[1]=r):r=t[1],r}const YS=Dl.text.attrs({style:{textAnchor:"middle"},x:"50%",y:"50%"})`text-9xl pointer-events-none fill-red-600`,Lc={Root:fx,Background:ux,Chesses:Gx,Overlay:YS,ChooseColor:KS};var Is={},ks={},rf;function JS(){return rf||(rf=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.default=function(){return`
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
  0%, 100% {
    transform: rotate(0deg);
  }

  20%, 60% {
    transform: rotate(-25deg);
  }

  40%, 80% {
    transform: rotate(10deg);
  }
}

@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none;
    }

    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out;
    }
}
`}),ks}var of;function XS(){if(of)return Is;of=1,Object.defineProperty(Is,"__esModule",{value:!0});var e=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var b=arguments[h];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(m[g]=b[g])}return m},t=(function(){function m(h,b){for(var g=0;g<b.length;g++){var y=b[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,b,g){return b&&m(h.prototype,b),g&&m(h,g),h}})(),n=Ay(),r=i(n),o=JS(),s=i(o);function i(m){return m&&m.__esModule?m:{default:m}}function c(m,h){var b={};for(var g in m)h.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(m,g)&&(b[g]=m[g]);return b}function l(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function a(m,h){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:m}function u(m,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(m,h):m.__proto__=h)}var f="____GITHUB_CORNER_SUPER_SECRET___",p=(0,s.default)(),d=(function(m){u(h,m);function h(){return l(this,h),a(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return t(h,[{key:"componentDidMount",value:function(){if(!document.getElementById(f)){var g=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",y.id=f,y.styleSheet?y.styleSheet.cssText=p:y.appendChild(document.createTextNode(p)),g.appendChild(y)}}},{key:"render",value:function(){var g=this.props,y=g.href,v=g.size,x=g.direction,S=g.octoColor,O=g.bannerColor,I=g.ariaLabel,_=g.className,R=g.svgStyle,j=c(g,["href","size","direction","octoColor","bannerColor","ariaLabel","className","svgStyle"]),D={position:"absolute",top:0,fill:S},L={},G="",B="",H="";x==="left"?(G="M250 0L135 115h-15l-12 27L0 250V0z",B="M122 109c15-9 9-19 9-19-3-7-2-11-2-11 1-7-3-2-3-2-4 5-2 11-2 11 3 10-5 15-9 16",H="M135 115s-4 2-5 0l-14-14c-3-2-6-3-8-3 8-11 15-24-2-41-5-5-10-7-16-7-1-2-3-7-12-11 0 0-5 3-7 16-4 2-8 5-12 9s-7 8-9 12c-14 4-17 9-17 9 4 8 9 11 11 11 0 6 2 11 7 16 16 16 30 10 41 2 0 3 1 7 5 11l12 11c1 2-1 6-1 6z",D.left=0,L.WebkitTransformOrigin="120px 144px",L.transformOrigin="120px 144px"):(G="M0 0l115 115h15l12 27 108 108V0z",B="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16",H="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z",D.right=0,L.WebkitTransformOrigin="130px 106px",L.transformOrigin="130px 106px");var C=typeof _=="string"?" "+_:"";return r.default.createElement("a",e({},j,{href:y,className:"github-corner"+C,"aria-label":I}),r.default.createElement("svg",{width:v,height:v,viewBox:"0 0 250 250",style:e({},D,R)},r.default.createElement("path",{className:"octo-banner",d:G,fill:O}),r.default.createElement("path",{className:"octo-arm",d:B,style:L}),r.default.createElement("path",{className:"octo-body",d:H})))}}]),h})(n.Component);return d.defaultProps={href:"/",size:80,direction:"right",octoColor:"#fff",bannerColor:"#151513",ariaLabel:"Open GitHub project"},Is.default=d,Is}var ZS=XS();const QS=My(ZS);function e_(){const e=ye.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=E.jsxs("div",{className:"text-muted-foreground p-4 text-sm",children:[E.jsx("p",{children:zS({version:"2.7.0"})}),E.jsx("p",{children:BS({updatedAt:"2026-02-22T06:29:23.647Z"})})]}),e[0]=t):t=e[0],t}const sf={};function wt(e,t){const n=w.useRef(sf);return n.current===sf&&(n.current=e(t)),n}const Dc=nl[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],t_=Dc&&Dc!==w.useLayoutEffect?Dc:e=>e();function de(e){const t=wt(n_).current;return t.next=e,t_(t.effect),t.trampoline}function n_(){const e={next:void 0,callback:r_,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function r_(){}function Zi(){return typeof window<"u"}function Un(e){return zl(e)?(e.nodeName||"").toLowerCase():"#document"}function He(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Kt(e){var t;return(t=(zl(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zl(e){return Zi()?e instanceof Node||e instanceof He(e).Node:!1}function Ie(e){return Zi()?e instanceof Element||e instanceof He(e).Element:!1}function De(e){return Zi()?e instanceof HTMLElement||e instanceof He(e).HTMLElement:!1}function Ra(e){return!Zi()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof He(e).ShadowRoot}const o_=new Set(["inline","contents"]);function Bn(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=xt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!o_.has(o)}const s_=new Set(["table","td","th"]);function i_(e){return s_.has(Un(e))}const c_=[":popover-open",":modal"];function Qi(e){return c_.some(t=>{try{return e.matches(t)}catch{return!1}})}const a_=["transform","translate","scale","rotate","perspective"],l_=["transform","translate","scale","rotate","perspective","filter"],u_=["paint","layout","strict","content"];function Vl(e){const t=ec(),n=Ie(e)?xt(e):e;return a_.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||l_.some(r=>(n.willChange||"").includes(r))||u_.some(r=>(n.contain||"").includes(r))}function f_(e){let t=pn(e);for(;De(t)&&!an(t);){if(Vl(t))return t;if(Qi(t))return null;t=pn(t)}return null}function ec(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const d_=new Set(["html","body","#document"]);function an(e){return d_.has(Un(e))}function xt(e){return He(e).getComputedStyle(e)}function tc(e){return Ie(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pn(e){if(Un(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ra(e)&&e.host||Kt(e);return Ra(t)?t.host:t}function Fh(e){const t=pn(e);return an(t)?e.ownerDocument?e.ownerDocument.body:e.body:De(t)&&Bn(t)?t:Fh(t)}function kn(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Fh(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=He(o);if(s){const c=Ca(i);return t.concat(i,i.visualViewport||[],Bn(o)?o:[],c&&n?kn(c):[])}return t.concat(o,kn(o,[],n))}function Ca(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const so=typeof navigator<"u",Fc=m_(),zh=y_(),Vh=g_(),Ul=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),Uh=Fc.platform==="MacIntel"&&Fc.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(Fc.platform),p_=so&&/apple/i.test(navigator.vendor),Oa=so&&/android/i.test(zh)||/android/i.test(Vh);so&&zh.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;const h_=Vh.includes("jsdom/");function m_(){if(!so)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function g_(){if(!so)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function y_(){if(!so)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}function Ne(e){return e?.ownerDocument||document}const b_=()=>{},fe=typeof document<"u"?w.useLayoutEffect:b_,v_=[];function Bh(e){w.useEffect(e,v_)}const yo=0;class Wr{static create(){return new Wr}currentId=yo;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=yo,n()},t)}isStarted(){return this.currentId!==yo}clear=()=>{this.currentId!==yo&&(clearTimeout(this.currentId),this.currentId=yo)};disposeEffect=()=>this.clear}function yt(){const e=wt(Wr.create).current;return Bh(e.disposeEffect),e}const As=null;class w_{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let o=0;o<n.length;o+=1)n[o]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const Ms=new w_;class Dt{static create(){return new Dt}static request(t){return Ms.request(t)}static cancel(t){return Ms.cancel(t)}currentId=As;request(t){this.cancel(),this.currentId=Ms.request(()=>{this.currentId=As,t()})}cancel=()=>{this.currentId!==As&&(Ms.cancel(this.currentId),this.currentId=As)};disposeEffect=()=>this.cancel}function nc(){const e=wt(Dt.create).current;return Bh(e.disposeEffect),e}function at(){}const cf=Object.freeze([]),Je=Object.freeze({});let af={},lf={},uf="";function x_(e){if(typeof document>"u")return!1;const t=Ne(e);return He(t).innerWidth-t.documentElement.clientWidth>0}function S_(e){if(!(typeof CSS<"u"&&CSS.supports&&CSS.supports("scrollbar-gutter","stable"))||typeof document>"u")return!1;const n=Ne(e),r=n.documentElement,o=n.body,s=Bn(r)?r:o,i=s.style.overflowY,c=r.style.scrollbarGutter;r.style.scrollbarGutter="stable",s.style.overflowY="scroll";const l=s.offsetWidth;s.style.overflowY="hidden";const a=s.offsetWidth;return s.style.overflowY=i,r.style.scrollbarGutter=c,l===a}function __(e){const t=Ne(e),n=t.documentElement,r=t.body,o=Bn(n)?n:r,s={overflowY:o.style.overflowY,overflowX:o.style.overflowX};return Object.assign(o.style,{overflowY:"hidden",overflowX:"hidden"}),()=>{Object.assign(o.style,s)}}function E_(e){const t=Ne(e),n=t.documentElement,r=t.body,o=He(n);let s=0,i=0,c=!1;const l=Dt.create();if(Ul&&(o.visualViewport?.scale??1)!==1)return()=>{};function a(){const p=o.getComputedStyle(n),d=o.getComputedStyle(r),b=(p.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";s=n.scrollTop,i=n.scrollLeft,af={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},uf=n.style.scrollBehavior,lf={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const g=n.scrollHeight>n.clientHeight,y=n.scrollWidth>n.clientWidth,v=p.overflowY==="scroll"||d.overflowY==="scroll",x=p.overflowX==="scroll"||d.overflowX==="scroll",S=Math.max(0,o.innerWidth-r.clientWidth),O=Math.max(0,o.innerHeight-r.clientHeight),I=parseFloat(d.marginTop)+parseFloat(d.marginBottom),_=parseFloat(d.marginLeft)+parseFloat(d.marginRight),R=Bn(n)?n:r;if(c=S_(e),c){n.style.scrollbarGutter=b,R.style.overflowY="hidden",R.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:b,overflowY:"hidden",overflowX:"hidden"}),(g||v)&&(n.style.overflowY="scroll"),(y||x)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:I||O?`calc(100dvh - ${I+O}px)`:"100dvh",width:_||S?`calc(100vw - ${_+S}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=s,r.scrollLeft=i,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function u(){Object.assign(n.style,af),Object.assign(r.style,lf),c||(n.scrollTop=s,n.scrollLeft=i,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=uf)}function f(){u(),l.request(a)}return a(),o.addEventListener("resize",f),()=>{l.cancel(),u(),typeof o.removeEventListener=="function"&&o.removeEventListener("resize",f)}}class R_{lockCount=0;restore=null;timeoutLock=Wr.create();timeoutUnlock=Wr.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const r=Ne(t).documentElement,o=He(r).getComputedStyle(r).overflowY;if(o==="hidden"||o==="clip"){this.restore=at;return}const s=Uh||!x_(t);this.restore=s?__(t):E_(t)}}const C_=new R_;function Wh(e=!0,t=null){fe(()=>{if(e)return C_.acquire(t)},[e,t])}function lt(e){const t=wt(O_,e).current;return t.next=e,fe(t.effect),t}function O_(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const Ta="data-base-ui-focusable",Hh="active",qh="selected",T_="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",An="ArrowLeft",Mn="ArrowRight",Bl="ArrowUp",Ss="ArrowDown";function tn(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Re(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&Ra(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function kt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function It(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function I_(e){return e.matches("html,body")}function Wl(e){return De(e)&&e.matches(T_)}function Ia(e){return e?e.getAttribute("role")==="combobox"&&Wl(e):!1}function os(e){return e?e.hasAttribute(Ta)?e:e.querySelector(`[${Ta}]`)||e:null}function $r(e,t,n=!0){return e.filter(o=>o.parentId===t&&(!n||o.context?.open)).flatMap(o=>[o,...$r(e,o.id,n)])}function ff(e,t){let n=[],r=e.find(o=>o.id===t)?.parentId;for(;r;){const o=e.find(s=>s.id===r);r=o?.parentId,o&&(n=n.concat(o))}return n}function et(e){e.preventDefault(),e.stopPropagation()}function k_(e){return"nativeEvent"in e}function Gh(e){return e.pointerType===""&&e.isTrusted?!0:Oa&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Kh(e){return h_?!1:!Oa&&e.width===0&&e.height===0||Oa&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function df(e,t){return["mouse","pen"].includes(e)}function Yh(e){const t=e.type;return t==="click"||t==="mousedown"||t==="keydown"||t==="keyup"}const A_=["top","right","bottom","left"],Hr=Math.min,gt=Math.max,gi=Math.round,kr=Math.floor,Vt=e=>({x:e,y:e}),M_={left:"right",right:"left",bottom:"top",top:"bottom"},P_={start:"end",end:"start"};function ka(e,t,n){return gt(e,Hr(t,n))}function hn(e,t){return typeof e=="function"?e(t):e}function vt(e){return e.split("-")[0]}function Wn(e){return e.split("-")[1]}function Hl(e){return e==="x"?"y":"x"}function ql(e){return e==="y"?"height":"width"}const N_=new Set(["top","bottom"]);function Et(e){return N_.has(vt(e))?"y":"x"}function Gl(e){return Hl(Et(e))}function $_(e,t,n){n===void 0&&(n=!1);const r=Wn(e),o=Gl(e),s=ql(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=yi(i)),[i,yi(i)]}function j_(e){const t=yi(e);return[Aa(e),t,Aa(t)]}function Aa(e){return e.replace(/start|end/g,t=>P_[t])}const pf=["left","right"],hf=["right","left"],L_=["top","bottom"],D_=["bottom","top"];function F_(e,t,n){switch(e){case"top":case"bottom":return n?t?hf:pf:t?pf:hf;case"left":case"right":return t?L_:D_;default:return[]}}function z_(e,t,n,r){const o=Wn(e);let s=F_(vt(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(Aa)))),s}function yi(e){return e.replace(/left|right|bottom|top/g,t=>M_[t])}function V_(e){return{top:0,right:0,bottom:0,left:0,...e}}function Jh(e){return typeof e!="number"?V_(e):{top:e,right:e,bottom:e,left:e}}function bi(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Ps(e,t,n){return Math.floor(e/t)!==n}function Vo(e,t){return t<0||t>=e.current.length}function zc(e,t){return Qe(e,{disabledIndices:t})}function mf(e,t){return Qe(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Qe(e,{startingIndex:t=-1,decrement:n=!1,disabledIndices:r,amount:o=1}={}){let s=t;do s+=n?-o:o;while(s>=0&&s<=e.current.length-1&&Uo(e,s,r));return s}function U_(e,{event:t,orientation:n,loopFocus:r,rtl:o,cols:s,disabledIndices:i,minIndex:c,maxIndex:l,prevIndex:a,stopEvent:u=!1}){let f=a;const p=[],d={};let m=!1;{let g=null,y=-1;e.current.forEach((v,x)=>{if(v==null)return;const S=v.closest('[role="row"]');S&&(m=!0),(S!==g||y===-1)&&(g=S,y+=1,p[y]=[]),p[y].push(x),d[x]=y})}const h=m&&p.length>0&&p.some(g=>g.length!==s);function b(g){if(!h||a===-1)return;const y=d[a];if(y==null)return;const v=p[y].indexOf(a);let x=g==="up"?y-1:y+1;r&&(x<0?x=p.length-1:x>=p.length&&(x=0));const S=new Set;for(;x>=0&&x<p.length&&!S.has(x);){S.add(x);const O=p[x];if(O.length===0){x=g==="up"?x-1:x+1;continue}const I=Math.min(v,O.length-1);for(let _=I;_>=0;_-=1){const R=O[_];if(!Uo(e,R,i))return R}x=g==="up"?x-1:x+1,r&&(x<0?x=p.length-1:x>=p.length&&(x=0))}}if(t.key===Bl){const g=b("up");if(g!==void 0)u&&et(t),f=g;else{if(u&&et(t),a===-1)f=l;else if(f=Qe(e,{startingIndex:f,amount:s,decrement:!0,disabledIndices:i}),r&&(a-s<c||f<0)){const y=a%s,v=l%s,x=l-(v-y);v===y?f=l:f=v>y?x:x-s}Vo(e,f)&&(f=a)}}if(t.key===Ss){const g=b("down");g!==void 0?(u&&et(t),f=g):(u&&et(t),a===-1?f=c:(f=Qe(e,{startingIndex:a,amount:s,disabledIndices:i}),r&&a+s>l&&(f=Qe(e,{startingIndex:a%s-s,amount:s,disabledIndices:i}))),Vo(e,f)&&(f=a))}if(n==="both"){const g=kr(a/s);t.key===(o?An:Mn)&&(u&&et(t),a%s!==s-1?(f=Qe(e,{startingIndex:a,disabledIndices:i}),r&&Ps(f,s,g)&&(f=Qe(e,{startingIndex:a-a%s-1,disabledIndices:i}))):r&&(f=Qe(e,{startingIndex:a-a%s-1,disabledIndices:i})),Ps(f,s,g)&&(f=a)),t.key===(o?Mn:An)&&(u&&et(t),a%s!==0?(f=Qe(e,{startingIndex:a,decrement:!0,disabledIndices:i}),r&&Ps(f,s,g)&&(f=Qe(e,{startingIndex:a+(s-a%s),decrement:!0,disabledIndices:i}))):r&&(f=Qe(e,{startingIndex:a+(s-a%s),decrement:!0,disabledIndices:i})),Ps(f,s,g)&&(f=a));const y=kr(l/s)===g;Vo(e,f)&&(r&&y?f=t.key===(o?Mn:An)?l:Qe(e,{startingIndex:a-a%s-1,disabledIndices:i}):f=a)}return f}function B_(e,t,n){const r=[];let o=0;return e.forEach(({width:s,height:i},c)=>{let l=!1;for(;!l;){const a=[];for(let u=0;u<s;u+=1)for(let f=0;f<i;f+=1)a.push(o+u+f*t);o%t+s<=t&&a.every(u=>r[u]==null)?(a.forEach(u=>{r[u]=c}),l=!0):o+=1}}),[...r]}function W_(e,t,n,r,o){if(e===-1)return-1;const s=n.indexOf(e),i=t[e];switch(o){case"tl":return s;case"tr":return i?s+i.width-1:s;case"bl":return i?s+(i.height-1)*r:s;case"br":return n.lastIndexOf(e);default:return-1}}function H_(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Uo(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}var q_=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],vi=q_.join(","),Xh=typeof Element>"u",qr=Xh?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,wi=!Xh&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},xi=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=o===""||o==="true",i=s||n&&t&&(typeof t.closest=="function"?t.closest("[inert]"):xi(t.parentNode));return i},G_=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Zh=function(t,n,r){if(xi(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(vi));return n&&qr.call(t,vi)&&o.unshift(t),o=o.filter(r),o},Si=function(t,n,r){for(var o=[],s=Array.from(t);s.length;){var i=s.shift();if(!xi(i,!1))if(i.tagName==="SLOT"){var c=i.assignedElements(),l=c.length?c:i.children,a=Si(l,!0,r);r.flatten?o.push.apply(o,a):o.push({scopeParent:i,candidates:a})}else{var u=qr.call(i,vi);u&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var f=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),p=!xi(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(f&&p){var d=Si(f===!0?i.children:f.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else s.unshift.apply(s,i.children)}}return o},Qh=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},em=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||G_(t))&&!Qh(t)?0:t.tabIndex},K_=function(t,n){var r=em(t);return r<0&&n&&!Qh(t)?0:r},Y_=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},tm=function(t){return t.tagName==="INPUT"},J_=function(t){return tm(t)&&t.type==="hidden"},X_=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Z_=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Q_=function(t){if(!t.name)return!0;var n=t.form||wi(t),r=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=Z_(o,t.form);return!s||s===t},eE=function(t){return tm(t)&&t.type==="radio"},tE=function(t){return eE(t)&&!Q_(t)},nE=function(t){var n,r=t&&wi(t),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var i,c,l;for(s=!!((i=o)!==null&&i!==void 0&&(c=i.ownerDocument)!==null&&c!==void 0&&c.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&o;){var a,u,f;r=wi(o),o=(a=r)===null||a===void 0?void 0:a.host,s=!!((u=o)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return s},gf=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},rE=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var s=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(t).visibility==="hidden")return!0;var i=qr.call(t,"details>summary:first-of-type"),c=i?t.parentElement:t;if(qr.call(c,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var a=t.parentElement,u=wi(t);if(a&&!a.shadowRoot&&o(a)===!0)return gf(t);t.assignedSlot?t=t.assignedSlot:!a&&u!==t.ownerDocument?t=u.host:t=a}t=l}if(nE(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return gf(t);return!1},oE=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return qr.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},Ma=function(t,n){return!(n.disabled||J_(n)||rE(n,t)||X_(n)||oE(n))},Pa=function(t,n){return!(tE(n)||em(n)<0||!Ma(t,n))},sE=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},nm=function(t){var n=[],r=[];return t.forEach(function(o,s){var i=!!o.scopeParent,c=i?o.scopeParent:o,l=K_(c,i),a=i?nm(o.candidates):c;l===0?i?n.push.apply(n,a):n.push(c):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:a})}),r.sort(Y_).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},rc=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Si([t],n.includeContainer,{filter:Pa.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:sE}):r=Zh(t,n.includeContainer,Pa.bind(null,n)),nm(r)},iE=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Si([t],n.includeContainer,{filter:Ma.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Zh(t,n.includeContainer,Ma.bind(null,n)),r},rm=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return qr.call(t,vi)===!1?!1:Pa(n,t)};const _s=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function om(e,t){const n=rc(e,_s()),r=n.length;if(r===0)return;const o=tn(Ne(e)),s=n.indexOf(o),i=s===-1?t===1?0:r-1:s+t;return n[i]}function sm(e){return om(Ne(e).body,1)||e}function im(e){return om(Ne(e).body,-1)||e}function Bo(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Re(n,r)}function cE(e){rc(e,_s()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function yf(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const aE={...nl};let bf=0;function lE(e,t="mui"){const[n,r]=w.useState(e),o=e||n;return w.useEffect(()=>{n==null&&(bf+=1,r(`${t}-${bf}`))},[n,t]),o}const vf=aE.useId;function Es(e,t){if(vf!==void 0){const n=vf();return e??(t?`${t}-${n}`:n)}return lE(e,t)}function uE(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(r=>r(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}const fE=w.createContext(null),dE=w.createContext(null),oc=()=>w.useContext(fE)?.id||null,sc=e=>{const t=w.useContext(dE);return e??t},pE={style:{transition:"none"}},hE="data-base-ui-click-trigger",mE={fallbackAxisSide:"none"},gE={clipPath:"inset(50%)",position:"fixed",top:0,left:0},ic="none",Na="trigger-press",yE="trigger-hover",Kl="outside-press",Vc="item-press",bE="close-press",cc="focus-out",vE="escape-key",Uc="list-navigation",wE="cancel-open",xE="imperative-action",SE="window-resize";function ke(e,t,n,r){let o=!1,s=!1;const i=Je;return{reason:e,event:t??new Event("base-ui"),cancel(){o=!0},allowPropagation(){s=!0},get isCanceled(){return o},get isPropagationAllowed(){return s},trigger:n,...i}}function _i(e){return`data-base-ui-${e}`}function Gr(e,t,n,r){const o=wt(cm).current;return EE(o,e,t,n,r)&&am(o,[e,t,n,r]),o.callback}function _E(e){const t=wt(cm).current;return RE(t,e)&&am(t,e),t.callback}function cm(){return{callback:null,cleanup:null,refs:[]}}function EE(e,t,n,r,o){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==o}function RE(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function am(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let o=0;o<t.length;o+=1){const s=t[o];if(s!=null)switch(typeof s){case"function":{const i=s(n);typeof i=="function"&&(r[o]=i);break}case"object":{s.current=n;break}}}e.cleanup=()=>{for(let o=0;o<t.length;o+=1){const s=t[o];if(s!=null)switch(typeof s){case"function":{const i=r[o];typeof i=="function"?i():s(null);break}case"object":{s.current=null;break}}}}}}}const lm={clipPath:"inset(50%)",overflow:"hidden",whiteSpace:"nowrap",border:0,padding:0,width:1,height:1,margin:-1},Yl={...lm,position:"fixed",top:0,left:0},CE={...lm,position:"absolute"},Ei=w.forwardRef(function(t,n){const[r,o]=w.useState();fe(()=>{p_&&o("button")},[]);const s={tabIndex:0,role:r};return E.jsx("span",{...t,ref:n,style:Yl,"aria-hidden":r?void 0:!0,...s,"data-base-ui-focus-guard":""})});let wf=0;function Wo(e,t={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(wf);const s=()=>e?.focus({preventScroll:n});o?s():wf=requestAnimationFrame(s)}const jr={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function xf(e){return e==="inert"?jr.inert:e==="aria-hidden"?jr["aria-hidden"]:jr.none}let Ns=new WeakSet,$s={},Bc=0;const um=e=>e&&(e.host||um(e.parentNode)),OE=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=um(n);return e.contains(r)?r:null}).filter(n=>n!=null);function TE(e,t,n,r){const o="data-base-ui-inert",s=r?"inert":n?"aria-hidden":null,i=OE(t,e),c=new Set,l=new Set(i),a=[];$s[o]||($s[o]=new WeakMap);const u=$s[o];i.forEach(f),p(t),c.clear();function f(d){!d||c.has(d)||(c.add(d),d.parentNode&&f(d.parentNode))}function p(d){!d||l.has(d)||[].forEach.call(d.children,m=>{if(Un(m)!=="script")if(c.has(m))p(m);else{const h=s?m.getAttribute(s):null,b=h!==null&&h!=="false",g=xf(s),y=(g.get(m)||0)+1,v=(u.get(m)||0)+1;g.set(m,y),u.set(m,v),a.push(m),y===1&&b&&Ns.add(m),v===1&&m.setAttribute(o,""),!b&&s&&m.setAttribute(s,s==="inert"?"":"true")}})}return Bc+=1,()=>{a.forEach(d=>{const m=xf(s),b=(m.get(d)||0)-1,g=(u.get(d)||0)-1;m.set(d,b),u.set(d,g),b||(!Ns.has(d)&&s&&d.removeAttribute(s),Ns.delete(d)),g||d.removeAttribute(o)}),Bc-=1,Bc||(jr.inert=new WeakMap,jr["aria-hidden"]=new WeakMap,jr.none=new WeakMap,Ns=new WeakSet,$s={})}}function IE(e,t=!1,n=!1){const r=Ne(e[0]).body;return TE(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}function Yt(e,...t){const n=new URL("https://base-ui.com/production-error");return n.searchParams.set("code",e.toString()),t.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${e}; visit ${n} for the full message.`}const kE=parseInt(w.version,10);function Jl(e){return kE>=e}function Sf(e){if(!w.isValidElement(e))return null;const t=e,n=t.props;return(Jl(19)?n?.ref:t.ref)??null}function $a(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function AE(e,t){const n={};for(const r in e){const o=e[r];if(t?.hasOwnProperty(r)){const s=t[r](o);s!=null&&Object.assign(n,s);continue}o===!0?n[`data-${r.toLowerCase()}`]="":o&&(n[`data-${r.toLowerCase()}`]=o.toString())}return n}function ME(e,t){return typeof e=="function"?e(t):e}function PE(e,t){return typeof e=="function"?e(t):e}const Ho={};function ac(e,t,n,r,o){let s={...ja(e,Ho)};return t&&(s=jo(s,t)),n&&(s=jo(s,n)),r&&(s=jo(s,r)),o&&(s=jo(s,o)),s}function NE(e){if(e.length===0)return Ho;if(e.length===1)return ja(e[0],Ho);let t={...ja(e[0],Ho)};for(let n=1;n<e.length;n+=1)t=jo(t,e[n]);return t}function jo(e,t){return fm(t)?t(e):$E(e,t)}function $E(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=$a(e.style,r);break}case"className":{e[n]=dm(e.className,r);break}default:jE(n,r)?e[n]=LE(e[n],r):e[n]=r}}return e}function jE(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2);return n===111&&r===110&&o>=65&&o<=90&&(typeof t=="function"||typeof t>"u")}function fm(e){return typeof e=="function"}function ja(e,t){return fm(e)?e(t):e??Ho}function LE(e,t){return t?e?n=>{if(DE(n)){const o=n;La(o);const s=t(o);return o.baseUIHandlerPrevented||e?.(o),s}const r=t(n);return e?.(n),r}:t:e}function La(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function dm(e,t){return t?e?t+" "+e:t:e}function DE(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Xe(e,t,n={}){const r=t.render,o=FE(t,n);if(n.enabled===!1)return null;const s=n.state??Je;return VE(e,r,o,s)}function FE(e,t={}){const{className:n,style:r,render:o}=e,{state:s=Je,ref:i,props:c,stateAttributesMapping:l,enabled:a=!0}=t,u=a?ME(n,s):void 0,f=a?PE(r,s):void 0,p=a?AE(s,l):Je,d=a?$a(p,Array.isArray(c)?NE(c):c)??Je:Je;return typeof document<"u"&&(a?Array.isArray(i)?d.ref=_E([d.ref,Sf(o),...i]):d.ref=Gr(d.ref,Sf(o),i):Gr(null,null)),a?(u!==void 0&&(d.className=dm(d.className,u)),f!==void 0&&(d.style=$a(d.style,f)),d):Je}const zE=Symbol.for("react.lazy");function VE(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const o=ac(n,t.props);o.ref=n.ref;let s=t;return s?.$$typeof===zE&&(s=w.Children.toArray(t)[0]),w.cloneElement(s,o)}if(e&&typeof e=="string")return UE(e,n);throw new Error(Yt(8))}function UE(e,t){return e==="button"?w.createElement("button",{type:"button",...t,key:t.key}):e==="img"?w.createElement("img",{alt:"",...t,key:t.key}):w.createElement(e,t)}const pm=w.createContext(null),hm=()=>w.useContext(pm),BE=_i("portal");function WE(e={}){const{ref:t,container:n,componentProps:r=Je,elementProps:o}=e,s=Es(),c=hm()?.portalNode,[l,a]=w.useState(null),[u,f]=w.useState(null),p=de(b=>{b!==null&&f(b)}),d=w.useRef(null);fe(()=>{if(n===null){d.current&&(d.current=null,f(null),a(null));return}if(s==null)return;const b=(n&&(zl(n)?n:n.current))??c??document.body;if(b==null){d.current&&(d.current=null,f(null),a(null));return}d.current!==b&&(d.current=b,f(null),a(b))},[n,c,s]);const m=Xe("div",r,{ref:[t,p],props:[{id:s,[BE]:""},o]});return{portalNode:u,portalSubtree:l&&m?Qr.createPortal(m,l):null}}const mm=w.forwardRef(function(t,n){const{children:r,container:o,className:s,render:i,renderGuards:c,...l}=t,{portalNode:a,portalSubtree:u}=WE({container:o,ref:n,componentProps:t,elementProps:l}),f=w.useRef(null),p=w.useRef(null),d=w.useRef(null),m=w.useRef(null),[h,b]=w.useState(null),g=h?.modal,y=h?.open,v=typeof c=="boolean"?c:!!h&&!h.modal&&h.open&&!!a;w.useEffect(()=>{if(!a||g)return;function S(O){a&&O.relatedTarget&&Bo(O)&&(O.type==="focusin"?yf:cE)(a)}return a.addEventListener("focusin",S,!0),a.addEventListener("focusout",S,!0),()=>{a.removeEventListener("focusin",S,!0),a.removeEventListener("focusout",S,!0)}},[a,g]),w.useEffect(()=>{!a||y||yf(a)},[y,a]);const x=w.useMemo(()=>({beforeOutsideRef:f,afterOutsideRef:p,beforeInsideRef:d,afterInsideRef:m,portalNode:a,setFocusManagerState:b}),[a]);return E.jsxs(w.Fragment,{children:[u,E.jsxs(pm.Provider,{value:x,children:[v&&a&&E.jsx(Ei,{"data-type":"outside",ref:f,onFocus:S=>{if(Bo(S,a))d.current?.focus();else{const O=h?h.domReference:null;im(O)?.focus()}}}),v&&a&&E.jsx("span",{"aria-owns":a.id,style:gE}),a&&Qr.createPortal(r,a),v&&a&&E.jsx(Ei,{"data-type":"outside",ref:p,onFocus:S=>{if(Bo(S,a))m.current?.focus();else{const O=h?h.domReference:null;sm(O)?.focus(),h?.closeOnFocusOut&&h?.onOpenChange(!1,ke(cc,S.nativeEvent))}}})]})]})});function en(e){return e==null?e:"current"in e?e.current:e}function HE(e,t){const n=He(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const _f=20;let Tn=[];function Xl(){Tn=Tn.filter(e=>e.deref()?.isConnected)}function qE(e){Xl(),e&&Un(e)!=="body"&&(Tn.push(new WeakRef(e)),Tn.length>_f&&(Tn=Tn.slice(-_f)))}function Wc(){return Xl(),Tn[Tn.length-1]?.deref()}function GE(e){if(!e)return null;const t=_s();return rm(e,t)?e:rc(e,t)[0]||e}function KE(e){return!e||!e.isConnected?!1:typeof e.checkVisibility=="function"?e.checkVisibility():xt(e).display!=="none"}function Ef(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=_s(),o=iE(e,n).filter(i=>{const c=i.getAttribute("data-tabindex")||"";return rm(i,n)||i.hasAttribute("data-tabindex")&&!c.startsWith("-")}),s=e.getAttribute("tabindex");t.current.includes("floating")||o.length===0?s!=="0"&&e.setAttribute("tabindex","0"):(s!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function gm(e){const{context:t,children:n,disabled:r=!1,initialFocus:o=!0,returnFocus:s=!0,restoreFocus:i=!1,modal:c=!0,closeOnFocusOut:l=!0,openInteractionType:a="",nextFocusableElement:u,previousFocusableElement:f,beforeContentFocusGuardRef:p,externalTree:d}=e,m="rootStore"in t?t.rootStore:t,h=m.useState("open"),b=m.useState("domReferenceElement"),g=m.useState("floatingElement"),{events:y,dataRef:v}=m.context,x=de(()=>v.current.floatingContext?.nodeId),S=o===!1,O=Ia(b)&&S,I=w.useRef(["content"]),_=lt(o),R=lt(s),j=lt(a),D=sc(d),L=hm(),G=w.useRef(null),B=w.useRef(null),H=w.useRef(!1),C=w.useRef(!1),A=w.useRef(!1),N=w.useRef(-1),P=w.useRef(""),k=w.useRef(""),Y=w.useRef(null),V=w.useRef(null),re=Gr(Y,p,L?.beforeInsideRef),Z=Gr(V,L?.afterInsideRef),T=yt(),$=yt(),z=nc(),ne=L!=null,F=os(g),Q=de((U=F)=>U?rc(U,_s()):[]),K=de(U=>{const q=Q(U);return I.current.map(()=>q).filter(Boolean).flat()});w.useEffect(()=>{if(r||!c)return;function U(le){le.key==="Tab"&&Re(F,tn(Ne(F)))&&Q().length===0&&!O&&et(le)}const q=Ne(F);return q.addEventListener("keydown",U),()=>{q.removeEventListener("keydown",U)}},[r,b,F,c,I,O,Q,K]),w.useEffect(()=>{if(r||!h)return;const U=Ne(F);function q(){A.current=!1}function le(te){const ee=kt(te),J=Re(g,ee)||Re(b,ee)||Re(L?.portalNode,ee);A.current=!J,k.current=te.pointerType||"keyboard",ee?.closest(`[${hE}]`)&&(C.current=!0)}function X(){k.current="keyboard"}return U.addEventListener("pointerdown",le,!0),U.addEventListener("pointerup",q,!0),U.addEventListener("pointercancel",q,!0),U.addEventListener("keydown",X,!0),()=>{U.removeEventListener("pointerdown",le,!0),U.removeEventListener("pointerup",q,!0),U.removeEventListener("pointercancel",q,!0),U.removeEventListener("keydown",X,!0)}},[r,g,b,F,h,L]),w.useEffect(()=>{if(r||!l)return;const U=Ne(F);function q(){C.current=!0,$.start(0,()=>{C.current=!1})}function le(oe){const W=kt(oe),ge=Q().indexOf(W);ge!==-1&&(N.current=ge)}function X(oe){const W=oe.relatedTarget,ce=oe.currentTarget,ge=kt(oe);queueMicrotask(()=>{const ae=x(),Ae=m.context.triggerElements,je=W?.hasAttribute(_i("focus-guard"))&&[Y.current,V.current,L?.beforeInsideRef.current,L?.afterInsideRef.current,L?.beforeOutsideRef.current,L?.afterOutsideRef.current,en(f),en(u)].includes(W),qe=!(Re(b,W)||Re(g,W)||Re(W,g)||Re(L?.portalNode,W)||W!=null&&Ae.hasElement(W)||Ae.hasMatchingElement(_e=>Re(_e,W))||je||D&&($r(D.nodesRef.current,ae).find(_e=>Re(_e.context?.elements.floating,W)||Re(_e.context?.elements.domReference,W))||ff(D.nodesRef.current,ae).find(_e=>[_e.context?.elements.floating,os(_e.context?.elements.floating)].includes(W)||_e.context?.elements.domReference===W)));if(ce===b&&F&&Ef(F,I),i&&ce!==b&&!KE(ge)&&tn(U)===U.body){if(De(F)&&(F.focus(),i==="popup")){z.request(()=>{F.focus()});return}const _e=N.current,xe=Q(),Oe=xe[_e]||xe[xe.length-1]||F;De(Oe)&&Oe.focus()}if(v.current.insideReactTree){v.current.insideReactTree=!1;return}(O||!c)&&W&&qe&&!C.current&&(O||W!==Wc())&&(H.current=!0,m.setOpen(!1,ke(cc,oe)))})}function te(){A.current||(v.current.insideReactTree=!0,T.start(0,()=>{v.current.insideReactTree=!1}))}const ee=De(b)?b:null,J=[];if(!(!g&&!ee))return ee&&(ee.addEventListener("focusout",X),ee.addEventListener("pointerdown",q),J.push(()=>{ee.removeEventListener("focusout",X),ee.removeEventListener("pointerdown",q)})),g&&(g.addEventListener("focusin",le),g.addEventListener("focusout",X),L&&(g.addEventListener("focusout",te,!0),J.push(()=>{g.removeEventListener("focusout",te,!0)})),J.push(()=>{g.removeEventListener("focusin",le),g.removeEventListener("focusout",X)})),()=>{J.forEach(oe=>{oe()})}},[r,b,g,F,c,D,L,m,l,i,Q,O,x,I,v,T,$,z,u,f]),w.useEffect(()=>{if(r||!g||!h)return;const U=Array.from(L?.portalNode?.querySelectorAll(`[${_i("portal")}]`)||[]),le=(D?ff(D.nodesRef.current,x()):[]).find(te=>Ia(te.context?.elements.domReference||null))?.context?.elements.domReference,X=[g,le,...U,G.current,B.current,Y.current,V.current,L?.beforeOutsideRef.current,L?.afterOutsideRef.current,en(f),en(u),O?b:null].filter(te=>te!=null);return IE(X,c||O)},[h,r,b,g,c,I,L,O,D,x,u,f]),fe(()=>{if(!h||r||!De(F))return;const U=Ne(F),q=tn(U);queueMicrotask(()=>{const le=K(F),X=_.current,te=typeof X=="function"?X(j.current||""):X;if(te===void 0||te===!1)return;let ee;te===!0||te===null?ee=le[0]||F:ee=en(te),ee=ee||le[0]||F,!Re(F,q)&&Wo(ee,{preventScroll:ee===F})})},[r,h,F,S,K,_,j]),fe(()=>{if(r||!F)return;const U=Ne(F),q=tn(U);qE(q);function le(ee){if(ee.open||(P.current=HE(ee.nativeEvent,k.current)),ee.reason===yE&&ee.nativeEvent.type==="mouseleave"&&(H.current=!0),ee.reason===Kl)if(ee.nested)H.current=!1;else if(Gh(ee.nativeEvent)||Kh(ee.nativeEvent))H.current=!1;else{let J=!1;document.createElement("div").focus({get preventScroll(){return J=!0,!1}}),J?H.current=!1:H.current=!0}}y.on("openchange",le);const X=U.createElement("span");X.setAttribute("tabindex","-1"),X.setAttribute("aria-hidden","true"),Object.assign(X.style,Yl),ne&&b&&b.insertAdjacentElement("afterend",X);function te(){const ee=R.current;let J=typeof ee=="function"?ee(P.current):ee;if(J===void 0||J===!1)return null;if(J===null&&(J=!0),typeof J=="boolean"){const W=b||Wc();return W&&W.isConnected?W:X}const oe=b||Wc()||X;return en(J)||oe}return()=>{y.off("openchange",le);const ee=tn(U),J=Re(g,ee)||D&&$r(D.nodesRef.current,x(),!1).some(W=>Re(W.context?.elements.floating,ee)),oe=te();queueMicrotask(()=>{const W=GE(oe),ce=typeof R.current!="boolean";R.current&&!H.current&&De(W)&&(!(!ce&&W!==ee&&ee!==U.body)||J)&&W.focus({preventScroll:!0}),X.remove(),H.current=!1})}},[r,g,F,R,v,y,D,ne,b,x]),fe(()=>{if(!Ul||h||!g)return;const U=tn(Ne(g));!De(U)||!Wl(U)||Re(g,U)&&U.blur()},[h,g]),fe(()=>{if(!(r||!L))return L.setFocusManagerState({modal:c,closeOnFocusOut:l,open:h,onOpenChange:m.setOpen,domReference:b}),()=>{L.setFocusManagerState(null)}},[r,L,c,h,m,l,b]),fe(()=>{if(!(r||!F))return Ef(F,I),()=>{queueMicrotask(Xl)}},[r,F,I]);const M=!r&&(c?!O:!0)&&(ne||c);return E.jsxs(w.Fragment,{children:[M&&E.jsx(Ei,{"data-type":"inside",ref:re,onFocus:U=>{if(c){const q=K();Wo(q[q.length-1])}else L?.portalNode&&(H.current=!1,Bo(U,L.portalNode)?sm(b)?.focus():en(f??L.beforeOutsideRef)?.focus())}}),n,M&&E.jsx(Ei,{"data-type":"inside",ref:Z,onFocus:U=>{c?Wo(K()[0]):L?.portalNode&&(l&&(H.current=!0),Bo(U,L.portalNode)?im(b)?.focus():en(u??L.afterOutsideRef)?.focus())}})]})}function YE(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,{enabled:o=!0,event:s="click",toggle:i=!0,ignoreMouse:c=!1,stickIfOpen:l=!0,touchOpenDelay:a=0,reason:u=Na}=t,f=w.useRef(void 0),p=nc(),d=yt(),m=w.useMemo(()=>({onPointerDown(h){f.current=h.pointerType},onMouseDown(h){const b=f.current,g=h.nativeEvent,y=n.select("open");if(h.button!==0||s==="click"||df(b)&&c)return;const v=r.current.openEvent,x=v?.type,S=n.select("domReferenceElement")!==h.currentTarget,O=y&&S||!(y&&i&&(!(v&&l)||x==="click"||x==="mousedown"));if(Wl(g.target)){const _=ke(u,g,g.target);O&&b==="touch"&&a>0?d.start(a,()=>{n.setOpen(!0,_)}):n.setOpen(O,_);return}const I=h.currentTarget;p.request(()=>{const _=ke(u,g,I);O&&b==="touch"&&a>0?d.start(a,()=>{n.setOpen(!0,_)}):n.setOpen(O,_)})},onClick(h){if(s==="mousedown-only")return;const b=f.current;if(s==="mousedown"&&b){f.current=void 0;return}if(df(b)&&c)return;const g=n.select("open"),y=r.current.openEvent,v=n.select("domReferenceElement")!==h.currentTarget,x=g&&v||!(g&&i&&(!(y&&l)||Yh(y))),S=ke(u,h.nativeEvent,h.currentTarget);x&&b==="touch"&&a>0?d.start(a,()=>{n.setOpen(!0,S)}):n.setOpen(x,S)},onKeyDown(){f.current=void 0}}),[r,s,c,n,l,i,p,d,a,u]);return w.useMemo(()=>o?{reference:m}:Je,[o,m])}function Rf(e,t,n){let{reference:r,floating:o}=e;const s=Et(t),i=Gl(t),c=ql(i),l=vt(t),a=s==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[c]/2-o[c]/2;let d;switch(l){case"top":d={x:u,y:r.y-o.height};break;case"bottom":d={x:u,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-o.width,y:f};break;default:d={x:r.x,y:r.y}}switch(Wn(t)){case"start":d[i]-=p*(n&&a?-1:1);break;case"end":d[i]+=p*(n&&a?-1:1);break}return d}const JE=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,c=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let a=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=Rf(a,r,l),p=r,d={},m=0;for(let h=0;h<c.length;h++){const{name:b,fn:g}=c[h],{x:y,y:v,data:x,reset:S}=await g({x:u,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:d,rects:a,platform:i,elements:{reference:e,floating:t}});u=y??u,f=v??f,d={...d,[b]:{...d[b],...x}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(a=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):S.rects),{x:u,y:f}=Rf(a,p,l)),h=-1)}return{x:u,y:f,placement:p,strategy:o,middlewareData:d}};async function ss(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:d=0}=hn(t,e),m=Jh(d),b=c[p?f==="floating"?"reference":"floating":f],g=bi(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:a,rootBoundary:u,strategy:l})),y=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),x=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=bi(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-S.top+m.top)/x.y,bottom:(S.bottom-g.bottom+m.bottom)/x.y,left:(g.left-S.left+m.left)/x.x,right:(S.right-g.right+m.right)/x.x}}const XE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:c,platform:l,elements:a}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:h=!0,...b}=hn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=vt(o),y=Et(c),v=vt(c)===c,x=await(l.isRTL==null?void 0:l.isRTL(a.floating)),S=p||(v||!h?[yi(c)]:j_(c)),O=m!=="none";!p&&O&&S.push(...z_(c,h,m,x));const I=[c,...S],_=await ss(t,b),R=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&R.push(_[g]),f){const B=$_(o,i,x);R.push(_[B[0]],_[B[1]])}if(j=[...j,{placement:o,overflows:R}],!R.every(B=>B<=0)){var D,L;const B=(((D=s.flip)==null?void 0:D.index)||0)+1,H=I[B];if(H&&(!(f==="alignment"?y!==Et(H):!1)||j.every(N=>Et(N.placement)===y?N.overflows[0]>0:!0)))return{data:{index:B,overflows:j},reset:{placement:H}};let C=(L=j.filter(A=>A.overflows[0]<=0).sort((A,N)=>A.overflows[1]-N.overflows[1])[0])==null?void 0:L.placement;if(!C)switch(d){case"bestFit":{var G;const A=(G=j.filter(N=>{if(O){const P=Et(N.placement);return P===y||P==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(P=>P>0).reduce((P,k)=>P+k,0)]).sort((N,P)=>N[1]-P[1])[0])==null?void 0:G[0];A&&(C=A);break}case"initialPlacement":C=c;break}if(o!==C)return{reset:{placement:C}}}return{}}}};function Cf(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Of(e){return A_.some(t=>e[t]>=0)}const ZE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=hn(e,t);switch(r){case"referenceHidden":{const s=await ss(t,{...o,elementContext:"reference"}),i=Cf(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Of(i)}}}case"escaped":{const s=await ss(t,{...o,altBoundary:!0}),i=Cf(s,n.floating);return{data:{escapedOffsets:i,escaped:Of(i)}}}default:return{}}}}},ym=new Set(["left","top"]);async function QE(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=vt(n),c=Wn(n),l=Et(n)==="y",a=ym.has(i)?-1:1,u=s&&l?-1:1,f=hn(t,e);let{mainAxis:p,crossAxis:d,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof m=="number"&&(d=c==="end"?m*-1:m),l?{x:d*u,y:p*a}:{x:p*a,y:d*u}}const eR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:c}=t,l=await QE(t,e);return i===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},tR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:c={fn:b=>{let{x:g,y}=b;return{x:g,y}}},...l}=hn(e,t),a={x:n,y:r},u=await ss(t,l),f=Et(vt(o)),p=Hl(f);let d=a[p],m=a[f];if(s){const b=p==="y"?"top":"left",g=p==="y"?"bottom":"right",y=d+u[b],v=d-u[g];d=ka(y,d,v)}if(i){const b=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=m+u[b],v=m-u[g];m=ka(y,m,v)}const h=c.fn({...t,[p]:d,[f]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[p]:s,[f]:i}}}}}},nR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:c=0,mainAxis:l=!0,crossAxis:a=!0}=hn(e,t),u={x:n,y:r},f=Et(o),p=Hl(f);let d=u[p],m=u[f];const h=hn(c,t),b=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(l){const v=p==="y"?"height":"width",x=s.reference[p]-s.floating[v]+b.mainAxis,S=s.reference[p]+s.reference[v]-b.mainAxis;d<x?d=x:d>S&&(d=S)}if(a){var g,y;const v=p==="y"?"width":"height",x=ym.has(vt(o)),S=s.reference[f]-s.floating[v]+(x&&((g=i.offset)==null?void 0:g[f])||0)+(x?0:b.crossAxis),O=s.reference[f]+s.reference[v]+(x?0:((y=i.offset)==null?void 0:y[f])||0)-(x?b.crossAxis:0);m<S?m=S:m>O&&(m=O)}return{[p]:d,[f]:m}}}},rR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:c}=t,{apply:l=()=>{},...a}=hn(e,t),u=await ss(t,a),f=vt(o),p=Wn(o),d=Et(o)==="y",{width:m,height:h}=s.floating;let b,g;f==="top"||f==="bottom"?(b=f,g=p===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(g=f,b=p==="end"?"top":"bottom");const y=h-u.top-u.bottom,v=m-u.left-u.right,x=Hr(h-u[b],y),S=Hr(m-u[g],v),O=!t.middlewareData.shift;let I=x,_=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=y),O&&!p){const j=gt(u.left,0),D=gt(u.right,0),L=gt(u.top,0),G=gt(u.bottom,0);d?_=m-2*(j!==0||D!==0?j+D:gt(u.left,u.right)):I=h-2*(L!==0||G!==0?L+G:gt(u.top,u.bottom))}await l({...t,availableWidth:_,availableHeight:I});const R=await i.getDimensions(c.floating);return m!==R.width||h!==R.height?{reset:{rects:!0}}:{}}}};function bm(e){const t=xt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=De(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,c=gi(n)!==s||gi(r)!==i;return c&&(n=s,r=i),{width:n,height:r,$:c}}function Zl(e){return Ie(e)?e:e.contextElement}function Lr(e){const t=Zl(e);if(!De(t))return Vt(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=bm(t);let i=(s?gi(n.width):n.width)/r,c=(s?gi(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const oR=Vt(0);function vm(e){const t=He(e);return!ec()||!t.visualViewport?oR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==He(e)?!1:t}function ir(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Zl(e);let i=Vt(1);t&&(r?Ie(r)&&(i=Lr(r)):i=Lr(e));const c=sR(s,n,r)?vm(s):Vt(0);let l=(o.left+c.x)/i.x,a=(o.top+c.y)/i.y,u=o.width/i.x,f=o.height/i.y;if(s){const p=He(s),d=r&&Ie(r)?He(r):r;let m=p,h=Ca(m);for(;h&&r&&d!==m;){const b=Lr(h),g=h.getBoundingClientRect(),y=xt(h),v=g.left+(h.clientLeft+parseFloat(y.paddingLeft))*b.x,x=g.top+(h.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,a*=b.y,u*=b.x,f*=b.y,l+=v,a+=x,m=He(h),h=Ca(m)}}return bi({width:u,height:f,x:l,y:a})}function lc(e,t){const n=tc(e).scrollLeft;return t?t.left+n:ir(Kt(e)).left+n}function wm(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-lc(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function iR(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=Kt(r),c=t?Qi(t.floating):!1;if(r===i||c&&s)return n;let l={scrollLeft:0,scrollTop:0},a=Vt(1);const u=Vt(0),f=De(r);if((f||!f&&!s)&&((Un(r)!=="body"||Bn(i))&&(l=tc(r)),De(r))){const d=ir(r);a=Lr(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}const p=i&&!f&&!s?wm(i,l):Vt(0);return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-l.scrollLeft*a.x+u.x+p.x,y:n.y*a.y-l.scrollTop*a.y+u.y+p.y}}function cR(e){return Array.from(e.getClientRects())}function aR(e){const t=Kt(e),n=tc(e),r=e.ownerDocument.body,o=gt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=gt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+lc(e);const c=-n.scrollTop;return xt(r).direction==="rtl"&&(i+=gt(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:c}}const Tf=25;function lR(e,t){const n=He(e),r=Kt(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,c=0,l=0;if(o){s=o.width,i=o.height;const u=ec();(!u||u&&t==="fixed")&&(c=o.offsetLeft,l=o.offsetTop)}const a=lc(r);if(a<=0){const u=r.ownerDocument,f=u.body,p=getComputedStyle(f),d=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-d);m<=Tf&&(s-=m)}else a<=Tf&&(s+=a);return{width:s,height:i,x:c,y:l}}const uR=new Set(["absolute","fixed"]);function fR(e,t){const n=ir(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=De(e)?Lr(e):Vt(1),i=e.clientWidth*s.x,c=e.clientHeight*s.y,l=o*s.x,a=r*s.y;return{width:i,height:c,x:l,y:a}}function If(e,t,n){let r;if(t==="viewport")r=lR(e,n);else if(t==="document")r=aR(Kt(e));else if(Ie(t))r=fR(t,n);else{const o=vm(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return bi(r)}function xm(e,t){const n=pn(e);return n===t||!Ie(n)||an(n)?!1:xt(n).position==="fixed"||xm(n,t)}function dR(e,t){const n=t.get(e);if(n)return n;let r=kn(e,[],!1).filter(c=>Ie(c)&&Un(c)!=="body"),o=null;const s=xt(e).position==="fixed";let i=s?pn(e):e;for(;Ie(i)&&!an(i);){const c=xt(i),l=Vl(i);!l&&c.position==="fixed"&&(o=null),(s?!l&&!o:!l&&c.position==="static"&&!!o&&uR.has(o.position)||Bn(i)&&!l&&xm(e,i))?r=r.filter(u=>u!==i):o=c,i=pn(i)}return t.set(e,r),r}function pR(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?Qi(t)?[]:dR(t,this._c):[].concat(n),r],c=i[0],l=i.reduce((a,u)=>{const f=If(t,u,o);return a.top=gt(f.top,a.top),a.right=Hr(f.right,a.right),a.bottom=Hr(f.bottom,a.bottom),a.left=gt(f.left,a.left),a},If(t,c,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function hR(e){const{width:t,height:n}=bm(e);return{width:t,height:n}}function mR(e,t,n){const r=De(t),o=Kt(t),s=n==="fixed",i=ir(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const l=Vt(0);function a(){l.x=lc(o)}if(r||!r&&!s)if((Un(t)!=="body"||Bn(o))&&(c=tc(t)),r){const d=ir(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else o&&a();s&&!r&&o&&a();const u=o&&!r&&!s?wm(o,c):Vt(0),f=i.left+c.scrollLeft-l.x-u.x,p=i.top+c.scrollTop-l.y-u.y;return{x:f,y:p,width:i.width,height:i.height}}function Hc(e){return xt(e).position==="static"}function kf(e,t){if(!De(e)||xt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Kt(e)===n&&(n=n.ownerDocument.body),n}function Sm(e,t){const n=He(e);if(Qi(e))return n;if(!De(e)){let o=pn(e);for(;o&&!an(o);){if(Ie(o)&&!Hc(o))return o;o=pn(o)}return n}let r=kf(e,t);for(;r&&i_(r)&&Hc(r);)r=kf(r,t);return r&&an(r)&&Hc(r)&&!Vl(r)?n:r||f_(e)||n}const gR=async function(e){const t=this.getOffsetParent||Sm,n=this.getDimensions,r=await n(e.floating);return{reference:mR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yR(e){return xt(e).direction==="rtl"}const bR={convertOffsetParentRelativeRectToViewportRelativeRect:iR,getDocumentElement:Kt,getClippingRect:pR,getOffsetParent:Sm,getElementRects:gR,getClientRects:cR,getDimensions:hR,getScale:Lr,isElement:Ie,isRTL:yR};function _m(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vR(e,t){let n=null,r;const o=Kt(e);function s(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),s();const a=e.getBoundingClientRect(),{left:u,top:f,width:p,height:d}=a;if(c||t(),!p||!d)return;const m=kr(f),h=kr(o.clientWidth-(u+p)),b=kr(o.clientHeight-(f+d)),g=kr(u),v={rootMargin:-m+"px "+-h+"px "+-b+"px "+-g+"px",threshold:gt(0,Hr(1,l))||1};let x=!0;function S(O){const I=O[0].intersectionRatio;if(I!==l){if(!x)return i();I?i(!1,I):r=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!_m(a,e.getBoundingClientRect())&&i(),x=!1}try{n=new IntersectionObserver(S,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return i(!0),s}function Af(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,a=Zl(e),u=o||s?[...a?kn(a):[],...kn(t)]:[];u.forEach(g=>{o&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const f=a&&c?vR(a,n):null;let p=-1,d=null;i&&(d=new ResizeObserver(g=>{let[y]=g;y&&y.target===a&&d&&(d.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=d)==null||v.observe(t)})),n()}),a&&!l&&d.observe(a),d.observe(t));let m,h=l?ir(e):null;l&&b();function b(){const g=ir(e);h&&!_m(h,g)&&n(),h=g,m=requestAnimationFrame(b)}return n(),()=>{var g;u.forEach(y=>{o&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f?.(),(g=d)==null||g.disconnect(),d=null,l&&cancelAnimationFrame(m)}}const wR=eR,xR=tR,SR=XE,_R=rR,ER=ZE,RR=nR,CR=(e,t,n)=>{const r=new Map,o={platform:bR,...n},s={...o.platform,_c:r};return JE(e,t,{...o,platform:s})};var OR=typeof document<"u",TR=function(){},ei=OR?w.useLayoutEffect:TR;function Ri(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ri(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Ri(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Em(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Mf(e,t){const n=Em(e);return Math.round(t*n)/n}function qc(e){const t=w.useRef(e);return ei(()=>{t.current=e}),t}function IR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:c=!0,whileElementsMounted:l,open:a}=e,[u,f]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,d]=w.useState(r);Ri(p,r)||d(r);const[m,h]=w.useState(null),[b,g]=w.useState(null),y=w.useCallback(N=>{N!==O.current&&(O.current=N,h(N))},[]),v=w.useCallback(N=>{N!==I.current&&(I.current=N,g(N))},[]),x=s||m,S=i||b,O=w.useRef(null),I=w.useRef(null),_=w.useRef(u),R=l!=null,j=qc(l),D=qc(o),L=qc(a),G=w.useCallback(()=>{if(!O.current||!I.current)return;const N={placement:t,strategy:n,middleware:p};D.current&&(N.platform=D.current),CR(O.current,I.current,N).then(P=>{const k={...P,isPositioned:L.current!==!1};B.current&&!Ri(_.current,k)&&(_.current=k,Qr.flushSync(()=>{f(k)}))})},[p,t,n,D,L]);ei(()=>{a===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(N=>({...N,isPositioned:!1})))},[a]);const B=w.useRef(!1);ei(()=>(B.current=!0,()=>{B.current=!1}),[]),ei(()=>{if(x&&(O.current=x),S&&(I.current=S),x&&S){if(j.current)return j.current(x,S,G);G()}},[x,S,G,j,R]);const H=w.useMemo(()=>({reference:O,floating:I,setReference:y,setFloating:v}),[y,v]),C=w.useMemo(()=>({reference:x,floating:S}),[x,S]),A=w.useMemo(()=>{const N={position:n,left:0,top:0};if(!C.floating)return N;const P=Mf(C.floating,u.x),k=Mf(C.floating,u.y);return c?{...N,transform:"translate("+P+"px, "+k+"px)",...Em(C.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:k}},[n,c,C.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:G,refs:H,elements:C,floatingStyles:A}),[u,G,H,C,A])}const kR=(e,t)=>({...wR(e),options:[e,t]}),AR=(e,t)=>({...xR(e),options:[e,t]}),MR=(e,t)=>({...RR(e),options:[e,t]}),PR=(e,t)=>({...SR(e),options:[e,t]}),NR=(e,t)=>({..._R(e),options:[e,t]}),$R=(e,t)=>({...ER(e),options:[e,t]}),jR={intentional:"onClick",sloppy:"onPointerDown"};function LR(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function Rm(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),o=n.useState("floatingElement"),s=n.useState("referenceElement"),i=n.useState("domReferenceElement"),{onOpenChange:c,dataRef:l}=n.context,{enabled:a=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:p="sloppy",referencePress:d=!1,referencePressEvent:m="sloppy",ancestorScroll:h=!1,bubbles:b,externalTree:g}=t,y=sc(g),v=de(typeof f=="function"?f:()=>!1),x=typeof f=="function"?v:f,S=w.useRef(!1),{escapeKey:O,outsidePress:I}=LR(b),_=w.useRef(null),R=yt(),j=yt(),D=de(()=>{j.clear(),l.current.insideReactTree=!1}),L=w.useRef(!1),G=w.useRef(""),B=de(M=>{G.current=M.pointerType}),H=de(()=>{const M=G.current,U=M==="pen"||!M?"mouse":M,q=typeof p=="function"?p():p;return typeof q=="string"?q:q[U]}),C=de(M=>{if(!r||!a||!u||M.key!=="Escape"||L.current)return;const U=l.current.floatingContext?.nodeId,q=y?$r(y.nodesRef.current,U):[];if(!O&&q.length>0){let te=!0;if(q.forEach(ee=>{ee.context?.open&&!ee.context.dataRef.current.__escapeKeyBubbles&&(te=!1)}),!te)return}const le=k_(M)?M.nativeEvent:M,X=ke(vE,le);n.setOpen(!1,X),!O&&!X.isPropagationAllowed&&M.stopPropagation()}),A=de(M=>{const U=H();return U==="intentional"&&M.type!=="click"||U==="sloppy"&&M.type==="click"}),N=de(()=>{l.current.insideReactTree=!0,j.start(0,D)}),P=de((M,U=!1)=>{if(A(M)){D();return}if(l.current.insideReactTree){D();return}if(H()==="intentional"&&U||typeof x=="function"&&!x(M))return;const q=kt(M),le=`[${_i("inert")}]`,X=Ne(n.select("floatingElement")).querySelectorAll(le),te=n.context.triggerElements;if(q&&(te.hasElement(q)||te.hasMatchingElement(ce=>Re(ce,q))))return;let ee=Ie(q)?q:null;for(;ee&&!an(ee);){const ce=pn(ee);if(an(ce)||!Ie(ce))break;ee=ce}if(X.length&&Ie(q)&&!I_(q)&&!Re(q,n.select("floatingElement"))&&Array.from(X).every(ce=>!Re(ee,ce)))return;if(De(q)&&!("touches"in M)){const ce=an(q),ge=xt(q),ae=/auto|scroll/,Ae=ce||ae.test(ge.overflowX),je=ce||ae.test(ge.overflowY),qe=Ae&&q.clientWidth>0&&q.scrollWidth>q.clientWidth,_e=je&&q.clientHeight>0&&q.scrollHeight>q.clientHeight,xe=ge.direction==="rtl",Oe=_e&&(xe?M.offsetX<=q.offsetWidth-q.clientWidth:M.offsetX>q.clientWidth),Ce=qe&&M.offsetY>q.clientHeight;if(Oe||Ce)return}const J=l.current.floatingContext?.nodeId,oe=y&&$r(y.nodesRef.current,J).some(ce=>It(M,ce.context?.elements.floating));if(It(M,n.select("floatingElement"))||It(M,n.select("domReferenceElement"))||oe)return;const W=y?$r(y.nodesRef.current,J):[];if(W.length>0){let ce=!0;if(W.forEach(ge=>{ge.context?.open&&!ge.context.dataRef.current.__outsidePressBubbles&&(ce=!1)}),!ce)return}n.setOpen(!1,ke(Kl,M)),D()}),k=de(M=>{H()!=="sloppy"||M.pointerType==="touch"||!n.select("open")||!a||It(M,n.select("floatingElement"))||It(M,n.select("domReferenceElement"))||P(M)}),Y=de(M=>{if(H()!=="sloppy"||!n.select("open")||!a||It(M,n.select("floatingElement"))||It(M,n.select("domReferenceElement")))return;const U=M.touches[0];U&&(_.current={startTime:Date.now(),startX:U.clientX,startY:U.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},R.start(1e3,()=>{_.current&&(_.current.dismissOnTouchEnd=!1,_.current.dismissOnMouseDown=!1)}))}),V=de(M=>{const U=kt(M);function q(){Y(M),U?.removeEventListener(M.type,q)}U?.addEventListener(M.type,q)}),re=de(M=>{const U=S.current;if(S.current=!1,R.clear(),M.type==="mousedown"&&_.current&&!_.current.dismissOnMouseDown)return;const q=kt(M);function le(){M.type==="pointerdown"?k(M):P(M,U),q?.removeEventListener(M.type,le)}q?.addEventListener(M.type,le)}),Z=de(M=>{if(H()!=="sloppy"||!_.current||It(M,n.select("floatingElement"))||It(M,n.select("domReferenceElement")))return;const U=M.touches[0];if(!U)return;const q=Math.abs(U.clientX-_.current.startX),le=Math.abs(U.clientY-_.current.startY),X=Math.sqrt(q*q+le*le);X>5&&(_.current.dismissOnTouchEnd=!0),X>10&&(P(M),R.clear(),_.current=null)}),T=de(M=>{const U=kt(M);function q(){Z(M),U?.removeEventListener(M.type,q)}U?.addEventListener(M.type,q)}),$=de(M=>{H()!=="sloppy"||!_.current||It(M,n.select("floatingElement"))||It(M,n.select("domReferenceElement"))||(_.current.dismissOnTouchEnd&&P(M),R.clear(),_.current=null)}),z=de(M=>{const U=kt(M);function q(){$(M),U?.removeEventListener(M.type,q)}U?.addEventListener(M.type,q)});w.useEffect(()=>{if(!r||!a)return;l.current.__escapeKeyBubbles=O,l.current.__outsidePressBubbles=I;const M=new Wr;function U(ee){n.setOpen(!1,ke(ic,ee))}function q(){M.clear(),L.current=!0}function le(){M.start(ec()?5:0,()=>{L.current=!1})}const X=Ne(o);X.addEventListener("pointerdown",B,!0),u&&(X.addEventListener("keydown",C),X.addEventListener("compositionstart",q),X.addEventListener("compositionend",le)),x&&(X.addEventListener("click",re,!0),X.addEventListener("pointerdown",re,!0),X.addEventListener("touchstart",V,!0),X.addEventListener("touchmove",T,!0),X.addEventListener("touchend",z,!0),X.addEventListener("mousedown",re,!0));let te=[];return h&&(Ie(i)&&(te=kn(i)),Ie(o)&&(te=te.concat(kn(o))),!Ie(s)&&s&&s.contextElement&&(te=te.concat(kn(s.contextElement)))),te=te.filter(ee=>ee!==X.defaultView?.visualViewport),te.forEach(ee=>{ee.addEventListener("scroll",U,{passive:!0})}),()=>{X.removeEventListener("pointerdown",B,!0),u&&(X.removeEventListener("keydown",C),X.removeEventListener("compositionstart",q),X.removeEventListener("compositionend",le)),x&&(X.removeEventListener("click",re,!0),X.removeEventListener("pointerdown",re,!0),X.removeEventListener("touchstart",V,!0),X.removeEventListener("touchmove",T,!0),X.removeEventListener("touchend",z,!0),X.removeEventListener("mousedown",re,!0)),te.forEach(ee=>{ee.removeEventListener("scroll",U)}),M.clear(),S.current=!1}},[l,o,s,i,u,x,r,c,h,a,O,I,C,P,re,k,V,T,z,B,n]),w.useEffect(D,[x,D]);const ne=w.useMemo(()=>({onKeyDown:C,...d&&{[jR[m]]:M=>{n.setOpen(!1,ke(Na,M.nativeEvent))},...m!=="intentional"&&{onClick(M){n.setOpen(!1,ke(Na,M.nativeEvent))}}}}),[C,n,d,m]),F=de(M=>{const U=kt(M.nativeEvent);!Re(n.select("floatingElement"),U)||M.button!==0||(S.current=!0)}),Q=de(M=>{!r||!a||M.button!==0||(S.current=!0)}),K=w.useMemo(()=>({onKeyDown:C,onPointerDown:F,onMouseDown:F,onMouseUp:F,onClickCapture:N,onMouseDownCapture(M){N(),Q(M)},onPointerDownCapture(M){N(),Q(M)},onMouseUpCapture:N,onTouchEndCapture:N,onTouchMoveCapture:N}),[C,F,N,Q]);return w.useMemo(()=>a?{reference:ne,floating:K,trigger:ne}:{},[a,ne,K])}var Ci=Symbol("NOT_FOUND");function DR(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function FR(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function zR(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Pf=e=>Array.isArray(e)?e:[e];function VR(e){const t=Array.isArray(e[0])?e[0]:e;return zR(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function UR(e,t){const n=[],{length:r}=e;for(let o=0;o<r;o++)n.push(e[o].apply(null,t));return n}function BR(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Ci},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function WR(e,t){let n=[];function r(c){const l=n.findIndex(a=>t(c,a.key));if(l>-1){const a=n[l];return l>0&&(n.splice(l,1),n.unshift(a)),a.value}return Ci}function o(c,l){r(c)===Ci&&(n.unshift({key:c,value:l}),n.length>e&&n.pop())}function s(){return n}function i(){n=[]}return{get:r,put:o,getEntries:s,clear:i}}var HR=(e,t)=>e===t;function qR(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:o}=n;for(let s=0;s<o;s++)if(!e(n[s],r[s]))return!1;return!0}}function GR(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=HR,maxSize:o=1,resultEqualityCheck:s}=n,i=qR(r);let c=0;const l=o<=1?BR(i):WR(o,i);function a(){let u=l.get(arguments);if(u===Ci){if(u=e.apply(null,arguments),c++,s){const p=l.getEntries().find(d=>s(d.value,u));p&&(u=p.value,c!==0&&c--)}l.put(arguments,u)}return u}return a.clearCache=()=>{l.clear(),a.resetResultsCount()},a.resultsCount=()=>c,a.resetResultsCount=()=>{c=0},a}var KR=class{constructor(e){this.value=e}deref(){return this.value}},YR=typeof WeakRef<"u"?WeakRef:KR,JR=0,Nf=1;function js(){return{s:JR,v:void 0,o:null,p:null}}function Cm(e,t={}){let n=js();const{resultEqualityCheck:r}=t;let o,s=0;function i(){let c=n;const{length:l}=arguments;for(let f=0,p=l;f<p;f++){const d=arguments[f];if(typeof d=="function"||typeof d=="object"&&d!==null){let m=c.o;m===null&&(c.o=m=new WeakMap);const h=m.get(d);h===void 0?(c=js(),m.set(d,c)):c=h}else{let m=c.p;m===null&&(c.p=m=new Map);const h=m.get(d);h===void 0?(c=js(),m.set(d,c)):c=h}}const a=c;let u;if(c.s===Nf)u=c.v;else if(u=e.apply(null,arguments),s++,r){const f=o?.deref?.()??o;f!=null&&r(f,u)&&(u=f,s!==0&&s--),o=typeof u=="object"&&u!==null||typeof u=="function"?new YR(u):u}return a.s=Nf,a.v=u,u}return i.clearCache=()=>{n=js(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function Om(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...o)=>{let s=0,i=0,c,l={},a=o.pop();typeof a=="object"&&(l=a,a=o.pop()),DR(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const u={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:d=Cm,argsMemoizeOptions:m=[]}=u,h=Pf(p),b=Pf(m),g=VR(o),y=f(function(){return s++,a.apply(null,arguments)},...h),v=d(function(){i++;const S=UR(g,arguments);return c=y.apply(null,S),c},...b);return Object.assign(v,{resultFunc:a,memoizedResultFunc:y,dependencies:g,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>c,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:d})};return Object.assign(r,{withTypes:()=>r}),r}var XR=Om(Cm),ZR=Object.assign((e,t=XR)=>{FR(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((i,c,l)=>(i[n[l]]=c,i),{}))},{withTypes:()=>ZR});Om({memoize:GR,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const ue=(e,t,n,r,o,s,...i)=>{if(i.length>0)throw new Error(Yt(1));let c;if(e)c=e;else throw new Error("Missing arguments");return c};var Tm=Py();const QR=Jl(19),eC=QR?nC:rC;function me(e,t,n,r,o){return eC(e,t,n,r,o)}function tC(e,t,n,r,o){const s=w.useCallback(()=>t(e.getSnapshot(),n,r,o),[e,t,n,r,o]);return Tm.useSyncExternalStore(e.subscribe,s,s)}function nC(e,t,n,r,o){return tC(e,t,n,r,o)}function rC(e,t,n,r,o){return Bd.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,s=>t(s,n,r,o))}class Im{constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){if(this.state===t)return;this.state=t,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){this.setState({...this.state,...t});return}}set(t,n){Object.is(this.state[t],n)||this.setState({...this.state,[t]:n})}notifyAll(){const t={...this.state};this.setState(t)}use(t,n,r,o){return me(this,t,n,r,o)}}class km extends Im{constructor(t,n={},r){super(t),this.context=n,this.selectors=r}useSyncedValue(t,n){w.useDebugValue(t),fe(()=>{this.state[t]!==n&&this.set(t,n)},[t,n])}useSyncedValueWithCleanup(t,n){const r=this;fe(()=>(r.state[t]!==n&&r.set(t,n),()=>{r.set(t,void 0)}),[r,t,n])}useSyncedValues(t){const n=this,r=Object.values(t);fe(()=>{n.update(t)},[n,...r])}useControlledProp(t,n){w.useDebugValue(t);const r=n!==void 0;fe(()=>{r&&!Object.is(this.state[t],n)&&super.setState({...this.state,[t]:n})},[t,n,r])}select(t,n,r,o){const s=this.selectors[t];return s(this.state,n,r,o)}useState(t,n,r,o){return w.useDebugValue(t),me(this,this.selectors[t],n,r,o)}useContextCallback(t,n){w.useDebugValue(t);const r=de(n??at);this.context[t]=r}useStateSetter(t){const n=w.useRef(void 0);return n.current===void 0&&(n.current=r=>{this.set(t,r)}),n.current}observe(t,n){let r;typeof t=="function"?r=t:r=this.selectors[t];let o=r(this.state);return n(o,o,this),this.subscribe(s=>{const i=r(s);if(!Object.is(o,i)){const c=o;o=i,n(i,c,this)}})}}const oC={open:ue(e=>e.open),domReferenceElement:ue(e=>e.domReferenceElement),referenceElement:ue(e=>e.positionReference??e.referenceElement),floatingElement:ue(e=>e.floatingElement),floatingId:ue(e=>e.floatingId)};class Ql extends km{constructor(t){const{nested:n,noEmit:r,onOpenChange:o,triggerElements:s,...i}=t;super({...i,positionReference:i.referenceElement,domReferenceElement:i.referenceElement},{onOpenChange:o,dataRef:{current:{}},events:uE(),nested:n,noEmit:r,triggerElements:s},oC)}setOpen=(t,n)=>{if((!t||!this.state.open||Yh(n.event))&&(this.context.dataRef.current.openEvent=t?n.event:void 0),!this.context.noEmit){const r={open:t,reason:n.reason,nativeEvent:n.event,nested:this.context.nested,triggerElement:n.trigger};this.context.events.emit("openchange",r)}this.context.onOpenChange?.(t,n)}}function uc(e,t=!1,n=!1){const[r,o]=w.useState(e&&t?"idle":void 0),[s,i]=w.useState(e);return e&&!s&&(i(!0),o("starting")),!e&&s&&r!=="ending"&&!n&&o("ending"),!e&&!s&&r==="ending"&&o(void 0),fe(()=>{if(!e&&s&&r!=="ending"&&n){const c=Dt.request(()=>{o("ending")});return()=>{Dt.cancel(c)}}},[e,s,r,n]),fe(()=>{if(!e||t)return;const c=Dt.request(()=>{o(void 0)});return()=>{Dt.cancel(c)}},[t,e]),fe(()=>{if(!e||!t)return;e&&s&&r!=="idle"&&o("starting");const c=Dt.request(()=>{o("idle")});return()=>{Dt.cancel(c)}},[t,e,s,o,r]),w.useMemo(()=>({mounted:s,setMounted:i,transitionStatus:r}),[s,r])}let is=(function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e})({});const sC={[is.startingStyle]:""},iC={[is.endingStyle]:""},fc={transitionStatus(e){return e==="starting"?sC:e==="ending"?iC:null}};function cC(e,t=!1,n=!0){const r=nc();return de((o,s=null)=>{r.cancel();function i(){Qr.flushSync(o)}const c=en(e);if(c==null)return;const l=c;if(typeof l.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED)o();else{let a=function(){const f=is.startingStyle;if(!l.hasAttribute(f)){r.request(u);return}const p=new MutationObserver(()=>{l.hasAttribute(f)||(p.disconnect(),u())});p.observe(l,{attributes:!0,attributeFilter:[f]}),s?.addEventListener("abort",()=>p.disconnect(),{once:!0})},u=function(){Promise.all(l.getAnimations().map(f=>f.finished)).then(()=>{s?.aborted||i()}).catch(()=>{const f=l.getAnimations();if(n){if(s?.aborted)return;i()}else f.length>0&&f.some(p=>p.pending||p.playState!=="finished")&&u()})};if(t){a();return}r.request(u)}})}function io(e){const{enabled:t=!0,open:n,ref:r,onComplete:o}=e,s=de(o),i=cC(r,n,!1);w.useEffect(()=>{if(!t)return;const c=new AbortController;return i(s,c.signal),()=>{c.abort()}},[t,n,s,i])}function aC(e){const t=e.useState("open");fe(()=>{if(t&&!e.select("activeTriggerId")&&e.context.triggerElements.size===1){const n=e.context.triggerElements.entries().next();if(!n.done){const[r,o]=n.value;e.update({activeTriggerId:r,activeTriggerElement:o})}}},[t,e])}function lC(e,t,n){const{mounted:r,setMounted:o,transitionStatus:s}=uc(e);t.useSyncedValues({mounted:r,transitionStatus:s});const i=de(()=>{o(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n?.(),t.context.onOpenChangeComplete?.(!1)}),c=t.useState("preventUnmountingOnClose");return io({enabled:!c,open:e,ref:t.context.popupRef,onComplete(){e||i()}}),{forceUnmount:i,transitionStatus:s}}class eu{constructor(){this.elementsSet=new Set,this.idMap=new Map}add(t,n){const r=this.idMap.get(t);r!==n&&(r!==void 0&&this.elementsSet.delete(r),this.elementsSet.add(n),this.idMap.set(t,n))}delete(t){const n=this.idMap.get(t);n&&(this.elementsSet.delete(n),this.idMap.delete(t))}hasElement(t){return this.elementsSet.has(t)}hasMatchingElement(t){for(const n of this.elementsSet)if(t(n))return!0;return!1}getById(t){return this.idMap.get(t)}entries(){return this.idMap.entries()}elements(){return this.elementsSet.values()}get size(){return this.idMap.size}}function uC(){return new Ql({open:!1,floatingElement:null,referenceElement:null,triggerElements:new eu,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function fC(){return{open:!1,openProp:void 0,mounted:!1,transitionStatus:"idle",floatingRootContext:uC(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,triggerIdProp:void 0,popupElement:null,positionerElement:null,activeTriggerProps:Je,inactiveTriggerProps:Je,popupProps:Je}}const Ls=ue(e=>e.triggerIdProp??e.activeTriggerId),dC={open:ue(e=>e.openProp??e.open),mounted:ue(e=>e.mounted),transitionStatus:ue(e=>e.transitionStatus),floatingRootContext:ue(e=>e.floatingRootContext),preventUnmountingOnClose:ue(e=>e.preventUnmountingOnClose),payload:ue(e=>e.payload),activeTriggerId:Ls,activeTriggerElement:ue(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:ue((e,t)=>t!==void 0&&Ls(e)===t),isOpenedByTrigger:ue((e,t)=>t!==void 0&&Ls(e)===t&&e.open),isMountedByTrigger:ue((e,t)=>t!==void 0&&Ls(e)===t&&e.mounted),triggerProps:ue((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:ue(e=>e.popupProps),popupElement:ue(e=>e.popupElement),positionerElement:ue(e=>e.positionerElement)};function Am(e){const{open:t=!1,onOpenChange:n,elements:r={}}=e,o=Es(),s=oc()!=null,i=wt(()=>new Ql({open:t,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:new eu,floatingId:o,nested:s,noEmit:!1})).current;return fe(()=>{const c={open:t,floatingId:o};r.reference!==void 0&&(c.referenceElement=r.reference,c.domReferenceElement=Ie(r.reference)?r.reference:null),r.floating!==void 0&&(c.floatingElement=r.floating),i.update(c)},[t,o,r.reference,r.floating,i]),i.context.onOpenChange=n,i.context.nested=s,i.context.noEmit=!1,i}function pC(e={}){const{nodeId:t,externalTree:n}=e,r=Am(e),o=e.rootContext||r,s={reference:o.useState("referenceElement"),floating:o.useState("floatingElement"),domReference:o.useState("domReferenceElement")},[i,c]=w.useState(null),l=w.useRef(null),a=sc(n);fe(()=>{s.domReference&&(l.current=s.domReference)},[s.domReference]);const u=IR({...e,elements:{...s,...i&&{reference:i}}}),f=w.useCallback(I=>{const _=Ie(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),getClientRects:()=>I.getClientRects(),contextElement:I}:I;c(_),u.refs.setReference(_)},[u.refs]),[p,d]=w.useState(null),[m,h]=w.useState(null);o.useSyncedValue("referenceElement",p),o.useSyncedValue("domReferenceElement",Ie(p)?p:null),o.useSyncedValue("floatingElement",m);const b=w.useCallback(I=>{(Ie(I)||I===null)&&(l.current=I,d(I)),(Ie(u.refs.reference.current)||u.refs.reference.current===null||I!==null&&!Ie(I))&&u.refs.setReference(I)},[u.refs,d]),g=w.useCallback(I=>{h(I),u.refs.setFloating(I)},[u.refs]),y=w.useMemo(()=>({...u.refs,setReference:b,setFloating:g,setPositionReference:f,domReference:l}),[u.refs,b,g,f]),v=w.useMemo(()=>({...u.elements,domReference:s.domReference}),[u.elements,s.domReference]),x=o.useState("open"),S=o.useState("floatingId"),O=w.useMemo(()=>({...u,dataRef:o.context.dataRef,open:x,onOpenChange:o.setOpen,events:o.context.events,floatingId:S,refs:y,elements:v,nodeId:t,rootStore:o}),[u,y,v,t,o,x,S]);return fe(()=>{o.context.dataRef.current.floatingContext=O;const I=a?.nodesRef.current.find(_=>_.id===t);I&&(I.context=O)}),w.useMemo(()=>({...u,context:O,refs:y,elements:v,rootStore:o}),[u,y,v,O,o])}function hC(e){const{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:o}=e,s=Es(),i=oc()!=null,c=t.useState("open"),l=t.useState("activeTriggerElement"),a=t.useState(r?"popupElement":"positionerElement"),u=t.context.triggerElements,f=wt(()=>new Ql({open:c,referenceElement:l,floatingElement:a,triggerElements:u,onOpenChange:o,floatingId:s,nested:i,noEmit:n})).current;return fe(()=>{const p={open:c,floatingId:s,referenceElement:l,floatingElement:a};Ie(l)&&(p.domReferenceElement=l),f.state.positionReference===f.state.referenceElement&&(p.positionReference=l),f.update(p)},[c,s,l,a,f]),f.context.onOpenChange=o,f.context.nested=i,f.context.noEmit=n,f}function Mm(e=[]){const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),o=e.map(a=>a?.trigger),s=w.useCallback(a=>Ds(a,e,"reference"),t),i=w.useCallback(a=>Ds(a,e,"floating"),n),c=w.useCallback(a=>Ds(a,e,"item"),r),l=w.useCallback(a=>Ds(a,e,"trigger"),o);return w.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:c,getTriggerProps:l}),[s,i,c,l])}function Ds(e,t,n){const r=new Map,o=n==="item",s={};n==="floating"&&(s.tabIndex=-1,s[Ta]="");for(const i in e)o&&e&&(i===Hh||i===qh)||(s[i]=e[i]);for(let i=0;i<t.length;i+=1){let c;const l=t[i]?.[n];typeof l=="function"?c=e?l(e):null:c=l,c&&$f(s,c,o,r)}return $f(s,e,o,r),s}function $f(e,t,n,r){for(const o in t){const s=t[o];n&&(o===Hh||o===qh)||(o.startsWith("on")?(r.has(o)||r.set(o,[]),typeof s=="function"&&(r.get(o)?.push(s),e[o]=(...i)=>r.get(o)?.map(c=>c(...i)).find(c=>c!==void 0))):e[o]=s)}}const mC="Escape";function dc(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Fs(e,t){return dc(t,e===Bl||e===Ss,e===An||e===Mn)}function Gc(e,t,n){return dc(t,e===Ss,n?e===An:e===Mn)||e==="Enter"||e===" "||e===""}function gC(e,t,n){return dc(t,n?e===An:e===Mn,e===Ss)}function yC(e,t,n,r){const o=n?e===Mn:e===An,s=e===Bl;return t==="both"||t==="horizontal"&&r&&r>1?e===mC:dc(t,o,s)}function bC(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),o=n.useState("floatingElement"),s=n.useState("domReferenceElement"),i=n.context.dataRef,{listRef:c,activeIndex:l,onNavigate:a=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:p=!1,loopFocus:d=!1,nested:m=!1,rtl:h=!1,virtual:b=!1,focusItemOnOpen:g="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:x=void 0,orientation:S="vertical",parentOrientation:O,cols:I=1,id:_,resetOnPointerLeave:R=!0,externalTree:j}=t,D=os(o),L=lt(D),G=oc(),B=sc(j);fe(()=>{i.current.orientation=S},[i,S]);const H=Ia(s),C=w.useRef(g),A=w.useRef(f??-1),N=w.useRef(null),P=w.useRef(!0),k=de(J=>{a(A.current===-1?null:A.current,J)}),Y=w.useRef(k),V=w.useRef(!!o),re=w.useRef(r),Z=w.useRef(!1),T=w.useRef(!1),$=lt(x),z=lt(r),ne=lt(f),F=lt(R),Q=de(()=>{function J(ge){b?B?.events.emit("virtualfocus",ge):Wo(ge,{sync:Z.current,preventScroll:!0})}const oe=c.current[A.current],W=T.current;oe&&J(oe),(Z.current?ge=>ge():requestAnimationFrame)(()=>{const ge=c.current[A.current]||oe;if(!ge)return;oe||J(ge),M&&(W||!P.current)&&ge.scrollIntoView?.({block:"nearest",inline:"nearest"})})});fe(()=>{u&&(r&&o?(A.current=f??-1,C.current&&f!=null&&(T.current=!0,k())):V.current&&(A.current=-1,Y.current()))},[u,r,o,f,k]),fe(()=>{if(u){if(!r){Z.current=!1;return}if(o)if(l==null){if(Z.current=!1,ne.current!=null)return;if(V.current&&(A.current=-1,Q()),(!re.current||!V.current)&&C.current&&(N.current!=null||C.current===!0&&N.current==null)){let J=0;const oe=()=>{c.current[0]==null?(J<2&&(J?requestAnimationFrame:queueMicrotask)(oe),J+=1):(A.current=N.current==null||Gc(N.current,S,h)||m?zc(c):mf(c),N.current=null,k())};oe()}}else Vo(c,l)||(A.current=l,Q(),T.current=!1)}},[u,r,o,l,ne,m,c,S,h,k,Q,$]),fe(()=>{if(!u||o||!B||b||!V.current)return;const J=B.nodesRef.current,oe=J.find(ge=>ge.id===G)?.context?.elements.floating,W=tn(Ne(o)),ce=J.some(ge=>ge.context&&Re(ge.context.elements.floating,W));oe&&!ce&&P.current&&oe.focus({preventScroll:!0})},[u,o,B,G,b]),fe(()=>{Y.current=k,re.current=r,V.current=!!o}),fe(()=>{r||(N.current=null,C.current=g)},[r,g]);const K=l!=null,M=w.useMemo(()=>{function J(W){if(!z.current)return;const ce=c.current.indexOf(W.currentTarget);ce!==-1&&A.current!==ce&&(A.current=ce,k(W))}return{onFocus(W){Z.current=!0,J(W)},onClick:({currentTarget:W})=>W.focus({preventScroll:!0}),onMouseMove(W){Z.current=!0,T.current=!1,y&&J(W)},onPointerLeave(W){if(!z.current||!P.current||W.pointerType==="touch")return;Z.current=!0;const ce=W.relatedTarget;!y||c.current.includes(ce)||F.current&&(Wo(null,{sync:!0}),A.current=-1,k(W),b||L.current?.focus({preventScroll:!0}))}}},[z,L,y,c,k,F,b]),U=w.useCallback(()=>O??B?.nodesRef.current.find(J=>J.id===G)?.context?.dataRef?.current.orientation,[G,B,O]),q=de(J=>{if(P.current=!1,Z.current=!0,J.which===229||!z.current&&J.currentTarget===L.current)return;if(m&&yC(J.key,S,h,I)){Fs(J.key,U())||et(J),n.setOpen(!1,ke(Uc,J.nativeEvent)),De(s)&&(b?B?.events.emit("virtualfocus",s):s.focus());return}const oe=A.current,W=zc(c,x),ce=mf(c,x);if(H||(J.key==="Home"&&(et(J),A.current=W,k(J)),J.key==="End"&&(et(J),A.current=ce,k(J))),I>1){const ge=Array.from({length:c.current.length},()=>({width:1,height:1})),ae=B_(ge,I),Ae=ae.findIndex(_e=>_e!=null&&!Uo(c,_e,x)),je=ae.reduce((_e,xe,Oe)=>xe!=null&&!Uo(c,xe,x)?Oe:_e,-1),qe=ae[U_({current:ae.map(_e=>_e!=null?c.current[_e]:null)},{event:J,orientation:S,loopFocus:d,rtl:h,cols:I,disabledIndices:H_([...(typeof x!="function"?x:null)||c.current.map((_e,xe)=>Uo(c,xe,x)?xe:void 0),void 0],ae),minIndex:Ae,maxIndex:je,prevIndex:W_(A.current>ce?W:A.current,ge,ae,I,J.key===Ss?"bl":J.key===(h?An:Mn)?"tr":"tl"),stopEvent:!0})];if(qe!=null&&(A.current=qe,k(J)),S==="both")return}if(Fs(J.key,S)){if(et(J),r&&!b&&tn(J.currentTarget.ownerDocument)===J.currentTarget){A.current=Gc(J.key,S,h)?W:ce,k(J);return}Gc(J.key,S,h)?d?oe>=ce?p&&oe!==c.current.length?A.current=-1:(Z.current=!1,A.current=W):A.current=Qe(c,{startingIndex:oe,disabledIndices:x}):A.current=Math.min(ce,Qe(c,{startingIndex:oe,disabledIndices:x})):d?oe<=W?p&&oe!==-1?A.current=c.current.length:(Z.current=!1,A.current=ce):A.current=Qe(c,{startingIndex:oe,decrement:!0,disabledIndices:x}):A.current=Math.max(W,Qe(c,{startingIndex:oe,decrement:!0,disabledIndices:x})),Vo(c,A.current)&&(A.current=-1),k(J)}}),le=w.useMemo(()=>b&&r&&K&&{"aria-activedescendant":`${_}-${l}`},[b,r,K,_,l]),X=w.useMemo(()=>({"aria-orientation":S==="both"?void 0:S,...H?{}:le,onKeyDown(J){if(J.key==="Tab"&&J.shiftKey&&r&&!b){const oe=kt(J.nativeEvent);if(oe&&!Re(L.current,oe))return;et(J),n.setOpen(!1,ke(cc,J.nativeEvent)),De(s)&&s.focus();return}q(J)},onPointerMove(){P.current=!0}}),[le,q,L,S,H,n,r,b,s]),te=w.useMemo(()=>{function J(W){g==="auto"&&Gh(W.nativeEvent)&&(C.current=!b)}function oe(W){C.current=g,g==="auto"&&Kh(W.nativeEvent)&&(C.current=!0)}return{onKeyDown(W){const ce=n.select("open");P.current=!1;const ge=W.key.startsWith("Arrow"),ae=gC(W.key,U(),h),Ae=Fs(W.key,S),je=(m?ae:Ae)||W.key==="Enter"||W.key.trim()==="";if(b&&ce)return q(W);if(!(!ce&&!v&&ge)){if(je){const qe=Fs(W.key,U());N.current=m&&qe?null:W.key}if(m){ae&&(et(W),ce?(A.current=zc(c,$.current),k(W)):n.setOpen(!0,ke(Uc,W.nativeEvent,W.currentTarget)));return}Ae&&(ne.current!=null&&(A.current=ne.current),et(W),!ce&&v?n.setOpen(!0,ke(Uc,W.nativeEvent,W.currentTarget)):q(W),ce&&k(W))}},onFocus(W){n.select("open")&&!b&&(A.current=-1,k(W))},onPointerDown:oe,onPointerEnter:oe,onMouseDown:J,onClick:J}},[q,$,g,c,m,k,n,v,S,U,h,ne,b]),ee=w.useMemo(()=>({...le,...te}),[le,te]);return w.useMemo(()=>u?{reference:ee,floating:X,item:M,trigger:te}:{},[u,ee,X,te,M])}const vC=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function wC(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),o=n.useState("floatingId"),s=n.useState("domReferenceElement"),i=n.useState("floatingElement"),{role:c="dialog"}=t,l=Es(),a=s?.id||l,u=w.useMemo(()=>os(i)?.id||o,[i,o]),f=vC.get(c)??c,d=oc()!=null,m=w.useMemo(()=>f==="tooltip"||c==="label"?Je:{"aria-haspopup":f==="alertdialog"?"dialog":f,"aria-expanded":"false",...f==="listbox"&&{role:"combobox"},...f==="menu"&&d&&{role:"menuitem"},...c==="select"&&{"aria-autocomplete":"none"},...c==="combobox"&&{"aria-autocomplete":"list"}},[f,d,c]),h=w.useMemo(()=>f==="tooltip"||c==="label"?{[`aria-${c==="label"?"labelledby":"describedby"}`]:r?u:void 0}:{...m,"aria-expanded":r?"true":"false","aria-controls":r?u:void 0,...f==="menu"&&{id:a}},[f,u,r,a,c,m]),b=w.useMemo(()=>{const y={id:u,...f&&{role:f}};return f==="tooltip"||c==="label"?y:{...y,...f==="menu"&&{"aria-labelledby":a}}},[f,u,a,c]),g=w.useCallback(({active:y,selected:v})=>{const x={role:"option",...y&&{id:`${u}-fui-option`}};switch(c){case"select":case"combobox":return{...x,"aria-selected":v}}return{}},[u,c]);return w.useMemo(()=>({reference:h,floating:b,item:g,trigger:m}),[h,b,m,g])}function xC(e,t){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,o=n.useState("open"),{listRef:s,activeIndex:i,onMatch:c,onTypingChange:l,enabled:a=!0,resetMs:u=750,selectedIndex:f=null}=t,p=yt(),d=w.useRef(""),m=w.useRef(f??i??-1),h=w.useRef(null);fe(()=>{!o&&f!==null||(p.clear(),h.current=null,d.current!==""&&(d.current=""))},[o,f,p]),fe(()=>{o&&d.current===""&&(m.current=f??i??-1)},[o,f,i]);const b=de(S=>{S?r.current.typing||(r.current.typing=S,l?.(S)):r.current.typing&&(r.current.typing=S,l?.(S))}),g=de(S=>{function O(L,G,B){const H=G.find(C=>C?.toLocaleLowerCase().indexOf(B.toLocaleLowerCase())===0);return H?L.indexOf(H):-1}const I=s.current;if(d.current.length>0&&d.current[0]!==" "&&(O(I,I,d.current)===-1?b(!1):S.key===" "&&et(S)),I==null||S.key.length!==1||S.ctrlKey||S.metaKey||S.altKey)return;o&&S.key!==" "&&(et(S),b(!0));const _=d.current==="";_&&(m.current=f??i??-1),I.every(L=>L?L[0]?.toLocaleLowerCase()!==L[1]?.toLocaleLowerCase():!0)&&d.current===S.key&&(d.current="",m.current=h.current),d.current+=S.key,p.start(u,()=>{d.current="",m.current=h.current,b(!1)});const j=_?f??i??-1:m.current,D=O(I,[...I.slice((j||0)+1),...I.slice(0,(j||0)+1)],d.current);D!==-1?(c?.(D),h.current=D):S.key!==" "&&(d.current="",b(!1))}),y=de(S=>{const O=S.relatedTarget,I=n.select("domReferenceElement"),_=n.select("floatingElement"),R=Re(I,O),j=Re(_,O);R||j||(p.clear(),d.current="",m.current=h.current,b(!1))}),v=w.useMemo(()=>({onKeyDown:g,onBlur:y}),[g,y]),x=w.useMemo(()=>({onKeyDown:g,onKeyUp(S){S.key===" "&&b(!1)},onBlur:y}),[g,y,b]);return w.useMemo(()=>a?{reference:v,floating:x}:{},[a,v,x])}function SC(e){const t=w.useRef(""),n=w.useCallback(o=>{o.defaultPrevented||(t.current=o.pointerType,e(o,o.pointerType))},[e]);return{onClick:w.useCallback(o=>{if(o.detail===0){e(o,"keyboard");return}"pointerType"in o?e(o,o.pointerType):e(o,t.current),t.current=""},[e]),onPointerDown:n}}function Pm(e){const[t,n]=w.useState(null),r=de((c,l)=>{e||n(l||(Uh?"touch":""))}),o=w.useCallback(()=>{n(null)},[]),{onClick:s,onPointerDown:i}=SC(r);return w.useMemo(()=>({openMethod:t,reset:o,triggerProps:{onClick:s,onPointerDown:i}}),[t,o,s,i])}function _C(e){const{store:t,parentContext:n,actionsRef:r}=e,o=t.useState("open"),s=t.useState("disablePointerDismissal"),i=t.useState("modal"),c=t.useState("popupElement"),{openMethod:l,triggerProps:a,reset:u}=Pm(o);aC(t);const{forceUnmount:f}=lC(o,t,()=>{u()}),p=de(j=>{const D=ke(j);return D.preventUnmountOnClose=()=>{t.set("preventUnmountingOnClose",!0)},D}),d=w.useCallback(()=>{t.setOpen(!1,p(xE))},[t,p]);w.useImperativeHandle(r,()=>({unmount:f,close:d}),[f,d]);const m=hC({popupStore:t,onOpenChange:t.setOpen,treatPopupAsFloatingElement:!0,noEmit:!0}),[h,b]=w.useState(0),g=h===0,y=wC(m),v=Rm(m,{outsidePressEvent(){return t.context.internalBackdropRef.current||t.context.backdropRef.current?"intentional":{mouse:i==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}},outsidePress(j){if(!t.context.outsidePressEnabledRef.current||"button"in j&&j.button!==0||"touches"in j&&j.touches.length!==1)return!1;const D=kt(j);if(g&&!s){const L=D;return i&&(t.context.internalBackdropRef.current||t.context.backdropRef.current)?t.context.internalBackdropRef.current===L||t.context.backdropRef.current===L||Re(L,c)&&!L?.hasAttribute("data-base-ui-portal"):!0}return!1},escapeKey:g});Wh(o&&i===!0,c);const{getReferenceProps:x,getFloatingProps:S,getTriggerProps:O}=Mm([y,v]);t.useContextCallback("onNestedDialogOpen",j=>{b(j+1)}),t.useContextCallback("onNestedDialogClose",()=>{b(0)}),w.useEffect(()=>(n?.onNestedDialogOpen&&o&&n.onNestedDialogOpen(h),n?.onNestedDialogClose&&!o&&n.onNestedDialogClose(),()=>{n?.onNestedDialogClose&&o&&n.onNestedDialogClose()}),[o,n,h]);const I=w.useMemo(()=>x(a),[x,a]),_=w.useMemo(()=>O(a),[O,a]),R=w.useMemo(()=>S(),[S]);t.useSyncedValues({openMethod:l,activeTriggerProps:I,inactiveTriggerProps:_,popupProps:R,floatingRootContext:m,nestedOpenDialogCount:h})}const Nm=w.createContext(void 0);function co(e){const t=w.useContext(Nm);if(e===!1&&t===void 0)throw new Error(Yt(27));return t}const EC={...dC,modal:ue(e=>e.modal),nested:ue(e=>e.nested),nestedOpenDialogCount:ue(e=>e.nestedOpenDialogCount),disablePointerDismissal:ue(e=>e.disablePointerDismissal),openMethod:ue(e=>e.openMethod),descriptionElementId:ue(e=>e.descriptionElementId),titleElementId:ue(e=>e.titleElementId),viewportElement:ue(e=>e.viewportElement),role:ue(e=>e.role)};class RC extends km{constructor(t){super(CC(t),{popupRef:w.createRef(),backdropRef:w.createRef(),internalBackdropRef:w.createRef(),outsidePressEnabledRef:{current:!0},triggerElements:new eu,onOpenChange:void 0,onOpenChangeComplete:void 0},EC)}setOpen=(t,n)=>{if(n.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},!t&&n.trigger==null&&this.state.activeTriggerId!=null&&(n.trigger=this.state.activeTriggerElement??void 0),this.context.onOpenChange?.(t,n),n.isCanceled)return;const r={open:t,nativeEvent:n.event,reason:n.reason,nested:this.state.nested};this.state.floatingRootContext.context.events?.emit("openchange",r);const o={open:t},s=n.trigger?.id??null;(s||t)&&(o.activeTriggerId=s,o.activeTriggerElement=n.trigger??null),this.update(o)}}function CC(e={}){return{...fC(),modal:!0,disablePointerDismissal:!1,popupElement:null,viewportElement:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,nested:!1,nestedOpenDialogCount:0,role:"dialog",...e}}function OC(e){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:o,onOpenChangeComplete:s,actionsRef:i,handle:c,triggerId:l,defaultTriggerId:a=null}=e,u=co(),f=!!u,p=wt(()=>c?.store??new RC({open:r,openProp:n,activeTriggerId:a,triggerIdProp:l,modal:!0,disablePointerDismissal:!0,nested:f,role:"alertdialog"})).current;p.useControlledProp("openProp",n),p.useControlledProp("triggerIdProp",l),p.useSyncedValue("nested",f),p.useContextCallback("onOpenChange",o),p.useContextCallback("onOpenChangeComplete",s);const d=p.useState("payload");_C({store:p,actionsRef:i,parentContext:u?.store.context});const m=w.useMemo(()=>({store:p}),[p]);return E.jsx(Nm.Provider,{value:m,children:typeof t=="function"?t({payload:d}):t})}let Zn=(function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=is.startingStyle]="startingStyle",e[e.endingStyle=is.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e.side="data-side",e.align="data-align",e})({}),Da=(function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e})({});const TC={[Da.popupOpen]:""},IC={[Da.popupOpen]:"",[Da.pressed]:""},kC={[Zn.open]:""},AC={[Zn.closed]:""},MC={[Zn.anchorHidden]:""},PC={open(e){return e?TC:null}},NC={open(e){return e?IC:null}},pc={open(e){return e?kC:AC},anchorHidden(e){return e?MC:null}},$C={...pc,...fc},jC=w.forwardRef(function(t,n){const{render:r,className:o,forceRender:s=!1,...i}=t,{store:c}=co(),l=c.useState("open"),a=c.useState("nested"),u=c.useState("mounted"),f=c.useState("transitionStatus");return Xe("div",t,{state:{open:l,transitionStatus:f},ref:[c.context.backdropRef,n],stateAttributesMapping:$C,props:[{role:"presentation",hidden:!u,style:{userSelect:"none",WebkitUserSelect:"none"}},i],enabled:s||!a})}),LC=w.createContext(void 0);function DC(e=!1){const t=w.useContext(LC);if(t===void 0&&!e)throw new Error(Yt(16));return t}function FC(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:o=0,isNativeButton:s}=e,i=r&&t!==!1,c=r&&t===!1;return{props:w.useMemo(()=>{const a={onKeyDown(u){n&&t&&u.key!=="Tab"&&u.preventDefault()}};return r||(a.tabIndex=o,!s&&n&&(a.tabIndex=t?o:-1)),(s&&(t||i)||!s&&n)&&(a["aria-disabled"]=n),s&&(!t||c)&&(a.disabled=n),a},[r,n,t,i,c,s,o])}}function hc(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:o=!0}=e,s=w.useRef(null),i=DC(!0)!==void 0,c=de(()=>{const p=s.current;return!!(p?.tagName==="A"&&p?.href)}),{props:l}=FC({focusableWhenDisabled:n,disabled:t,composite:i,tabIndex:r,isNativeButton:o}),a=w.useCallback(()=>{const p=s.current;zC(p)&&i&&t&&l.disabled===void 0&&p.disabled&&(p.disabled=!1)},[t,l.disabled,i]);fe(a,[a]);const u=w.useCallback((p={})=>{const{onClick:d,onMouseDown:m,onKeyUp:h,onKeyDown:b,onPointerDown:g,...y}=p;return ac({type:o?"button":void 0,onClick(x){if(t){x.preventDefault();return}d?.(x)},onMouseDown(x){t||m?.(x)},onKeyDown(x){if(t||(La(x),b?.(x)),x.baseUIHandlerPrevented)return;const S=x.target===x.currentTarget&&!o&&!c()&&!t,O=x.key==="Enter",I=x.key===" ";S&&((I||O)&&x.preventDefault(),O&&d?.(x))},onKeyUp(x){t||(La(x),h?.(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!o&&!t&&x.key===" "&&d?.(x)},onPointerDown(x){if(t){x.preventDefault();return}g?.(x)}},o?void 0:{role:"button"},l,y)},[t,l,o,c]),f=de(p=>{s.current=p,a()});return{getButtonProps:u,buttonRef:f}}function zC(e){return De(e)&&e.tagName==="BUTTON"}const VC=w.forwardRef(function(t,n){const{render:r,className:o,disabled:s=!1,nativeButton:i=!0,...c}=t,{store:l}=co(),a=l.useState("open");function u(m){a&&l.setOpen(!1,ke(bE,m.nativeEvent))}const{getButtonProps:f,buttonRef:p}=hc({disabled:s,native:i});return Xe("button",t,{state:{disabled:s},ref:[n,p],props:[{onClick:u},c,f]})});function $m(e){return Es(e,"base-ui")}let UC=(function(e){return e.nestedDialogs="--nested-dialogs",e})({}),BC=(function(e){return e[e.open=Zn.open]="open",e[e.closed=Zn.closed]="closed",e[e.startingStyle=Zn.startingStyle]="startingStyle",e[e.endingStyle=Zn.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e})({});const jm=w.createContext(void 0);function WC(){const e=w.useContext(jm);if(e===void 0)throw new Error(Yt(26));return e}const Lm="ArrowUp",Dm="ArrowDown",Fm="ArrowLeft",zm="ArrowRight",Vm="Home",Um="End",HC=new Set([Fm,zm]),qC=new Set([Lm,Dm]),GC=new Set([...HC,...qC]);[...GC];const Bm=new Set([Lm,Dm,Fm,zm,Vm,Um]),KC={...pc,...fc,nestedDialogOpen(e){return e?{[BC.nestedDialogOpen]:""}:null}},YC=w.forwardRef(function(t,n){const{className:r,finalFocus:o,initialFocus:s,render:i,...c}=t,{store:l}=co(),a=l.useState("descriptionElementId"),u=l.useState("disablePointerDismissal"),f=l.useState("floatingRootContext"),p=l.useState("popupProps"),d=l.useState("modal"),m=l.useState("mounted"),h=l.useState("nested"),b=l.useState("nestedOpenDialogCount"),g=l.useState("open"),y=l.useState("openMethod"),v=l.useState("titleElementId"),x=l.useState("transitionStatus"),S=l.useState("role");WC(),io({open:g,ref:l.context.popupRef,onComplete(){g&&l.context.onOpenChangeComplete?.(!0)}});function O(D){return D==="touch"?l.context.popupRef.current:!0}const I=s===void 0?O:s,_=b>0,j=Xe("div",t,{state:{open:g,nested:h,transitionStatus:x,nestedDialogOpen:_},props:[p,{"aria-labelledby":v??void 0,"aria-describedby":a??void 0,role:S,tabIndex:-1,hidden:!m,onKeyDown(D){Bm.has(D.key)&&D.stopPropagation()},style:{[UC.nestedDialogs]:b}},c],ref:[n,l.context.popupRef,l.useStateSetter("popupElement")],stateAttributesMapping:KC});return E.jsx(gm,{context:f,openInteractionType:y,disabled:!m,closeOnFocusOut:!u,initialFocus:I,returnFocus:o,modal:d!==!1,restoreFocus:"popup",children:j})});function Wm(e){return Jl(19)?e:e?"true":void 0}const Hm=w.forwardRef(function(t,n){const{cutout:r,...o}=t;let s;if(r){const i=r?.getBoundingClientRect();s=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${i.left}px ${i.top}px,
      ${i.left}px ${i.bottom}px,
      ${i.right}px ${i.bottom}px,
      ${i.right}px ${i.top}px,
      ${i.left}px ${i.top}px
    )`}return E.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...o,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:s}})}),JC=w.forwardRef(function(t,n){const{keepMounted:r=!1,...o}=t,{store:s}=co(),i=s.useState("mounted"),c=s.useState("modal"),l=s.useState("open");return i||r?E.jsx(jm.Provider,{value:r,children:E.jsxs(mm,{ref:n,...o,children:[i&&c===!0&&E.jsx(Hm,{ref:s.context.internalBackdropRef,inert:Wm(!l)}),t.children]})}):null}),XC=w.forwardRef(function(t,n){const{render:r,className:o,id:s,...i}=t,{store:c}=co(),l=$m(s);return c.useSyncedValueWithCleanup("titleElementId",l),Xe("h2",t,{ref:n,props:[{id:l},i]})}),ZC=w.forwardRef(function(t,n){const{render:r,className:o,disabled:s=!1,focusableWhenDisabled:i=!1,nativeButton:c=!0,...l}=t,{getButtonProps:a,buttonRef:u}=hc({disabled:s,focusableWhenDisabled:i,native:c});return Xe("button",t,{state:{disabled:s},ref:[n,u],props:[l,a]})}),jf=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Lf=Ll,QC=(e,t)=>n=>{var r;if(t?.variants==null)return Lf(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(a=>{const u=n?.[a],f=s?.[a];if(u===null)return null;const p=jf(u)||jf(f);return o[a][p]}),c=n&&Object.entries(n).reduce((a,u)=>{let[f,p]=u;return p===void 0||(a[f]=p),a},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((a,u)=>{let{class:f,className:p,...d}=u;return Object.entries(d).every(m=>{let[h,b]=m;return Array.isArray(b)?b.includes({...s,...c}[h]):{...s,...c}[h]===b})?[...a,f,p]:a},[]);return Lf(e,i,l,n?.class,n?.className)},eO=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},tO=(e,t)=>({classGroupId:e,validator:t}),qm=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Oi="-",Df=[],nO="arbitrary..",rO=e=>{const t=sO(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return oO(i);const c=i.split(Oi),l=c[0]===""&&c.length>1?1:0;return Gm(c,l,t)},getConflictingClassGroupIds:(i,c)=>{if(c){const l=r[i],a=n[i];return l?a?eO(a,l):l:a||Df}return n[i]||Df}}},Gm=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],s=n.nextPart.get(o);if(s){const a=Gm(e,t+1,s);if(a)return a}const i=n.validators;if(i===null)return;const c=t===0?e.join(Oi):e.slice(t).join(Oi),l=i.length;for(let a=0;a<l;a++){const u=i[a];if(u.validator(c))return u.classGroupId}},oO=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?nO+r:void 0})(),sO=e=>{const{theme:t,classGroups:n}=e;return iO(n,t)},iO=(e,t)=>{const n=qm();for(const r in e){const o=e[r];tu(o,n,r,t)}return n},tu=(e,t,n,r)=>{const o=e.length;for(let s=0;s<o;s++){const i=e[s];cO(i,t,n,r)}},cO=(e,t,n,r)=>{if(typeof e=="string"){aO(e,t,n);return}if(typeof e=="function"){lO(e,t,n,r);return}uO(e,t,n,r)},aO=(e,t,n)=>{const r=e===""?t:Km(t,e);r.classGroupId=n},lO=(e,t,n,r)=>{if(fO(e)){tu(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(tO(n,e))},uO=(e,t,n,r)=>{const o=Object.entries(e),s=o.length;for(let i=0;i<s;i++){const[c,l]=o[i];tu(l,Km(t,c),n,r)}},Km=(e,t)=>{let n=e;const r=t.split(Oi),o=r.length;for(let s=0;s<o;s++){const i=r[s];let c=n.nextPart.get(i);c||(c=qm(),n.nextPart.set(i,c)),n=c}return n},fO=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,dO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(s,i)=>{n[s]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(s){let i=n[s];if(i!==void 0)return i;if((i=r[s])!==void 0)return o(s,i),i},set(s,i){s in n?n[s]=i:o(s,i)}}},Fa="!",Ff=":",pO=[],zf=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),hO=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,c=0,l=0,a;const u=o.length;for(let h=0;h<u;h++){const b=o[h];if(i===0&&c===0){if(b===Ff){s.push(o.slice(l,h)),l=h+1;continue}if(b==="/"){a=h;continue}}b==="["?i++:b==="]"?i--:b==="("?c++:b===")"&&c--}const f=s.length===0?o:o.slice(l);let p=f,d=!1;f.endsWith(Fa)?(p=f.slice(0,-1),d=!0):f.startsWith(Fa)&&(p=f.slice(1),d=!0);const m=a&&a>l?a-l:void 0;return zf(s,d,p,m)};if(t){const o=t+Ff,s=r;r=i=>i.startsWith(o)?s(i.slice(o.length)):zf(pO,!1,i,void 0,!0)}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},mO=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let o=[];for(let s=0;s<n.length;s++){const i=n[s],c=i[0]==="[",l=t.has(i);c||l?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(i)):o.push(i)}return o.length>0&&(o.sort(),r.push(...o)),r}},gO=e=>({cache:dO(e.cacheSize),parseClassName:hO(e),sortModifiers:mO(e),...rO(e)}),yO=/\s+/,bO=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],c=e.trim().split(yO);let l="";for(let a=c.length-1;a>=0;a-=1){const u=c[a],{isExternal:f,modifiers:p,hasImportantModifier:d,baseClassName:m,maybePostfixModifierPosition:h}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let b=!!h,g=r(b?m.substring(0,h):m);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const y=p.length===0?"":p.length===1?p[0]:s(p).join(":"),v=d?y+Fa:y,x=v+g;if(i.indexOf(x)>-1)continue;i.push(x);const S=o(g,b);for(let O=0;O<S.length;++O){const I=S[O];i.push(v+I)}l=u+(l.length>0?" "+l:l)}return l},vO=(...e)=>{let t=0,n,r,o="";for(;t<e.length;)(n=e[t++])&&(r=Ym(n))&&(o&&(o+=" "),o+=r);return o},Ym=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ym(e[r]))&&(n&&(n+=" "),n+=t);return n},wO=(e,...t)=>{let n,r,o,s;const i=l=>{const a=t.reduce((u,f)=>f(u),e());return n=gO(a),r=n.cache.get,o=n.cache.set,s=c,c(l)},c=l=>{const a=r(l);if(a)return a;const u=bO(l,n);return o(l,u),u};return s=i,(...l)=>s(vO(...l))},xO=[],Be=e=>{const t=n=>n[e]||xO;return t.isThemeGetter=!0,t},Jm=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Xm=/^\((?:(\w[\w-]*):)?(.+)\)$/i,SO=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,_O=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wn=e=>SO.test(e),ve=e=>!!e&&!Number.isNaN(Number(e)),xn=e=>!!e&&Number.isInteger(Number(e)),Kc=e=>e.endsWith("%")&&ve(e.slice(0,-1)),Qt=e=>_O.test(e),Zm=()=>!0,TO=e=>EO.test(e)&&!RO.test(e),nu=()=>!1,IO=e=>CO.test(e),kO=e=>OO.test(e),AO=e=>!se(e)&&!ie(e),MO=e=>Hn(e,tg,nu),se=e=>Jm.test(e),qn=e=>Hn(e,ng,TO),Vf=e=>Hn(e,zO,ve),PO=e=>Hn(e,og,Zm),NO=e=>Hn(e,rg,nu),Uf=e=>Hn(e,Qm,nu),$O=e=>Hn(e,eg,kO),zs=e=>Hn(e,sg,IO),ie=e=>Xm.test(e),bo=e=>hr(e,ng),jO=e=>hr(e,rg),Bf=e=>hr(e,Qm),LO=e=>hr(e,tg),DO=e=>hr(e,eg),Vs=e=>hr(e,sg,!0),FO=e=>hr(e,og,!0),Hn=(e,t,n)=>{const r=Jm.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},hr=(e,t,n=!1)=>{const r=Xm.exec(e);return r?r[1]?t(r[1]):n:!1},Qm=e=>e==="position"||e==="percentage",eg=e=>e==="image"||e==="url",tg=e=>e==="length"||e==="size"||e==="bg-size",ng=e=>e==="length",zO=e=>e==="number",rg=e=>e==="family-name",og=e=>e==="number"||e==="weight",sg=e=>e==="shadow",VO=()=>{const e=Be("color"),t=Be("font"),n=Be("text"),r=Be("font-weight"),o=Be("tracking"),s=Be("leading"),i=Be("breakpoint"),c=Be("container"),l=Be("spacing"),a=Be("radius"),u=Be("shadow"),f=Be("inset-shadow"),p=Be("text-shadow"),d=Be("drop-shadow"),m=Be("blur"),h=Be("perspective"),b=Be("aspect"),g=Be("ease"),y=Be("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],x=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...x(),ie,se],O=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],_=()=>[ie,se,l],R=()=>[wn,"full","auto",..._()],j=()=>[xn,"none","subgrid",ie,se],D=()=>["auto",{span:["full",xn,ie,se]},xn,ie,se],L=()=>[xn,"auto",ie,se],G=()=>["auto","min","max","fr",ie,se],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],C=()=>["auto",..._()],A=()=>[wn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],N=()=>[wn,"screen","full","dvw","lvw","svw","min","max","fit",..._()],P=()=>[wn,"screen","full","lh","dvh","lvh","svh","min","max","fit",..._()],k=()=>[e,ie,se],Y=()=>[...x(),Bf,Uf,{position:[ie,se]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],re=()=>["auto","cover","contain",LO,MO,{size:[ie,se]}],Z=()=>[Kc,bo,qn],T=()=>["","none","full",a,ie,se],$=()=>["",ve,bo,qn],z=()=>["solid","dashed","dotted","double"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>[ve,Kc,Bf,Uf],Q=()=>["","none",m,ie,se],K=()=>["none",ve,ie,se],M=()=>["none",ve,ie,se],U=()=>[ve,ie,se],q=()=>[wn,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qt],breakpoint:[Qt],color:[Zm],container:[Qt],"drop-shadow":[Qt],ease:["in","out","in-out"],font:[AO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qt],shadow:[Qt],spacing:["px",ve],text:[Qt],"text-shadow":[Qt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wn,se,ie,b]}],container:["container"],columns:[{columns:[ve,se,ie,c]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{"inset-s":R(),start:R()}],end:[{"inset-e":R(),end:R()}],"inset-bs":[{"inset-bs":R()}],"inset-be":[{"inset-be":R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[xn,"auto",ie,se]}],basis:[{basis:[wn,"full","auto",c,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ve,wn,"auto","initial","none",se]}],grow:[{grow:["",ve,ie,se]}],shrink:[{shrink:["",ve,ie,se]}],order:[{order:[xn,"first","last","none",ie,se]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pbs:[{pbs:_()}],pbe:[{pbe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mbs:[{mbs:C()}],mbe:[{mbe:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],"inline-size":[{inline:["auto",...N()]}],"min-inline-size":[{"min-inline":["auto",...N()]}],"max-inline-size":[{"max-inline":["none",...N()]}],"block-size":[{block:["auto",...P()]}],"min-block-size":[{"min-block":["auto",...P()]}],"max-block-size":[{"max-block":["none",...P()]}],w:[{w:[c,"screen",...A()]}],"min-w":[{"min-w":[c,"screen","none",...A()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",n,bo,qn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,FO,PO]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kc,se]}],"font-family":[{font:[jO,NO,t]}],"font-features":[{"font-features":[se]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ie,se]}],"line-clamp":[{"line-clamp":[ve,"none",ie,Vf]}],leading:[{leading:[s,..._()]}],"list-image":[{"list-image":["none",ie,se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:[ve,"from-font","auto",ie,qn]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[ve,"auto",ie,se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xn,ie,se],radial:["",ie,se],conic:[xn,ie,se]},DO,$O]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:T()}],"rounded-s":[{"rounded-s":T()}],"rounded-e":[{"rounded-e":T()}],"rounded-t":[{"rounded-t":T()}],"rounded-r":[{"rounded-r":T()}],"rounded-b":[{"rounded-b":T()}],"rounded-l":[{"rounded-l":T()}],"rounded-ss":[{"rounded-ss":T()}],"rounded-se":[{"rounded-se":T()}],"rounded-ee":[{"rounded-ee":T()}],"rounded-es":[{"rounded-es":T()}],"rounded-tl":[{"rounded-tl":T()}],"rounded-tr":[{"rounded-tr":T()}],"rounded-br":[{"rounded-br":T()}],"rounded-bl":[{"rounded-bl":T()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-bs":[{"border-bs":$()}],"border-w-be":[{"border-be":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...z(),"hidden","none"]}],"divide-style":[{divide:[...z(),"hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-bs":[{"border-bs":k()}],"border-color-be":[{"border-be":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:[...z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ve,ie,se]}],"outline-w":[{outline:["",ve,bo,qn]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",u,Vs,zs]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",f,Vs,zs]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[ve,qn]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",p,Vs,zs]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[ve,ie,se]}],"mix-blend":[{"mix-blend":[...ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[ie,se]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":x()}],"mask-image-conic-pos":[{"mask-conic":[ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,se]}],filter:[{filter:["","none",ie,se]}],blur:[{blur:Q()}],brightness:[{brightness:[ve,ie,se]}],contrast:[{contrast:[ve,ie,se]}],"drop-shadow":[{"drop-shadow":["","none",d,Vs,zs]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",ve,ie,se]}],"hue-rotate":[{"hue-rotate":[ve,ie,se]}],invert:[{invert:["",ve,ie,se]}],saturate:[{saturate:[ve,ie,se]}],sepia:[{sepia:["",ve,ie,se]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,se]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[ve,ie,se]}],"backdrop-contrast":[{"backdrop-contrast":[ve,ie,se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ve,ie,se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ve,ie,se]}],"backdrop-invert":[{"backdrop-invert":["",ve,ie,se]}],"backdrop-opacity":[{"backdrop-opacity":[ve,ie,se]}],"backdrop-saturate":[{"backdrop-saturate":[ve,ie,se]}],"backdrop-sepia":[{"backdrop-sepia":["",ve,ie,se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ve,"initial",ie,se]}],ease:[{ease:["linear","initial",g,ie,se]}],delay:[{delay:[ve,ie,se]}],animate:[{animate:["none",y,ie,se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,ie,se]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:K()}],"rotate-x":[{"rotate-x":K()}],"rotate-y":[{"rotate-y":K()}],"rotate-z":[{"rotate-z":K()}],scale:[{scale:M()}],"scale-x":[{"scale-x":M()}],"scale-y":[{"scale-y":M()}],"scale-z":[{"scale-z":M()}],"scale-3d":["scale-3d"],skew:[{skew:U()}],"skew-x":[{"skew-x":U()}],"skew-y":[{"skew-y":U()}],transform:[{transform:[ie,se,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:q()}],"translate-x":[{"translate-x":q()}],"translate-y":[{"translate-y":q()}],"translate-z":[{"translate-z":q()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mbs":[{"scroll-mbs":_()}],"scroll-mbe":[{"scroll-mbe":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pbs":[{"scroll-pbs":_()}],"scroll-pbe":[{"scroll-pbe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,se]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[ve,bo,qn,Vf]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UO=wO(VO);function Fe(...e){return UO(Ll(e))}const BO=QC("focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 rounded-md border border-transparent bg-clip-padding text-sm font-medium focus-visible:ring-[3px] aria-invalid:ring-[3px] [&_svg:not([class*='size-'])]:size-4 inline-flex items-center justify-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none group/button select-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80",outline:"border-border bg-background hover:bg-muted hover:text-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 aria-expanded:bg-muted aria-expanded:text-foreground shadow-xs",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 aria-expanded:bg-secondary aria-expanded:text-secondary-foreground",ghost:"hover:bg-muted hover:text-foreground dark:hover:bg-muted/50 aria-expanded:bg-muted aria-expanded:text-foreground",destructive:"bg-destructive/10 hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/20 text-destructive focus-visible:border-destructive/40 dark:hover:bg-destructive/30",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 gap-1.5 px-2.5 in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-2 has-data-[icon=inline-start]:pl-2",xs:"h-6 gap-1 rounded-[min(var(--radius-md),8px)] px-2 text-xs in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 gap-1 rounded-[min(var(--radius-md),10px)] px-2.5 in-data-[slot=button-group]:rounded-md has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5",lg:"h-10 gap-1.5 px-2.5 has-data-[icon=inline-end]:pr-3 has-data-[icon=inline-start]:pl-3",icon:"size-9","icon-xs":"size-6 rounded-[min(var(--radius-md),8px)] in-data-[slot=button-group]:rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8 rounded-[min(var(--radius-md),10px)] in-data-[slot=button-group]:rounded-md","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function ru(e){const t=ye.c(12);let n,r,o,s;t[0]!==e?({className:n,variant:o,size:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s):(n=t[1],r=t[2],o=t[3],s=t[4]);const i=o===void 0?"default":o,c=s===void 0?"default":s;let l;t[5]!==n||t[6]!==c||t[7]!==i?(l=Fe(BO({variant:i,size:c,className:n})),t[5]=n,t[6]=c,t[7]=i,t[8]=l):l=t[8];let a;return t[9]!==r||t[10]!==l?(a=E.jsx(ZC,{"data-slot":"button",className:l,...r}),t[9]=r,t[10]=l,t[11]=a):a=t[11],a}function WO(e){const t=ye.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(OC,{"data-slot":"alert-dialog",...n}),t[2]=n,t[3]=r):r=t[3],r}function HO(e){const t=ye.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=E.jsx(JC,{"data-slot":"alert-dialog-portal",...n}),t[2]=n,t[3]=r):r=t[3],r}function qO(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx(jC,{"data-slot":"alert-dialog-overlay",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function GO(e){const t=ye.c(11);let n,r,o;t[0]!==e?({className:n,size:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const s=o===void 0?"default":o;let i;t[4]===Symbol.for("react.memo_cache_sentinel")?(i=E.jsx(qO,{}),t[4]=i):i=t[4];let c;t[5]!==n?(c=Fe("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 bg-background ring-foreground/10 group/alert-dialog-content fixed top-1/2 left-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 gap-6 rounded-xl p-6 ring-1 duration-100 outline-none data-[size=default]:max-w-xs data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-lg",n),t[5]=n,t[6]=c):c=t[6];let l;return t[7]!==r||t[8]!==s||t[9]!==c?(l=E.jsxs(HO,{children:[i,E.jsx(YC,{"data-slot":"alert-dialog-content","data-size":s,className:c,...r})]}),t[7]=r,t[8]=s,t[9]=c,t[10]=l):l=t[10],l}function KO(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-6 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx("div",{"data-slot":"alert-dialog-header",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function YO(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx("div",{"data-slot":"alert-dialog-footer",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function JO(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("text-lg font-medium sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx(XC,{"data-slot":"alert-dialog-title",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function XO(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe(n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx(ru,{"data-slot":"alert-dialog-action",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function ZO(e){const t=ye.c(14);let n,r,o,s;t[0]!==e?({className:n,variant:o,size:s,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s):(n=t[1],r=t[2],o=t[3],s=t[4]);const i=o===void 0?"outline":o,c=s===void 0?"default":s;let l;t[5]!==n?(l=Fe(n),t[5]=n,t[6]=l):l=t[6];let a;t[7]!==c||t[8]!==i?(a=E.jsx(ru,{variant:i,size:c}),t[7]=c,t[8]=i,t[9]=a):a=t[9];let u;return t[10]!==r||t[11]!==l||t[12]!==a?(u=E.jsx(VC,{"data-slot":"alert-dialog-cancel",className:l,render:a,...r}),t[10]=r,t[11]=l,t[12]=a,t[13]=u):u=t[13],u}function QO(e){const t=ye.c(18),{open:n,children:r,onConfirm:o,onCancel:s}=e;let i;t[0]!==s?(i=m=>{m||s()},t[0]=s,t[1]=i):i=t[1];const c=i;let l;t[2]!==r?(l=E.jsx(KO,{children:E.jsx(JO,{className:"text-4xl",children:r})}),t[2]=r,t[3]=l):l=t[3];let a;t[4]!==o?(a=E.jsx(XO,{onClick:o,children:"Yes"}),t[4]=o,t[5]=a):a=t[5];let u;t[6]!==s?(u=E.jsx(ZO,{onClick:s,children:"No"}),t[6]=s,t[7]=u):u=t[7];let f;t[8]!==a||t[9]!==u?(f=E.jsxs(YO,{children:[a,u]}),t[8]=a,t[9]=u,t[10]=f):f=t[10];let p;t[11]!==l||t[12]!==f?(p=E.jsxs(GO,{children:[l,f]}),t[11]=l,t[12]=f,t[13]=p):p=t[13];let d;return t[14]!==c||t[15]!==n||t[16]!==p?(d=E.jsx(WO,{open:n,onOpenChange:c,children:p}),t[14]=c,t[15]=n,t[16]=p,t[17]=d):d=t[17],d}const eT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200s-89.5 200-200 200"})]}),tT=w.forwardRef(eT),nT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8"})]}),rT=w.forwardRef(nT);function ig(e){const t=ye.c(10);let n,r,o;t[0]!==e?({className:n,size:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const s=o===void 0?"default":o;let i;t[4]!==n?(i=Fe("ring-foreground/10 bg-card text-card-foreground gap-6 overflow-hidden rounded-xl py-6 text-sm shadow-xs ring-1 has-[>img:first-child]:pt-0 data-[size=sm]:gap-4 data-[size=sm]:py-4 *:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl group/card flex flex-col",n),t[4]=n,t[5]=i):i=t[5];let c;return t[6]!==r||t[7]!==s||t[8]!==i?(c=E.jsx("div",{"data-slot":"card","data-size":s,className:i,...r}),t[6]=r,t[7]=s,t[8]=i,t[9]=c):c=t[9],c}function cg(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("gap-1 rounded-t-xl px-6 group-data-[size=sm]/card:px-4 [.border-b]:pb-6 group-data-[size=sm]/card:[.border-b]:pb-4 group/card-header @container/card-header grid auto-rows-min items-start has-data-[slot=card-action]:grid-cols-[1fr_auto] has-data-[slot=card-description]:grid-rows-[auto_auto]",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx("div",{"data-slot":"card-header",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function ag(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("text-base leading-normal font-medium group-data-[size=sm]/card:text-sm",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx("div",{"data-slot":"card-title",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function lg(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("px-6 group-data-[size=sm]/card:px-4",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx("div",{"data-slot":"card-content",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}const oT=e=>{const t=ye.c(5),{log:n}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=E.jsx(cg,{children:E.jsx(ag,{children:"Log"})}),t[0]=r):r=t[0];let o;t[1]!==n?(o=n.map(sT),t[1]=n,t[2]=o):o=t[2];let s;return t[3]!==o?(s=E.jsxs(ig,{children:[r,E.jsx(lg,{children:E.jsx("div",{className:"h-[600px] overflow-auto px-4",children:o})})]}),t[3]=o,t[4]=s):s=t[4],s};function sT(e,t){return E.jsx("div",{className:"flex items-center gap-1",children:e.type==="move"?E.jsxs(E.Fragment,{children:[e.player===dn?E.jsx(tT,{}):E.jsx(rT,{className:"text-black"}),E.jsx("span",{children:e.pos})]}):E.jsx("span",{children:e.message})},t)}function iT(e){const t=ye.c(2),{log:n}=e;let r;return t[0]!==n?(r=E.jsx(oT,{log:n}),t[0]=n,t[1]=r):r=t[1],r}const cT=w.forwardRef(function(t,n){const{className:r,render:o,orientation:s="horizontal",...i}=t;return Xe("div",t,{state:{orientation:s},ref:n,props:[{role:"separator","aria-orientation":s},i]})});function Wf(e){const t=ye.c(10);let n,r,o;t[0]!==e?({className:n,orientation:o,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const s=o===void 0?"horizontal":o;let i;t[4]!==n?(i=Fe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:w-px data-[orientation=vertical]:self-stretch",n),t[4]=n,t[5]=i):i=t[5];let c;return t[6]!==s||t[7]!==r||t[8]!==i?(c=E.jsx(cT,{"data-slot":"separator",orientation:s,className:i,...r}),t[6]=s,t[7]=r,t[8]=i,t[9]=c):c=t[9],c}function Hf(e,t){return t[e]===Vn.AI?"ai":"player"}function aT(e){const t=ye.c(25),{score:n,users:r,history:o}=e;let s,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=E.jsx(cg,{children:E.jsx(ag,{children:mS()})}),i=E.jsx(Wf,{}),t[0]=s,t[1]=i):(s=t[0],i=t[1]);let c;t[2]!==r?(c=Hf(jn,r),t[2]=r,t[3]=c):c=t[3];let l;t[4]!==n.black||t[5]!==c?(l=E.jsxs("div",{children:["black(",c,"): ",n.black]}),t[4]=n.black,t[5]=c,t[6]=l):l=t[6];let a;t[7]!==r?(a=Hf($n,r),t[7]=r,t[8]=a):a=t[8];let u;t[9]!==n.white||t[10]!==a?(u=E.jsxs("div",{children:["white(",a,"): ",n.white]}),t[9]=n.white,t[10]=a,t[11]=u):u=t[11];let f;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=E.jsx(Wf,{}),t[12]=f):f=t[12];let p;t[13]!==o.win?(p=E.jsxs("div",{children:["win: ",o.win]}),t[13]=o.win,t[14]=p):p=t[14];let d;t[15]!==o.lose?(d=E.jsxs("div",{children:["lose: ",o.lose]}),t[15]=o.lose,t[16]=d):d=t[16];let m;t[17]!==o.draw?(m=E.jsxs("div",{children:["draw: ",o.draw]}),t[17]=o.draw,t[18]=m):m=t[18];let h;return t[19]!==m||t[20]!==l||t[21]!==u||t[22]!==p||t[23]!==d?(h=E.jsxs(ig,{className:"flex flex-col gap-2",children:[s,i,E.jsxs(lg,{className:"flex flex-col gap-1 text-sm",children:[l,u,f,p,d,m]})]}),t[19]=m,t[20]=l,t[21]=u,t[22]=p,t[23]=d,t[24]=h):h=t[24],h}function lT(e){const t=ye.c(4),{score:n,users:r}=e,o=Do(wh);let s;return t[0]!==o||t[1]!==n||t[2]!==r?(s=E.jsx(aT,{score:n,users:r,history:o}),t[0]=o,t[1]=n,t[2]=r,t[3]=s):s=t[3],s}const uT=w.lazy(()=>_r(()=>import("./SmartSettingModal-CG2C2M9c.js"),__vite__mapDeps([7,1])).then(e=>({default:e.SmartSettingModal}))),fT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"m487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14c-11.1-35.6-30-67.8-54.7-94.6c-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7c-36.7-8.2-74.3-7.8-109.2 0c-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3c-24.7 26.7-43.6 58.9-54.7 94.6c-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14c11.1 35.6 30 67.8 54.7 94.6c3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7c36.7 8.2 74.3 7.8 109.2 0c5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3c24.7-26.7 43.6-58.9 54.7-94.6c1.5-5.5-.7-11.3-5.6-14.1M256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80s80 35.9 80 80s-35.9 80-80 80"})]}),dT=w.forwardRef(fT),pT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M400 54.1c63 45 104 118.6 104 201.9c0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4C7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31c-41.5 30.8-68 79.6-68 134.9c-.1 92.3 74.5 168.1 168 168.1c91.6 0 168.6-74.2 168-169.1c-.3-51.8-24.7-101.8-68.1-134c-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8M296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24"})]}),hT=w.forwardRef(pT),mT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 512 512",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215c-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176c0-97.267-78.716-176-176-176c-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12"})]}),gT=w.forwardRef(mT),yT=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 640 512",width:"1.5em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"currentColor",d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32S80 82.1 80 144s50.1 112 112 112m76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2M480 256c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96m48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4c24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48c0-61.9-50.1-112-112-112"})]}),bT=w.forwardRef(yT);function vT(e){const t=w.useRef(!0);t.current&&(t.current=!1,e())}function qf({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=w.useRef(e!==void 0),[s,i]=w.useState(t),c=o?e:s,l=w.useCallback(a=>{o||i(a)},[]);return[c,l]}const ug=w.createContext(null),fg=w.createContext(null);function Jt(){const e=w.useContext(ug);if(e===null)throw new Error(Yt(60));return e}function dg(){const e=w.useContext(fg);if(e===null)throw new Error(Yt(61));return e}let Gf=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const wT={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},xT={valid(e){return e===null?null:e?{[Gf.valid]:""}:{[Gf.invalid]:""}}},ST=w.createContext({invalid:void 0,name:void 0,validityData:{state:wT,errors:[],error:"",value:"",initialValue:null},setValidityData:at,disabled:void 0,touched:!1,setTouched:at,dirty:!1,setDirty:at,filled:!1,setFilled:at,focused:!1,setFocused:at,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=Je)=>e,getInputValidationProps:(e=Je)=>e,inputRef:{current:null},commit:async()=>{}}});function ou(e=!0){const t=w.useContext(ST);if(t.setValidityData===at&&!e)throw new Error(Yt(28));return t}const _T=w.createContext({controlId:void 0,registerControlId:at,labelId:void 0,setLabelId:at,messageIds:[],setMessageIds:at,getDescriptionProps:e=>e});function pg(){return w.useContext(_T)}function hg(e={}){const{id:t,implicit:n=!1,controlRef:r}=e,{controlId:o,registerControlId:s}=pg(),i=$m(t),c=n?o:void 0,l=wt(()=>Symbol("labelable-control")),a=w.useRef(!1),u=w.useRef(t!=null),f=de(()=>{!a.current||s===at||(a.current=!1,s(l.current,void 0))});return fe(()=>{if(s===at)return;let p;if(n){const d=r?.current;Ie(d)&&d.closest("label")!=null?p=t??null:p=c??i}else if(t!=null)u.current=!0,p=t;else if(u.current)p=i;else{f();return}if(p===void 0){f();return}a.current=!0,s(l.current,p)},[t,r,c,s,n,i,l,f]),w.useEffect(()=>f,[f]),o??i}const ET=(e,t)=>Object.is(e,t);function Kr(e,t,n){return e==null||t==null?Object.is(e,t):n(e,t)}function RT(e,t,n){return!e||e.length===0?!1:e.some(r=>r===void 0?!1:Kr(t,r,n))}function qo(e,t,n){return!e||e.length===0?-1:e.findIndex(r=>r===void 0?!1:Kr(r,t,n))}function CT(e,t,n){return e.filter(r=>!Kr(t,r,n))}function za(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function mg(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function OT(e){if(!Array.isArray(e))return e!=null&&!("null"in e);if(mg(e)){for(const t of e)for(const n of t.items)if(n&&n.value==null&&n.label!=null)return!0;return!1}for(const t of e)if(t&&t.value==null&&t.label!=null)return!0;return!1}function TT(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return za(e)}function Cr(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?za(e.value):za(e)}function gg(e,t,n){function r(){return TT(e,n)}if(n&&e!=null)return n(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(t&&!Array.isArray(t))return t[e]??r();if(Array.isArray(t)){const o=mg(t)?t.flatMap(s=>s.items):t;if(e==null||typeof e!="object"){const s=o.find(i=>i.value===e);return s&&s.label!=null?s.label:r()}if("value"in e){const s=o.find(i=>i&&i.value===e.value);if(s&&s.label!=null)return s.label}}return r()}function IT(e,t,n){return e.reduce((r,o,s)=>(s>0&&r.push(", "),r.push(E.jsx(w.Fragment,{children:gg(o,t,n)},s)),r),[])}const he={id:ue(e=>e.id),modal:ue(e=>e.modal),multiple:ue(e=>e.multiple),items:ue(e=>e.items),itemToStringLabel:ue(e=>e.itemToStringLabel),itemToStringValue:ue(e=>e.itemToStringValue),isItemEqualToValue:ue(e=>e.isItemEqualToValue),value:ue(e=>e.value),hasSelectedValue:ue(e=>{const{value:t,multiple:n,itemToStringValue:r}=e;return t==null?!1:n&&Array.isArray(t)?t.length>0:Cr(t,r)!==""}),hasNullItemLabel:ue((e,t)=>t?OT(e.items):!1),open:ue(e=>e.open),mounted:ue(e=>e.mounted),forceMount:ue(e=>e.forceMount),transitionStatus:ue(e=>e.transitionStatus),openMethod:ue(e=>e.openMethod),activeIndex:ue(e=>e.activeIndex),selectedIndex:ue(e=>e.selectedIndex),isActive:ue((e,t)=>e.activeIndex===t),isSelected:ue((e,t,n)=>{const r=e.isItemEqualToValue,o=e.value;return e.multiple?Array.isArray(o)&&o.some(s=>Kr(n,s,r)):e.selectedIndex===t&&e.selectedIndex!==null?!0:Kr(n,o,r)}),isSelectedByFocus:ue((e,t)=>e.selectedIndex===t),popupProps:ue(e=>e.popupProps),triggerProps:ue(e=>e.triggerProps),triggerElement:ue(e=>e.triggerElement),positionerElement:ue(e=>e.positionerElement),listElement:ue(e=>e.listElement),scrollUpArrowVisible:ue(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:ue(e=>e.scrollDownArrowVisible),hasScrollArrows:ue(e=>e.hasScrollArrows)},kT=w.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:at,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function yg(){return w.useContext(kT)}function AT(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function MT(e){const{enabled:t=!0,value:n,id:r,name:o,controlRef:s,commit:i}=e,{formRef:c}=yg(),{invalid:l,markedDirtyRef:a,validityData:u,setValidityData:f}=ou(),p=de(e.getValue);fe(()=>{if(!t)return;let d=n;d===void 0&&(d=p()),u.initialValue===null&&d!==null&&f(m=>({...m,initialValue:d}))},[t,f,n,u.initialValue,p]),fe(()=>{!t||!r||c.current.fields.set(r,{getValue:p,name:o,controlRef:s,validityData:AT(u,l),validate(d=!0){let m=n;m===void 0&&(m=p()),a.current=!0,d?Qr.flushSync(()=>i(m)):i(m)}})},[i,s,t,c,p,r,l,a,o,u,n]),fe(()=>{const d=c.current.fields;return()=>{r&&d.delete(r)}},[c,r])}function PT(e,t){const n=w.useRef(e),r=de(t);fe(()=>{n.current!==e&&r(n.current)},[e,r]),fe(()=>{n.current=e},[e])}function NT(e){const{id:t,value:n,defaultValue:r=null,onValueChange:o,open:s,defaultOpen:i=!1,onOpenChange:c,name:l,autoComplete:a,disabled:u=!1,readOnly:f=!1,required:p=!1,modal:d=!0,actionsRef:m,inputRef:h,onOpenChangeComplete:b,items:g,multiple:y=!1,itemToStringLabel:v,itemToStringValue:x,isItemEqualToValue:S=ET,highlightItemOnHover:O=!0,children:I}=e,{clearErrors:_}=yg(),{setDirty:R,setTouched:j,setFocused:D,shouldValidateOnChange:L,validityData:G,setFilled:B,name:H,disabled:C,validation:A,validationMode:N}=ou(),P=hg({id:t}),k=C||u,Y=H??l,[V,re]=qf({controlled:n,default:y?r??cf:r,name:"Select",state:"value"}),[Z,T]=qf({controlled:s,default:i,name:"Select",state:"open"}),$=w.useRef([]),z=w.useRef([]),ne=w.useRef(null),F=w.useRef(null),Q=w.useRef(0),K=w.useRef(null),M=w.useRef([]),U=w.useRef(!1),q=w.useRef(!1),le=w.useRef(null),X=w.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),te=w.useRef(!1),{mounted:ee,setMounted:J,transitionStatus:oe}=uc(Z),{openMethod:W,triggerProps:ce,reset:ge}=Pm(Z),ae=wt(()=>new Im({id:P,modal:d,multiple:y,itemToStringLabel:v,itemToStringValue:x,isItemEqualToValue:S,value:V,open:Z,mounted:ee,transitionStatus:oe,items:g,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,Ae=me(ae,he.activeIndex),je=me(ae,he.selectedIndex),qe=me(ae,he.triggerElement),_e=me(ae,he.positionerElement),xe=w.useMemo(()=>y&&Array.isArray(V)&&V.length===0?"":Cr(V,x),[y,V,x]),Oe=w.useMemo(()=>y&&Array.isArray(V)?V.map(be=>Cr(be,x)):Cr(V,x),[y,V,x]),Ce=lt(ae.state.triggerElement);MT({id:P,commit:A.commit,value:V,controlRef:Ce,name:Y,getValue:()=>Oe});const Xt=w.useRef(V);fe(()=>{V!==Xt.current&&ae.set("forceMount",!0)},[ae,V]),fe(()=>{B(y?Array.isArray(V)&&V.length>0:V!=null)},[y,V,B]),fe(function(){if(Z)return;const Te=M.current;if(y){const it=Array.isArray(V)?V:[];if(it.length===0){ae.set("selectedIndex",null);return}const Ue=it[it.length-1],br=qo(Te,Ue,S);ae.set("selectedIndex",br===-1?null:br);return}const st=qo(Te,V,S);ae.set("selectedIndex",st===-1?null:st)},[y,Z,V,M,S,ae]),PT(V,()=>{_(Y),R(V!==G.initialValue),L()?A.commit(V):A.commit(V,!0)});const yn=de((be,Te)=>{if(c?.(be,Te),!Te.isCanceled&&(T(be),!be&&(Te.reason===cc||Te.reason===Kl)&&(j(!0),D(!1),N==="onBlur"&&A.commit(V)),!be&&ae.state.activeIndex!==null)){const st=$.current[ae.state.activeIndex];queueMicrotask(()=>{st?.setAttribute("tabindex","-1")})}}),Zt=de(()=>{J(!1),ae.set("activeIndex",null),ge(),b?.(!1)});io({enabled:!m,open:Z,ref:ne,onComplete(){Z||Zt()}}),w.useImperativeHandle(m,()=>({unmount:Zt}),[Zt]);const $t=de((be,Te)=>{o?.(be,Te),!Te.isCanceled&&re(be)}),ft=de(()=>{const be=ae.state.listElement||ne.current;if(!be)return;const Te=be.scrollTop,st=be.scrollTop+be.clientHeight,it=Te>1,Ue=st<be.scrollHeight-1;ae.state.scrollUpArrowVisible!==it&&ae.set("scrollUpArrowVisible",it),ae.state.scrollDownArrowVisible!==Ue&&ae.set("scrollDownArrowVisible",Ue)}),Se=Am({open:Z,onOpenChange:yn,elements:{reference:qe,floating:_e}}),Ve=YE(Se,{enabled:!f&&!k,event:"mousedown"}),Ze=Rm(Se,{bubbles:!1}),Me=bC(Se,{enabled:!f&&!k,listRef:$,activeIndex:Ae,selectedIndex:je,disabledIndices:cf,onNavigate(be){be===null&&!Z||ae.set("activeIndex",be)},focusItemOnHover:!1}),dt=xC(Se,{enabled:!f&&!k&&(Z||!y),listRef:z,activeIndex:Ae,selectedIndex:je,onMatch(be){Z?ae.set("activeIndex",be):$t(M.current[be],ke("none"))},onTypingChange(be){U.current=be}}),{getReferenceProps:Ot,getFloatingProps:Tt,getItemProps:bn}=Mm([Ve,Ze,Me,dt]),vn=w.useMemo(()=>ac(Ot(),ce,P?{id:P}:Je),[Ot,ce,P]);vT(()=>{ae.update({popupProps:Tt(),triggerProps:vn})}),fe(()=>{ae.update({id:P,modal:d,multiple:y,value:V,open:Z,mounted:ee,transitionStatus:oe,popupProps:Tt(),triggerProps:vn,items:g,itemToStringLabel:v,itemToStringValue:x,isItemEqualToValue:S,openMethod:W})},[ae,P,d,y,V,Z,ee,oe,Tt,vn,g,v,x,S,W]);const gr=w.useMemo(()=>({store:ae,name:Y,required:p,disabled:k,readOnly:f,multiple:y,itemToStringLabel:v,itemToStringValue:x,highlightItemOnHover:O,setValue:$t,setOpen:yn,listRef:$,popupRef:ne,scrollHandlerRef:F,handleScrollArrowVisibility:ft,scrollArrowsMountedCountRef:Q,getItemProps:bn,events:Se.context.events,valueRef:K,valuesRef:M,labelsRef:z,typingRef:U,selectionRef:X,selectedItemTextRef:le,validation:A,onOpenChangeComplete:b,keyboardActiveRef:q,alignItemWithTriggerActiveRef:te,initialValueRef:Xt}),[ae,Y,p,k,f,y,v,x,O,$t,yn,bn,Se.context.events,A,b,ft]),yr=Gr(h,A.inputRef),po=y&&Array.isArray(V)&&V.length>0,ho=w.useMemo(()=>!y||!Array.isArray(V)||!Y?null:V.map(be=>{const Te=Cr(be,x);return E.jsx("input",{type:"hidden",name:Y,value:Te},Te)}),[y,V,Y,x]);return E.jsx(ug.Provider,{value:gr,children:E.jsxs(fg.Provider,{value:Se,children:[I,E.jsx("input",{...A.getInputValidationProps({onFocus(){ae.state.triggerElement?.focus({focusVisible:!0})},onChange(be){if(be.nativeEvent.defaultPrevented)return;const Te=be.target.value,st=ke(ic,be.nativeEvent);function it(){if(y)return;const Ue=M.current.find(br=>Cr(br,x).toLowerCase()===Te.toLowerCase());Ue!=null&&(R(Ue!==G.initialValue),$t(Ue,st),L()&&A.commit(Ue))}ae.set("forceMount",!0),queueMicrotask(it)}}),name:y?void 0:Y,autoComplete:a,value:xe,disabled:k,required:p&&!po,readOnly:f,ref:yr,style:Y?CE:Yl,tabIndex:-1,"aria-hidden":!0}),ho]})})}function $T(e){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e,"::before"),r=window.getComputedStyle(e,"::after");if(!(n.content!=="none"||r.content!=="none"))return t;const s=parseFloat(n.width)||0,i=parseFloat(n.height)||0,c=parseFloat(r.width)||0,l=parseFloat(r.height)||0,a=Math.max(t.width,s,c),u=Math.max(t.height,i,l),f=a-t.width,p=u-t.height;return{left:t.left-f/2,right:t.right+f/2,top:t.top-p/2,bottom:t.bottom+p/2}}const Us=2,jT=400,Kf=200,LT={...NC,...xT,value:()=>null},DT=w.forwardRef(function(t,n){const{render:r,className:o,id:s,disabled:i=!1,nativeButton:c=!0,...l}=t,{setTouched:a,setFocused:u,validationMode:f,state:p,disabled:d}=ou(),{labelId:m}=pg(),{store:h,setOpen:b,selectionRef:g,validation:y,readOnly:v,required:x,alignItemWithTriggerActiveRef:S,disabled:O,keyboardActiveRef:I}=Jt(),_=d||O||i,R=me(h,he.open),j=me(h,he.value),D=me(h,he.triggerProps),L=me(h,he.positionerElement),G=me(h,he.listElement),B=me(h,he.id),H=me(h,he.hasSelectedValue),C=!H&&R,A=me(h,he.hasNullItemLabel,C),N=s??B;hg({id:N});const P=lt(L),k=w.useRef(null),{getButtonProps:Y,buttonRef:V}=hc({disabled:_,native:c}),re=de(M=>{h.set("triggerElement",M)}),Z=Gr(n,k,V,re),T=yt(),$=yt(),z=yt(),ne=yt();w.useEffect(()=>{if(R)return!(H||A)?z.start(jT,()=>{g.current.allowUnselectedMouseUp=!0,g.current.allowSelectedMouseUp=!0}):ne.start(Kf,()=>{g.current.allowUnselectedMouseUp=!0,z.start(Kf,()=>{g.current.allowSelectedMouseUp=!0})}),()=>{z.clear(),ne.clear()};g.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},$.clear()},[R,H,A,g,$,z,ne]);const F=w.useMemo(()=>G?.id??os(L)?.id,[G,L]),Q=ac(D,{id:N,role:"combobox","aria-expanded":R?"true":"false","aria-haspopup":"listbox","aria-controls":R?F:void 0,"aria-labelledby":m,"aria-readonly":v||void 0,"aria-required":x||void 0,tabIndex:_?-1:0,ref:Z,onFocus(M){u(!0),R&&S.current&&b(!1,ke(ic,M.nativeEvent)),T.start(0,()=>{h.set("forceMount",!0)})},onBlur(M){Re(L,M.relatedTarget)||(a(!0),u(!1),f==="onBlur"&&y.commit(j))},onPointerMove(){I.current=!1},onKeyDown(){I.current=!0},onMouseDown(M){if(R)return;const U=Ne(M.currentTarget);function q(le){if(!k.current)return;const X=le.target;if(Re(k.current,X)||Re(P.current,X)||X===k.current)return;const te=$T(k.current);le.clientX>=te.left-Us&&le.clientX<=te.right+Us&&le.clientY>=te.top-Us&&le.clientY<=te.bottom+Us||b(!1,ke(wE,le))}$.start(0,()=>{U.addEventListener("mouseup",q,{once:!0})})}},y.getValidationProps,l,Y);Q.role="combobox";const K={...p,open:R,disabled:_,value:j,readOnly:v,placeholder:!H};return Xe("button",t,{ref:[n,k],state:K,stateAttributesMapping:LT,props:Q})}),FT={value:()=>null},zT=w.forwardRef(function(t,n){const{className:r,render:o,children:s,placeholder:i,...c}=t,{store:l,valueRef:a}=Jt(),u=me(l,he.value),f=me(l,he.items),p=me(l,he.itemToStringLabel),d=me(l,he.hasSelectedValue),m=!d&&i!=null&&s==null,h=me(l,he.hasNullItemLabel,m),b={value:u,placeholder:!d};let g=null;return typeof s=="function"?g=s(u):s!=null?g=s:!d&&i!=null&&!h?g=i:Array.isArray(u)?g=IT(u,f,p):g=gg(u,f,p),Xe("span",t,{state:b,ref:[n,a],props:[{children:g},c],stateAttributesMapping:FT})}),VT=w.forwardRef(function(t,n){const{className:r,render:o,...s}=t,{store:i}=Jt(),l={open:me(i,he.open)};return Xe("span",t,{state:l,ref:n,props:[{"aria-hidden":!0,children:""},s],stateAttributesMapping:PC})}),UT=w.createContext(void 0),BT=w.forwardRef(function(t,n){const{store:r}=Jt(),o=me(r,he.mounted),s=me(r,he.forceMount);return o||s?E.jsx(UT.Provider,{value:!0,children:E.jsx(mm,{ref:n,...t})}):null}),bg=w.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function WT(){return w.useContext(bg)}function HT(e){const{children:t,elementsRef:n,labelsRef:r,onMapChange:o}=e,s=de(o),i=w.useRef(0),c=wt(GT).current,l=wt(qT).current,[a,u]=w.useState(0),f=w.useRef(a),p=de((g,y)=>{l.set(g,y??null),f.current+=1,u(f.current)}),d=de(g=>{l.delete(g),f.current+=1,u(f.current)}),m=w.useMemo(()=>{const g=new Map;return Array.from(l.keys()).filter(v=>v.isConnected).sort(KT).forEach((v,x)=>{const S=l.get(v)??{};g.set(v,{...S,index:x})}),g},[l,a]);fe(()=>{if(typeof MutationObserver!="function"||m.size===0)return;const g=new MutationObserver(y=>{const v=new Set,x=S=>v.has(S)?v.delete(S):v.add(S);y.forEach(S=>{S.removedNodes.forEach(x),S.addedNodes.forEach(x)}),v.size===0&&(f.current+=1,u(f.current))});return m.forEach((y,v)=>{v.parentElement&&g.observe(v.parentElement,{childList:!0})}),()=>{g.disconnect()}},[m]),fe(()=>{f.current===a&&(n.current.length!==m.size&&(n.current.length=m.size),r&&r.current.length!==m.size&&(r.current.length=m.size),i.current=m.size),s(m)},[s,m,n,r,a]),fe(()=>()=>{n.current=[]},[n]),fe(()=>()=>{r&&(r.current=[])},[r]);const h=de(g=>(c.add(g),()=>{c.delete(g)}));fe(()=>{c.forEach(g=>g(m))},[c,m]);const b=w.useMemo(()=>({register:p,unregister:d,subscribeMapChange:h,elementsRef:n,labelsRef:r,nextIndexRef:i}),[p,d,h,n,r,i]);return E.jsx(bg.Provider,{value:b,children:t})}function qT(){return new Map}function GT(){return new Set}function KT(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const YT=w.createContext(void 0);function JT(){return w.useContext(YT)?.direction??"ltr"}const XT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:c,middlewareData:l}=t,{element:a,padding:u=0,offsetParent:f="real"}=hn(e,t)||{};if(a==null)return{};const p=Jh(u),d={x:n,y:r},m=Gl(o),h=ql(m),b=await i.getDimensions(a),g=m==="y",y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",S=s.reference[h]+s.reference[m]-d[m]-s.floating[h],O=d[m]-s.reference[m],I=f==="real"?await i.getOffsetParent?.(a):c.floating;let _=c.floating[x]||s.floating[h];(!_||!await i.isElement?.(I))&&(_=c.floating[x]||s.floating[h]);const R=S/2-O/2,j=_/2-b[h]/2-1,D=Math.min(p[y],j),L=Math.min(p[v],j),G=D,B=_-b[h]-L,H=_/2-b[h]/2+R,C=ka(G,H,B),A=!l.arrow&&Wn(o)!=null&&H!==C&&s.reference[h]/2-(H<G?D:L)-b[h]/2<0,N=A?H<G?H-G:H-B:0;return{[m]:d[m]+N,data:{[m]:C,centerOffset:H-C-N,...A&&{alignmentOffset:N}},reset:A}}}),ZT=(e,t)=>({...XT(e),options:[e,t]}),QT={name:"hide",async fn(e){const{width:t,height:n,x:r,y:o}=e.rects.reference,s=t===0&&n===0&&r===0&&o===0;return{data:{referenceHidden:(await $R().fn(e)).data?.referenceHidden||s}}}},eI={sideX:"left",sideY:"top"};function vg(e,t,n){const r=e==="inline-start"||e==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[t]}function Yf(e,t,n){const{rects:r,placement:o}=e;return{side:vg(t,vt(o),n),align:Wn(o)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function tI(e){const{anchor:t,positionMethod:n="absolute",side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,collisionBoundary:c,collisionPadding:l=5,sticky:a=!1,arrowPadding:u=5,disableAnchorTracking:f=!1,keepMounted:p=!1,floatingRootContext:d,mounted:m,collisionAvoidance:h,shiftCrossAxis:b=!1,nodeId:g,adaptiveOrigin:y,lazyFlip:v=!1,externalTree:x}=e,[S,O]=w.useState(null);!m&&S!==null&&O(null);const I=h.side||"flip",_=h.align||"flip",R=h.fallbackAxisSide||"end",j=typeof t=="function"?t:void 0,D=de(j),L=j?D:t,G=lt(t),H=JT()==="rtl",C=S||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":H?"left":"right","inline-start":H?"right":"left"}[r],A=s==="center"?C:`${C}-${s}`;let N=l;const P=1,k=r==="bottom"?P:0,Y=r==="top"?P:0,V=r==="right"?P:0,re=r==="left"?P:0;typeof N=="number"?N={top:N+k,right:N+re,bottom:N+Y,left:N+V}:N&&(N={top:(N.top||0)+k,right:(N.right||0)+re,bottom:(N.bottom||0)+Y,left:(N.left||0)+V});const Z={boundary:c==="clipping-ancestors"?"clippingAncestors":c,padding:N},T=w.useRef(null),$=lt(o),z=lt(i),Q=[kR(Se=>{const Ve=Yf(Se,r,H),Ze=typeof $.current=="function"?$.current(Ve):$.current,Me=typeof z.current=="function"?z.current(Ve):z.current;return{mainAxis:Ze,crossAxis:Me,alignmentAxis:Me}},[typeof o!="function"?o:0,typeof i!="function"?i:0,H,r])],K=_==="none"&&I!=="shift",M=!K&&(a||b||I==="shift"),U=I==="none"?null:PR({...Z,padding:{top:N.top+P,right:N.right+P,bottom:N.bottom+P,left:N.left+P},mainAxis:!b&&I==="flip",crossAxis:_==="flip"?"alignment":!1,fallbackAxisSideDirection:R}),q=K?null:AR(Se=>{const Ve=Ne(Se.elements.floating).documentElement;return{...Z,rootBoundary:b?{x:0,y:0,width:Ve.clientWidth,height:Ve.clientHeight}:void 0,mainAxis:_!=="none",crossAxis:M,limiter:a||b?void 0:MR(Ze=>{if(!T.current)return{};const{width:Me,height:dt}=T.current.getBoundingClientRect(),Ot=Et(vt(Ze.placement)),Tt=Ot==="y"?Me:dt,bn=Ot==="y"?N.left+N.right:N.top+N.bottom;return{offset:Tt/2+bn/2}})}},[Z,a,b,N,_]);I==="shift"||_==="shift"||s==="center"?Q.push(q,U):Q.push(U,q),Q.push(NR({...Z,apply({elements:{floating:Se},rects:{reference:Ve},availableWidth:Ze,availableHeight:Me}){const dt=Se.style;dt.setProperty("--available-width",`${Ze}px`),dt.setProperty("--available-height",`${Me}px`),dt.setProperty("--anchor-width",`${Ve.width}px`),dt.setProperty("--anchor-height",`${Ve.height}px`)}}),ZT(()=>({element:T.current||document.createElement("div"),padding:u,offsetParent:"floating"}),[u]),{name:"transformOrigin",fn(Se){const{elements:Ve,middlewareData:Ze,placement:Me,rects:dt,y:Ot}=Se,Tt=vt(Me),bn=Et(Tt),vn=T.current,gr=Ze.arrow?.x||0,yr=Ze.arrow?.y||0,po=vn?.clientWidth||0,ho=vn?.clientHeight||0,be=gr+po/2,Te=yr+ho/2,st=Math.abs(Ze.shift?.y||0),it=dt.reference.height/2,Ue=typeof o=="function"?o(Yf(Se,r,H)):o,br=st>Ue,gu={top:`${be}px calc(100% + ${Ue}px)`,bottom:`${be}px ${-Ue}px`,left:`calc(100% + ${Ue}px) ${Te}px`,right:`${-Ue}px ${Te}px`}[Tt],Iy=`${be}px ${dt.reference.y+it-Ot}px`;return Ve.floating.style.setProperty("--transform-origin",M&&bn==="y"&&br?Iy:gu),{}}},QT,y),fe(()=>{!m&&d&&d.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[m,d]);const le=w.useMemo(()=>({elementResize:!f&&typeof ResizeObserver<"u",layoutShift:!f&&typeof IntersectionObserver<"u"}),[f]),{refs:X,elements:te,x:ee,y:J,middlewareData:oe,update:W,placement:ce,context:ge,isPositioned:ae,floatingStyles:Ae}=pC({rootContext:d,placement:A,middleware:Q,strategy:n,whileElementsMounted:p?void 0:(...Se)=>Af(...Se,le),nodeId:g,externalTree:x}),{sideX:je,sideY:qe}=oe.adaptiveOrigin||eI,_e=ae?n:"fixed",xe=w.useMemo(()=>{const Se=y?{position:_e,[je]:ee,[qe]:J}:{position:_e,...Ae};return ae||(Se.opacity=0),Se},[y,_e,je,ee,qe,J,Ae,ae]),Oe=w.useRef(null);fe(()=>{if(!m)return;const Se=G.current,Ve=typeof Se=="function"?Se():Se,Me=(Jf(Ve)?Ve.current:Ve)||null||null;Me!==Oe.current&&(X.setPositionReference(Me),Oe.current=Me)},[m,X,L,G]),w.useEffect(()=>{if(!m)return;const Se=G.current;typeof Se!="function"&&Jf(Se)&&Se.current!==Oe.current&&(X.setPositionReference(Se.current),Oe.current=Se.current)},[m,X,L,G]),w.useEffect(()=>{if(p&&m&&te.domReference&&te.floating)return Af(te.domReference,te.floating,W,le)},[p,m,te,W,le]);const Ce=vt(ce),Xt=vg(r,Ce,H),yn=Wn(ce)||"center",Zt=!!oe.hide?.referenceHidden;fe(()=>{v&&m&&ae&&O(Ce)},[v,m,ae,Ce]);const $t=w.useMemo(()=>({position:"absolute",top:oe.arrow?.y,left:oe.arrow?.x}),[oe.arrow]),ft=oe.arrow?.centerOffset!==0;return w.useMemo(()=>({positionerStyles:xe,arrowStyles:$t,arrowRef:T,arrowUncentered:ft,side:Xt,align:yn,physicalSide:Ce,anchorHidden:Zt,refs:X,context:ge,isPositioned:ae,update:W}),[xe,$t,T,ft,Xt,yn,Ce,Zt,X,ge,ae,W])}function Jf(e){return e!=null&&"current"in e}const wg=w.createContext(void 0);function su(){const e=w.useContext(wg);if(!e)throw new Error(Yt(59));return e}function xg(e){return e==="starting"?pE:Je}function Ti(e,t){e&&Object.assign(e.style,t)}const Sg={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},nI={position:"fixed"},rI=w.forwardRef(function(t,n){const{anchor:r,positionMethod:o="absolute",className:s,render:i,side:c="bottom",align:l="center",sideOffset:a=0,alignOffset:u=0,collisionBoundary:f="clipping-ancestors",collisionPadding:p,arrowPadding:d=5,sticky:m=!1,disableAnchorTracking:h,alignItemWithTrigger:b=!0,collisionAvoidance:g=mE,...y}=t,{store:v,listRef:x,labelsRef:S,alignItemWithTriggerActiveRef:O,selectedItemTextRef:I,valuesRef:_,initialValueRef:R,popupRef:j,setValue:D}=Jt(),L=dg(),G=me(v,he.open),B=me(v,he.mounted),H=me(v,he.modal),C=me(v,he.value),A=me(v,he.openMethod),N=me(v,he.positionerElement),P=me(v,he.triggerElement),k=me(v,he.isItemEqualToValue),Y=me(v,he.transitionStatus),V=w.useRef(null),re=w.useRef(null),[Z,T]=w.useState(b),$=B&&Z&&A!=="touch";!B&&Z!==b&&T(b),fe(()=>{B||(he.scrollUpArrowVisible(v.state)&&v.set("scrollUpArrowVisible",!1),he.scrollDownArrowVisible(v.state)&&v.set("scrollDownArrowVisible",!1))},[v,B]),w.useImperativeHandle(O,()=>$),Wh(($||H)&&G&&A!=="touch",P);const z=tI({anchor:r,floatingRootContext:L,positionMethod:o,mounted:B,side:c,sideOffset:a,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,disableAnchorTracking:h??$,collisionAvoidance:g,keepMounted:!0}),ne=$?"none":z.side,F=$?nI:z.positionerStyles,Q=w.useMemo(()=>{const te={};return G||(te.pointerEvents="none"),{role:"presentation",hidden:!B,style:{...F,...te}}},[G,B,F]),K={open:G,side:ne,align:z.align,anchorHidden:z.anchorHidden},M=de(te=>{v.set("positionerElement",te)}),U=Xe("div",t,{ref:[n,M],state:K,stateAttributesMapping:pc,props:[Q,xg(Y),y]}),q=w.useRef(0),le=de(te=>{if(te.size===0&&q.current===0||_.current.length===0)return;const ee=q.current;if(q.current=te.size,te.size===ee)return;const J=ke(ic);if(ee!==0&&!v.state.multiple&&C!==null&&qo(_.current,C,k)===-1){const W=R.current,ge=W!=null&&qo(_.current,W,k)!==-1?W:null;D(ge,J),ge===null&&(v.set("selectedIndex",null),I.current=null)}if(ee!==0&&v.state.multiple&&Array.isArray(C)){const oe=ce=>qo(_.current,ce,k)!==-1,W=C.filter(ce=>oe(ce));(W.length!==C.length||W.some(ce=>!RT(C,ce,k)))&&(D(W,J),W.length===0&&(v.set("selectedIndex",null),I.current=null))}if(G&&$){v.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const oe={height:""};Ti(N,oe),Ti(j.current,oe)}}),X=w.useMemo(()=>({...z,side:ne,alignItemWithTriggerActive:$,setControlledAlignItemWithTrigger:T,scrollUpArrowRef:V,scrollDownArrowRef:re}),[z,ne,$,T]);return E.jsx(HT,{elementsRef:x,labelsRef:S,onMapChange:le,children:E.jsxs(wg.Provider,{value:X,children:[B&&H&&E.jsx(Hm,{inert:Wm(!G),cutout:P}),U]})})});function _g(e){const t=e.currentTarget.getBoundingClientRect();return t.top+1<=e.clientY&&e.clientY<=t.bottom-1&&t.left+1<=e.clientX&&e.clientX<=t.right-1}const Bs="base-ui-disable-scrollbar",Va={className:Bs,getElement(e){return E.jsx("style",{nonce:e,href:Bs,precedence:"base-ui:low",children:`.${Bs}{scrollbar-width:none}.${Bs}::-webkit-scrollbar{display:none}`})}},oI=w.createContext(void 0);function sI(e){return w.useContext(oI)}function Yc(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const iI=w.createContext(void 0),cI={disableStyleElements:!1};function aI(){return w.useContext(iI)??cI}const Gn=1,lI={...pc,...fc},uI=w.forwardRef(function(t,n){const{render:r,className:o,finalFocus:s,...i}=t,{store:c,popupRef:l,onOpenChangeComplete:a,setOpen:u,valueRef:f,selectedItemTextRef:p,keyboardActiveRef:d,multiple:m,handleScrollArrowVisibility:h,scrollHandlerRef:b,highlightItemOnHover:g}=Jt(),{side:y,align:v,alignItemWithTriggerActive:x,setControlledAlignItemWithTrigger:S,scrollDownArrowRef:O,scrollUpArrowRef:I}=su(),_=sI()!=null,R=dg(),{nonce:j,disableStyleElements:D}=aI(),L=yt(),G=me(c,he.id),B=me(c,he.open),H=me(c,he.mounted),C=me(c,he.popupProps),A=me(c,he.transitionStatus),N=me(c,he.triggerElement),P=me(c,he.positionerElement),k=me(c,he.listElement),Y=w.useRef(0),V=w.useRef(!1),re=w.useRef(0),Z=w.useRef(!1),T=w.useRef({}),$=nc(),z=de(K=>{if(!P||!l.current||!Z.current)return;if(V.current||!x){h();return}const M=P.style.top==="0px",U=P.style.bottom==="0px",q=P.getBoundingClientRect().height,le=Ne(P),X=getComputedStyle(P),te=parseFloat(X.marginTop),ee=parseFloat(X.marginBottom),J=Xf(getComputedStyle(l.current)),oe=Math.min(le.documentElement.clientHeight-te-ee,J),W=K.scrollTop,ce=Zf(K);let ge=0,ae=null,Ae=!1,je=!1;const qe=xe=>{P.style.height=`${xe}px`},_e=(xe,Oe)=>{const Ce=Yc(xe,0,oe-q);Ce>0&&qe(q+Ce),K.scrollTop=Oe,oe-(q+Ce)<=Gn&&(V.current=!0),h()};if(M){const xe=ce-W,Oe=q+xe,Ce=Math.min(Oe,oe);if(ge=Ce,xe<=Gn){_e(xe,ce);return}oe-Ce>Gn?je=!0:Ae=!0}else if(U){const xe=W,Oe=q+xe,Ce=Math.min(Oe,oe),Xt=Oe-oe;if(ge=Ce,xe<=Gn){_e(xe,0);return}oe-Ce>Gn?ae=0:(Ae=!0,W<ce&&(ae=W-(xe-Xt)))}if(ge=Math.ceil(ge),ge!==0&&qe(ge),je||ae!=null){const xe=Zf(K),Oe=je?xe:Yc(ae,0,xe);Math.abs(K.scrollTop-Oe)>Gn&&(K.scrollTop=Oe)}(Ae||ge>=oe-Gn)&&(V.current=!0),h()});w.useImperativeHandle(b,()=>z,[z]),io({open:B,ref:l,onComplete(){B&&a?.(!0)}});const ne={open:B,transitionStatus:A,side:y,align:v};fe(()=>{!P||!l.current||Object.keys(T.current).length||(T.current={top:P.style.top||"0",left:P.style.left||"0",right:P.style.right,height:P.style.height,bottom:P.style.bottom,minHeight:P.style.minHeight,maxHeight:P.style.maxHeight,marginTop:P.style.marginTop,marginBottom:P.style.marginBottom})},[l,P]),fe(()=>{B||x||(Z.current=!1,V.current=!1,Y.current=0,re.current=0,Ti(P,T.current))},[B,x,P,l]),fe(()=>{const K=l.current;if(!(!B||!N||!P||!K||c.state.transitionStatus==="ending")){if(!x){Z.current=!0,$.request(h),K.style.removeProperty("--transform-origin");return}queueMicrotask(()=>{const M=fI(K);K.style.removeProperty("--transform-origin");try{const U=getComputedStyle(P),q=getComputedStyle(K),le=Ne(N),X=He(P),te=N.getBoundingClientRect(),ee=P.getBoundingClientRect(),J=te.left,oe=te.height,W=k||K,ce=W.scrollHeight,ge=parseFloat(q.borderBottomWidth),ae=parseFloat(U.marginTop)||10,Ae=parseFloat(U.marginBottom)||10,je=parseFloat(U.minHeight)||100,qe=Xf(q),_e=5,xe=5,Oe=20,Ce=le.documentElement.clientHeight-ae-Ae,Xt=le.documentElement.clientWidth,yn=Ce-te.bottom+oe,Zt=p.current,$t=f.current;let ft,Se=0,Ve=0;if(Zt&&$t){const be=$t.getBoundingClientRect();ft=Zt.getBoundingClientRect();const Te=be.left-J,st=ft.left-ee.left,it=be.top-te.top+be.height/2,Ue=ft.top-ee.top+ft.height/2;Se=Te-st,Ve=Ue-it}const Ze=yn+Ve+Ae+ge;let Me=Math.min(Ce,Ze);const dt=Ce-ae-Ae,Ot=Ze-Me,Tt=Math.max(_e,J+Se),bn=Xt-xe,vn=Math.max(0,Tt+ee.width-bn);P.style.left=`${Tt-vn}px`,P.style.height=`${Me}px`,P.style.maxHeight="auto",P.style.marginTop=`${ae}px`,P.style.marginBottom=`${Ae}px`,K.style.height="100%";const gr=W.scrollHeight-W.clientHeight,yr=Ot>=gr;yr&&(Me=Math.min(Ce,ee.height)-(Ot-gr));const po=te.top<Oe||te.bottom>Ce-Oe||Me<Math.min(ce,je),ho=(X.visualViewport?.scale??1)!==1&&Ul;if(po||ho){Z.current=!0,Ti(P,T.current),Qr.flushSync(()=>S(!1));return}if(yr){const be=Math.max(0,Ce-Ze);P.style.top=ee.height>=dt?"0":`${be}px`,P.style.height=`${Me}px`,W.scrollTop=W.scrollHeight-W.clientHeight,Y.current=Math.max(je,Me)}else P.style.bottom="0",Y.current=Math.max(je,Me),W.scrollTop=Ot;if(ft){const be=ee.top,Te=ee.height,st=ft.top+ft.height/2,it=Te>0?(st-be)/Te*100:50,Ue=Yc(it,0,100);K.style.setProperty("--transform-origin",`50% ${Ue}%`)}(Y.current===Ce||Me>=qe)&&(V.current=!0),h(),setTimeout(()=>{Z.current=!0})}finally{M()}})}},[c,B,P,N,f,p,l,h,x,S,$,O,I,k]),w.useEffect(()=>{if(!x||!P||!B)return;const K=He(P);function M(U){u(!1,ke(SE,U))}return K.addEventListener("resize",M),()=>{K.removeEventListener("resize",M)}},[u,x,P,B]);const F={...k?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":m||void 0,id:`${G}-list`},onKeyDown(K){d.current=!0,_&&Bm.has(K.key)&&K.stopPropagation()},onMouseMove(){d.current=!1},onPointerLeave(K){if(!g||_g(K)||K.pointerType==="touch")return;const M=K.currentTarget;L.start(0,()=>{c.set("activeIndex",null),M.focus({preventScroll:!0})})},onScroll(K){k||z(K.currentTarget)},...x&&{style:k?{height:"100%"}:Sg}},Q=Xe("div",t,{ref:[n,l],state:ne,stateAttributesMapping:lI,props:[C,F,xg(A),{className:!k&&x?Va.className:void 0},i]});return E.jsxs(w.Fragment,{children:[!D&&Va.getElement(j),E.jsx(gm,{context:R,modal:!1,disabled:!H,returnFocus:s,restoreFocus:!0,children:Q})]})});function Xf(e){const t=e.maxHeight||"";return t.endsWith("px")&&parseFloat(t)||1/0}function Zf(e){return Math.max(0,e.scrollHeight-e.clientHeight)}const Qf=[["transform","none"],["scale","1"],["translate","0 0"]];function fI(e){const{style:t}=e,n={};for(const[r,o]of Qf)n[r]=t.getPropertyValue(r),t.setProperty(r,o,"important");return()=>{for(const[r]of Qf){const o=n[r];o?t.setProperty(r,o):t.removeProperty(r)}}}const dI=w.forwardRef(function(t,n){const{className:r,render:o,...s}=t,{store:i,scrollHandlerRef:c}=Jt(),{alignItemWithTriggerActive:l}=su(),a=me(i,he.hasScrollArrows),u=me(i,he.openMethod),f=me(i,he.multiple),d={id:`${me(i,he.id)}-list`,role:"listbox","aria-multiselectable":f||void 0,onScroll(h){c.current?.(h.currentTarget)},...l&&{style:Sg},className:a&&u!=="touch"?Va.className:void 0},m=de(h=>{i.set("listElement",h)});return Xe("div",t,{ref:[n,m],props:[d,s]})});let Eg=(function(e){return e[e.None=0]="None",e[e.GuessFromOrder=1]="GuessFromOrder",e})({});function pI(e={}){const{label:t,metadata:n,textRef:r,indexGuessBehavior:o,index:s}=e,{register:i,unregister:c,subscribeMapChange:l,elementsRef:a,labelsRef:u,nextIndexRef:f}=WT(),p=w.useRef(-1),[d,m]=w.useState(s??(o===Eg.GuessFromOrder?()=>{if(p.current===-1){const g=f.current;f.current+=1,p.current=g}return p.current}:-1)),h=w.useRef(null),b=w.useCallback(g=>{if(h.current=g,d!==-1&&g!==null&&(a.current[d]=g,u)){const y=t!==void 0;u.current[d]=y?t:r?.current?.textContent??g.textContent}},[d,a,u,t,r]);return fe(()=>{if(s!=null)return;const g=h.current;if(g)return i(g,n),()=>{c(g)}},[s,i,c,n]),fe(()=>{if(s==null)return l(g=>{const y=h.current?g.get(h.current)?.index:null;y!=null&&m(y)})},[s,l,m]),w.useMemo(()=>({ref:b,index:d}),[d,b])}const Rg=w.createContext(void 0);function iu(){const e=w.useContext(Rg);if(!e)throw new Error(Yt(57));return e}const hI=w.memo(w.forwardRef(function(t,n){const{render:r,className:o,value:s=null,label:i,disabled:c=!1,nativeButton:l=!1,...a}=t,u=w.useRef(null),f=pI({label:i,textRef:u,indexGuessBehavior:Eg.GuessFromOrder}),{store:p,getItemProps:d,setOpen:m,setValue:h,selectionRef:b,typingRef:g,valuesRef:y,keyboardActiveRef:v,multiple:x,highlightItemOnHover:S}=Jt(),O=yt(),I=me(p,he.isActive,f.index),_=me(p,he.isSelected,f.index,s),R=me(p,he.isSelectedByFocus,f.index),j=me(p,he.isItemEqualToValue),D=f.index,L=D!==-1,G=w.useRef(null),B=lt(D);fe(()=>{if(!L)return;const $=y.current;return $[D]=s,()=>{delete $[D]}},[L,D,s,y]),fe(()=>{if(!L)return;const $=p.state.value;let z=$;x&&Array.isArray($)&&$.length>0&&(z=$[$.length-1]),z!==void 0&&Kr(s,z,j)&&p.set("selectedIndex",D)},[L,D,x,j,p,s]);const H={disabled:c,selected:_,highlighted:I},C=d({active:I,selected:_});C.onFocus=void 0,C.id=void 0;const A=w.useRef(null),N=w.useRef("mouse"),P=w.useRef(!1),{getButtonProps:k,buttonRef:Y}=hc({disabled:c,focusableWhenDisabled:!0,native:l});function V($){const z=p.state.value;if(x){const ne=Array.isArray(z)?z:[],F=_?CT(ne,s,j):[...ne,s];h(F,ke(Vc,$))}else h(s,ke(Vc,$)),m(!1,ke(Vc,$))}const re={role:"option","aria-selected":_,tabIndex:I?0:-1,onFocus(){p.set("activeIndex",D)},onMouseEnter(){!v.current&&p.state.selectedIndex===null&&S&&p.set("activeIndex",D)},onMouseMove(){S&&p.set("activeIndex",D)},onMouseLeave($){!S||v.current||_g($)||O.start(0,()=>{p.state.activeIndex===D&&p.set("activeIndex",null)})},onTouchStart(){b.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown($){A.current=$.key,p.set("activeIndex",D)},onClick($){P.current=!1,!($.type==="keydown"&&A.current===null)&&(c||A.current===" "&&g.current||N.current!=="touch"&&!I||(A.current=null,V($.nativeEvent)))},onPointerEnter($){N.current=$.pointerType},onPointerDown($){N.current=$.pointerType,P.current=!0},onMouseUp($){if(c)return;if(P.current){P.current=!1;return}const z=!b.current.allowSelectedMouseUp&&_,ne=!b.current.allowUnselectedMouseUp&&!_;z||ne||N.current!=="touch"&&!I||V($.nativeEvent)}},Z=Xe("div",t,{ref:[Y,n,f.ref,G],state:H,props:[C,re,a,k]}),T=w.useMemo(()=>({selected:_,indexRef:B,textRef:u,selectedByFocus:R,hasRegistered:L}),[_,B,u,R,L]);return E.jsx(Rg.Provider,{value:T,children:Z})})),mI=w.forwardRef(function(t,n){const r=t.keepMounted??!1,{selected:o}=iu();return r||o?E.jsx(gI,{...t,ref:n}):null}),gI=w.memo(w.forwardRef((e,t)=>{const{render:n,className:r,keepMounted:o,...s}=e,{selected:i}=iu(),c=w.useRef(null),{transitionStatus:l,setMounted:a}=uc(i),f=Xe("span",e,{ref:[t,c],state:{selected:i,transitionStatus:l},props:[{"aria-hidden":!0,children:""},s],stateAttributesMapping:fc});return io({open:i,ref:c,onComplete(){i||a(!1)}}),f})),yI=w.memo(w.forwardRef(function(t,n){const{indexRef:r,textRef:o,selectedByFocus:s,hasRegistered:i}=iu(),{selectedItemTextRef:c}=Jt(),{className:l,render:a,...u}=t,f=w.useCallback(d=>{if(!d||!i)return;const m=c.current===null||!c.current.isConnected;(s||m&&r.current===0)&&(c.current=d)},[c,r,s,i]);return Xe("div",t,{ref:[f,n,o],props:u})})),Cg=w.forwardRef(function(t,n){const{render:r,className:o,direction:s,keepMounted:i=!1,...c}=t,{store:l,popupRef:a,listRef:u,handleScrollArrowVisibility:f,scrollArrowsMountedCountRef:p}=Jt(),{side:d,scrollDownArrowRef:m,scrollUpArrowRef:h}=su(),b=s==="up"?he.scrollUpArrowVisible:he.scrollDownArrowVisible,g=me(l,b),y=me(l,he.openMethod),v=g&&y!=="touch",x=yt(),S=s==="up"?h:m,{transitionStatus:O,setMounted:I}=uc(v);fe(()=>(p.current+=1,l.state.hasScrollArrows||l.set("hasScrollArrows",!0),()=>{p.current=Math.max(0,p.current-1),p.current===0&&l.state.hasScrollArrows&&l.set("hasScrollArrows",!1)}),[l,p]),io({open:v,ref:S,onComplete(){v||I(!1)}});const j=Xe("div",t,{ref:[n,S],state:{direction:s,visible:v,side:d,transitionStatus:O},props:[{"aria-hidden":!0,children:s==="up"?"":"",style:{position:"absolute"},onMouseMove(L){if(L.movementX===0&&L.movementY===0||x.isStarted())return;l.set("activeIndex",null);function G(){const B=l.state.listElement??a.current;if(!B)return;l.set("activeIndex",null),f();const H=B.scrollTop===0,C=Math.round(B.scrollTop+B.clientHeight)>=B.scrollHeight;if(u.current.length===0&&(s==="up"?l.set("scrollUpArrowVisible",!H):l.set("scrollDownArrowVisible",!C)),s==="up"&&H||s==="down"&&C){x.clear();return}if((l.state.listElement||a.current)&&u.current&&u.current.length>0){const N=u.current,P=S.current?.offsetHeight||0;if(s==="up"){let k=0;const Y=B.scrollTop+P;for(let re=0;re<N.length;re+=1){const Z=N[re];if(Z&&Z.offsetTop>=Y){k=re;break}}const V=Math.max(0,k-1);if(V<k){const re=N[V];re&&(B.scrollTop=Math.max(0,re.offsetTop-P))}else B.scrollTop=0}else{let k=N.length-1;const Y=B.scrollTop+B.clientHeight-P;for(let re=0;re<N.length;re+=1){const Z=N[re];if(Z&&Z.offsetTop+Z.offsetHeight>Y){k=Math.max(0,re-1);break}}const V=Math.min(N.length-1,k+1);if(V>k){const re=N[V];re&&(B.scrollTop=re.offsetTop+re.offsetHeight-B.clientHeight+P)}else B.scrollTop=B.scrollHeight-B.clientHeight}}x.start(40,G)}x.start(40,G)},onMouseLeave(){x.clear()}},c]});return v||i?j:null}),bI=w.forwardRef(function(t,n){return E.jsx(Cg,{...t,ref:n,direction:"down"})}),vI=w.forwardRef(function(t,n){return E.jsx(Cg,{...t,ref:n,direction:"up"})}),wI=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 6L9 17l-5-5"})]}),xI=w.forwardRef(wI),SI=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m6 9l6 6l6-6"})]}),Og=w.forwardRef(SI),_I=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15l-6-6l-6 6"})]}),EI=w.forwardRef(_I),RI=NT;function CI(e){const t=ye.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("flex flex-1 text-left",n),t[3]=n,t[4]=o):o=t[4];let s;return t[5]!==r||t[6]!==o?(s=E.jsx(zT,{"data-slot":"select-value",className:o,...r}),t[5]=r,t[6]=o,t[7]=s):s=t[7],s}function OI(e){const t=ye.c(13);let n,r,o,s;t[0]!==e?({className:r,size:s,children:n,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s):(n=t[1],r=t[2],o=t[3],s=t[4]);const i=s===void 0?"default":s;let c;t[5]!==r?(c=Fe("border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 flex w-fit items-center justify-between gap-1.5 rounded-md border bg-transparent py-2 pr-2 pl-2.5 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-[3px] data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-1.5 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),t[5]=r,t[6]=c):c=t[6];let l;t[7]===Symbol.for("react.memo_cache_sentinel")?(l=E.jsx(VT,{render:E.jsx(Og,{className:"text-muted-foreground pointer-events-none size-4"})}),t[7]=l):l=t[7];let a;return t[8]!==n||t[9]!==o||t[10]!==i||t[11]!==c?(a=E.jsxs(DT,{"data-slot":"select-trigger","data-size":i,className:c,...o,children:[n,l]}),t[8]=n,t[9]=o,t[10]=i,t[11]=c,t[12]=a):a=t[12],a}function TI(e){const t=ye.c(26);let n,r,o,s,i,c,l,a;t[0]!==e?({className:r,children:n,side:s,sideOffset:i,align:c,alignOffset:l,alignItemWithTrigger:a,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i,t[6]=c,t[7]=l,t[8]=a):(n=t[1],r=t[2],o=t[3],s=t[4],i=t[5],c=t[6],l=t[7],a=t[8]);const u=s===void 0?"bottom":s,f=i===void 0?4:i,p=c===void 0?"center":c,d=l===void 0?0:l,m=a===void 0?!0:a;let h;t[9]!==r?(h=Fe("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 relative isolate z-50 max-h-(--available-height) w-(--anchor-width) min-w-36 origin-(--transform-origin) overflow-x-hidden overflow-y-auto rounded-md shadow-md ring-1 duration-100",r),t[9]=r,t[10]=h):h=t[10];let b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b=E.jsx(kI,{}),t[11]=b):b=t[11];let g;t[12]!==n?(g=E.jsx(dI,{children:n}),t[12]=n,t[13]=g):g=t[13];let y;t[14]===Symbol.for("react.memo_cache_sentinel")?(y=E.jsx(AI,{}),t[14]=y):y=t[14];let v;t[15]!==o||t[16]!==h||t[17]!==g?(v=E.jsxs(uI,{"data-slot":"select-content",className:h,...o,children:[b,g,y]}),t[15]=o,t[16]=h,t[17]=g,t[18]=v):v=t[18];let x;return t[19]!==p||t[20]!==m||t[21]!==d||t[22]!==u||t[23]!==f||t[24]!==v?(x=E.jsx(BT,{children:E.jsx(rI,{side:u,sideOffset:f,align:p,alignOffset:d,alignItemWithTrigger:m,className:"isolate z-50",children:v})}),t[19]=p,t[20]=m,t[21]=d,t[22]=u,t[23]=f,t[24]=v,t[25]=x):x=t[25],x}function II(e){const t=ye.c(13);let n,r,o;t[0]!==e?({className:r,children:n,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);let s;t[4]!==r?(s=Fe("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),t[4]=r,t[5]=s):s=t[5];let i;t[6]!==n?(i=E.jsx(yI,{className:"flex flex-1 shrink-0 gap-2 whitespace-nowrap",children:n}),t[6]=n,t[7]=i):i=t[7];let c;t[8]===Symbol.for("react.memo_cache_sentinel")?(c=E.jsx(mI,{render:E.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:E.jsx(xI,{className:"pointer-events-none"})}),t[8]=c):c=t[8];let l;return t[9]!==o||t[10]!==s||t[11]!==i?(l=E.jsxs(hI,{"data-slot":"select-item",className:s,...o,children:[i,c]}),t[9]=o,t[10]=s,t[11]=i,t[12]=l):l=t[12],l}function kI(e){const t=ye.c(9);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("bg-popover top-0 z-10 flex w-full cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",n),t[3]=n,t[4]=o):o=t[4];let s;t[5]===Symbol.for("react.memo_cache_sentinel")?(s=E.jsx(EI,{}),t[5]=s):s=t[5];let i;return t[6]!==r||t[7]!==o?(i=E.jsx(vI,{"data-slot":"select-scroll-up-button",className:o,...r,children:s}),t[6]=r,t[7]=o,t[8]=i):i=t[8],i}function AI(e){const t=ye.c(9);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=Fe("bg-popover bottom-0 z-10 flex w-full cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",n),t[3]=n,t[4]=o):o=t[4];let s;t[5]===Symbol.for("react.memo_cache_sentinel")?(s=E.jsx(Og,{}),t[5]=s):s=t[5];let i;return t[6]!==r||t[7]!==o?(i=E.jsx(bI,{"data-slot":"select-scroll-down-button",className:o,...r,children:s}),t[6]=r,t[7]=o,t[8]=i):i=t[8],i}function MI(){const e=ye.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=Ye(),e[0]=t):t=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=E.jsx(OI,{children:E.jsx(CI,{placeholder:"Select a language"})}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=E.jsxs(RI,{value:t,onValueChange:NI,children:[n,E.jsx(TI,{children:hi.map(PI)})]}),e[2]=r):r=e[2],r}function PI(e){return E.jsx(II,{value:e,children:e},e)}function NI(e){return Nh(e??"en")}var $I=function(e){w.useEffect(e,[])},wr=function(e){var t=w.useRef(e);return t.current=e,t};const jI=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"})]}),LI=w.forwardRef(jI),DI=({title:e,titleId:t,...n},r)=>E.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":t,...n,children:[e?E.jsx("title",{id:t,children:e}):null,E.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[E.jsx("circle",{cx:12,cy:12,r:4}),E.jsx("path",{d:"M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"})]})]}),FI=w.forwardRef(DI);function ed(e){const t=ye.c(22),{selectedTheme:n,value:r,setTheme:o,children:s}=e,i=`theme-switch-${r}`,c=n===r;let l,a;t[0]!==o||t[1]!==r?(l=()=>o(r),a=()=>o(r),t[0]=o,t[1]=r,t[2]=l,t[3]=a):(l=t[2],a=t[3]);let u;t[4]!==i||t[5]!==c||t[6]!==l||t[7]!==a||t[8]!==r?(u=E.jsx("input",{"aria-label":r,id:i,type:"radio",value:r,checked:c,onClick:l,onChange:a,className:"absolute m-0 appearance-none p-0"}),t[4]=i,t[5]=c,t[6]=l,t[7]=a,t[8]=r,t[9]=u):u=t[9];const f=`theme-switch-${r}`,p=n===r&&"border-shadow border";let d;t[10]!==p?(d=Fe("group flex size-8 cursor-pointer items-center justify-center rounded-full",p),t[10]=p,t[11]=d):d=t[11];let m;t[12]!==r?(m=E.jsx("span",{className:"sr-only",children:r}),t[12]=r,t[13]=m):m=t[13];let h;t[14]!==s||t[15]!==f||t[16]!==d||t[17]!==m?(h=E.jsxs("label",{htmlFor:f,className:d,children:[m,s]}),t[14]=s,t[15]=f,t[16]=d,t[17]=m,t[18]=h):h=t[18];let b;return t[19]!==h||t[20]!==u?(b=E.jsxs("div",{className:"-mt-px first:-ml-px last:-mr-px",children:[u,h]}),t[19]=h,t[20]=u,t[21]=b):b=t[21],b}const zI=()=>{const e=ye.c(20),{systemTheme:t,setTheme:n,theme:r,resolvedTheme:o}=Ny(),s=t===void 0?"light":t,i=o===void 0?r:o;let c;e[0]!==s?(c=()=>typeof window>"u"?"light":localStorage.getItem("theme")||s,e[0]=s,e[1]=c):c=e[1];const l=c,[a,u]=w.useState(l);let f;e[2]!==n?(f=x=>{u(x),n(x)},e[2]=n,e[3]=f):f=e[3];const p=f;let d;e[4]!==i||e[5]!==p||e[6]!==a?(d=()=>{i&&a!==i&&p(i)},e[4]=i,e[5]=p,e[6]=a,e[7]=d):d=e[7],$I(d);let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=E.jsx("legend",{className:"sr-only",children:"Select a display theme:"}),e[8]=m):m=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx(FI,{}),e[9]=h):h=e[9];let b;e[10]!==p||e[11]!==a?(b=E.jsx(ed,{value:"light",selectedTheme:a,setTheme:p,children:h}),e[10]=p,e[11]=a,e[12]=b):b=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=E.jsx(LI,{}),e[13]=g):g=e[13];let y;e[14]!==p||e[15]!==a?(y=E.jsx(ed,{value:"dark",selectedTheme:a,setTheme:p,children:g}),e[14]=p,e[15]=a,e[16]=y):y=e[16];let v;return e[17]!==b||e[18]!==y?(v=E.jsxs("fieldset",{className:"border-shadow m-0 flex h-8 rounded-full border p-0",children:[m,b,y]}),e[17]=b,e[18]=y,e[19]=v):v=e[19],v};function Lo(e){const t=ye.c(16);let n,r,o,s,i;if(t[0]!==e){const{className:u,variant:f,size:p,icon:d,children:m,ref:h,...b}=e;r=u,o=d,n=m,i=h,s=b,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i}else n=t[1],r=t[2],o=t[3],s=t[4],i=t[5];let c;t[6]!==r?(c=Fe(r,"gap-1"),t[6]=r,t[7]=c):c=t[7];let l;t[8]!==o?(l=E.jsx("span",{children:o}),t[8]=o,t[9]=l):l=t[9];let a;return t[10]!==n||t[11]!==s||t[12]!==i||t[13]!==c||t[14]!==l?(a=E.jsxs(ru,{ref:i,className:c,...s,children:[l,n]}),t[10]=n,t[11]=s,t[12]=i,t[13]=c,t[14]=l,t[15]=a):a=t[15],a}Lo.displayName="IconButton";function VI(e){const t=ye.c(23),{setHuman:n,reboot:r,allowRetract:o,onUndo:s,onOpenSetting:i}=e;let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=E.jsx("h1",{className:"text-4xl font-bold tracking-tight lg:text-5xl",children:rS()}),t[0]=c):c=t[0];let l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=E.jsx(bT,{}),t[1]=l):l=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=E.jsx("span",{children:iS()}),t[2]=a):a=t[2];let u;t[3]!==n?(u=E.jsx(Lo,{icon:l,onClick:n,children:a}),t[3]=n,t[4]=u):u=t[4];let f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=E.jsx(hT,{}),t[5]=f):f=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=E.jsx("span",{children:lS()}),t[6]=p):p=t[6];let d;t[7]!==r?(d=E.jsx(Lo,{icon:f,onClick:r,children:p}),t[7]=r,t[8]=d):d=t[8];let m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=E.jsx(gT,{}),t[9]=m):m=t[9];const h=!o;let b;t[10]!==s||t[11]!==h?(b=E.jsx(Lo,{icon:m,disabled:h,onClick:s}),t[10]=s,t[11]=h,t[12]=b):b=t[12];let g;t[13]===Symbol.for("react.memo_cache_sentinel")?(g=E.jsx(dT,{}),t[13]=g):g=t[13];let y;t[14]!==i?(y=E.jsx(Lo,{icon:g,onClick:i}),t[14]=i,t[15]=y):y=t[15];let v,x;t[16]===Symbol.for("react.memo_cache_sentinel")?(v=E.jsx(zI,{}),x=E.jsx(MI,{}),t[16]=v,t[17]=x):(v=t[16],x=t[17]);let S;return t[18]!==b||t[19]!==y||t[20]!==u||t[21]!==d?(S=E.jsxs("nav",{className:"flex justify-between p-2 pr-16",children:[c,E.jsxs("div",{className:"flex gap-2",children:[u,d,b," ",y,v,x]})]}),t[18]=b,t[19]=y,t[20]=u,t[21]=d,t[22]=S):S=t[22],S}function UI(e){const t=ye.c(2);let n;return t[0]!==e?(n=E.jsx(VI,{...e}),t[0]=e,t[1]=n):n=t[1],n}function BI(e){const t=ye.c(41),{showReplay:n,message:r,children:o,onRestart:s,users:i,log:c,score:l,onCloseConfirm:a,allowRetract:u,setHuman:f,reboot:p,onUndo:d}=e,[m,h]=w.useState(!1);let b;t[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>h(!0),t[0]=b):b=t[0];const g=b;let y;t[1]===Symbol.for("react.memo_cache_sentinel")?(y=()=>h(!1),t[1]=y):y=t[1];const v=y;let x;t[2]!==u||t[3]!==d||t[4]!==p||t[5]!==f?(x=E.jsx(UI,{onOpenSetting:g,allowRetract:u,setHuman:f,reboot:p,onUndo:d}),t[2]=u,t[3]=d,t[4]=p,t[5]=f,t[6]=x):x=t[6];let S;t[7]!==r?(S=E.jsx("span",{className:"text-destructive self-end",children:r}),t[7]=r,t[8]=S):S=t[8];let O;t[9]!==o||t[10]!==S?(O=E.jsxs("div",{className:"flex flex-col",children:[o,S]}),t[9]=o,t[10]=S,t[11]=O):O=t[11];let I;t[12]!==l||t[13]!==i?(I=E.jsx(lT,{users:i,score:l}),t[12]=l,t[13]=i,t[14]=I):I=t[14];let _;t[15]===Symbol.for("react.memo_cache_sentinel")?(_=E.jsx(e_,{}),t[15]=_):_=t[15];let R;t[16]!==I?(R=E.jsxs("div",{children:[I,_]}),t[16]=I,t[17]=R):R=t[17];let j;t[18]!==c?(j=E.jsx("div",{className:"hidden max-w-64 grow lg:block",children:E.jsx(iT,{log:c})}),t[18]=c,t[19]=j):j=t[19];let D;t[20]!==O||t[21]!==R||t[22]!==j?(D=E.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row",children:[O,R,j]}),t[20]=O,t[21]=R,t[22]=j,t[23]=D):D=t[23];let L;t[24]===Symbol.for("react.memo_cache_sentinel")?(L=dS(),t[24]=L):L=t[24];let G;t[25]!==a||t[26]!==s||t[27]!==n?(G=E.jsx(QO,{open:n,onConfirm:s,onCancel:a,children:L}),t[25]=a,t[26]=s,t[27]=n,t[28]=G):G=t[28];let B;t[29]!==m?(B=m&&E.jsx(uT,{isOpen:m,onClose:v}),t[29]=m,t[30]=B):B=t[30];let H;t[31]!==B?(H=E.jsx(w.Suspense,{children:B}),t[31]=B,t[32]=H):H=t[32];let C;t[33]!==D||t[34]!==G||t[35]!==H||t[36]!==x?(C=E.jsxs("div",{className:"container",children:[x,D,G,H]}),t[33]=D,t[34]=G,t[35]=H,t[36]=x,t[37]=C):C=t[37];let A;t[38]===Symbol.for("react.memo_cache_sentinel")?(A=E.jsx($y,{children:E.jsx(QS,{href:"https://github.com/DanSnow/react-reversi"})}),t[38]=A):A=t[38];let N;return t[39]!==C?(N=E.jsxs(E.Fragment,{children:[C,A]}),t[39]=C,t[40]=N):N=t[40],N}var Jc,td;function WI(){if(td)return Jc;td=1,Jc=s,s.default=s,s.stable=a,s.stableStringify=a;var e="[...]",t="[Circular]",n=[],r=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(p,d,m,h){typeof h>"u"&&(h=o()),c(p,"",0,[],void 0,0,h);var b;try{r.length===0?b=JSON.stringify(p,d,m):b=JSON.stringify(p,f(d),m)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;n.length!==0;){var g=n.pop();g.length===4?Object.defineProperty(g[0],g[1],g[3]):g[0][g[1]]=g[2]}}return b}function i(p,d,m,h){var b=Object.getOwnPropertyDescriptor(h,m);b.get!==void 0?b.configurable?(Object.defineProperty(h,m,{value:p}),n.push([h,m,d,b])):r.push([d,m,p]):(h[m]=p,n.push([h,m,d]))}function c(p,d,m,h,b,g,y){g+=1;var v;if(typeof p=="object"&&p!==null){for(v=0;v<h.length;v++)if(h[v]===p){i(t,p,d,b);return}if(typeof y.depthLimit<"u"&&g>y.depthLimit){i(e,p,d,b);return}if(typeof y.edgesLimit<"u"&&m+1>y.edgesLimit){i(e,p,d,b);return}if(h.push(p),Array.isArray(p))for(v=0;v<p.length;v++)c(p[v],v,v,h,p,g,y);else{var x=Object.keys(p);for(v=0;v<x.length;v++){var S=x[v];c(p[S],S,v,h,p,g,y)}}h.pop()}}function l(p,d){return p<d?-1:p>d?1:0}function a(p,d,m,h){typeof h>"u"&&(h=o());var b=u(p,"",0,[],void 0,0,h)||p,g;try{r.length===0?g=JSON.stringify(b,d,m):g=JSON.stringify(b,f(d),m)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;n.length!==0;){var y=n.pop();y.length===4?Object.defineProperty(y[0],y[1],y[3]):y[0][y[1]]=y[2]}}return g}function u(p,d,m,h,b,g,y){g+=1;var v;if(typeof p=="object"&&p!==null){for(v=0;v<h.length;v++)if(h[v]===p){i(t,p,d,b);return}try{if(typeof p.toJSON=="function")return}catch{return}if(typeof y.depthLimit<"u"&&g>y.depthLimit){i(e,p,d,b);return}if(typeof y.edgesLimit<"u"&&m+1>y.edgesLimit){i(e,p,d,b);return}if(h.push(p),Array.isArray(p))for(v=0;v<p.length;v++)u(p[v],v,v,h,p,g,y);else{var x={},S=Object.keys(p).sort(l);for(v=0;v<S.length;v++){var O=S[v];u(p[O],O,v,h,p,g,y),x[O]=p[O]}if(typeof b<"u")n.push([b,d,p]),b[d]=x;else return x}h.pop()}}function f(p){return p=typeof p<"u"?p:function(d,m){return m},function(d,m){if(r.length>0)for(var h=0;h<r.length;h++){var b=r[h];if(b[1]===d&&b[0]===m){m=b[2],r.splice(h,1);break}}return p.call(this,d,m)}}return Jc}function HI(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function qI(){const e=HI();if(e.__xstate__)return e.__xstate__}const GI=e=>{if(typeof window>"u")return;const t=qI();t&&t.register(e)};class nd{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const Tg=".",KI="",Ig="",YI="#",JI="*",kg="xstate.init",XI="xstate.error",cr="xstate.stop";function ZI(e,t){return{type:`xstate.after.${e}.${t}`}}function Ua(e,t){return{type:`xstate.done.state.${e}`,output:t}}function QI(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function Ag(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function cu(e){return{type:kg,input:e}}function jt(e){setTimeout(()=>{throw e})}const e2=typeof Symbol=="function"&&Symbol.observable||"@@observable";function au(e,t){const n=rd(e),r=rd(t);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(o=>o in r?au(n[o],r[o]):!1)}function lu(e){if(Ng(e))return e;const t=[];let n="";for(let r=0;r<e.length;r++){switch(e.charCodeAt(r)){case 92:n+=e[r+1],r++;continue;case 46:t.push(n),n="";continue}n+=e[r]}return t.push(n),t}function rd(e){if(Yg(e))return e.value;if(typeof e!="string")return e;const t=lu(e);return Mg(t)}function Mg(e){if(e.length===1)return e[0];const t={};let n=t;for(let r=0;r<e.length-1;r++)if(r===e.length-2)n[e[r]]=e[r+1];else{const o=n;n={},o[e[r]]=n}return t}function od(e,t){const n={},r=Object.keys(e);for(let o=0;o<r.length;o++){const s=r[o];n[s]=t(e[s],s,e,o)}return n}function Pg(e){return Ng(e)?e:[e]}function rn(e){return e===void 0?[]:Pg(e)}function Ba(e,t,n,r){return typeof e=="function"?e({context:t,event:n,self:r}):e}function Ng(e){return Array.isArray(e)}function t2(e){return e.type.startsWith("xstate.error.actor")}function Or(e){return Pg(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function $g(e){if(!(e===void 0||e===KI))return rn(e)}function Ii(e,t,n){const r=typeof e=="object",o=r?e:void 0;return{next:(r?e.next:e)?.bind(o),error:(r?e.error:t)?.bind(o),complete:(r?e.complete:n)?.bind(o)}}function sd(e,t){return`${t}.${e}`}function uu(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,r,o]=n,i=e.getStateNodeById(o).config.invoke;return(Array.isArray(i)?i[r]:i).src}function n2(e){return[...new Set([...e._nodes.flatMap(t=>t.ownEvents)])]}function jg(e,t){if(t===e||t===JI)return!0;if(!t.endsWith(".*"))return!1;const n=t.split("."),r=e.split(".");for(let o=0;o<n.length;o++){const s=n[o],i=r[o];if(s==="*")return o===n.length-1;if(s!==i)return!1}return!0}function id(e,t){return`${e.sessionId}.${t}`}let r2=0;function o2(e,t){const n=new Map,r=new Map,o=new WeakMap,s=new Set,i={},{clock:c,logger:l}=t,a={schedule:(p,d,m,h,b=Math.random().toString(36).slice(2))=>{const g={source:p,target:d,event:m,delay:h,id:b,startedAt:Date.now()},y=id(p,b);f._snapshot._scheduledEvents[y]=g;const v=c.setTimeout(()=>{delete i[y],delete f._snapshot._scheduledEvents[y],f._relay(p,d,m)},h);i[y]=v},cancel:(p,d)=>{const m=id(p,d),h=i[m];delete i[m],delete f._snapshot._scheduledEvents[m],h!==void 0&&c.clearTimeout(h)},cancelAll:p=>{for(const d in f._snapshot._scheduledEvents){const m=f._snapshot._scheduledEvents[d];m.source===p&&a.cancel(p,m.id)}}},u=p=>{if(!s.size)return;const d={...p,rootId:e.sessionId};s.forEach(m=>m.next?.(d))},f={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${r2++}`,_register:(p,d)=>(n.set(p,d),p),_unregister:p=>{n.delete(p.sessionId);const d=o.get(p);d!==void 0&&(r.delete(d),o.delete(p))},get:p=>r.get(p),getAll:()=>Object.fromEntries(r.entries()),_set:(p,d)=>{const m=r.get(p);if(m&&m!==d)throw new Error(`Actor with system ID '${p}' already exists.`);r.set(p,d),o.set(d,p)},inspect:p=>{const d=Ii(p);return s.add(d),{unsubscribe(){s.delete(d)}}},_sendInspectionEvent:u,_relay:(p,d,m)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:p,actorRef:d,event:m}),d._send(m)},scheduler:a,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const p=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const d in p){const{source:m,target:h,event:b,delay:g,id:y}=p[d];a.schedule(m,h,b,g,y)}},_clock:c,_logger:l};return f}let Xc=!1;const fu=1;let ct=(function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e})({});const s2={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class Lg{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new nd(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=ct.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...s2,...n},{clock:o,logger:s,parent:i,syncSnapshot:c,id:l,systemId:a,inspect:u}=r;this.system=i?i.system:o2(this,{clock:o,logger:s}),u&&!i&&this.system.inspect(Ii(u)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=i,this._syncSnapshot=c,this.options=r,this.src=r.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const p=this.eventListeners.get(f.type),d=this.eventListeners.get("*");if(!p&&!d)return;const m=[...p?p.values():[],...d?d.values():[]];for(const h of m)try{h(f)}catch(b){jt(b)}},actionExecutor:f=>{const p=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const d=Xc;try{Xc=!0,f.exec(f.info,f.params)}finally{Xc=d}};this._processingStatus===ct.Running?p():this._deferred.push(p)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),a&&(this.systemId=a,this.system._set(a,this)),this._initState(n?.snapshot??n?.state),a&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(t,n){this._snapshot=t;let r;for(;r=this._deferred.shift();)try{r()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{o.next?.(t)}catch(s){jt(s)}break;case"done":for(const o of this.observers)try{o.next?.(t)}catch(s){jt(s)}this._stopProcedure(),this._complete(),this._doneEvent=QI(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,r){const o=Ii(t,n,r);if(this._processingStatus!==ct.Stopped)this.observers.add(o);else switch(this._snapshot.status){case"done":try{o.complete?.()}catch(s){jt(s)}break;case"error":{const s=this._snapshot.error;if(!o.error)jt(s);else try{o.error(s)}catch(i){jt(i)}break}}return{unsubscribe:()=>{this.observers.delete(o)}}}on(t,n){let r=this.eventListeners.get(t);r||(r=new Set,this.eventListeners.set(t,r));const o=n.bind(void 0);return r.add(o),{unsubscribe:()=>{r.delete(o)}}}start(){if(this._processingStatus===ct.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=ct.Running;const t=cu(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,r;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(o){r={err:o}}if(r){const{err:o}=r;this._snapshot={...this._snapshot,status:"error",error:o},this._error(o);return}this.update(n,t),t.type===cr&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===ct.Stopped?this:(this.mailbox.clear(),this._processingStatus===ct.NotStarted?(this._processingStatus=ct.Stopped,this):(this.mailbox.enqueue({type:cr}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(n){jt(n)}this.observers.clear(),this.eventListeners.clear()}_reportError(t){if(!this.observers.size){this._parent||jt(t),this.eventListeners.clear();return}let n=!1;for(const r of this.observers){const o=r.error;n||=!o;try{o?.(t)}catch(s){jt(s)}}this.observers.clear(),this.eventListeners.clear(),n&&jt(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,Ag(this.id,t))}_stopProcedure(){return this._processingStatus!==ct.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new nd(this._process.bind(this)),this._processingStatus=ct.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==ct.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:GI)(this)}toJSON(){return{xstate$$type:fu,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[e2](){return this}getSnapshot(){return this._snapshot}}function Wt(e,...[t]){return new Lg(e,t)}const i2=Wt;function c2(e,t,n,r,{sendId:o}){const s=typeof o=="function"?o(n,r):o;return[t,{sendId:s},void 0]}function a2(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function mc(e){function t(n,r){}return t.type="xstate.cancel",t.sendId=e,t.resolve=c2,t.execute=a2,t}function l2(e,t,n,r,{id:o,systemId:s,src:i,input:c,syncSnapshot:l}){const a=typeof i=="string"?uu(t.machine,i):i,u=typeof o=="function"?o(n):o;let f,p;return a&&(p=typeof c=="function"?c({context:t.context,event:n.event,self:e.self}):c,f=Wt(a,{id:u,src:i,parent:e.self,syncSnapshot:l,systemId:s,input:p})),[ar(t,{children:{...t.children,[u]:f}}),{id:o,systemId:s,actorRef:f,src:i,input:p},void 0]}function u2(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==ct.Stopped&&t.start()})}function gc(...[e,{id:t,systemId:n,input:r,syncSnapshot:o=!1}={}]){function s(i,c){}return s.type="xstate.spawnChild",s.id=t,s.systemId=n,s.src=e,s.input=r,s.syncSnapshot=o,s.resolve=l2,s.execute=u2,s}function f2(e,t,n,r,{actorRef:o}){const s=typeof o=="function"?o(n,r):o,i=typeof s=="string"?t.children[s]:s;let c=t.children;return i&&(c={...c},delete c[i.id]),[ar(t,{children:c}),i,void 0]}function Dg(e,t){const n=t.getSnapshot();if(n&&"children"in n)for(const r of Object.values(n.children))Dg(e,r);e.system._unregister(t)}function d2(e,t){if(t){if(Dg(e,t),t._processingStatus!==ct.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function ao(e){function t(n,r){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=f2,t.execute=d2,t}const p2=ao;function h2(e,t,{stateValue:n}){if(typeof n=="string"&&Rs(n)){const r=e.machine.getStateNodeById(n);return e._nodes.some(o=>o===r)}return e.matches(n)}function m2(e){function t(){return!1}return t.check=h2,t.stateValue=e,t}function g2(e,{context:t,event:n},{guards:r}){return!mr(r[0],t,n,e)}function y2(e){function t(n,r){return!1}return t.check=g2,t.guards=[e],t}function b2(e,{context:t,event:n},{guards:r}){return r.every(o=>mr(o,t,n,e))}function v2(e){function t(n,r){return!1}return t.check=b2,t.guards=e,t}function w2(e,{context:t,event:n},{guards:r}){return r.some(o=>mr(o,t,n,e))}function x2(e){function t(n,r){return!1}return t.check=w2,t.guards=e,t}function mr(e,t,n,r){const{machine:o}=r,s=typeof e=="function",i=s?e:o.implementations.guards[typeof e=="string"?e:e.type];if(!s&&!i)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof i!="function")return mr(i,t,n,r);const c={context:t,event:n},l=s||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in i?i.check(r,c,i):i(c,l)}function yc(e){return e.type==="atomic"||e.type==="final"}function Yr(e){return Object.values(e.states).filter(t=>t.type!=="history")}function lo(e,t){const n=[];if(t===e)return n;let r=e.parent;for(;r&&r!==t;)n.push(r),r=r.parent;return n}function ki(e){const t=new Set(e),n=zg(t);for(const r of t)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))cd(r).forEach(o=>t.add(o));else if(r.type==="parallel"){for(const o of Yr(r))if(o.type!=="history"&&!t.has(o)){const s=cd(o);for(const i of s)t.add(i)}}for(const r of t){let o=r.parent;for(;o;)t.add(o),o=o.parent}return t}function Fg(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const o=n[0];if(o){if(yc(o))return o.key}else return{}}const r={};for(const o of n)r[o.key]=Fg(o,t);return r}function zg(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function Vg(e,t){const n=ki(t);return Fg(e,zg(n))}function du(e,t){return t.type==="compound"?Yr(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?Yr(t).every(n=>du(e,n)):t.type==="final"}const Rs=e=>e[0]===YI;function S2(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(r=>jg(t,r)).sort((r,o)=>o.length-r.length).flatMap(r=>e.transitions.get(r))}function _2(e){const t=e.config.after;if(!t)return[];const n=o=>{const s=ZI(o,e.id),i=s.type;return e.entry.push(bc(s,{id:i,delay:o})),e.exit.push(mc(i)),i};return Object.keys(t).flatMap(o=>{const s=t[o],i=typeof s=="string"?{target:s}:s,c=Number.isNaN(+o)?o:+o,l=n(c);return rn(i).map(a=>({...a,event:l,delay:c}))}).map(o=>{const{delay:s}=o;return{...Cn(e,o.event,o),delay:s}})}function Cn(e,t,n){const r=$g(n.target),o=n.reenter??!1,s=O2(e,r),i={...n,actions:rn(n.actions),guard:n.guard,target:s,source:e,reenter:o,eventType:t,toJSON:()=>({...i,source:`#${e.id}`,target:s?s.map(c=>`#${c.id}`):void 0})};return i}function E2(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===Ig)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=e.config.on[n];t.set(n,Or(r).map(o=>Cn(e,n,o)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,Or(e.config.onDone).map(r=>Cn(e,n,r)))}for(const n of e.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;t.set(r,Or(n.onDone).map(o=>Cn(e,r,o)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;t.set(r,Or(n.onError).map(o=>Cn(e,r,o)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;t.set(r,Or(n.onSnapshot).map(o=>Cn(e,r,o)))}}for(const n of e.after){let r=t.get(n.eventType);r||(r=[],t.set(n.eventType,r)),r.push(n)}return t}function R2(e){const t=[],n=r=>{Object.values(r).forEach(o=>{if(o.config.route&&o.config.id){const s=o.config.id,i=o.config.route.guard,c=(a,u)=>a.event.to!==`#${s}`?!1:i&&typeof i=="function"?i(a,u):!0,l={...o.config.route,guard:c,target:`#${s}`};t.push(Cn(e,"xstate.route",l))}o.states&&n(o.states)})};n(e.states),t.length>0&&e.transitions.set("xstate.route",t)}function C2(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const r={source:e,actions:!t||typeof t=="string"?[]:rn(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return r}function O2(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(Rs(n))return e.machine.getStateNodeById(n);const r=n[0]===Tg;if(r&&!e.parent)return Ai(e,n.slice(1));const o=r?e.key+n:n;if(e.parent)try{return Ai(e.parent,o)}catch(s){throw new Error(`Invalid transition definition for state node '${e.id}':
${s.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function Ug(e){const t=$g(e.config.target);return t?{target:t.map(n=>typeof n=="string"?Ai(e.parent,n):n)}:e.parent.initial}function Qn(e){return e.type==="history"}function cd(e){const t=Bg(e);for(const n of t)for(const r of lo(n,e))t.add(r);return t}function Bg(e){const t=new Set;function n(r){if(!t.has(r)){if(t.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const o of Yr(r))n(o)}}return n(e),t}function Jr(e,t){if(Rs(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function Ai(e,t){if(typeof t=="string"&&Rs(t))try{return e.machine.getStateNodeById(t)}catch{}const n=lu(t).slice();let r=e;for(;n.length;){const o=n.shift();if(!o.length)break;r=Jr(r,o)}return r}function cs(e,t){if(typeof t=="string"){const o=e.states[t];if(!o)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,o]}const n=Object.keys(t),r=n.map(o=>Jr(e,o)).filter(Boolean);return[e.machine.root,e].concat(r,n.reduce((o,s)=>{const i=Jr(e,s);if(!i)return o;const c=cs(i,t[s]);return o.concat(c)},[]))}function T2(e,t,n,r){const s=Jr(e,t).next(n,r);return!s||!s.length?e.next(n,r):s}function I2(e,t,n,r){const o=Object.keys(t),s=Jr(e,o[0]),i=pu(s,t[o[0]],n,r);return!i||!i.length?e.next(n,r):i}function k2(e,t,n,r){const o=[];for(const s of Object.keys(t)){const i=t[s];if(!i)continue;const c=Jr(e,s),l=pu(c,i,n,r);l&&o.push(...l)}return o.length?o:e.next(n,r)}function pu(e,t,n,r){return typeof t=="string"?T2(e,t,n,r):Object.keys(t).length===1?I2(e,t,n,r):k2(e,t,n,r)}function A2(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function Ln(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function M2(e,t){const n=new Set(e),r=new Set(t);for(const o of n)if(r.has(o))return!0;for(const o of r)if(n.has(o))return!0;return!1}function Wg(e,t,n){const r=new Set;for(const o of e){let s=!1;const i=new Set;for(const c of r)if(M2(Wa([o],t,n),Wa([c],t,n)))if(Ln(o.source,c.source))i.add(c);else{s=!0;break}if(!s){for(const c of i)r.delete(c);r.add(o)}}return Array.from(r)}function P2(e){const[t,...n]=e;for(const r of lo(t,void 0))if(n.every(o=>Ln(o,r)))return r}function hu(e,t){if(!e.target)return[];const n=new Set;for(const r of e.target)if(Qn(r))if(t[r.id])for(const o of t[r.id])n.add(o);else for(const o of hu(Ug(r),t))n.add(o);else n.add(r);return[...n]}function Hg(e,t){const n=hu(e,t);if(!n)return;if(!e.reenter&&n.every(o=>o===e.source||Ln(o,e.source)))return e.source;const r=P2(n.concat(e.source));if(r)return r;if(!e.reenter)return e.source.machine.root}function Wa(e,t,n){const r=new Set;for(const o of e)if(o.target?.length){const s=Hg(o,n);o.reenter&&o.source===s&&r.add(s);for(const i of t)Ln(i,s)&&r.add(i)}return[...r]}function N2(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function qg(e,t,n,r,o){return Ha([{target:[...Bg(e)],source:e,reenter:!0,actions:[],eventType:null,toJSON:null}],t,n,r,!0,o)}function Ha(e,t,n,r,o,s){const i=[];if(!e.length)return[t,i];const c=n.actionExecutor;n.actionExecutor=l=>{i.push(l),c(l)};try{const l=new Set(t._nodes);let a=t.historyValue;const u=Wg(e,l,a);let f=t;o||([f,a]=D2(f,r,n,u,l,a,s,n.actionExecutor)),f=Xr(f,r,n,u.flatMap(d=>d.actions),s,void 0),f=j2(f,r,n,u,l,s,a,o);const p=[...l];f.status==="done"&&(f=Xr(f,r,n,p.sort((d,m)=>m.order-d.order).flatMap(d=>d.exit),s,void 0));try{return a===t.historyValue&&N2(t._nodes,l)?[f,i]:[ar(f,{_nodes:p,historyValue:a}),i]}catch(d){throw d}}finally{n.actionExecutor=c}}function $2(e,t,n,r,o){if(r.output===void 0)return;const s=Ua(o.id,o.output!==void 0&&o.parent?Ba(o.output,e.context,t,n.self):void 0);return Ba(r.output,e.context,s,n.self)}function j2(e,t,n,r,o,s,i,c){let l=e;const a=new Set,u=new Set;L2(r,i,u,a),c&&u.add(e.machine.root);const f=new Set;for(const p of[...a].sort((d,m)=>d.order-m.order)){o.add(p);const d=[];d.push(...p.entry);for(const m of p.invoke)d.push(gc(m.src,{...m,syncSnapshot:!!m.onSnapshot}));if(u.has(p)){const m=p.initial.actions;d.push(...m)}if(l=Xr(l,t,n,d,s,p.invoke.map(m=>m.id)),p.type==="final"){const m=p.parent;let h=m?.type==="parallel"?m:m?.parent,b=h||p;for(m?.type==="compound"&&s.push(Ua(m.id,p.output!==void 0?Ba(p.output,l.context,t,n.self):void 0));h?.type==="parallel"&&!f.has(h)&&du(o,h);)f.add(h),s.push(Ua(h.id)),b=h,h=h.parent;if(h)continue;l=ar(l,{status:"done",output:$2(l,t,n,l.machine.root,b)})}}return l}function L2(e,t,n,r){for(const o of e){const s=Hg(o,t);for(const c of o.target||[])!Qn(c)&&(o.source!==c||o.source!==s||o.reenter)&&(r.add(c),n.add(c)),Ar(c,t,n,r);const i=hu(o,t);for(const c of i){const l=lo(c,s);s?.type==="parallel"&&l.push(s),Gg(r,t,n,l,!o.source.parent&&o.reenter?void 0:s)}}}function Ar(e,t,n,r){if(Qn(e))if(t[e.id]){const o=t[e.id];for(const s of o)r.add(s),Ar(s,t,n,r);for(const s of o)Zc(s,e.parent,r,t,n)}else{const o=Ug(e);for(const s of o.target)r.add(s),o===e.parent?.initial&&n.add(e.parent),Ar(s,t,n,r);for(const s of o.target)Zc(s,e.parent,r,t,n)}else if(e.type==="compound"){const[o]=e.initial.target;Qn(o)||(r.add(o),n.add(o)),Ar(o,t,n,r),Zc(o,e,r,t,n)}else if(e.type==="parallel")for(const o of Yr(e).filter(s=>!Qn(s)))[...r].some(s=>Ln(s,o))||(Qn(o)||(r.add(o),n.add(o)),Ar(o,t,n,r))}function Gg(e,t,n,r,o){for(const s of r)if((!o||Ln(s,o))&&e.add(s),s.type==="parallel")for(const i of Yr(s).filter(c=>!Qn(c)))[...e].some(c=>Ln(c,i))||(e.add(i),Ar(i,t,n,e))}function Zc(e,t,n,r,o){Gg(n,r,o,lo(e,t))}function D2(e,t,n,r,o,s,i,c){let l=e;const a=Wa(r,o,s);a.sort((f,p)=>p.order-f.order);let u;for(const f of a)for(const p of A2(f)){let d;p.history==="deep"?d=m=>yc(m)&&Ln(m,f):d=m=>m.parent===f,u??={...s},u[p.id]=Array.from(o).filter(d)}for(const f of a)l=Xr(l,t,n,[...f.exit,...f.invoke.map(p=>ao(p.id))],i,void 0),o.delete(f);return[l,u||s]}function F2(e,t){return e.implementations.actions[t]}function Kg(e,t,n,r,o,s){const{machine:i}=e;let c=e;for(const l of r){const a=typeof l=="function",u=a?l:F2(i,typeof l=="string"?l:l.type),f={context:c.context,event:t,self:n.self,system:n.system},p=a||typeof l=="string"?void 0:"params"in l?typeof l.params=="function"?l.params({context:c.context,event:t}):l.params:void 0;if(!u||!("resolve"in u)){n.actionExecutor({type:typeof l=="string"?l:typeof l=="object"?l.type:l.name||"(anonymous)",info:f,params:p,exec:u});continue}const d=u,[m,h,b]=d.resolve(n,c,f,p,u,o);c=m,"retryResolve"in d&&s?.push([d,h]),"execute"in d&&n.actionExecutor({type:d.type,info:f,params:h,exec:d.execute.bind(null,n,h)}),b&&(c=Kg(c,t,n,b,o,s))}return c}function Xr(e,t,n,r,o,s){const i=s?[]:void 0,c=Kg(e,t,n,r,{internalQueue:o,deferredActorIds:s},i);return i?.forEach(([l,a])=>{l.retryResolve(n,c,a)}),c}function Go(e,t,n,r){let o=e;const s=[];function i(a,u,f){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:u,snapshot:a[0],_transitions:f}),s.push(a)}if(t.type===cr)return o=ar(ad(o,t,n),{status:"stopped"}),i([o,[]],t,[]),{snapshot:o,microsteps:s};let c=t;if(c.type!==kg){const a=c,u=t2(a),f=ld(a,o);if(u&&!f.length)return o=ar(e,{status:"error",error:a.error}),i([o,[]],a,[]),{snapshot:o,microsteps:s};const p=Ha(f,e,n,c,!1,r);o=p[0],i(p,a,f)}let l=!0;for(;o.status==="active";){let a=l?z2(o,c):[];const u=a.length?o:void 0;if(!a.length){if(!r.length)break;c=r.shift(),a=ld(c,o)}const f=Ha(a,o,n,c,!1,r);o=f[0],l=o!==u,i(f,c,a)}return o.status!=="active"&&ad(o,c,n),{snapshot:o,microsteps:s}}function ad(e,t,n){return Xr(e,t,n,Object.values(e.children).map(r=>ao(r)),[],void 0)}function ld(e,t){return t.machine.getTransitionData(t,e)}function z2(e,t){const n=new Set,r=e._nodes.filter(yc);for(const o of r)e:for(const s of[o].concat(lo(o,void 0)))if(s.always){for(const i of s.always)if(i.guard===void 0||mr(i.guard,e.context,t,e)){n.add(i);break e}}return Wg(Array.from(n),new Set(e._nodes),e.historyValue)}function V2(e,t){const n=ki(cs(e,t));return Vg(e,[...n])}function Yg(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const U2=function(t){return au(t,this.value)},B2=function(t){return this.tags.has(t)},W2=function(t){const n=this.machine.getTransitionData(this,t);return!!n?.length&&n.some(r=>r.target!==void 0||r.actions.length)},H2=function(){const{_nodes:t,tags:n,machine:r,getMeta:o,toJSON:s,can:i,hasTag:c,matches:l,...a}=this;return{...a,tags:Array.from(n)}},q2=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function ti(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:Vg(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:U2,hasTag:B2,can:W2,getMeta:q2,toJSON:H2}}function ar(e,t={}){return ti({...e,...t},e.machine)}function G2(e){if(typeof e!="object"||e===null)return{};const t={};for(const n in e){const r=e[n];Array.isArray(r)&&(t[n]=r.map(o=>({id:o.id})))}return t}function K2(e,t){const{_nodes:n,tags:r,machine:o,children:s,context:i,can:c,hasTag:l,matches:a,getMeta:u,toJSON:f,...p}=e,d={};for(const h in s){const b=s[h];d[h]={snapshot:b.getPersistedSnapshot(t),src:b.src,systemId:b.systemId,syncSnapshot:b._syncSnapshot}}return{...p,context:Jg(i),children:d,historyValue:G2(p.historyValue)}}function Jg(e){let t;for(const n in e){const r=e[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)t??=Array.isArray(e)?e.slice():{...e},t[n]={xstate$$type:fu,id:r.id};else{const o=Jg(r);o!==r&&(t??=Array.isArray(e)?e.slice():{...e},t[n]=o)}}return t??e}function Y2(e,t,n,r,{event:o,id:s,delay:i},{internalQueue:c}){const l=t.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${o}" }) instead`);const a=typeof o=="function"?o(n,r):o;let u;if(typeof i=="string"){const f=l&&l[i];u=typeof f=="function"?f(n,r):f}else u=typeof i=="function"?i(n,r):i;return typeof u!="number"&&c.push(a),[t,{event:a,id:s,delay:u},void 0]}function J2(e,t){const{event:n,delay:r,id:o}=t;if(typeof r=="number"){e.defer(()=>{const s=e.self;e.system.scheduler.schedule(s,s,n,r,o)});return}}function bc(e,t){function n(r,o){}return n.type="xstate.raise",n.event=e,n.id=t?.id,n.delay=t?.delay,n.resolve=Y2,n.execute=J2,n}function Xg(e,t){return{config:e,transition:(n,r,o)=>({...n,context:e(n.context,r,o)}),getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:typeof t=="function"?t({input:r}):t}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const Qc=new WeakMap;function X2(e){return{config:e,start:(n,r)=>{const{self:o,system:s,emit:i}=r,c={receivers:void 0,dispose:void 0};Qc.set(o,c),c.dispose=e({input:n.input,system:s,self:o,sendBack:l=>{o.getSnapshot().status!=="stopped"&&o._parent&&s._relay(o,o._parent,l)},receive:l=>{c.receivers??=new Set,c.receivers.add(l)},emit:i})},transition:(n,r,o)=>{const s=Qc.get(o.self);return r.type===cr?(n={...n,status:"stopped",error:void 0},Qc.delete(o.self),s.receivers?.clear(),s.dispose?.(),n):(s.receivers?.forEach(i=>i(r)),n)},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,input:r}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const ud="xstate.observable.next",Mi="xstate.observable.error",Pi="xstate.observable.complete";function Z2(e){return{config:e,transition:(n,r)=>{if(n.status!=="active")return n;switch(r.type){case ud:return{...n,context:r.data};case Mi:return{...n,status:"error",error:r.data,input:void 0,_subscription:void 0};case Pi:return{...n,status:"done",input:void 0,_subscription:void 0};case cr:return n._subscription.unsubscribe(),{...n,status:"stopped",input:void 0,_subscription:void 0};default:return n}},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:void 0,input:r,_subscription:void 0}),start:(n,{self:r,system:o,emit:s})=>{n.status!=="done"&&(n._subscription=e({input:n.input,system:o,self:r,emit:s}).subscribe({next:i=>{o._relay(r,r,{type:ud,data:i})},error:i=>{o._relay(r,r,{type:Mi,data:i})},complete:()=>{o._relay(r,r,{type:Pi})}}))},getPersistedSnapshot:({_subscription:n,...r})=>r,restoreSnapshot:n=>({...n,_subscription:void 0})}}function Q2(e){return{config:e,transition:(n,r)=>{if(n.status!=="active")return n;switch(r.type){case Mi:return{...n,status:"error",error:r.data,input:void 0,_subscription:void 0};case Pi:return{...n,status:"done",input:void 0,_subscription:void 0};case cr:return n._subscription.unsubscribe(),{...n,status:"stopped",input:void 0,_subscription:void 0};default:return n}},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,context:void 0,input:r,_subscription:void 0}),start:(n,{self:r,system:o,emit:s})=>{n.status!=="done"&&(n._subscription=e({input:n.input,system:o,self:r,emit:s}).subscribe({next:i=>{r._parent&&o._relay(r,r._parent,i)},error:i=>{o._relay(r,r,{type:Mi,data:i})},complete:()=>{o._relay(r,r,{type:Pi})}}))},getPersistedSnapshot:({_subscription:n,...r})=>r,restoreSnapshot:n=>({...n,_subscription:void 0})}}const fd="xstate.promise.resolve",dd="xstate.promise.reject",vo=new WeakMap;function Zg(e){return{config:e,transition:(n,r,o)=>{if(n.status!=="active")return n;switch(r.type){case fd:{const s=r.data;return{...n,status:"done",output:s,input:void 0}}case dd:return{...n,status:"error",error:r.data,input:void 0};case cr:return vo.get(o.self)?.abort(),vo.delete(o.self),{...n,status:"stopped",input:void 0};default:return n}},start:(n,{self:r,system:o,emit:s})=>{if(n.status!=="active")return;const i=new AbortController;vo.set(r,i),Promise.resolve(e({input:n.input,system:o,self:r,signal:i.signal,emit:s})).then(l=>{r.getSnapshot().status==="active"&&(vo.delete(r),o._relay(r,r,{type:fd,data:l}))},l=>{r.getSnapshot().status==="active"&&(vo.delete(r),o._relay(r,r,{type:dd,data:l}))})},getInitialSnapshot:(n,r)=>({status:"active",output:void 0,error:void 0,input:r}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}const ek=Xg(e=>{},void 0);function tk(){return Wt(ek)}function nk(e,{machine:t,context:n},r,o){const s=(i,c)=>{if(typeof i=="string"){const l=uu(t,i);if(!l)throw new Error(`Actor logic '${i}' not implemented in machine '${t.id}'`);const a=Wt(l,{id:c?.id,parent:e.self,syncSnapshot:c?.syncSnapshot,input:typeof c?.input=="function"?c.input({context:n,event:r,self:e.self}):c?.input,src:i,systemId:c?.systemId});return o[a.id]=a,a}else return Wt(i,{id:c?.id,parent:e.self,syncSnapshot:c?.syncSnapshot,input:c?.input,src:i,systemId:c?.systemId})};return(i,c)=>{const l=s(i,c);return o[l.id]=l,e.defer(()=>{l._processingStatus!==ct.Stopped&&l.start()}),l}}function rk(e,t,n,r,{assignment:o}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},i={context:t.context,event:n.event,spawn:nk(e,t,n.event,s),self:e.self,system:e.system};let c={};if(typeof o=="function")c=o(i,r);else for(const a of Object.keys(o)){const u=o[a];c[a]=typeof u=="function"?u(i,r):u}const l=Object.assign({},t.context,c);return[ar(t,{context:l,children:Object.keys(s).length?{...t.children,...s}:t.children}),void 0,void 0]}function pt(e){function t(n,r){}return t.type="xstate.assign",t.assignment=e,t.resolve=rk,t}const pd=new WeakMap;function xr(e,t,n){let r=pd.get(e);return r?t in r||(r[t]=n()):(r={[t]:n()},pd.set(e,r)),r[t]}const ok={},wo=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class as{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Tg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?od(this.config.states,(r,o)=>new as(r,{_parent:this,_key:o,_machine:this.machine})):ok,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=rn(this.config.entry).slice(),this.exit=rn(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=rn(t.tags).slice()}_initialize(){this.transitions=E2(this),this.config.always&&(this.always=Or(this.config.always).map(t=>Cn(this,Ig,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(wo),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(wo),eventType:null})}:void 0,history:this.history,states:od(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(wo)})),entry:this.entry.map(wo),exit:this.exit.map(wo),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return xr(this,"invoke",()=>rn(this.config.invoke).map((t,n)=>{const{src:r,systemId:o}=t,s=t.id??sd(this.id,n),i=typeof r=="string"?r:`xstate.invoke.${sd(this.id,n)}`;return{...t,src:i,id:s,systemId:o,toJSON(){const{onDone:c,onError:l,...a}=t;return{...a,type:"xstate.invoke",src:i,id:s}}}}))}get on(){return xr(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(o=>[n,o])).reduce((n,[r,o])=>(n[r]=n[r]||[],n[r].push(o),n),{}))}get after(){return xr(this,"delayedTransitions",()=>_2(this))}get initial(){return xr(this,"initial",()=>C2(this,this.config.initial))}next(t,n){const r=n.type,o=[];let s;const i=xr(this,`candidates-${r}`,()=>S2(this,r));for(const c of i){const{guard:l}=c,a=t.context;let u=!1;try{u=!l||mr(l,a,n,t)}catch(f){const p=typeof l=="string"?l:typeof l=="object"?l.type:void 0;throw new Error(`Unable to evaluate guard ${p?`'${p}' `:""}in transition for event '${r}' in state node '${this.id}':
${f.message}`)}if(u){o.push(...c.actions),s=c;break}}return s?[s]:void 0}get events(){return xr(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const r of Object.keys(t)){const o=t[r];if(o.states)for(const s of o.events)n.add(`${s}`)}return Array.from(n)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),n=new Set(t.filter(r=>this.transitions.get(r).some(o=>!(!o.target&&!o.actions.length&&!o.reenter))));return Array.from(n)}}const sk="#";class vc{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new as(t,{_key:this.id,_machine:this}),this.root._initialize(),R2(this.root),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:r,actors:o,delays:s}=this.implementations;return new vc(this.config,{actions:{...n,...t.actions},guards:{...r,...t.guards},actors:{...o,...t.actors},delays:{...s,...t.delays}})}resolveState(t){const n=V2(this.root,t.value),r=ki(cs(this.root,n));return ti({_nodes:[...r],context:t.context||{},children:{},status:du(r,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,r){return Go(t,n,r,[]).snapshot}microstep(t,n,r){return Go(t,n,r,[]).microsteps.map(([o])=>o)}getTransitionData(t,n){return pu(this.root,t.value,t,n)||[]}_getPreInitialState(t,n,r){const{context:o}=this.config,s=ti({context:typeof o!="function"&&o?o:{},_nodes:[this.root],children:{},status:"active"},this);return typeof o=="function"?Xr(s,n,t,[pt(({spawn:c,event:l,self:a})=>o({spawn:c,input:l.input,self:a}))],r,void 0):s}getInitialSnapshot(t,n){const r=cu(n),o=[],s=this._getPreInitialState(t,r,o),[i]=qg(this.root,s,t,r,o),{snapshot:c}=Go(i,r,t,o);return c}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=lu(t),r=n.slice(1),o=Rs(n[0])?n[0].slice(sk.length):n[0],s=this.idMap.get(o);if(!s)throw new Error(`Child state node '#${o}' does not exist on machine '${this.id}'`);return Ai(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return K2(t,n)}restoreSnapshot(t,n){const r={},o=t.children;Object.keys(o).forEach(f=>{const p=o[f],d=p.snapshot,m=p.src,h=typeof m=="string"?uu(this,m):m;if(!h)return;const b=Wt(h,{id:f,parent:n.self,syncSnapshot:p.syncSnapshot,snapshot:d,src:m,systemId:p.systemId});r[f]=b});function s(f,p){if(p instanceof as)return p;try{return f.machine.getStateNodeById(p.id)}catch{}}function i(f,p){if(!p||typeof p!="object")return{};const d={};for(const m in p){const h=p[m];for(const b of h){const g=s(f,b);g&&(d[m]??=[],d[m].push(g))}}return d}const c=i(this.root,t.historyValue),l=ti({...t,children:r,_nodes:Array.from(ki(cs(this.root,t.value))),historyValue:c},this),a=new Set;function u(f,p){if(!a.has(f)){a.add(f);for(const d in f){const m=f[d];if(m&&typeof m=="object"){if("xstate$$type"in m&&m.xstate$$type===fu){f[d]=p[m.id];continue}u(m,p)}}}}return u(l.context,r),l}}function ik(e,t,n,r,{event:o}){const s=typeof o=="function"?o(n,r):o;return[t,{event:s},void 0]}function ck(e,{event:t}){e.defer(()=>e.emit(t))}function er(e){function t(n,r){}return t.type="xstate.emit",t.event=e,t.resolve=ik,t.execute=ck,t}let Ni=(function(e){return e.Parent="#_parent",e.Internal="#_internal",e})({});function ak(e,t,n,r,{to:o,event:s,id:i,delay:c},l){const a=t.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${s}" }) instead`);const u=typeof s=="function"?s(n,r):s;let f;if(typeof c=="string"){const m=a&&a[c];f=typeof m=="function"?m(n,r):m}else f=typeof c=="function"?c(n,r):c;const p=typeof o=="function"?o(n,r):o;let d;if(typeof p=="string"){if(p===Ni.Parent?d=e.self._parent:p===Ni.Internal?d=e.self:p.startsWith("#_")?d=t.children[p.slice(2)]:d=l.deferredActorIds?.includes(p)?p:t.children[p],!d)throw new Error(`Unable to send event to actor '${p}' from machine '${t.machine.id}'.`)}else d=p||e.self;return[t,{to:d,targetId:typeof p=="string"?p:void 0,event:u,id:i,delay:f},void 0]}function lk(e,t,n){typeof n.to=="string"&&(n.to=t.children[n.to])}function uk(e,t){e.defer(()=>{const{to:n,event:r,delay:o,id:s}=t;if(typeof o=="number"){e.system.scheduler.schedule(e.self,n,r,o,s);return}e.system._relay(e.self,n,r.type===XI?Ag(e.self.id,r.data):r)})}function Cs(e,t,n){function r(o,s){}return r.type="xstate.sendTo",r.to=e,r.event=t,r.id=n?.id,r.delay=n?.delay,r.resolve=ak,r.retryResolve=lk,r.execute=uk,r}function Qg(e,t){return Cs(Ni.Parent,e,t)}function fk(e,t){return Cs(e,({event:n})=>n,t)}function dk(e,t,n,r,{collect:o}){const s=[],i=function(l){s.push(l)};return i.assign=(...c)=>{s.push(pt(...c))},i.cancel=(...c)=>{s.push(mc(...c))},i.raise=(...c)=>{s.push(bc(...c))},i.sendTo=(...c)=>{s.push(Cs(...c))},i.sendParent=(...c)=>{s.push(Qg(...c))},i.spawnChild=(...c)=>{s.push(gc(...c))},i.stopChild=(...c)=>{s.push(ao(...c))},i.emit=(...c)=>{s.push(er(...c))},o({context:n.context,event:n.event,enqueue:i,check:c=>mr(c,t.context,n.event,t),self:e.self,system:e.system},r),[t,void 0,s]}function ey(e){function t(n,r){}return t.type="xstate.enqueueActions",t.collect=e,t.resolve=dk,t}function pk(e,t,n,r,{value:o,label:s}){return[t,{value:typeof o=="function"?o(n,r):o,label:s},void 0]}function hk({logger:e},{value:t,label:n}){n?e(n,t):e(t)}function ty(e=({context:n,event:r})=>({context:n,event:r}),t){function n(r,o){}return n.type="xstate.log",n.value=e,n.label=t,n.resolve=pk,n.execute=hk,n}function qa(e,t){const n=rn(t);if(!n.some(o=>jg(e.type,o))){const o=n.length===1?`type matching "${n[0]}"`:`one of types matching "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(e)} to have ${o}`)}}function ny(e,t){return new vc(e,t)}function uo(e){const t=Wt(e);return{self:t,defer:()=>{},id:"",logger:()=>{},sessionId:"",stopChild:()=>{},system:t.system,emit:()=>{},actionExecutor:()=>{}}}function mk(e,...[t]){const n=uo(e);return e.getInitialSnapshot(n,t)}function gk(e,t,n){const r=uo(e);return r.self._snapshot=t,e.transition(t,n,r)}function mu({schemas:e,actors:t,actions:n,guards:r,delays:o}){return{assign:pt,sendTo:Cs,raise:bc,log:ty,cancel:mc,stopChild:ao,enqueueActions:ey,emit:er,spawnChild:gc,createStateConfig:s=>s,createAction:s=>s,createMachine:s=>ny({...s,schemas:e},{actors:t,actions:n,guards:r,delays:o}),extend:s=>mu({schemas:e,actors:t,actions:{...n,...s.actions},guards:{...r,...s.guards},delays:{...o,...s.delays}})}}class yk{constructor(){this.timeouts=new Map,this._now=0,this._id=0,this._flushing=!1,this._flushingInvalidated=!1}now(){return this._now}getId(){return this._id++}setTimeout(t,n){this._flushingInvalidated=this._flushing;const r=this.getId();return this.timeouts.set(r,{start:this.now(),timeout:n,fn:t}),r}clearTimeout(t){this._flushingInvalidated=this._flushing,this.timeouts.delete(t)}set(t){if(this._now>t)throw new Error("Unable to travel back in time");this._now=t,this.flushTimeouts()}flushTimeouts(){if(this._flushing){this._flushingInvalidated=!0;return}this._flushing=!0;const t=[...this.timeouts].sort(([n,r],[o,s])=>{const i=r.start+r.timeout;return s.start+s.timeout>i?-1:1});for(const[n,r]of t){if(this._flushingInvalidated){this._flushingInvalidated=!1,this._flushing=!1,this.flushTimeouts();return}this.now()-r.start>=r.timeout&&(this.timeouts.delete(n),r.fn.call(null))}this._flushing=!1}increment(t){this._now+=t,this.flushTimeouts()}}function bk(e){return new Promise((t,n)=>{e.subscribe({complete:()=>{t(e.getSnapshot().output)},error:n})})}function vk(e,t,n){const r=[],o=uo(e);return o.actionExecutor=i=>{r.push(i)},[e.transition(t,n,o),r]}function wk(e,...[t]){const n=[],r=uo(e);return r.actionExecutor=s=>{n.push(s)},[e.getInitialSnapshot(r,t),n]}function xk(e,t,n){const r=uo(e),{microsteps:o}=Go(t,n,r,[]);return o}function Sk(e,...[t]){const n=uo(e),r=cu(t),o=[],s=e._getPreInitialState(n,r,o),i=qg(e.root,s,n,r,o),{microsteps:c}=Go(i[0],r,n,o);return[i,...c]}function _k(e){const t=[],n=e._nodes.filter(yc),r=new Set;for(const o of n)for(const s of[o].concat(lo(o,void 0)))if(!r.has(s.id)){r.add(s.id);for(const[,i]of s.transitions)t.push(...i);s.always&&t.push(...s.always)}return t}const Ek={timeout:1/0};function Rk(e,t,n){const r={...Ek,...n};return new Promise((o,s)=>{const{signal:i}=r;if(i?.aborted){s(i.reason);return}let c=!1;const l=r.timeout===1/0?void 0:setTimeout(()=>{a(),s(new Error(`Timeout of ${r.timeout} ms exceeded`))},r.timeout),a=()=>{clearTimeout(l),c=!0,p?.unsubscribe(),f&&i.removeEventListener("abort",f)};function u(d){t(d)&&(a(),o(d))}let f,p;u(e.getSnapshot()),!c&&(i&&(f=()=>{a(),s(i.reason)},i.addEventListener("abort",f)),p=e.subscribe({next:u,error:d=>{a(),s(d)},complete:()=>{a(),s(new Error("Actor terminated without satisfying predicate"))}}),c&&p.unsubscribe())})}const Ck=Object.freeze(Object.defineProperty({__proto__:null,Actor:Lg,SimulatedClock:yk,SpecialTargets:Ni,StateMachine:vc,StateNode:as,__unsafe_getAllOwnEventDescriptors:n2,and:v2,assertEvent:qa,assign:pt,cancel:mc,createActor:Wt,createEmptyActor:tk,createMachine:ny,emit:er,enqueueActions:ey,forwardTo:fk,fromCallback:X2,fromEventObservable:Q2,fromObservable:Z2,fromPromise:Zg,fromTransition:Xg,getInitialMicrosteps:Sk,getInitialSnapshot:mk,getMicrosteps:xk,getNextSnapshot:gk,getNextTransitions:_k,getStateNodes:cs,initialTransition:wk,interpret:i2,isMachineSnapshot:Yg,log:ty,matchesState:au,not:y2,or:x2,pathToStateValue:Mg,raise:bc,sendParent:Qg,sendTo:Cs,setup:mu,spawnChild:gc,stateIn:m2,stop:p2,stopChild:ao,toObserver:Ii,toPromise:bk,transition:vk,waitFor:Rk},Symbol.toStringTag,{value:"Module"})),hd=rl(Ck);var Ws={exports:{}},md;function gd(){return md||(md=1,(function(e,t){const{hasOwnProperty:n}=Object.prototype,r=g();r.configure=g,r.stringify=r,r.default=r,t.stringify=r,t.configure=g,e.exports=r;const o=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function s(y){return y.length<5e3&&!o.test(y)?`"${y}"`:JSON.stringify(y)}function i(y,v){if(y.length>200||v)return y.sort(v);for(let x=1;x<y.length;x++){const S=y[x];let O=x;for(;O!==0&&y[O-1]>S;)y[O]=y[O-1],O--;y[O]=S}return y}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(y){return c.call(y)!==void 0&&y.length!==0}function a(y,v,x){y.length<x&&(x=y.length);const S=v===","?"":" ";let O=`"0":${S}${y[0]}`;for(let I=1;I<x;I++)O+=`${v}"${I}":${S}${y[I]}`;return O}function u(y){if(n.call(y,"circularValue")){const v=y.circularValue;if(typeof v=="string")return`"${v}"`;if(v==null)return v;if(v===Error||v===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function f(y){let v;if(n.call(y,"deterministic")&&(v=y.deterministic,typeof v!="boolean"&&typeof v!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return v===void 0?!0:v}function p(y,v){let x;if(n.call(y,v)&&(x=y[v],typeof x!="boolean"))throw new TypeError(`The "${v}" argument must be of type boolean`);return x===void 0?!0:x}function d(y,v){let x;if(n.call(y,v)){if(x=y[v],typeof x!="number")throw new TypeError(`The "${v}" argument must be of type number`);if(!Number.isInteger(x))throw new TypeError(`The "${v}" argument must be an integer`);if(x<1)throw new RangeError(`The "${v}" argument must be >= 1`)}return x===void 0?1/0:x}function m(y){return y===1?"1 item":`${y} items`}function h(y){const v=new Set;for(const x of y)(typeof x=="string"||typeof x=="number")&&v.add(String(x));return v}function b(y){if(n.call(y,"strict")){const v=y.strict;if(typeof v!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(v)return x=>{let S=`Object can not safely be stringified. Received type ${typeof x}`;throw typeof x!="function"&&(S+=` (${x.toString()})`),new Error(S)}}}function g(y){y={...y};const v=b(y);v&&(y.bigint===void 0&&(y.bigint=!1),"circularValue"in y||(y.circularValue=Error));const x=u(y),S=p(y,"bigint"),O=f(y),I=typeof O=="function"?O:void 0,_=d(y,"maximumDepth"),R=d(y,"maximumBreadth");function j(H,C,A,N,P,k){let Y=C[H];switch(typeof Y=="object"&&Y!==null&&typeof Y.toJSON=="function"&&(Y=Y.toJSON(H)),Y=N.call(C,H,Y),typeof Y){case"string":return s(Y);case"object":{if(Y===null)return"null";if(A.indexOf(Y)!==-1)return x;let V="",re=",";const Z=k;if(Array.isArray(Y)){if(Y.length===0)return"[]";if(_<A.length+1)return'"[Array]"';A.push(Y),P!==""&&(k+=P,V+=`
${k}`,re=`,
${k}`);const Q=Math.min(Y.length,R);let K=0;for(;K<Q-1;K++){const U=j(String(K),Y,A,N,P,k);V+=U!==void 0?U:"null",V+=re}const M=j(String(K),Y,A,N,P,k);if(V+=M!==void 0?M:"null",Y.length-1>R){const U=Y.length-R-1;V+=`${re}"... ${m(U)} not stringified"`}return P!==""&&(V+=`
${Z}`),A.pop(),`[${V}]`}let T=Object.keys(Y);const $=T.length;if($===0)return"{}";if(_<A.length+1)return'"[Object]"';let z="",ne="";P!==""&&(k+=P,re=`,
${k}`,z=" ");const F=Math.min($,R);O&&!l(Y)&&(T=i(T,I)),A.push(Y);for(let Q=0;Q<F;Q++){const K=T[Q],M=j(K,Y,A,N,P,k);M!==void 0&&(V+=`${ne}${s(K)}:${z}${M}`,ne=re)}if($>R){const Q=$-R;V+=`${ne}"...":${z}"${m(Q)} not stringified"`,ne=re}return P!==""&&ne.length>1&&(V=`
${k}${V}
${Z}`),A.pop(),`{${V}}`}case"number":return isFinite(Y)?String(Y):v?v(Y):"null";case"boolean":return Y===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(Y);default:return v?v(Y):void 0}}function D(H,C,A,N,P,k){switch(typeof C=="object"&&C!==null&&typeof C.toJSON=="function"&&(C=C.toJSON(H)),typeof C){case"string":return s(C);case"object":{if(C===null)return"null";if(A.indexOf(C)!==-1)return x;const Y=k;let V="",re=",";if(Array.isArray(C)){if(C.length===0)return"[]";if(_<A.length+1)return'"[Array]"';A.push(C),P!==""&&(k+=P,V+=`
${k}`,re=`,
${k}`);const $=Math.min(C.length,R);let z=0;for(;z<$-1;z++){const F=D(String(z),C[z],A,N,P,k);V+=F!==void 0?F:"null",V+=re}const ne=D(String(z),C[z],A,N,P,k);if(V+=ne!==void 0?ne:"null",C.length-1>R){const F=C.length-R-1;V+=`${re}"... ${m(F)} not stringified"`}return P!==""&&(V+=`
${Y}`),A.pop(),`[${V}]`}A.push(C);let Z="";P!==""&&(k+=P,re=`,
${k}`,Z=" ");let T="";for(const $ of N){const z=D($,C[$],A,N,P,k);z!==void 0&&(V+=`${T}${s($)}:${Z}${z}`,T=re)}return P!==""&&T.length>1&&(V=`
${k}${V}
${Y}`),A.pop(),`{${V}}`}case"number":return isFinite(C)?String(C):v?v(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(C);default:return v?v(C):void 0}}function L(H,C,A,N,P){switch(typeof C){case"string":return s(C);case"object":{if(C===null)return"null";if(typeof C.toJSON=="function"){if(C=C.toJSON(H),typeof C!="object")return L(H,C,A,N,P);if(C===null)return"null"}if(A.indexOf(C)!==-1)return x;const k=P;if(Array.isArray(C)){if(C.length===0)return"[]";if(_<A.length+1)return'"[Array]"';A.push(C),P+=N;let z=`
${P}`;const ne=`,
${P}`,F=Math.min(C.length,R);let Q=0;for(;Q<F-1;Q++){const M=L(String(Q),C[Q],A,N,P);z+=M!==void 0?M:"null",z+=ne}const K=L(String(Q),C[Q],A,N,P);if(z+=K!==void 0?K:"null",C.length-1>R){const M=C.length-R-1;z+=`${ne}"... ${m(M)} not stringified"`}return z+=`
${k}`,A.pop(),`[${z}]`}let Y=Object.keys(C);const V=Y.length;if(V===0)return"{}";if(_<A.length+1)return'"[Object]"';P+=N;const re=`,
${P}`;let Z="",T="",$=Math.min(V,R);l(C)&&(Z+=a(C,re,R),Y=Y.slice(C.length),$-=C.length,T=re),O&&(Y=i(Y,I)),A.push(C);for(let z=0;z<$;z++){const ne=Y[z],F=L(ne,C[ne],A,N,P);F!==void 0&&(Z+=`${T}${s(ne)}: ${F}`,T=re)}if(V>R){const z=V-R;Z+=`${T}"...": "${m(z)} not stringified"`,T=re}return T!==""&&(Z=`
${P}${Z}
${k}`),A.pop(),`{${Z}}`}case"number":return isFinite(C)?String(C):v?v(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(C);default:return v?v(C):void 0}}function G(H,C,A){switch(typeof C){case"string":return s(C);case"object":{if(C===null)return"null";if(typeof C.toJSON=="function"){if(C=C.toJSON(H),typeof C!="object")return G(H,C,A);if(C===null)return"null"}if(A.indexOf(C)!==-1)return x;let N="";const P=C.length!==void 0;if(P&&Array.isArray(C)){if(C.length===0)return"[]";if(_<A.length+1)return'"[Array]"';A.push(C);const Z=Math.min(C.length,R);let T=0;for(;T<Z-1;T++){const z=G(String(T),C[T],A);N+=z!==void 0?z:"null",N+=","}const $=G(String(T),C[T],A);if(N+=$!==void 0?$:"null",C.length-1>R){const z=C.length-R-1;N+=`,"... ${m(z)} not stringified"`}return A.pop(),`[${N}]`}let k=Object.keys(C);const Y=k.length;if(Y===0)return"{}";if(_<A.length+1)return'"[Object]"';let V="",re=Math.min(Y,R);P&&l(C)&&(N+=a(C,",",R),k=k.slice(C.length),re-=C.length,V=","),O&&(k=i(k,I)),A.push(C);for(let Z=0;Z<re;Z++){const T=k[Z],$=G(T,C[T],A);$!==void 0&&(N+=`${V}${s(T)}:${$}`,V=",")}if(Y>R){const Z=Y-R;N+=`${V}"...":"${m(Z)} not stringified"`}return A.pop(),`{${N}}`}case"number":return isFinite(C)?String(C):v?v(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(C);default:return v?v(C):void 0}}function B(H,C,A){if(arguments.length>1){let N="";if(typeof A=="number"?N=" ".repeat(Math.min(A,10)):typeof A=="string"&&(N=A.slice(0,10)),C!=null){if(typeof C=="function")return j("",{"":H},[],C,N,"");if(Array.isArray(C))return D("",H,[],h(C),N,"")}if(N.length!==0)return L("",H,[],N,"")}return G("",H,[])}return B}})(Ws,Ws.exports)),Ws.exports}var ea,yd;function Ok(){if(yd)return ea;yd=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(_,R)=>{for(var j in R)e(_,j,{get:R[j],enumerable:!0})},s=(_,R,j,D)=>{if(R&&typeof R=="object"||typeof R=="function")for(let L of n(R))!r.call(_,L)&&L!==j&&e(_,L,{get:()=>R[L],enumerable:!(D=t(R,L))||D.enumerable});return _},i=_=>s(e({},"__esModule",{value:!0}),_),c={};o(c,{WebSocket:()=>y,default:()=>O}),ea=i(c),(!globalThis.EventTarget||!globalThis.Event)&&console.error(`
  PartySocket requires a global 'EventTarget' class to be available!
  You can polyfill this global by adding this to your code before any partysocket imports: 
  
  \`\`\`
  import 'partysocket/event-target-polyfill';
  \`\`\`
  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.
`);var l=class extends Event{message;error;constructor(_,R){super("error",R),this.message=_.message,this.error=_}},a=class extends Event{code;reason;wasClean=!0;constructor(_=1e3,R="",j){super("close",j),this.code=_,this.reason=R}},u={Event,ErrorEvent:l,CloseEvent:a};function f(_,R){if(!_)throw new Error(R)}function p(_){return new _.constructor(_.type,_)}function d(_){return"data"in _?new MessageEvent(_.type,_):"code"in _||"reason"in _?new a(_.code||1999,_.reason||"unknown reason",_):"error"in _?new l(_.error,_):new Event(_.type,_)}var m=typeof process<"u"&&typeof process.versions?.node<"u"&&typeof document>"u",h=m?d:p,b={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},g=!1,y=class Kn extends EventTarget{_ws;_retryCount=-1;_uptimeTimeout;_connectTimeout;_shouldReconnect=!0;_connectLock=!1;_binaryType="blob";_closeCalled=!1;_messageQueue=[];_debugLogger=console.log.bind(console);_url;_protocols;_options;constructor(R,j,D={}){super(),this._url=R,this._protocols=j,this._options=D,this._options.startClosed&&(this._shouldReconnect=!1),this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return Kn.CONNECTING}get OPEN(){return Kn.OPEN}get CLOSING(){return Kn.CLOSING}get CLOSED(){return Kn.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(R){this._binaryType=R,this._ws&&(this._ws.binaryType=R)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((j,D)=>(typeof D=="string"?j+=D.length:D instanceof Blob?j+=D.size:j+=D.byteLength,j),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?Kn.CLOSED:Kn.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}onclose=null;onerror=null;onmessage=null;onopen=null;close(R=1e3,j){if(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(R,j)}reconnect(R,j){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(R,j),this._connect())}send(R){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",R),this._ws.send(R);else{const{maxEnqueuedMessages:j=b.maxEnqueuedMessages}=this._options;this._messageQueue.length<j&&(this._debug("enqueue",R),this._messageQueue.push(R))}}_debug(...R){this._options.debug&&this._debugLogger("RWS>",...R)}_getNextDelay(){const{reconnectionDelayGrowFactor:R=b.reconnectionDelayGrowFactor,minReconnectionDelay:j=b.minReconnectionDelay,maxReconnectionDelay:D=b.maxReconnectionDelay}=this._options;let L=0;return this._retryCount>0&&(L=j*Math.pow(R,this._retryCount-1),L>D&&(L=D)),this._debug("next delay",L),L}_wait(){return new Promise(R=>{setTimeout(R,this._getNextDelay())})}_getNextProtocols(R){if(!R)return Promise.resolve(null);if(typeof R=="string"||Array.isArray(R))return Promise.resolve(R);if(typeof R=="function"){const j=R();if(!j)return Promise.resolve(null);if(typeof j=="string"||Array.isArray(j))return Promise.resolve(j);if(j.then)return j}throw Error("Invalid protocols")}_getNextUrl(R){if(typeof R=="string")return Promise.resolve(R);if(typeof R=="function"){const j=R();if(typeof j=="string")return Promise.resolve(j);if(j.then)return j}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;const{maxRetries:R=b.maxRetries,connectionTimeout:j=b.connectionTimeout}=this._options;if(this._retryCount>=R){this._debug("max retries reached",this._retryCount,">=",R);return}this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)])).then(([D,L])=>{if(this._closeCalled){this._connectLock=!1;return}!this._options.WebSocket&&typeof WebSocket>"u"&&!g&&(console.error(` No WebSocket implementation available. You should define options.WebSocket. 

For example, if you're using node.js, run \`npm install ws\`, and then in your code:

import PartySocket from 'partysocket';
import WS from 'ws';

const partysocket = new PartySocket({
  host: "127.0.0.1:1999",
  room: "test-room",
  WebSocket: WS
});

`),g=!0);const G=this._options.WebSocket||WebSocket;this._debug("connect",{url:D,protocols:L}),this._ws=L?new G(D,L):new G(D),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),j)}).catch(D=>{this._connectLock=!1,this._handleError(new u.ErrorEvent(Error(D.message),this))})}_handleTimeout(){this._debug("timeout event"),this._handleError(new u.ErrorEvent(Error("TIMEOUT"),this))}_disconnect(R=1e3,j){if(this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(R,j),this._handleClose(new u.CloseEvent(R,j,this))}catch{}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_handleOpen=R=>{this._debug("open event");const{minUptime:j=b.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),j),f(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(D=>this._ws?.send(D)),this._messageQueue=[],this.onopen&&this.onopen(R),this.dispatchEvent(h(R))};_handleMessage=R=>{this._debug("message event"),this.onmessage&&this.onmessage(R),this.dispatchEvent(h(R))};_handleError=R=>{this._debug("error event",R.message),this._disconnect(void 0,R.message==="TIMEOUT"?"timeout":void 0),this.onerror&&this.onerror(R),this._debug("exec error listeners"),this.dispatchEvent(h(R)),this._connect()};_handleClose=R=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(R),this.dispatchEvent(h(R))};_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}},v=_=>_[1]!==null&&_[1]!==void 0;function x(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();let _=new Date().getTime(),R=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(j){let D=Math.random()*16;return _>0?(D=(_+D)%16|0,_=Math.floor(_/16)):(D=(R+D)%16|0,R=Math.floor(R/16)),(j==="x"?D:D&3|8).toString(16)})}function S(_,R,j={}){const{host:D,path:L,protocol:G,room:B,party:H,query:C}=_;let A=D.replace(/^(http|https|ws|wss):\/\//,"");if(A.endsWith("/")&&(A=A.slice(0,-1)),L&&L.startsWith("/"))throw new Error("path must not start with a slash");const N=H??"main",P=L?`/${L}`:"",k=G||(A.startsWith("localhost:")||A.startsWith("127.0.0.1:")||A.startsWith("192.168.")||A.startsWith("10.")||A.startsWith("172.")&&A.split(".")[1]>="16"&&A.split(".")[1]<="31"||A.startsWith("[::ffff:7f00:1]:")?R:R+"s"),Y=`${k}://${A}/${H?`parties/${H}`:"party"}/${B}${P}`,V=(Z={})=>`${Y}?${new URLSearchParams([...Object.entries(j),...Object.entries(Z).filter(v)])}`,re=typeof C=="function"?async()=>V(await C()):V(C);return{host:A,path:P,room:B,name:N,protocol:k,partyUrl:Y,urlProvider:re}}var O=class extends y{constructor(_){const R=I(_);super(R.urlProvider,R.protocols,R.socketOptions),this.partySocketOptions=_,this.setWSProperties(R)}_pk;_pkurl;name;room;host;path;updateProperties(_){const R=I({...this.partySocketOptions,..._,host:_.host??this.host,room:_.room??this.room,path:_.path??this.path});this._url=R.urlProvider,this._protocols=R.protocols,this._options=R.socketOptions,this.setWSProperties(R)}setWSProperties(_){const{_pk:R,_pkurl:j,name:D,room:L,host:G,path:B}=_;this._pk=R,this._pkurl=j,this.name=D,this.room=L,this.host=G,this.path=B}reconnect(_,R){if(!this.room||!this.host)throw new Error("The room and host must be set before connecting, use `updateProperties` method to set them or pass them to the constructor.");super.reconnect(_,R)}get id(){return this._pk}get roomUrl(){return this._pkurl}static async fetch(_,R){const j=S(_,"http"),D=typeof j.urlProvider=="string"?j.urlProvider:await j.urlProvider();return(_.fetch??fetch)(D,R)}};function I(_){const{id:R,host:j,path:D,party:L,room:G,protocol:B,query:H,protocols:C,...A}=_,N=R||x(),P=S(_,"ws",{_pk:N});return{_pk:N,_pkurl:P.partyUrl,name:P.name,room:P.room,host:P.host,path:P.path,protocols:C,socketOptions:A,urlProvider:P.urlProvider}}return ea}var Tk=(function(){function e(){this.keyToValue=new Map,this.valueToKey=new Map}return e.prototype.set=function(t,n){this.keyToValue.set(t,n),this.valueToKey.set(n,t)},e.prototype.getByKey=function(t){return this.keyToValue.get(t)},e.prototype.getByValue=function(t){return this.valueToKey.get(t)},e.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},e})(),ry=(function(){function e(t){this.generateIdentifier=t,this.kv=new Tk}return e.prototype.register=function(t,n){this.kv.getByValue(t)||(n||(n=this.generateIdentifier(t)),this.kv.set(n,t))},e.prototype.clear=function(){this.kv.clear()},e.prototype.getIdentifier=function(t){return this.kv.getByValue(t)},e.prototype.getValue=function(t){return this.kv.getByKey(t)},e})(),Ik=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),kk=(function(e){Ik(t,e);function t(){var n=e.call(this,function(r){return r.name})||this;return n.classToAllowedProps=new Map,n}return t.prototype.register=function(n,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(n,r.allowProps),e.prototype.register.call(this,n,r.identifier)):e.prototype.register.call(this,n,r)},t.prototype.getAllowedProps=function(n){return this.classToAllowedProps.get(n)},t})(ry),Ak=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){i={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function Mk(e){if("values"in Object)return Object.values(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function Pk(e,t){var n=Mk(e);if("find"in n)return n.find(t);for(var r=n,o=0;o<r.length;o++){var s=r[o];if(t(s))return s}}function Zr(e,t){Object.entries(e).forEach(function(n){var r=Ak(n,2),o=r[0],s=r[1];return t(s,o)})}function ni(e,t){return e.indexOf(t)!==-1}function bd(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r))return r}}var Nk=(function(){function e(){this.transfomers={}}return e.prototype.register=function(t){this.transfomers[t.name]=t},e.prototype.findApplicable=function(t){return Pk(this.transfomers,function(n){return n.isApplicable(t)})},e.prototype.findByName=function(t){return this.transfomers[t]},e})(),$k=function(e){return Object.prototype.toString.call(e).slice(8,-1)},oy=function(e){return typeof e>"u"},jk=function(e){return e===null},ls=function(e){return typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype},Ga=function(e){return ls(e)&&Object.keys(e).length===0},Dn=function(e){return Array.isArray(e)},Lk=function(e){return typeof e=="string"},Dk=function(e){return typeof e=="number"&&!isNaN(e)},Fk=function(e){return typeof e=="boolean"},zk=function(e){return e instanceof RegExp},us=function(e){return e instanceof Map},fs=function(e){return e instanceof Set},sy=function(e){return $k(e)==="Symbol"},Vk=function(e){return e instanceof Date&&!isNaN(e.valueOf())},Uk=function(e){return e instanceof Error},vd=function(e){return typeof e=="number"&&isNaN(e)},Bk=function(e){return Fk(e)||jk(e)||oy(e)||Dk(e)||Lk(e)||sy(e)},Wk=function(e){return typeof e=="bigint"},Hk=function(e){return e===1/0||e===-1/0},qk=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},Gk=function(e){return e instanceof URL},iy=function(e){return e.replace(/\./g,"\\.")},ta=function(e){return e.map(String).map(iy).join(".")},Ko=function(e){for(var t=[],n="",r=0;r<e.length;r++){var o=e.charAt(r),s=o==="\\"&&e.charAt(r+1)===".";if(s){n+=".",r++;continue}var i=o===".";if(i){t.push(n),n="";continue}n+=o}var c=n;return t.push(c),t},Ka=function(){return Ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ka.apply(this,arguments)},Ya=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){i={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},Ja=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Lt(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}var cy=[Lt(oy,"undefined",function(){return null},function(){}),Lt(Wk,"bigint",function(e){return e.toString()},function(e){return typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)}),Lt(Vk,"Date",function(e){return e.toISOString()},function(e){return new Date(e)}),Lt(Uk,"Error",function(e,t){var n={name:e.name,message:e.message};return t.allowedErrorProps.forEach(function(r){n[r]=e[r]}),n},function(e,t){var n=new Error(e.message);return n.name=e.name,n.stack=e.stack,t.allowedErrorProps.forEach(function(r){n[r]=e[r]}),n}),Lt(zk,"regexp",function(e){return""+e},function(e){var t=e.slice(1,e.lastIndexOf("/")),n=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,n)}),Lt(fs,"set",function(e){return Ja([],Ya(e.values()))},function(e){return new Set(e)}),Lt(us,"map",function(e){return Ja([],Ya(e.entries()))},function(e){return new Map(e)}),Lt(function(e){return vd(e)||Hk(e)},"number",function(e){return vd(e)?"NaN":e>0?"Infinity":"-Infinity"},Number),Lt(function(e){return e===0&&1/e===-1/0},"number",function(){return"-0"},Number),Lt(Gk,"URL",function(e){return e.toString()},function(e){return new URL(e)})];function wc(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}var ay=wc(function(e,t){if(sy(e)){var n=!!t.symbolRegistry.getIdentifier(e);return n}return!1},function(e,t){var n=t.symbolRegistry.getIdentifier(e);return["symbol",n]},function(e){return e.description},function(e,t,n){var r=n.symbolRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),Kk=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(e,t){return e[t.name]=t,e},{}),ly=wc(qk,function(e){return["typed-array",e.constructor.name]},function(e){return Ja([],Ya(e))},function(e,t){var n=Kk[t[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(e)});function uy(e,t){if(e?.constructor){var n=!!t.classRegistry.getIdentifier(e.constructor);return n}return!1}var fy=wc(uy,function(e,t){var n=t.classRegistry.getIdentifier(e.constructor);return["class",n]},function(e,t){var n=t.classRegistry.getAllowedProps(e.constructor);if(!n)return Ka({},e);var r={};return n.forEach(function(o){r[o]=e[o]}),r},function(e,t,n){var r=n.classRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(r.prototype),e)}),dy=wc(function(e,t){return!!t.customTransformerRegistry.findApplicable(e)},function(e,t){var n=t.customTransformerRegistry.findApplicable(e);return["custom",n.name]},function(e,t){var n=t.customTransformerRegistry.findApplicable(e);return n.serialize(e)},function(e,t,n){var r=n.customTransformerRegistry.findByName(t[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(e)}),Yk=[fy,ay,dy,ly],wd=function(e,t){var n=bd(Yk,function(o){return o.isApplicable(e,t)});if(n)return{value:n.transform(e,t),type:n.annotation(e,t)};var r=bd(cy,function(o){return o.isApplicable(e,t)});if(r)return{value:r.transform(e,t),type:r.annotation}},py={};cy.forEach(function(e){py[e.annotation]=e});var Jk=function(e,t,n){if(Dn(t))switch(t[0]){case"symbol":return ay.untransform(e,t,n);case"class":return fy.untransform(e,t,n);case"custom":return dy.untransform(e,t,n);case"typed-array":return ly.untransform(e,t,n);default:throw new Error("Unknown transformation: "+t)}else{var r=py[t];if(!r)throw new Error("Unknown transformation: "+t);return r.untransform(e,n)}},Mr=function(e,t){for(var n=e.keys();t>0;)n.next(),t--;return n.next().value};function hy(e){if(ni(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(ni(e,"prototype"))throw new Error("prototype is not allowed as a property");if(ni(e,"constructor"))throw new Error("constructor is not allowed as a property")}var Xk=function(e,t){hy(t);for(var n=0;n<t.length;n++){var r=t[n];if(fs(e))e=Mr(e,+r);else if(us(e)){var o=+r,s=+t[++n]==0?"key":"value",i=Mr(e,o);switch(s){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[r]}return e},Xa=function(e,t,n){if(hy(t),t.length===0)return n(e);for(var r=e,o=0;o<t.length-1;o++){var s=t[o];if(Dn(r)){var i=+s;r=r[i]}else if(ls(r))r=r[s];else if(fs(r)){var c=+s;r=Mr(r,c)}else if(us(r)){var l=o===t.length-2;if(l)break;var c=+s,a=+t[++o]==0?"key":"value",u=Mr(r,c);switch(a){case"key":r=u;break;case"value":r=r.get(u);break}}}var f=t[t.length-1];if(Dn(r)?r[+f]=n(r[+f]):ls(r)&&(r[f]=n(r[f])),fs(r)){var p=Mr(r,+f),d=n(p);p!==d&&(r.delete(p),r.add(d))}if(us(r)){var c=+t[t.length-2],m=Mr(r,c),a=+f==0?"key":"value";switch(a){case"key":{var h=n(m);r.set(h,r.get(m)),h!==m&&r.delete(m);break}case"value":{r.set(m,n(r.get(m)));break}}}return e},nn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){i={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},In=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Za(e,t,n){if(n===void 0&&(n=[]),!!e){if(!Dn(e)){Zr(e,function(i,c){return Za(i,t,In(In([],nn(n)),nn(Ko(c))))});return}var r=nn(e,2),o=r[0],s=r[1];s&&Zr(s,function(i,c){Za(i,t,In(In([],nn(n)),nn(Ko(c))))}),t(o,n)}}function Zk(e,t,n){return Za(t,function(r,o){e=Xa(e,o,function(s){return Jk(s,r,n)})}),e}function Qk(e,t){function n(i,c){var l=Xk(e,Ko(c));i.map(Ko).forEach(function(a){e=Xa(e,a,function(){return l})})}if(Dn(t)){var r=nn(t,2),o=r[0],s=r[1];o.forEach(function(i){e=Xa(e,Ko(i),function(){return e})}),s&&Zr(s,n)}else Zr(t,n);return e}var eA=function(e,t){return ls(e)||Dn(e)||us(e)||fs(e)||uy(e,t)};function tA(e,t,n){var r=n.get(e);r?r.push(t):n.set(e,[t])}function nA(e,t){var n={},r=void 0;return e.forEach(function(o){if(!(o.length<=1)){t||(o=o.map(function(l){return l.map(String)}).sort(function(l,a){return l.length-a.length}));var s=nn(o),i=s[0],c=s.slice(1);i.length===0?r=c.map(ta):n[ta(i)]=c.map(ta)}}),r?Ga(n)?[r]:[r,n]:Ga(n)?void 0:n}var my=function(e,t,n,r,o,s,i){var c;o===void 0&&(o=[]),s===void 0&&(s=[]),i===void 0&&(i=new Map);var l=Bk(e);if(!l){tA(e,o,t);var a=i.get(e);if(a)return r?{transformedValue:null}:a}if(!eA(e,n)){var u=wd(e,n),f=u?{transformedValue:u.value,annotations:[u.type]}:{transformedValue:e};return l||i.set(e,f),f}if(ni(s,e))return{transformedValue:null};var p=wd(e,n),d=(c=p?.value)!==null&&c!==void 0?c:e,m=Dn(d)?[]:{},h={};Zr(d,function(g,y){var v=my(g,t,n,r,In(In([],nn(o)),[y]),In(In([],nn(s)),[e]),i);m[y]=v.transformedValue,Dn(v.annotations)?h[y]=v.annotations:ls(v.annotations)&&Zr(v.annotations,function(x,S){h[iy(y)+"."+S]=x})});var b=Ga(h)?{transformedValue:m,annotations:p?[p.type]:void 0}:{transformedValue:m,annotations:p?[p.type,h]:h};return l||i.set(e,b),b};function gy(e){return Object.prototype.toString.call(e).slice(8,-1)}function xd(e){return gy(e)==="Array"}function rA(e){if(gy(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function oA(e,t,n,r,o){const s={}.propertyIsEnumerable.call(r,t)?"enumerable":"nonenumerable";s==="enumerable"&&(e[t]=n),o&&s==="nonenumerable"&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function Qa(e,t={}){if(xd(e))return e.map(o=>Qa(o,t));if(!rA(e))return e;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e);return[...n,...r].reduce((o,s)=>{if(xd(t.props)&&!t.props.includes(s))return o;const i=e[s],c=Qa(i,t);return oA(o,s,c,e,t.nonenumerable),o},{})}var Jn=function(){return Jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Jn.apply(this,arguments)},sA=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){i={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},iA=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Ht=(function(){function e(t){var n=t===void 0?{}:t,r=n.dedupe,o=r===void 0?!1:r;this.classRegistry=new kk,this.symbolRegistry=new ry(function(s){var i;return(i=s.description)!==null&&i!==void 0?i:""}),this.customTransformerRegistry=new Nk,this.allowedErrorProps=[],this.dedupe=o}return e.prototype.serialize=function(t){var n=new Map,r=my(t,n,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta=Jn(Jn({},o.meta),{values:r.annotations}));var s=nA(n,this.dedupe);return s&&(o.meta=Jn(Jn({},o.meta),{referentialEqualities:s})),o},e.prototype.deserialize=function(t){var n=t.json,r=t.meta,o=Qa(n);return r?.values&&(o=Zk(o,r.values,this)),r?.referentialEqualities&&(o=Qk(o,r.referentialEqualities)),o},e.prototype.stringify=function(t){return JSON.stringify(this.serialize(t))},e.prototype.parse=function(t){return this.deserialize(JSON.parse(t))},e.prototype.registerClass=function(t,n){this.classRegistry.register(t,n)},e.prototype.registerSymbol=function(t,n){this.symbolRegistry.register(t,n)},e.prototype.registerCustom=function(t,n){this.customTransformerRegistry.register(Jn({name:n},t))},e.prototype.allowErrorProps=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(t=this.allowedErrorProps).push.apply(t,iA([],sA(n)))},e.defaultInstance=new e,e.serialize=e.defaultInstance.serialize.bind(e.defaultInstance),e.deserialize=e.defaultInstance.deserialize.bind(e.defaultInstance),e.stringify=e.defaultInstance.stringify.bind(e.defaultInstance),e.parse=e.defaultInstance.parse.bind(e.defaultInstance),e.registerClass=e.defaultInstance.registerClass.bind(e.defaultInstance),e.registerSymbol=e.defaultInstance.registerSymbol.bind(e.defaultInstance),e.registerCustom=e.defaultInstance.registerCustom.bind(e.defaultInstance),e.allowErrorProps=e.defaultInstance.allowErrorProps.bind(e.defaultInstance),e})(),cA=Ht.serialize,aA=Ht.deserialize,lA=Ht.stringify,uA=Ht.parse,fA=Ht.registerClass,dA=Ht.registerCustom,pA=Ht.registerSymbol,hA=Ht.allowErrorProps;const mA=Object.freeze(Object.defineProperty({__proto__:null,SuperJSON:Ht,allowErrorProps:hA,default:Ht,deserialize:aA,parse:uA,registerClass:fA,registerCustom:dA,registerSymbol:pA,serialize:cA,stringify:lA},Symbol.toStringTag,{value:"Module"})),gA=rl(mA);var na={},xo={},Hs={},Sd;function yy(){if(Sd)return Hs;Sd=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.default=n;let e;const t=new Uint8Array(16);function n(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Hs}var Sr={},So={},_o={},_d;function yA(){if(_d)return _o;_d=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return _o.default=e,_o}var Ed;function xc(){if(Ed)return So;Ed=1,Object.defineProperty(So,"__esModule",{value:!0}),So.default=void 0;var e=t(yA());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){return typeof o=="string"&&e.default.test(o)}var r=n;return So.default=r,So}var Rd;function Sc(){if(Rd)return Sr;Rd=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.default=void 0,Sr.unsafeStringify=r;var e=t(xc());function t(i){return i&&i.__esModule?i:{default:i}}const n=[];for(let i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function r(i,c=0){return n[i[c+0]]+n[i[c+1]]+n[i[c+2]]+n[i[c+3]]+"-"+n[i[c+4]]+n[i[c+5]]+"-"+n[i[c+6]]+n[i[c+7]]+"-"+n[i[c+8]]+n[i[c+9]]+"-"+n[i[c+10]]+n[i[c+11]]+n[i[c+12]]+n[i[c+13]]+n[i[c+14]]+n[i[c+15]]}function o(i,c=0){const l=r(i,c);if(!(0,e.default)(l))throw TypeError("Stringified UUID is invalid");return l}var s=o;return Sr.default=s,Sr}var Cd;function bA(){if(Cd)return xo;Cd=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.default=void 0;var e=n(yy()),t=Sc();function n(a){return a&&a.__esModule?a:{default:a}}let r,o,s=0,i=0;function c(a,u,f){let p=u&&f||0;const d=u||new Array(16);a=a||{};let m=a.node||r,h=a.clockseq!==void 0?a.clockseq:o;if(m==null||h==null){const S=a.random||(a.rng||e.default)();m==null&&(m=r=[S[0]|1,S[1],S[2],S[3],S[4],S[5]]),h==null&&(h=o=(S[6]<<8|S[7])&16383)}let b=a.msecs!==void 0?a.msecs:Date.now(),g=a.nsecs!==void 0?a.nsecs:i+1;const y=b-s+(g-i)/1e4;if(y<0&&a.clockseq===void 0&&(h=h+1&16383),(y<0||b>s)&&a.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=b,i=g,o=h,b+=122192928e5;const v=((b&268435455)*1e4+g)%4294967296;d[p++]=v>>>24&255,d[p++]=v>>>16&255,d[p++]=v>>>8&255,d[p++]=v&255;const x=b/4294967296*1e4&268435455;d[p++]=x>>>8&255,d[p++]=x&255,d[p++]=x>>>24&15|16,d[p++]=x>>>16&255,d[p++]=h>>>8|128,d[p++]=h&255;for(let S=0;S<6;++S)d[p+S]=m[S];return u||(0,t.unsafeStringify)(d)}var l=c;return xo.default=l,xo}var Eo={},Sn={},Ro={},Od;function by(){if(Od)return Ro;Od=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.default=void 0;var e=t(xc());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let s;const i=new Uint8Array(16);return i[0]=(s=parseInt(o.slice(0,8),16))>>>24,i[1]=s>>>16&255,i[2]=s>>>8&255,i[3]=s&255,i[4]=(s=parseInt(o.slice(9,13),16))>>>8,i[5]=s&255,i[6]=(s=parseInt(o.slice(14,18),16))>>>8,i[7]=s&255,i[8]=(s=parseInt(o.slice(19,23),16))>>>8,i[9]=s&255,i[10]=(s=parseInt(o.slice(24,36),16))/1099511627776&255,i[11]=s/4294967296&255,i[12]=s>>>24&255,i[13]=s>>>16&255,i[14]=s>>>8&255,i[15]=s&255,i}var r=n;return Ro.default=r,Ro}var Td;function vy(){if(Td)return Sn;Td=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.URL=Sn.DNS=void 0,Sn.default=i;var e=Sc(),t=n(by());function n(c){return c&&c.__esModule?c:{default:c}}function r(c){c=unescape(encodeURIComponent(c));const l=[];for(let a=0;a<c.length;++a)l.push(c.charCodeAt(a));return l}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Sn.DNS=o;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Sn.URL=s;function i(c,l,a){function u(f,p,d,m){var h;if(typeof f=="string"&&(f=r(f)),typeof p=="string"&&(p=(0,t.default)(p)),((h=p)===null||h===void 0?void 0:h.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let b=new Uint8Array(16+f.length);if(b.set(p),b.set(f,p.length),b=a(b),b[6]=b[6]&15|l,b[8]=b[8]&63|128,d){m=m||0;for(let g=0;g<16;++g)d[m+g]=b[g];return d}return(0,e.unsafeStringify)(b)}try{u.name=c}catch{}return u.DNS=o,u.URL=s,u}return Sn}var Co={},Id;function vA(){if(Id)return Co;Id=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.default=void 0;function e(d){if(typeof d=="string"){const m=unescape(encodeURIComponent(d));d=new Uint8Array(m.length);for(let h=0;h<m.length;++h)d[h]=m.charCodeAt(h)}return t(r(o(d),d.length*8))}function t(d){const m=[],h=d.length*32,b="0123456789abcdef";for(let g=0;g<h;g+=8){const y=d[g>>5]>>>g%32&255,v=parseInt(b.charAt(y>>>4&15)+b.charAt(y&15),16);m.push(v)}return m}function n(d){return(d+64>>>9<<4)+14+1}function r(d,m){d[m>>5]|=128<<m%32,d[n(m)-1]=m;let h=1732584193,b=-271733879,g=-1732584194,y=271733878;for(let v=0;v<d.length;v+=16){const x=h,S=b,O=g,I=y;h=l(h,b,g,y,d[v],7,-680876936),y=l(y,h,b,g,d[v+1],12,-389564586),g=l(g,y,h,b,d[v+2],17,606105819),b=l(b,g,y,h,d[v+3],22,-1044525330),h=l(h,b,g,y,d[v+4],7,-176418897),y=l(y,h,b,g,d[v+5],12,1200080426),g=l(g,y,h,b,d[v+6],17,-1473231341),b=l(b,g,y,h,d[v+7],22,-45705983),h=l(h,b,g,y,d[v+8],7,1770035416),y=l(y,h,b,g,d[v+9],12,-1958414417),g=l(g,y,h,b,d[v+10],17,-42063),b=l(b,g,y,h,d[v+11],22,-1990404162),h=l(h,b,g,y,d[v+12],7,1804603682),y=l(y,h,b,g,d[v+13],12,-40341101),g=l(g,y,h,b,d[v+14],17,-1502002290),b=l(b,g,y,h,d[v+15],22,1236535329),h=a(h,b,g,y,d[v+1],5,-165796510),y=a(y,h,b,g,d[v+6],9,-1069501632),g=a(g,y,h,b,d[v+11],14,643717713),b=a(b,g,y,h,d[v],20,-373897302),h=a(h,b,g,y,d[v+5],5,-701558691),y=a(y,h,b,g,d[v+10],9,38016083),g=a(g,y,h,b,d[v+15],14,-660478335),b=a(b,g,y,h,d[v+4],20,-405537848),h=a(h,b,g,y,d[v+9],5,568446438),y=a(y,h,b,g,d[v+14],9,-1019803690),g=a(g,y,h,b,d[v+3],14,-187363961),b=a(b,g,y,h,d[v+8],20,1163531501),h=a(h,b,g,y,d[v+13],5,-1444681467),y=a(y,h,b,g,d[v+2],9,-51403784),g=a(g,y,h,b,d[v+7],14,1735328473),b=a(b,g,y,h,d[v+12],20,-1926607734),h=u(h,b,g,y,d[v+5],4,-378558),y=u(y,h,b,g,d[v+8],11,-2022574463),g=u(g,y,h,b,d[v+11],16,1839030562),b=u(b,g,y,h,d[v+14],23,-35309556),h=u(h,b,g,y,d[v+1],4,-1530992060),y=u(y,h,b,g,d[v+4],11,1272893353),g=u(g,y,h,b,d[v+7],16,-155497632),b=u(b,g,y,h,d[v+10],23,-1094730640),h=u(h,b,g,y,d[v+13],4,681279174),y=u(y,h,b,g,d[v],11,-358537222),g=u(g,y,h,b,d[v+3],16,-722521979),b=u(b,g,y,h,d[v+6],23,76029189),h=u(h,b,g,y,d[v+9],4,-640364487),y=u(y,h,b,g,d[v+12],11,-421815835),g=u(g,y,h,b,d[v+15],16,530742520),b=u(b,g,y,h,d[v+2],23,-995338651),h=f(h,b,g,y,d[v],6,-198630844),y=f(y,h,b,g,d[v+7],10,1126891415),g=f(g,y,h,b,d[v+14],15,-1416354905),b=f(b,g,y,h,d[v+5],21,-57434055),h=f(h,b,g,y,d[v+12],6,1700485571),y=f(y,h,b,g,d[v+3],10,-1894986606),g=f(g,y,h,b,d[v+10],15,-1051523),b=f(b,g,y,h,d[v+1],21,-2054922799),h=f(h,b,g,y,d[v+8],6,1873313359),y=f(y,h,b,g,d[v+15],10,-30611744),g=f(g,y,h,b,d[v+6],15,-1560198380),b=f(b,g,y,h,d[v+13],21,1309151649),h=f(h,b,g,y,d[v+4],6,-145523070),y=f(y,h,b,g,d[v+11],10,-1120210379),g=f(g,y,h,b,d[v+2],15,718787259),b=f(b,g,y,h,d[v+9],21,-343485551),h=s(h,x),b=s(b,S),g=s(g,O),y=s(y,I)}return[h,b,g,y]}function o(d){if(d.length===0)return[];const m=d.length*8,h=new Uint32Array(n(m));for(let b=0;b<m;b+=8)h[b>>5]|=(d[b/8]&255)<<b%32;return h}function s(d,m){const h=(d&65535)+(m&65535);return(d>>16)+(m>>16)+(h>>16)<<16|h&65535}function i(d,m){return d<<m|d>>>32-m}function c(d,m,h,b,g,y){return s(i(s(s(m,d),s(b,y)),g),h)}function l(d,m,h,b,g,y,v){return c(m&h|~m&b,d,m,g,y,v)}function a(d,m,h,b,g,y,v){return c(m&b|h&~b,d,m,g,y,v)}function u(d,m,h,b,g,y,v){return c(m^h^b,d,m,g,y,v)}function f(d,m,h,b,g,y,v){return c(h^(m|~b),d,m,g,y,v)}var p=e;return Co.default=p,Co}var kd;function wA(){if(kd)return Eo;kd=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.default=void 0;var e=n(vy()),t=n(vA());function n(s){return s&&s.__esModule?s:{default:s}}var o=(0,e.default)("v3",48,t.default);return Eo.default=o,Eo}var Oo={},To={},Ad;function xA(){if(Ad)return To;Ad=1,Object.defineProperty(To,"__esModule",{value:!0}),To.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return To.default=t,To}var Md;function SA(){if(Md)return Oo;Md=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.default=void 0;var e=r(xA()),t=r(yy()),n=Sc();function r(i){return i&&i.__esModule?i:{default:i}}function o(i,c,l){if(e.default.randomUUID&&!c&&!i)return e.default.randomUUID();i=i||{};const a=i.random||(i.rng||t.default)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,c){l=l||0;for(let u=0;u<16;++u)c[l+u]=a[u];return c}return(0,n.unsafeStringify)(a)}var s=o;return Oo.default=s,Oo}var Io={},ko={},Pd;function _A(){if(Pd)return ko;Pd=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.default=void 0;function e(o,s,i,c){switch(o){case 0:return s&i^~s&c;case 1:return s^i^c;case 2:return s&i^s&c^i&c;case 3:return s^i^c}}function t(o,s){return o<<s|o>>>32-s}function n(o){const s=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const u=unescape(encodeURIComponent(o));o=[];for(let f=0;f<u.length;++f)o.push(u.charCodeAt(f))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const c=o.length/4+2,l=Math.ceil(c/16),a=new Array(l);for(let u=0;u<l;++u){const f=new Uint32Array(16);for(let p=0;p<16;++p)f[p]=o[u*64+p*4]<<24|o[u*64+p*4+1]<<16|o[u*64+p*4+2]<<8|o[u*64+p*4+3];a[u]=f}a[l-1][14]=(o.length-1)*8/Math.pow(2,32),a[l-1][14]=Math.floor(a[l-1][14]),a[l-1][15]=(o.length-1)*8&4294967295;for(let u=0;u<l;++u){const f=new Uint32Array(80);for(let g=0;g<16;++g)f[g]=a[u][g];for(let g=16;g<80;++g)f[g]=t(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);let p=i[0],d=i[1],m=i[2],h=i[3],b=i[4];for(let g=0;g<80;++g){const y=Math.floor(g/20),v=t(p,5)+e(y,d,m,h)+b+s[y]+f[g]>>>0;b=h,h=m,m=t(d,30)>>>0,d=p,p=v}i[0]=i[0]+p>>>0,i[1]=i[1]+d>>>0,i[2]=i[2]+m>>>0,i[3]=i[3]+h>>>0,i[4]=i[4]+b>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var r=n;return ko.default=r,ko}var Nd;function EA(){if(Nd)return Io;Nd=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.default=void 0;var e=n(vy()),t=n(_A());function n(s){return s&&s.__esModule?s:{default:s}}var o=(0,e.default)("v5",80,t.default);return Io.default=o,Io}var Ao={},$d;function RA(){if($d)return Ao;$d=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Ao.default=e,Ao}var Mo={},jd;function CA(){if(jd)return Mo;jd=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.default=void 0;var e=t(xc());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var r=n;return Mo.default=r,Mo}var Ld;function OA(){return Ld||(Ld=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.default}});var t=u(bA()),n=u(wA()),r=u(SA()),o=u(EA()),s=u(RA()),i=u(CA()),c=u(xc()),l=u(Sc()),a=u(by());function u(f){return f&&f.__esModule?f:{default:f}}})(na)),na}var Tr=null;typeof WebSocket<"u"?Tr=WebSocket:typeof MozWebSocket<"u"?Tr=MozWebSocket:typeof global<"u"?Tr=global.WebSocket||global.MozWebSocket:typeof window<"u"?Tr=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Tr=self.WebSocket||self.MozWebSocket);const TA=Tr,IA=Object.freeze(Object.defineProperty({__proto__:null,default:TA},Symbol.toStringTag,{value:"Module"})),Dd=rl(IA);var ra,Fd;function kA(){if(Fd)return ra;Fd=1;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,i=(T,$)=>{for(var z in $)t(T,z,{get:$[z],enumerable:!0})},c=(T,$,z,ne)=>{if($&&typeof $=="object"||typeof $=="function")for(let F of r($))!s.call(T,F)&&F!==z&&t(T,F,{get:()=>$[F],enumerable:!(ne=n($,F))||ne.enumerable});return T},l=(T,$,z)=>(z=T!=null?e(o(T)):{},c(!T||!T.__esModule?t(z,"default",{value:T,enumerable:!0}):z,T)),a=T=>c(t({},"__esModule",{value:!0}),T),u={};i(u,{createBrowserInspector:()=>D,createBrowserReceiver:()=>G,createInspector:()=>S,createSkyInspector:()=>N,createWebSocketInspector:()=>re,createWebSocketReceiver:()=>Z}),ra=a(u);var f=l(WI()),p=hd;function d(T){return typeof T=="string"?{type:T}:T}var m=typeof process<"u"&&typeof process.versions?.node<"u"&&typeof document>"u",h={version:"0.4.0"};function b(T){typeof window<"u"?(window.requestIdleCallback||window.requestAnimationFrame)(T):setTimeout(T,0)}var g=l(gd());function y(T){let $=T;do $=$._parent;while($?._parent);return $}function v(T){return(typeof T=="string"?void 0:y(T)?.sessionId)??void 0}var x={filter:()=>!0,serialize:T=>T,autoStart:!0,maxDeferredEvents:200,sanitizeEvent:T=>T,sanitizeContext:T=>T};function S(T,$){function z(F){if($?.filter&&!$.filter(F))return;const Q=$?.sanitizeContext||$?.sanitizeEvent?F:{...F};$?.sanitizeContext&&(Q.type==="@xstate.actor"||Q.type==="@xstate.snapshot")&&(Q.snapshot={...Q.snapshot,context:$.sanitizeContext(Q.snapshot.context)}),$?.sanitizeEvent&&(Q.type==="@xstate.event"||Q.type==="@xstate.snapshot")&&(Q.event=$.sanitizeEvent(Q.event));const K=$?.serialize?.(Q)??Q;T.send(K)}return{adapter:T,actor:(F,Q,K)=>{const M=typeof F=="string"?F:F.sessionId,U=F?.logic?.config,q=U?(0,g.default)(U):void 0,le=K?.rootId??typeof F=="string"?void 0:v(F),X=K?.parentId??typeof F=="string"?void 0:F._parent?.sessionId,te=U?U.id:M;z({type:"@xstate.actor",name:te,sessionId:M,createdAt:Date.now().toString(),_version:h.version,rootId:le,parentId:X,id:null,definition:q,snapshot:Q??{status:"active"}})},event:(F,Q,K)=>{const M=typeof F=="string"?F:F.sessionId,U=K?.source?typeof K.source=="string"?K.source:K.source.sessionId:void 0;z({type:"@xstate.event",sourceId:U,sessionId:M,event:d(Q),id:Math.random().toString(),createdAt:Date.now().toString(),rootId:"anonymous",_version:h.version})},snapshot:(F,Q,K)=>{const M=typeof F=="string"?F:F.sessionId;z({type:"@xstate.snapshot",snapshot:{status:"active",...Q},event:K?.event??{type:""},sessionId:M,id:null,createdAt:Date.now().toString(),rootId:"anonymous",_version:h.version})},inspect:{next:F=>{b(function(){const K=O(F);K&&z(K)})}},start(){T.start?.()},stop(){T.stop?.()}}}function O(T){switch(T.type){case"@xstate.actor":{const $=T.actorRef,ne=$?.logic?.config;let F=$.id;F===$.sessionId&&ne&&(F=ne.id);const Q=typeof ne=="object"?(0,g.default)(ne,(K,M)=>typeof M=="function"?{type:M.name}:M):(0,g.default)({id:F});return{name:F,type:"@xstate.actor",definition:Q,_version:h.version,createdAt:Date.now().toString(),id:null,rootId:T.rootId,parentId:T.actorRef._parent?.sessionId,sessionId:T.actorRef.sessionId,snapshot:T.actorRef.getSnapshot()}}case"@xstate.event":return{type:"@xstate.event",event:T.event,sourceId:T.sourceRef?.sessionId,sessionId:T.actorRef.sessionId,_version:h.version,createdAt:Date.now().toString(),id:null,rootId:T.rootId};case"@xstate.snapshot":return{type:"@xstate.snapshot",event:T.event,snapshot:JSON.parse((0,g.default)(T.snapshot)),sessionId:T.actorRef.sessionId,_version:h.version,createdAt:Date.now().toString(),id:null,rootId:T.rootId};default:{if(T.type.startsWith("@xstate."))return;console.warn(`Unhandled inspection event type: ${T.type}`);return}}}var I=class{constructor(){}start(){}stop(){}send(T){}},_="@statelyai.connected";function R(T){return typeof T=="object"&&T!==null&&typeof T.type=="string"}function j(T){return typeof T=="object"&&T!==null&&typeof T.type=="string"&&typeof T._version=="string"}function D(T){const $=T?.window??(typeof window>"u"?void 0:window);if(!$)return console.error("Window does not exist; inspector cannot be started."),new I;const z={...x,url:"https://stately.ai/inspect",filter:()=>!0,serialize:Q=>JSON.parse((0,f.default)(Q)),autoStart:!0,iframe:null,...T,window:$},ne=new B(z),F=S(ne,z);return z.autoStart&&F.start(),F}var L={replayCount:0,window:typeof window<"u"?window:void 0};function G(T){const z={...L,...T}.window,ne=z.self===z.top?z.opener:z.parent,F=new Set;z.addEventListener("message",K=>{j(K.data)&&F.forEach(M=>M.next?.(K.data))});const Q={subscribe(K){const M=(0,p.toObserver)(K);return F.add(M),{unsubscribe(){F.delete(M)}}}};return ne&&ne.postMessage({type:_},"*"),Q}var B=class{constructor(T){this.options=T}status="disconnected";deferredEvents=[];targetWindow=null;start(){this.targetWindow=this.options.iframe?null:this.options.window.open(String(this.options.url),"xstateinspector"),this.options.iframe&&(this.options.iframe.addEventListener("load",()=>{this.targetWindow=this.options.iframe?.contentWindow??null}),this.options.iframe?.setAttribute("src",String(this.options.url))),this.options.window.addEventListener("message",T=>{R(T.data)&&T.data.type==="@statelyai.connected"&&(this.status="connected",this.deferredEvents.forEach($=>{const z=this.options.serialize($);this.targetWindow?.postMessage(z,"*")}))})}stop(){this.targetWindow?.postMessage({type:"@statelyai.disconnected"},"*"),this.status="disconnected"}send(T){if(this.options.filter(T)){if(this.options.send)this.options.send(T);else if(this.status==="connected"){const z=this.options.serialize(T);this.targetWindow?.postMessage(z,"*")}this.deferredEvents.push(T),this.deferredEvents.length>this.options.maxDeferredEvents&&this.deferredEvents.shift()}}},H=l(Ok()),C=gA,A=OA();function N(T={}){const{host:$,apiBaseURL:z}={host:"stately-sky-beta.mellson.partykit.dev",apiBaseURL:"https://stately.ai/registry/api/sky"},ne=z.replace("/api/sky",""),{apiKey:F,onerror:Q,...K}=T,M=(0,A.v4)(),U=`inspect-${M}`,q=new H.default({host:$,room:U,WebSocket:m?Dd:void 0}),le=`${ne}/inspect/${M}`;return q.onerror=Q??console.error,q.onopen=()=>{console.log("Connected to Sky, link to your live inspect session:"),console.log(le)},m?S({...K,send(X){const te=F?{apiKey:F,...X}:X;q.send((0,C.stringify)(te))}}):D({...K,url:le,send(X){const te=F?{apiKey:F,...X}:X;q.send((0,C.stringify)(te))}})}var P=l(Dd),k=l(gd()),Y=hd,V=class{ws;status="closed";deferredEvents=[];options;constructor(T){this.options={...x,filter:()=>!0,serialize:$=>JSON.parse((0,k.default)($)),autoStart:!0,url:"ws://localhost:8080",...T}}start(){const T=()=>{this.ws=new P.default(this.options.url),this.ws.onopen=()=>{console.log("websocket open"),this.status="open",this.deferredEvents.forEach($=>{const z=x.serialize($),ne=this.options.serialize(z);this.ws.send((0,k.default)(ne))})},this.ws.onclose=()=>{console.log("websocket closed")},this.ws.onerror=async $=>{console.error("websocket error",$),await new Promise(z=>setTimeout(z,5e3)),console.warn("restarting"),T()},this.ws.onmessage=$=>{typeof $.data=="string"&&console.log("message",$.data)}};T()}stop(){this.ws.close(),this.status="closed"}send(T){this.status==="open"?this.ws.send((0,k.default)(T)):(this.deferredEvents.push(T),this.deferredEvents.length>this.options.maxDeferredEvents&&this.deferredEvents.shift())}};function re(T){const $=new V(T);return S($,T)}function Z(T){const $={server:"ws://localhost:8080",...T},z=new Set,ne=new P.default($.server);return ne.onopen=()=>{console.log("websocket open"),ne.onmessage=Q=>{if(typeof Q.data!="string")return;console.log("message",Q.data);const K=JSON.parse(Q.data);z.forEach(M=>{M.next?.(K)})}},{subscribe(Q){const K=(0,Y.toObserver)(Q);return z.add(K),{unsubscribe(){z.delete(K)}}}}}return ra}kA();var AA=w.useLayoutEffect;const wy=(e,t)=>{t(e);const n=e.getSnapshot().children;n&&Object.values(n).forEach(r=>{wy(r,t)})};function MA(e){const t=[];wy(e,r=>{t.push([r,r.getSnapshot()]),r.observers=new Set});const n=e.system.getSnapshot?.();e.stop(),e.system._snapshot=n,t.forEach(([r,o])=>{r._processingStatus=0,r._snapshot=o})}function PA(e,...[t]){let[[n,r],o]=w.useState(()=>{const s=Wt(e,t);return[e.config,s]});if(e.config!==n){const s=Wt(e,{...t,snapshot:r.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});o([e.config,s]),r=s}return AA(()=>{r.logic.implementations=e.implementations}),r}function NA(e,t){return e===t}function zd(e,t,n=NA){const r=w.useCallback(i=>{if(!e)return()=>{};const{unsubscribe:c}=e.subscribe(i);return c},[e]),o=w.useCallback(()=>e?.getSnapshot(),[e]);return Bd.useSyncExternalStoreWithSelector(r,o,o,t,n)}function $A(e,...[t]){const n=PA(e,t),r=w.useCallback(()=>n.getSnapshot(),[n]),o=w.useCallback(i=>{const{unsubscribe:c}=n.subscribe(i);return c},[n]),s=Tm.useSyncExternalStore(o,r,r);return w.useEffect(()=>(n.start(),()=>{MA(n)}),[n]),[s,n.send,n]}function jA(e,...[t]){return $A(e,t)}const fo=[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[1,1],[1,-1],[-1,1]];function $i(e,t){return e<8&&e>=0&&t<8&&t>=0}function ds(e){return e===dn?pr:dn}function xy(e){return jl(e)}function LA(e,t,{row:n,col:r}){const o=_c(t);return e[n][r]===o}function ji(e){return!e||xy(e)}function DA(e,t,n){return $i(t,n)&&!ji(e[t][n])?e[t][n]:null}function _c(e){return e===dn?Sh:hx}function FA(e,t,n){return fo.reduce((r,[o,s])=>r+ +!!DA(e,t+o,n+s),0)}function Sy(e,t=!0){const{score:n}=We(e,Ep(Lb({score:mp})));return We(Pn(We(e,_p(r=>r.score===n))),tw(r=>t?zA(r):Pn(r[0])),nw,gl(r=>gp(r)),qi)}function zA(e){return We(C1(0,e.length-1),gl(t=>e[t]))}function Os({board:e,player:t,row:n,col:r,rd:o,cd:s}){let i=0,c=!1;if(!$i(n,r)||!ji(e[n][r]))return 0;let l=n+o,a=r+s;for(;$i(l,a);){if(ji(e[l][a])||e[l][a]===t){c=e[l][a]===t;break}i+=1,l+=o,a+=s}return c&&i>0?i:0}function VA({board:e,player:t,row:n,col:r,rd:o,cd:s}){if(!Os({board:e,player:t,row:n,col:r,rd:o,cd:s}))return!1;const i=fn(t);let c=n+o,l=r+s;for(;$i(c,l)&&!(ji(e[c][l])||e[c][l]===i);)_h(e,{row:c,col:l},i),c+=o,l+=s;return!0}function ps({board:e,row:t,col:n,player:r}){return oo(e,o=>{const s=fn(r);for(let i=0;i<8;i+=1){const[c,l]=fo[i];VA({board:o,player:r,row:t,col:n,rd:c,cd:l})}o[t][n]=s})}function el(e){return oo(e,t=>{for(let n=0;n<8;n+=1)for(let r=0;r<8;r+=1){const o=t[n][r];o&&xy(o)&&(t[n][r]=null)}})}function _y({board:e,player:t}){const n=_c(t);let r=0;const o=oo(e,s=>{for(let i=0;i<8;i+=1)for(let c=0;c<8;c+=1)if(!s[i][c])for(let a=0;a<8;a+=1){const[u,f]=fo[a];if(Os({board:s,player:t,row:i,col:c,rd:u,cd:f})){s[i][c]=n,r+=1;break}}});return{count:r,board:o}}function UA(e){return We(e,Sp,_p(jl),xp)}function Vd(e,t){let n=0;for(let r=0;r<e.length;r++){const o=e[r];for(let s=0;s<o.length;s++)o[s]===t&&(n+=1)}return n}function tl(e,t,n,r){const o=fo.map(([a,u])=>Os({board:e,player:t,row:n,col:r,rd:a,cd:u})),s=n===0||n===7,i=r===0||r===7;let c=0;return n===0&&r===0||n===7&&r===7?c=200:s&&(r===1||r===6)||(n===1||n===6)&&i?c=-80:n===0||r===0||n===7||r===7?c=80:n===1||r===1||n===6||r===6?c=-20:(n===2||r===2||n===5||r===5)&&(c=20),Dp(o)*2+c}function BA(e,t,n,r){return tl(e,t,n,r)+Ec(e,n,r,t)}function En(e,t,n,r){const o=fo.map(([a,u])=>Os({board:e,player:t,row:n,col:r,rd:a,cd:u})),s=WA(e,n,r),i=oo(e,a=>{const u=fn(t);_h(a,{row:n,col:r},u)}),c=HA(i,t,n,r,s);return Dp(o)*2+(c?s:Math.abs(s)*2)-c}function Ud(e,t,n,r){return En(e,t,n,r)+Ec(e,n,r,t)}function Ec(e,t,n,r){return qA(ps({board:e,row:t,col:n,player:r}),r)}function WA(e,t,n){const r=FA(e,t,n),o=t===0||t===7,s=n===0||n===7;return Ry(t,n)?1e8:o&&(n===1||n===6)||(t===1||t===6)&&s?r>0?-300:15e3:Cy(t,n)?1500+r*100:t===1||n===1||t===6||n===6?-200:t===2||n===2||t===5||n===5?50:0}function HA(e,t,n,r,o){const s=fo.map(([l,a])=>Os({board:e,player:ds(t),row:n-l,col:r-a,rd:l,cd:a})),i=Ep([0,...s],mp);return i>0?o>0?i*2+o*20:-o*50+i*5:-1e4}function qA(e,t){let n=0;const r=ds(t),o=fn(r),s=fn(t);let i=0,c=0;for(let l=0;l<e.length;l++){const a=e[l];for(let u=0;u<a.length;u++)Ry(l,u)?a[u]===s?(n+=1e8,i+=1):a[u]===o&&(n+=-4e8,c+=1):Cy(l,u)?a[u]===s?(n+=1e3,i+=1):a[u]===o&&(n+=-6e3,c+=1):a[u]===s?(n+=1,i+=1):a[u]===o&&(n+=-2,c+=1)}return i===0?Number.MIN_SAFE_INTEGER:c===0?Number.MAX_SAFE_INTEGER:n}function Po(e){return(t,n,r,o)=>{const{score:s}=Ey(e,t,n,r,o);return s}}function Ey(e,t,n,r,o,s=!1){const i=ds(n),c=_c(i),{board:l}=_y({board:el(ps({board:t,row:r,col:o,player:n})),player:i});if(Vd(l,i)===0||Vd(l,c)===0)return{score:Number.MAX_SAFE_INTEGER,nextBoard:l};const a=[];for(let f=0;f<l.length;f++){const p=l[f];for(let d=0;d<p.length;d++)p[d]===c&&a.push({score:e(l,n,f,d)+(s?Ec(t,f,d,n):0),row:f,col:d})}if(!Zo(a))return{score:Number.MIN_SAFE_INTEGER,nextBoard:l};const u=Sy(a,!1);return{score:-u.score,nextBoard:el(ps({board:l,row:u.row,col:u.col,player:ds(n)}))}}function qs(e,t){return(n,r,o,s)=>{Yo(t>=1);let i;for(let c=0;c<t;c++){const{score:l,nextBoard:a}=Ey(e,n,r,o,s);n=a,i=l}return i}}function _n(e){return(t,n,r,o)=>e(t,n,r,o)+Ec(t,r,o,n)}const GA={v1:tl,v2:En,v3:Po(En),v3OverviewBoost:_n(qs(_n(En),1)),v3IteratedOverview:_n(qs(_n(En),3)),v3OverviewIterated:_n(qs(_n(En),3)),v3OverviewLatestIterated:_n(qs(En,3)),v3OverviewLatest:_n(Po(En)),v3Overview:Po(Ud),v2Overview:Ud,v1MinMax:Po(tl),v1Overview:Po(BA)},KA="v3OverviewIterated";function Ry(e,t){return(e===0||e===7)&&(t===0||t===7)}function Cy(e,t){return e===0||t===0||e===7||t===7}function YA({board:e,version:t,ai:n}){const r=[],o=GA[t];Yo(o);const s=_c(n);for(let i=0;i<8;i+=1)for(let c=0;c<8;c+=1)if(e[i][c]===s){const l=o(e,n,i,c);r.push({row:i,col:c,score:l})}return Yo(Zo(r)),r}function Oy(e){return Zg(({input:{board:t,player:n}})=>We(Q0(()=>{const r=YA({board:t,ai:n,version:e});return Sy(r)}),rw(300),gl(({row:r,col:o})=>({point:{row:r,col:o},nextBoard:ps({board:t,col:o,row:r,player:n})})),ow))}const JA=e=>We(e,Sp,sv(t=>t),s1([$n,jn]),Jb(xp),t=>({white:t[$n]??0,black:t[jn]??0})),XA=mu({actions:{initialGame:pt({board:()=>jc,users:({event:e})=>(qa(e,"start"),e.users),boardHistory:[]}),resetGame:pt({board:jc,users:di,boardHistory:[]}),placeCandidate:pt({board:({context:e})=>{const{board:t}=We(e.board,el,n=>_y({board:n,player:e.currentPlayer}));return t}}),resetSwitch:pt({switchCount:0}),switchPlayer:pt({currentPlayer:({context:e})=>ds(e.currentPlayer)}),increaseSwitch:pt({switchCount:({context:e})=>e.switchCount+1}),setBoard:pt({board:({event:e})=>(Yo(e.type==="placed"),e.nextBoard),boardHistory:({context:e})=>[...e.boardHistory,e.board]}),revertTurn:pt({board:({context:e})=>{if(e.boardHistory.length<2)return console.warn("Cannot undo: not enough history."),e.board;const t=[...e.boardHistory];return t.pop(),t.pop()||e.board},boardHistory:({context:e})=>{if(e.boardHistory.length<2)return e.boardHistory;const t=[...e.boardHistory];return t.pop(),t.pop(),t},currentPlayer:({context:e})=>e.currentPlayer,switchCount:0})},guards:{isEnded:({context:e})=>e.switchCount>=2,isNoValidMoves:({context:e})=>UA(e.board)===0,isCurrentUserIsAI:({context:e})=>Ih(e.users,e.currentPlayer)===Vn.AI},actors:{aiPlaceChess:Oy(KA)}}).createMachine({context:{board:jc,switchCount:0,users:di,currentPlayer:pr,boardHistory:[]},id:"Reversi",initial:"IDLE",states:{IDLE:{on:{start:{target:"PLACE_CHESS",actions:{type:"initialGame"}}}},GAME_LOOP:{always:{target:"PLACE_CHESS"}},PLACE_CHESS:{entry:{type:"placeCandidate"},on:{placed:{target:"GAME_LOOP",actions:[er(({event:e,context:t})=>(qa(e,"placed"),{type:"placed",point:e.point,player:t.currentPlayer})),{type:"resetSwitch"},{type:"switchPlayer"},{type:"setBoard"}]},undo:{actions:[{type:"revertTurn"},{type:"placeCandidate"},er(()=>({type:"undoOccurred"}))],target:"PLACE_CHESS"},restart:{target:"IDLE",actions:"resetGame"}},always:[{guard:"isEnded",target:"ENDED"},{guard:"isNoValidMoves",target:"GAME_LOOP",actions:[{type:"increaseSwitch"},er(({context:e})=>({type:"noValidMove",player:e.currentPlayer})),{type:"switchPlayer"}]},{guard:"isCurrentUserIsAI",target:"AI_TURN"}]},AI_TURN:{entry:[{type:"increaseSwitch"},{type:"placeCandidate"}],invoke:{src:"aiPlaceChess",input:({context:e})=>({board:e.board,player:e.currentPlayer}),onDone:{actions:[pt({board:({event:e})=>e.output.nextBoard,boardHistory:({context:e})=>[...e.boardHistory,e.board]}),er(({event:e,context:t})=>({type:"placed",point:e.output.point,player:t.currentPlayer})),{type:"resetSwitch"},{type:"switchPlayer"}],target:"GAME_LOOP"}}},ENDED:{on:{restart:{target:"IDLE",actions:"resetGame"}}}}}),ZA={inspect:void 0};function QA({onBeforePlaceChess:e,onGameStart:t,onGameSettled:n,onNoValidMove:r,onPlaced:o,onUndoOccurred:s}){const i=wr(e),c=wr(t),l=wr(n),a=wr(r),u=wr(o),f=wr(s),p=Do(V1),d=w.useMemo(()=>Oy(p),[p]),[m,h,b]=jA(XA.provide({actors:{aiPlaceChess:d}}),{inspect:ZA.inspect}),g=zd(b,({context:S})=>S.users),y=zd(b,({context:S})=>JA(S.board)),v=w.useCallback(({col:S,row:O})=>{if(Ih(m.context.users,m.context.currentPlayer)!==Vn.Human||!LA(m.context.board,m.context.currentPlayer,{row:O,col:S}))return;i.current();const I=ps({board:m.context.board,col:S,row:O,player:m.context.currentPlayer});h({type:"placed",point:{row:O,col:S},nextBoard:I})},[m.context.board,m.context.currentPlayer,m.context.users,i,h]),x=m.matches("ENDED");return w.useEffect(()=>{if(!x){c.current();return}l.current({users:g,score:y})},[x,l,c]),w.useEffect(()=>{const{unsubscribe:S}=b.on("noValidMove",_=>a.current(_)),{unsubscribe:O}=b.on("placed",_=>u.current(_)),{unsubscribe:I}=b.on("undoOccurred",()=>f.current());return()=>{S(),O(),I()}},[b,a,u,f]),{machine:m,send:h,score:y,users:g,placeChess:v}}function eM(){const[e,t]=w.useState(""),[n,r]=w.useState(""),[o,s]=z1([]),[i,c]=w.useState(!1),l=jy(wh),{users:a,score:u,send:f,placeChess:p,machine:d}=QA({onGameStart:()=>{t("")},onGameSettled:({users:_,score:R})=>{r(""),t(nM(R,_)),c(!0);const j=tM(R,_);si(j)&&l(D=>{D[j.value]+=1})},onNoValidMove:({player:_})=>{const R=_===dn?Lh():jh();r(PS({player:R}))},onBeforePlaceChess:()=>{r("")},onPlaced:({player:_,point:{row:R,col:j}})=>{s(D=>{D.push({type:"move",pos:`(${R}, ${j})`,player:_})})},onUndoOccurred:()=>{s(_=>{_.pop(),_.pop(),_.push({type:"undo",message:"Undo last turn"})})}}),m=Do(B1),h=Do(U1),g=Do(W1)==="svg"?Lc:nx,y=w.useCallback(()=>{f({type:"start",users:Ax})},[f]),v=w.useCallback(()=>{f({type:"restart"}),s([])},[f,s]),x=w.useCallback(()=>{f({type:"undo"})},[f]),S=w.useCallback(_=>{f({type:"start",users:{...di,[Cx(_)]:Vn.AI}})},[f]),O=w.useCallback(()=>{f({type:"restart"})},[f]),I=w.useCallback(()=>{c(!1)},[]);return E.jsx(BI,{message:n,users:a,log:o,score:u,onRestart:O,showReplay:i,allowRetract:m,setHuman:y,reboot:v,onUndo:x,onCloseConfirm:I,children:E.jsx(w.Suspense,{fallback:E.jsx(Lc.Root,{children:E.jsx(Lc.Background,{})}),children:E.jsxs(g.Root,{children:[E.jsx(g.Background,{}),E.jsx(g.Chesses,{hint:h,board:d.context.board,onPlaceChess:p}),d.matches("IDLE")&&E.jsx(g.ChooseColor,{onStart:S}),e&&E.jsx(g.Overlay,{children:e})]})})})}function tM(e,t){const n=Ty(e),r=t.B!==t.W;return We(n,Bb(o=>{const s=t[Oh(o)]===Vn.Human;return r?$e(s?"win":"lose"):Bt()}),Vb(()=>r?$e("draw"):Bt()))}function nM(e,t){const n=Ty(e),r=t.B!==t.W;return We(n,dl(o=>{const s=t[Oh(o)]===Vn.Human;if(s&&r)return bS();if(!s&&r)return xS();if(o===pr)return OS();if(o===dn)return kS();Yo(!1)}),zb(()=>ES()))}function Ty(e){return e.black>e.white?$e(pr):e.black<e.white?$e(dn):Bt()}const fM=Object.freeze(Object.defineProperty({__proto__:null,component:eM},Symbol.toStringTag,{value:"Module"}));export{V1 as $,fe as A,pr as B,MT as C,RC as D,Gr as E,PT as F,ac as G,Je as H,Xe as I,CE as J,Yl as K,ke as L,ic as M,at as N,uc as O,io as P,fc as Q,xI as R,QC as S,RI as T,OI as U,CI as V,Ea as W,TI as X,II as Y,U1 as Z,B1 as _,Sh as a,W1 as a0,fM as a1,dn as b,wt as c,vT as d,_C as e,Nm as f,Ye as g,Fe as h,jl as i,XC as j,YC as k,JC as l,Rn as m,VC as n,ru as o,jC as p,xT as q,Yt as r,yg as s,ou as t,co as u,pg as v,$m as w,de as x,hc as y,qf as z};
